<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>YuChen</title><link>https://Dandelionlibra.github.io/</link><description>Recent content on YuChen</description><generator>Hugo -- gohugo.io</generator><language>zh-Hant-TW</language><lastBuildDate>Tue, 22 Jul 2025 05:27:00 +0800</lastBuildDate><atom:link href="https://Dandelionlibra.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>LightRAG è«–æ–‡å°è®€ â€” Simple and Fast Retrieval-Augmented Generation ç­†è¨˜</title><link>https://Dandelionlibra.github.io/post/note/lightrag-paper-review/</link><pubDate>Tue, 22 Jul 2025 05:27:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/lightrag-paper-review/</guid><description>&lt;blockquote>
&lt;p>æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2410.05779" target="_blank" rel="noopener"
>LightRAG: Simple and Fast Retrieval-Augmented Generation&lt;/a>&lt;br>
ä½œè€…ï¼šZirui Guo, Lianghao Xia, Yanhua Yu, Tu Ao, Chao Huang&lt;br>
ç™¼ä½ˆæ–¼ arXivï¼Œ2024å¹´10æœˆ&lt;/p>&lt;/blockquote>
&lt;h1 id="æ‘˜è¦">æ‘˜è¦
&lt;/h1>&lt;p>RAG é€éæ•´åˆå¤–éƒ¨çŸ¥è­˜ä¾†æºï¼Œæå‡ LLMs å›æ‡‰çš„æº–ç¢ºæ€§èˆ‡ä¸Šä¸‹æ–‡ç›¸é—œæ€§ï¼Œä½†é¢è‡¨&lt;strong>éåº¦ä¾è³´å¹³é¢è³‡æ–™è¡¨ç¤º&lt;/strong> (flat data representations)ã€&lt;strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ä¸è¶³&lt;/strong> (inadequate contextual awareness)ã€&lt;strong>å°è‡´ç”Ÿæˆç¢ç‰‡åŒ–ç­”æ¡ˆ&lt;/strong> (fragmented answers)ï¼Œç„¡æ³•æ•æ‰è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ (inter-dependencies)ã€‚&lt;br>
LightRAGï¼Œæå‡ºé€éå°‡åœ–çµæ§‹ (graph structures) å¼•å…¥æ–‡æœ¬çš„ç´¢å¼• (text indexing) å’Œæª¢ç´¢ (retrieval) éç¨‹ä¾†è§£æ±ºä¸Šè¿°å•é¡Œã€‚&lt;/p>
&lt;hr>
&lt;h1 id="å¼•è¨€">å¼•è¨€
&lt;/h1>&lt;h2 id="ç¾æœ‰-rag-ç³»çµ±çš„å±€é™æ€§">ç¾æœ‰ RAG ç³»çµ±çš„å±€é™æ€§
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>&lt;strong>ä¾è³´å¹³é¢è³‡æ–™è¡¨ç¤ºï¼š&lt;/strong> è¨±å¤šæ–¹æ³•ä¾è³´æ–¼å¹³é¢è³‡æ–™è¡¨ç¤ºï¼ˆflat data representationsï¼‰ï¼Œé™åˆ¶äº†å®ƒå€‘æ ¹æ“šå¯¦é«”ä¹‹é–“è¤‡é›œé—œä¿‚ä¾†ç†è§£å’Œæª¢ç´¢è³‡è¨Šçš„èƒ½åŠ›ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç¼ºä¹ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼š&lt;/strong> é€™äº›ç³»çµ±é€šå¸¸ç¼ºä¹ç¶­æŒä¸åŒå¯¦é«”åŠå…¶ç›¸äº’é—œä¿‚ä¹‹é–“é€£è²«æ€§æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œå°è‡´å›æ‡‰å¯èƒ½ç„¡æ³•å®Œå…¨è§£æ±ºç”¨æˆ¶æŸ¥è©¢ã€‚&lt;/p>
&lt;blockquote>
&lt;p>ä¾‹ï¼šè€ƒæ…®ç”¨æˆ¶æå•ã€Œé›»å‹•è»Šçš„èˆˆèµ·å¦‚ä½•å½±éŸ¿åŸå¸‚ç©ºæ°£å“è³ªå’Œå¤§çœ¾é‹è¼¸åŸºç¤è¨­æ–½ï¼Ÿã€ç¾æœ‰ RAG æ–¹æ³•å¯èƒ½æª¢ç´¢åˆ°é—œæ–¼é›»å‹•è»Šã€ç©ºæ°£æ±¡æŸ“å’Œå…¬å…±äº¤é€šæŒ‘æˆ°çš„ç¨ç«‹æ–‡æª”ï¼Œä½†é›£ä»¥å°‡é€™äº›ä¿¡æ¯ç¶œåˆç‚ºä¸€å€‹é€£è²«çš„å›æ‡‰ã€‚å®ƒå€‘å¯èƒ½ç„¡æ³•è§£é‡‹é›»å‹•è»Šçš„æ™®åŠå¦‚ä½•æ”¹å–„ç©ºæ°£å“è³ªï¼Œé€²è€Œå¯èƒ½å½±éŸ¿å…¬å…±äº¤é€šè¦åŠƒï¼Œç”¨æˆ¶å¯èƒ½æ”¶åˆ°ä¸€å€‹ç¢ç‰‡åŒ–çš„ç­”æ¡ˆï¼Œæœªèƒ½å……åˆ†æ•æ‰é€™äº›ä¸»é¡Œä¹‹é–“è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ã€‚&lt;/p>&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;h2 id="lightrag-æ¨¡å‹æ¦‚è¿°">LightRAG æ¨¡å‹æ¦‚è¿°
&lt;/h2>&lt;p>å¢å¼·äº†ç³»çµ±æ•æ‰å¯¦é«”ä¹‹é–“è¤‡é›œç›¸äº’ä¾è³´é—œä¿‚çš„èƒ½åŠ›ï¼Œå¾è€Œç”¢ç”Ÿæ›´é€£è²«å’Œä¸Šä¸‹æ–‡æ›´è±å¯Œçš„å›æ‡‰ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>é«˜æ•ˆé›™å±¤æª¢ç´¢ç­–ç•¥ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ä½å±¤æ¬¡æª¢ç´¢ï¼ˆlow-level retrievalï¼‰ï¼š å´é‡æ–¼é—œæ–¼ç‰¹å®šå¯¦é«”åŠå…¶é—œä¿‚çš„ç²¾ç¢ºè³‡è¨Šã€‚&lt;/li>
&lt;li>é«˜å±¤æ¬¡æª¢ç´¢ï¼ˆhigh-level retrievalï¼‰ï¼š æ¶µè“‹æ›´å»£æ³›çš„ä¸»é¡Œå’Œæ¦‚å¿µã€‚&lt;/li>
&lt;li>å„ªå‹¢ï¼š é€éçµåˆè©³ç´°å’Œæ¦‚å¿µæ€§æª¢ç´¢ï¼ŒLightRAG æœ‰æ•ˆé©æ‡‰å¤šæ¨£åŒ–çš„æŸ¥è©¢ç¯„åœï¼Œç¢ºä¿ç”¨æˆ¶æ”¶åˆ°ç¬¦åˆå…¶ç‰¹å®šéœ€æ±‚çš„ç›¸é—œä¸”å…¨é¢çš„å›æ‡‰ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åœ–çµæ§‹èˆ‡å‘é‡è¡¨ç¤ºçš„æ•´åˆï¼š&lt;/strong> é€éå°‡åœ–çµæ§‹èˆ‡å‘é‡è¡¨ç¤ºæ•´åˆåœ¨ä¸€èµ·ï¼Œæœ¬ LightRAG ä¿ƒé€²äº†ç›¸é—œå¯¦é«”å’Œé—œä¿‚çš„é«˜æ•ˆæª¢ç´¢ï¼ŒåŒæ™‚é€éå¾æ‰€æ§‹å»ºçš„çŸ¥è­˜åœ–ä¸­ç²å–ç›¸é—œçµæ§‹ä¿¡æ¯ï¼Œå¢å¼·äº†çµæœçš„å…¨é¢æ€§ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="æœ¬ç ”ç©¶åœ¨-rag-ç³»çµ±ä¸­çš„é—œæ³¨é»">æœ¬ç ”ç©¶åœ¨ RAG ç³»çµ±ä¸­çš„é—œæ³¨é»
&lt;/h2>&lt;!-- raw HTML omitted -->
&lt;ul>
&lt;li>
&lt;p>&lt;strong>å…¨é¢ä¿¡æ¯æª¢ç´¢&lt;/strong> (Comprehensive Information Retrieval)ï¼š ç´¢å¼•åŠŸèƒ½ Ï•(â‹…) å¿…é ˆå–„æ–¼æå–å…¨å±€ä¿¡æ¯ï¼Œé€™å°æ–¼å¢å¼·æ¨¡å‹æœ‰æ•ˆå›ç­”æŸ¥è©¢çš„èƒ½åŠ›è‡³é—œé‡è¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>é«˜æ•ˆä¸”ä½æˆæœ¬æª¢ç´¢&lt;/strong> (Efficient and Low-Cost Retrieval)ï¼š ç´¢å¼•åŒ–çš„è³‡æ–™çµæ§‹ ğ’Ÿ^ å¿…é ˆèƒ½å¤ å¯¦ç¾å¿«é€Ÿä¸”å…·æˆæœ¬æ•ˆç›Šçš„æª¢ç´¢ï¼Œä»¥æœ‰æ•ˆè™•ç†é«˜å®¹é‡çš„æŸ¥è©¢ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¿«é€Ÿé©æ‡‰æ•¸æ“šè®ŠåŒ–&lt;/strong> (Fast Adaptation to Data Changes)ï¼š èƒ½å¤ è¿…é€Ÿæœ‰æ•ˆåœ°èª¿æ•´æ•¸æ“šçµæ§‹ä»¥æ•´åˆä¾†è‡ªå¤–éƒ¨çŸ¥è­˜åº«çš„æ–°ä¿¡æ¯ï¼Œé€™å°æ–¼ç¢ºä¿ç³»çµ±åœ¨ä¸æ–·è®ŠåŒ–çš„ä¿¡æ¯ç’°å¢ƒä¸­ä¿æŒæ›´æ–°å’Œç›¸é—œæ€§è‡³é—œé‡è¦ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h1 id="å…§æ–‡">å…§æ–‡
&lt;/h1>&lt;h2 id="lightrag-æ¡†æ¶çš„æ•´é«”æ¶æ§‹">LightRAG æ¡†æ¶çš„æ•´é«”æ¶æ§‹
&lt;/h2>&lt;p>&lt;img src="https://raw.githubusercontent.com/HKUDS/LightRAG/refs/heads/main/README.assets/b2aaf634151b4706892693ffb43d9093.png"
loading="lazy"
alt="LightRAG æ¡†æ¶ç¸½è¦½"
>&lt;br>
&lt;em>åœ– 1. LightRAG æ¡†æ¶ç¸½è¦½ï¼ˆå–è‡ªåŸè«–æ–‡ï¼‰&lt;/em>&lt;/p>
&lt;p>æ¶æ§‹å¦‚åœ– 1 æ‰€ç¤ºã€‚&lt;/p>
&lt;p>æµç¨‹å¾&lt;strong>åŸå§‹æ–‡æœ¬å¡Š&lt;/strong>é–‹å§‹ï¼Œé€™äº›æ–‡æœ¬å¡Šé¦–å…ˆé€é&lt;strong>åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•&lt;/strong>ï¼ˆGraph-based Text Indexingï¼‰éšæ®µé€²è¡Œè™•ç†ï¼Œéç¨‹åŒ…å«å¹¾å€‹é—œéµå­çµ„ä»¶ï¼š&lt;strong>å¯¦é«”èˆ‡é—œä¿‚æå–&lt;/strong>ï¼ˆEntity &amp;amp; Rel Extractionï¼‰ã€&lt;strong>LLM å‰–æ&lt;/strong>ï¼ˆLLM Profilingï¼‰å’Œ&lt;strong>å»é‡&lt;/strong>ï¼ˆDeduplicationï¼‰ï¼Œæœ€å¾Œçš„è¼¸å‡ºæ˜¯ä¸€å€‹ç”¨æ–¼æª¢ç´¢çš„&lt;strong>ç´¢å¼•åœ–&lt;/strong>ï¼ˆIndex Graphï¼‰ã€‚&lt;br>
æ¥è‘—ï¼ŒQuery LLM æ¥æ”¶è¼¸å…¥æŸ¥è©¢ï¼Œä¸¦å¾ä¸­ç”Ÿæˆ&lt;strong>ä½å±¤ç´šé—œéµå­—&lt;/strong>ï¼ˆLow-level Keysï¼ŒåŒ…æ‹¬å¯¦é«”å’Œé—œä¿‚ï¼‰å’Œ&lt;strong>é«˜å±¤ç´šé—œéµå­—&lt;/strong>ï¼ˆHigh-level Keysï¼ŒåŒ…æ‹¬èªå¢ƒå’ŒåŸå§‹æ–‡æœ¬å¡Šï¼‰ã€‚é€™äº›é—œéµå­—éš¨å¾Œè¢«é€å…¥&lt;strong>é›™å±¤ç´šæª¢ç´¢ç¯„å¼&lt;/strong>ï¼ˆDual-level Retrieval Paradigmï¼‰ï¼Œæ­¤ç¯„å¼èˆ‡ã€Œç´¢å¼•åœ–ã€å’Œã€ŒåŸå§‹æ–‡æœ¬å¡Šã€äº’å‹•ï¼Œä»¥æª¢ç´¢ç›¸é—œè³‡è¨Šã€‚æœ€çµ‚ï¼Œæª¢ç´¢åˆ°çš„è³‡è¨Šè¢«å‚³å› Query LLM é€²è¡Œæª¢ç´¢å¢å¼·çš„ç­”æ¡ˆç”Ÿæˆï¼ˆRetrieval-Augmented Answer Generationï¼‰ã€‚ Â 
åœ–ä¸­å±•ç¤ºäº†ä»¥ã€Œç´¢å¼•åœ–ã€ä½œç‚ºæ ¸å¿ƒå„²å­˜åº«ï¼Œé€™å¼µåœ–ä¸åƒ…ç”¨ä¾†æ•´ç†æ–°è³‡è¨Šï¼ˆç´¢å¼•ï¼‰ï¼Œä¹Ÿç”¨ä¾†å°‹æ‰¾è³‡è¨Šï¼ˆæª¢ç´¢ï¼‰ï¼Œé€™ä»£è¡¨ç³»çµ±ä¸å†åªæ˜¯å„²å­˜ä¸€å †é›¶æ•£çš„æ–‡å­—ç‰‡æ®µï¼Œè€Œæ˜¯å°‡çŸ¥è­˜çµ„ç¹”æˆä¸€å€‹æœ‰çµæ§‹çš„ç¶²è·¯ï¼Œèƒ½æ›´æ™ºæ…§åœ°æ‰¾å‡ºäº‹ç‰©ä¹‹é–“çš„é—œè¯ã€‚&lt;br>
æ­¤å¤–ï¼Œè™•ç†æŸ¥è©¢çš„ LLM åœ¨ LightRAG å¤šæ¬¡å‡ºç¾ï¼Œå®ƒä¸åªè² è²¬ç”Ÿæˆæœ€çµ‚ç­”æ¡ˆï¼Œé‚„æœƒåƒèˆ‡ç†è§£å•é¡Œã€å¼•å°ç³»çµ±å»å°‹æ‰¾ç›¸é—œè³‡è¨Šï¼Œä¸¦å°‡æ‰¾åˆ°çš„è³‡æ–™æ•´åˆèµ·ä¾†ã€‚&lt;/p>
&lt;h2 id="åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•">åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•
&lt;/h2>&lt;p>LightRAG é€éå°‡æ–‡ä»¶åˆ†å‰²æˆæ›´å°ã€æ›´æ˜“æ–¼ç®¡ç†çš„ç‰‡æ®µä¾†å¢å¼·æª¢ç´¢ç³»çµ±ã€‚é€™ç¨®ç­–ç•¥å…è¨±å¿«é€Ÿè­˜åˆ¥å’Œå­˜å–ç›¸é—œè³‡è¨Šï¼Œè€Œç„¡éœ€åˆ†ææ•´å€‹æ–‡ä»¶ ã€‚éš¨å¾Œï¼Œç³»çµ±åˆ©ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¾†è­˜åˆ¥å’Œæå–å„ç¨®å¯¦é«”ï¼ˆä¾‹å¦‚ï¼Œåç¨±ã€æ—¥æœŸã€ä½ç½®å’Œäº‹ä»¶ï¼‰ä»¥åŠå®ƒå€‘ä¹‹é–“çš„é—œä¿‚ ã€‚é€éé€™å€‹éç¨‹æ”¶é›†åˆ°çš„è³‡è¨Šå°‡ç”¨æ–¼å‰µå»ºä¸€å€‹å…¨é¢çš„çŸ¥è­˜åœ–è­œï¼Œçªé¡¯æ•´å€‹æ–‡ä»¶é›†åˆä¸­çš„é€£çµå’Œè¦‹è§£ã€‚&lt;/p>
&lt;p>åœ–å½¢ç”Ÿæˆæ¨¡çµ„æ­£å¼è¡¨ç¤ºç‚º ğ’Ÿ^=(ğ’±^,â„°^)=Dedupeâˆ˜Profâ€‹(ğ’±,â„°),ğ’±,â„°=âˆªğ’Ÿiâˆˆğ’ŸRecogâ€‹(ğ’Ÿi)&lt;/p>
&lt;hr>
&lt;h1 id="å¯¦é©—">å¯¦é©—
&lt;/h1>&lt;hr>
&lt;hr>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://ar5iv.labs.arxiv.org/html/2410.05779" target="_blank" rel="noopener"
>LightRAG: Simple and Fast Retrieval-Augmented Generation-ar5iv å¯è¦–åŒ–ç‰ˆæœ¬&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Re2G è«–æ–‡å°è®€ â€” Retrieve, Rerank, Generate æ¡†æ¶è§£æèˆ‡æ‡‰ç”¨</title><link>https://Dandelionlibra.github.io/post/note/re2g-paper-review/</link><pubDate>Tue, 22 Jul 2025 01:31:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/re2g-paper-review/</guid><description>&lt;blockquote>
&lt;p>æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2207.06300" target="_blank" rel="noopener"
>Re2G: Retrieve, Rerank, Generate&lt;/a>&lt;br>
ä½œè€…ï¼šMichael Glass, Gaetano Rossiello, Md Faisal Mahbub Chowdhury, Ankita Rajaram Naik, Pengshan Cai, Alfio Gliozzo&lt;br>
ç™¼ä½ˆæ–¼ arXivï¼Œ2022å¹´7æœˆ&lt;/p>&lt;/blockquote>
&lt;h1 id="æ‘˜è¦">æ‘˜è¦
&lt;/h1>&lt;p>å¤§å‹ Transformer æ¨¡å‹åœ¨è™•ç†è¤‡é›œä»»å‹™æ™‚é›–ç„¶è¡¨ç¾å¼·å¤§ï¼Œä½†åœ¨æ‡‰å°çŸ¥è­˜å¯†é›†å‹ä»»å‹™æ™‚ï¼Œä»æœƒé¢è‡¨é¡¯è‘—çš„è¨ˆç®—æˆæœ¬èˆ‡è¨˜æ†¶é«”é™åˆ¶ã€‚æ­¤ç ”ç©¶æŒ‡å‡ºï¼Œéåƒæ•¸è¨˜æ†¶å’Œæª¢ç´¢æŠ€è¡“èƒ½æœ‰æ•ˆè§£æ±ºé€™äº›æŒ‘æˆ°ã€‚&lt;br>
åŸºæ–¼æ­¤ï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G æ¨¡å‹æ‡‰é‹è€Œç”Ÿï¼Œå®ƒå‰µæ–°åœ°æ•´åˆäº†ç¥ç¶“åˆå§‹æª¢ç´¢èˆ‡é‡æ–°æ’åºæ©Ÿåˆ¶ï¼Œä¸¦ä»¥ BART æ¡†æ¶ç‚ºåŸºç¤é€²è¡Œåºåˆ—åˆ°åºåˆ—çš„ç”Ÿæˆã€‚Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G çš„æ ¸å¿ƒå‰µæ–°ä¹‹è™•åœ¨æ–¼å…¶ç¨ç‰¹çš„é‡æ–°æ’åºåŠŸèƒ½ã€‚é€™ä½¿å¾—æ¨¡å‹èƒ½å¤ æ™ºæ…§åœ°æ•´åˆä¾†è‡ªä¸åŒæª¢ç´¢æºçš„çµæœï¼Œå³ä½¿é€™äº›æºçš„åˆ†æ•¸ä¸å¯æ¯”è¼ƒï¼Œä¾‹å¦‚åŒæ™‚èåˆå‚³çµ±çš„ BM25 ç®—æ³•èˆ‡ç¥ç¶“æª¢ç´¢ï¼ˆå¦‚å¯†é›†æ®µè½æª¢ç´¢ï¼ŒDPRï¼‰ã€‚é€éå¼•å…¥é‡æ’åº (Reranker) çµ„ä»¶ï¼Œæ¨¡å‹å¾—ä»¥çµ±ä¸€è™•ç†ä¸¦æœ€å¤§åŒ–åˆå§‹å€™é¸æ± çš„è³ªé‡ã€‚æ­¤å¤–ï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G é‚„å¼•å…¥äº†&lt;strong>ç·šä¸ŠçŸ¥è­˜è’¸é¤¾æ–¹æ³•&lt;/strong>ï¼Œå¯¦ç¾äº†æ•´å€‹æª¢ç´¢èˆ‡ç”Ÿæˆç®¡é“çš„ç«¯åˆ°ç«¯è¨“ç·´ã€‚é€™ç¨®è¨“ç·´æ–¹å¼å°‡ç³»çµ±çš„æ‰€æœ‰çµ„ä»¶ä¸²æ¥æˆä¸€å€‹æ•´é«”æ¨¡å‹ï¼Œç›´æ¥ä»¥æœ€çµ‚ç›®æ¨™ä½œç‚ºæå¤±å‡½æ•¸é€²è¡Œå„ªåŒ–ï¼Œå¾è€Œç„¡éœ€åˆ†éšæ®µè¨“ç·´ï¼Œæœ‰æ•ˆæå‡äº†ç³»çµ±çš„æ•´é«”æ€§èƒ½ã€‚&lt;/p>
&lt;p>â€» åœ¨æ©Ÿå™¨å­¸ç¿’é ˜åŸŸï¼Œã€Œç«¯åˆ°ç«¯è¨“ç·´ã€ï¼ˆEnd-to-End Trainingï¼‰æŒ‡çš„æ˜¯å°‡æ•´å€‹ç³»çµ±çš„æ‰€æœ‰çµ„ä»¶ï¼ˆå¦‚æª¢ç´¢ã€é‡æ’åºã€ç”Ÿæˆï¼‰ä¸²æ¥ç‚ºä¸€å€‹æ•´é«”æ¨¡å‹ï¼Œç›´æ¥ä»¥æœ€çµ‚ç›®æ¨™ï¼ˆå¦‚ç”Ÿæˆæ­£ç¢ºç­”æ¡ˆï¼‰ä½œç‚ºæå¤±å‡½æ•¸ï¼Œåå‘å‚³æ’­å„ªåŒ–æ‰€æœ‰åƒæ•¸ã€‚é€™ç¨®æ–¹å¼ä¸éœ€åˆ†éšæ®µåˆ†åˆ¥è¨“ç·´å„æ¨¡çµ„ï¼Œè€Œæ˜¯è®“æ¨¡å‹è‡ªå‹•å”èª¿å„éƒ¨åˆ†ï¼Œæœ€å¤§åŒ–æ•´é«”æ€§èƒ½ã€‚&lt;/p>
&lt;hr>
&lt;h1 id="åŸºæœ¬æ¶æ§‹ä»‹ç´¹">åŸºæœ¬æ¶æ§‹ä»‹ç´¹
&lt;/h1>&lt;p>RAGï¼ˆRetrieval-Augmented Generationï¼‰èˆ‡ Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->Gï¼ˆRetrieve, Rerank, Generateï¼‰æ¶æ§‹æ¨¡çµ„å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š&lt;br>
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x1.png"
loading="lazy"
alt="RAG åŸºæœ¬æ¶æ§‹åœ–"
>&lt;br>
åœ– 1. RAG åŸºæœ¬æ¶æ§‹åœ–ï¼šRAG åŸºç¤æµç¨‹åŒ…å«æª¢ç´¢å™¨èˆ‡ç”Ÿæˆå™¨ï¼Œå°‡æŸ¥è©¢èˆ‡æª¢ç´¢åˆ°çš„å¤–éƒ¨çŸ¥è­˜ç‰‡æ®µä¸€åŒè¼¸å…¥ç”Ÿæˆæ¨¡å‹ï¼Œç”¢ç”Ÿæœ€çµ‚å›ç­”ã€‚&lt;/p>
&lt;p>&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x2.png"
loading="lazy"
alt="RAG é‡æ’åºæ¶æ§‹åœ–"
>&lt;br>
åœ– 2. Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G (Retrieve, Rerank, Generate) æ¶æ§‹åœ–ï¼šé€²éšç‰ˆæœ¬åœ¨æª¢ç´¢å¾ŒåŠ å…¥é‡æ’åºï¼ˆRerankï¼‰æ¨¡çµ„ï¼Œå°å€™é¸ç‰‡æ®µé€²è¡Œæ’åºå„ªåŒ–ï¼Œæå‡æª¢ç´¢çµæœå“è³ªèˆ‡ç”Ÿæˆç›¸é—œæ€§ã€‚&lt;/p>
&lt;p>&lt;strong>RAG æ¶æ§‹&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>æª¢ç´¢å™¨ï¼ˆRetrieverï¼‰ï¼šå¾èªæ–™åº«ä¸­æª¢ç´¢ç›¸é—œæ®µè½&lt;/li>
&lt;li>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼šåŸºæ–¼æª¢ç´¢çµæœç”Ÿæˆå›ç­”&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G æ¶æ§‹&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>åˆå§‹æª¢ç´¢å±¤ï¼ˆInitial Retrieval Layerï¼‰ï¼šç¥ç¶“æª¢ç´¢ + é—œéµå­—æª¢ç´¢&lt;/li>
&lt;li>é‡æ’åºå±¤ï¼ˆReranker Layerï¼‰ï¼šèåˆå¤šç¨®æª¢ç´¢çµæœä¸¦é‡æ’åº&lt;/li>
&lt;li>ç”Ÿæˆå±¤ï¼ˆGeneration Layerï¼‰ï¼šåŸºæ–¼é‡æ’åºçµæœç”Ÿæˆæœ€çµ‚è¼¸å‡º&lt;/li>
&lt;/ol>
&lt;p>é€™ç¨®åˆ†å±¤è¨­è¨ˆä½¿ Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G èƒ½éˆæ´»çµåˆå¤šç¨®æª¢ç´¢æŠ€è¡“ï¼Œä¸¦é€éé‡æ’åºæå‡å€™é¸è³ªé‡ï¼Œæœ€çµ‚å¢å¼·ç”Ÿæˆæ•ˆæœã€‚&lt;/p>
&lt;h1 id="re2g-æ ¸å¿ƒæ¦‚å¿µèˆ‡å‰µæ–°çªç ´">Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G æ ¸å¿ƒæ¦‚å¿µèˆ‡å‰µæ–°çªç ´
&lt;/h1>&lt;p>Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G çš„å…©å¤§å‰µæ–°çªç ´ï¼Œåˆ†åˆ¥é«”ç¾åœ¨å¤šæºæª¢ç´¢çµæœçš„èåˆèƒ½åŠ›èˆ‡å‰µæ–°çš„ç«¯åˆ°ç«¯è¨“ç·´ç­–ç•¥ã€‚
é¦–å…ˆï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G çš„é‡æ’åºæ–¹æ³•æ‰“ç ´äº†å‚³çµ±æª¢ç´¢åˆ†æ•¸ä¸å¯æ¯”çš„é™åˆ¶ï¼Œèƒ½å¤ æœ‰æ•ˆèåˆä¾†è‡ªä¸åŒæª¢ç´¢æ©Ÿåˆ¶çš„å€™é¸çµæœã€‚å…¶æ¬¡ï¼Œä½œè€…æå‡ºä¸€ç¨®æ”¹è‰¯çš„çŸ¥è­˜è’¸é¤¾ç­–ç•¥ï¼Œä½¿å¾—æ•´å€‹ç³»çµ±èƒ½åƒ…ä¾è³´ç›®æ¨™åºåˆ—è¼¸å‡ºé€²è¡Œè¨“ç·´ï¼Œå¯¦ç¾å¾åˆå§‹æª¢ç´¢ã€é‡æ’åºåˆ°åºåˆ—ç”Ÿæˆç«¯åˆ°ç«¯æ”¹å–„ã€‚é€™é …è¨­è¨ˆè§£æ±ºäº†ç•¶é‡æ’åºå™¨ä¸»å°é‹ç®—å¾Œï¼ŒæŸ¥è©¢ç·¨ç¢¼å™¨å°‡ç„¡æ³•å¾ç”Ÿæˆæå¤±ä¸­ç²å¾—æœ‰æ•ˆæ¢¯åº¦çš„å•é¡Œã€‚é€éåœ¨ç·šçŸ¥è­˜è’¸é¤¾ï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G è®“é‡æ’åºå™¨æˆç‚ºæŸ¥è©¢ç·¨ç¢¼å™¨çš„æŒ‡å°ï¼Œé‡æ–°å»ºç«‹äº†æ¢¯åº¦æµé€šè·¯ï¼Œæ·±åŒ–å¤šæ¨¡çµ„ç³»çµ±é–“çš„äº’å‹•è¨“ç·´ã€‚&lt;/p>
&lt;p>ä¸»è¦æµç¨‹æ˜¯å¾å¤§å‹èªæ–™åº«ä¸­&lt;strong>æª¢ç´¢ç›¸é—œæ®µè½&lt;/strong>ï¼Œéš¨å¾Œå°é€™äº›åˆæ­¥æª¢ç´¢åˆ°çš„æ®µè½&lt;strong>é€²è¡Œç²¾ç¢ºçš„é‡æ’åº&lt;/strong>ï¼Œæœ€å¾ŒåŸºæ–¼é‡æ’åºå¾Œçš„çµæœ&lt;strong>ç”Ÿæˆæœ€çµ‚çš„è¼¸å‡ºåºåˆ—&lt;/strong>ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æª¢ç´¢ç›¸é—œæ®µè½&lt;/strong>&lt;br>
å¾å¤§å‹èªæ–™åº«ä¸­ï¼Œé€éé«˜æ•ˆçš„åˆå§‹æª¢ç´¢æ¨¡å‹ï¼ˆå¦‚ DPR æˆ– BM25ï¼‰ç¯©é¸å‡ºèˆ‡æŸ¥è©¢ç›¸é—œçš„å€™é¸æ®µè½ã€‚&lt;br>
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x4.png"
loading="lazy"
alt="é›™ç·¨ç¢¼å™¨è¡¨ç¤ºæ¨¡å‹ â€” åˆå§‹æª¢ç´¢å™¨ï¼ˆDPRï¼‰"
>&lt;br>
&lt;em>åœ– 3ï¼šè¡¨ç¤ºæ¨¡å‹ï¼ˆBi-Encoderï¼‰é‹ä½œæ–¹å¼ï¼šæŸ¥è©¢ï¼ˆQueryï¼‰èˆ‡æ®µè½ï¼ˆPassageï¼‰åˆ†åˆ¥é€éç¨ç«‹çš„ BERT ç·¨ç¢¼å™¨è½‰æ›ç‚ºå‘é‡è¡¨ç¤ºï¼ˆr&lt;!-- raw HTML omitted -->q&lt;!-- raw HTML omitted --> èˆ‡ r&lt;!-- raw HTML omitted -->p&lt;!-- raw HTML omitted -->ï¼‰ï¼Œä¹‹å¾Œé€é å‘é‡å…§ç©ï¼ˆInner Productï¼‰ è¨ˆç®—ç›¸ä¼¼åº¦ï¼Œä½œç‚ºæª¢ç´¢æ’åºçš„ä¾æ“šã€‚&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç²¾ç¢ºçš„é‡æ’åº&lt;/strong>&lt;br>
å°åˆæ­¥æª¢ç´¢åˆ°çš„å€™é¸æ®µè½ï¼Œä½¿ç”¨äº’å‹•æ¨¡å‹ï¼ˆRerankerï¼‰é€²è¡Œç›¸é—œæ€§é‡æ’åºã€‚&lt;br>
æ­¤éšæ®µçš„é—œéµå‰µæ–°åœ¨æ–¼èƒ½å¤ &lt;strong>æ•´åˆå¤šç¨®ä¾†æºçš„æª¢ç´¢çµæœ&lt;/strong>ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>BM25&lt;/strong>ï¼šåŸºæ–¼é—œéµå­—çš„å‚³çµ±æª¢ç´¢ï¼Œåˆ†æ•¸åæ˜ å­—è©åŒ¹é…é »ç‡&lt;/li>
&lt;li>&lt;strong>DPR&lt;/strong>ï¼šåŸºæ–¼èªæ„å‘é‡çš„ç¥ç¶“æª¢ç´¢ï¼Œåˆ†æ•¸ä¾†è‡ªå…§ç©ç›¸ä¼¼åº¦&lt;/li>
&lt;/ul>
&lt;p>ç„¶è€Œï¼Œé€™äº›æª¢ç´¢åˆ†æ•¸æ€§è³ªä¸åŒï¼Œç›´æ¥æ¯”å°æœƒç”¢ç”Ÿåèª¤ã€‚&lt;br>
ç‚ºæ­¤ï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G å¼•å…¥ &lt;strong>ç¨ç«‹çš„ Reranker æ¨¡çµ„&lt;/strong>ï¼Œå°‡ä¸åŒæª¢ç´¢ä¾†æºçš„å€™é¸é€²è¡Œ&lt;strong>çµ±ä¸€è©•åˆ†&lt;/strong>ï¼Œé‡æ’åºå¾Œç”¢å‡ºå¯æ¯”è¼ƒçš„çµæœã€‚&lt;br>
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x3.png"
loading="lazy"
alt="äº’å‹•æ¨¡å‹ â€” é‡æ’åºå™¨ï¼ˆRerankerï¼‰"
>&lt;br>
&lt;em>åœ– 4ï¼šäº’å‹•æ¨¡å‹ï¼ˆInteraction Modelï¼‰é‹ä½œæ–¹å¼ â€” æŸ¥è©¢èˆ‡æ®µè½è¯åˆè¼¸å…¥ BERTï¼Œé€éäº¤å‰æ³¨æ„åŠ›æ•æ‰èªç¾©é—œè¯ï¼Œæœ€çµ‚ç”± [CLS] é æ¸¬ç›¸é—œæ€§åˆ†æ•¸ã€‚&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åŸºæ–¼é‡æ’åºçµæœçš„ç”Ÿæˆ&lt;/strong>&lt;br>
æœ€çµ‚ï¼Œå°‡æ’åºé å‰çš„ Top-K æ®µè½ï¼Œèˆ‡æŸ¥è©¢å…±åŒè¼¸å…¥åˆ°åºåˆ—ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ BARTï¼‰ä¸­ï¼Œç”Ÿæˆç›®æ¨™å›ç­”æˆ–å›æ‡‰ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="re2g-æ¨¡å‹æ¶æ§‹è©³è§£">Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G æ¨¡å‹æ¶æ§‹è©³è§£
&lt;/h2>&lt;h3 id="åˆå§‹æª¢ç´¢å±¤dprèˆ‡bm25çš„å”åŒä½œç”¨">åˆå§‹æª¢ç´¢å±¤ï¼šDPRèˆ‡BM25çš„å”åŒä½œç”¨
&lt;/h3>&lt;p>ç›®çš„æ˜¯å»ºç«‹ä¸€å€‹åŒ…å«æ½›åœ¨ç›¸é—œæ®µè½çš„å€™é¸æ± ï¼Œåœ¨æ­¤éšæ®µçµåˆäº†å…©ç¨®äº’è£œçš„æª¢ç´¢æ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>DPR (Dense Passage Retrieval) å¯†é›†æ®µè½æª¢ç´¢ï¼šDPR æ¡ç”¨é›™ç·¨ç¢¼å™¨è¡¨ç¤ºæ¨¡å‹ï¼Œå…¶ä¸­æŸ¥è©¢ç·¨ç¢¼å™¨å’Œæ®µè½ç·¨ç¢¼å™¨ï¼ˆå…©è€…å‡åŸºæ–¼ BERTï¼‰ç¨ç«‹ç”ŸæˆæŸ¥è©¢å’Œæ®µè½çš„è¡¨ç¤ºå‘é‡ã€‚é€™ç¨®ç¨ç«‹ç·¨ç¢¼çš„è¨­è¨ˆå…è¨±åœ¨æª¢ç´¢å‰é å…ˆè¨ˆç®—èªæ–™åº«ä¸­æ‰€æœ‰æ®µè½çš„å‘é‡ï¼Œä¸¦ä½¿ç”¨è¿‘ä¼¼æœ€è¿‘é„° (ANN) ç´¢å¼•ã€‚åœ¨æ¨æ–·æ™‚ï¼Œè¼¸å…¥æŸ¥è©¢æœƒä½¿ç”¨ DPR æŸ¥è©¢ç·¨ç¢¼å™¨é€²è¡Œç·¨ç¢¼ï¼Œä¸¦å¾ HNSW ç´¢å¼•ä¸­å¿«é€Ÿæª¢ç´¢å‡ºæœ€ç›¸é—œçš„ Top-12 æ®µè½ã€‚ Â &lt;/p>
&lt;/li>
&lt;li>
&lt;p>BM25ï¼šä½œç‚ºä¸€ç¨®å‚³çµ±çš„åŸºæ–¼é—œéµå­—çš„æª¢ç´¢æ–¹æ³•ï¼ŒBM25 æ“…é•·æ•æ‰ç²¾ç¢ºçš„è©å½™åŒ¹é…ã€‚åœ¨æ¨æ–·æ™‚ï¼ŒæŸ¥è©¢ä¹Ÿæœƒå‚³éçµ¦ BM25 æœç´¢ï¼ˆå…·é«”ä½¿ç”¨ Anserini åº«ï¼‰ï¼Œä¸¦æ”¶é›† Top-12 çš„ BM25 çµæœã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G åœ¨æ­¤å±¤çµåˆä½¿ç”¨äº† DPR (ä¸€ç¨®ç¥ç¶“ã€Œè¡¨ç¤ºæ¨¡å‹ã€) å’Œ BM25 (ä¸€ç¨®è©å½™åŒ¹é…æ–¹æ³•)ã€‚é€™å…©ç¨®æ–¹æ³•äº’è£œï¼Œå…±åŒç”¢ç”Ÿä¸€å€‹åˆæ­¥çš„å€™é¸æ®µè½æ± ï¼Œé€™å…©ç¨®æ–¹æ³•æª¢ç´¢åˆ°çš„æ®µè½éš¨å¾Œæœƒè¢«åˆä½µï¼Œç‚ºå¾ŒçºŒçš„é‡æ’åºéšæ®µæä¾›ä¸€å€‹æ›´å…¨é¢ä¸”å¤šæ¨£åŒ–çš„å€™é¸é›†ã€‚&lt;/p>
&lt;blockquote>
&lt;p>èˆ‰ä¾‹ï¼š&lt;br>
&lt;strong>DPR çš„æª¢ç´¢çµæœï¼š&lt;/strong>
DPR æ¨¡å‹æœƒå°‡æ–‡æª”åº«ä¸­çš„æ‰€æœ‰æ®µè½é å…ˆç·¨ç¢¼æˆå‘é‡ï¼Œä¸¦å„²å­˜åœ¨ä¸€å€‹å‘é‡è³‡æ–™åº«ä¸­ï¼Œç•¶æœ‰ä¸€å€‹æŸ¥è©¢é€²ä¾†æ™‚ï¼ŒDPR æœƒå°‡é€™å€‹æŸ¥è©¢ä¹Ÿç·¨ç¢¼æˆä¸€å€‹å‘é‡ï¼Œç„¶å¾Œï¼Œå®ƒæœƒåœ¨å‘é‡è³‡æ–™åº«ä¸­é€²è¡Œã€Œæœ€è¿‘é„°æœç´¢ã€ï¼Œæ‰¾å‡ºèˆ‡æŸ¥è©¢å‘é‡æœ€ç›¸ä¼¼çš„ K å€‹æ®µè½å‘é‡ï¼Œé€™äº›è¢«æ‰¾å‡ºä¾†çš„ K å€‹æ®µè½ï¼Œå°±æ˜¯ DPR çš„ã€Œæª¢ç´¢çµæœã€ï¼Œå®ƒå€‘æ˜¯å¯¦éš›çš„æ–‡æœ¬æ®µè½ã€‚&lt;br>
ä¾‹å¦‚ï¼šã€Œå°¼åŠ æ‹‰ç€‘å¸ƒä½æ–¼åŠ æ‹¿å¤§å’Œç¾åœ‹çš„é‚Šç•Œã€‚ã€&lt;/p>
&lt;p>&lt;strong>BM25 çš„æª¢ç´¢çµæœï¼š&lt;/strong>
BM25 æ¼”ç®—æ³•æœƒæ ¹æ“šæŸ¥è©¢ä¸­çš„é—œéµå­—ï¼Œåœ¨æ–‡æª”åº«ä¸­è¨ˆç®—æ¯å€‹æ®µè½èˆ‡æŸ¥è©¢çš„ç›¸é—œæ€§åˆ†æ•¸ï¼Œå®ƒæœƒæ ¹æ“šé€™äº›åˆ†æ•¸ï¼Œæ‰¾å‡ºç›¸é—œæ€§æœ€é«˜çš„ K å€‹æ®µè½ï¼Œé€™äº›è¢«æ‰¾å‡ºä¾†çš„ K å€‹æ®µè½ï¼Œå°±æ˜¯ BM25 çš„ã€Œæª¢ç´¢çµæœã€ï¼Œå®ƒå€‘ä¹Ÿæ˜¯å¯¦éš›çš„æ–‡æœ¬æ®µè½ã€‚&lt;br>
ä¾‹å¦‚ï¼šã€Œå°¼åŠ æ‹‰ç€‘å¸ƒæ˜¯ä¸–ç•Œè‘—åçš„ç€‘å¸ƒã€‚ã€&lt;/p>
&lt;p>åˆä½µæŒ‡çš„æ˜¯å°‡é€™å…©å€‹ç¨ç«‹æª¢ç´¢å™¨ï¼ˆDPR å’Œ BM25ï¼‰å„è‡ªæ‰¾å‡ºä¾†çš„å€™é¸æ®µè½åˆ—è¡¨çµåˆèµ·ä¾†ï¼Œå½¢æˆä¸€å€‹æ›´å¤§çš„ã€åŒ…å«æ›´å¤šæ½›åœ¨ç›¸é—œæ®µè½çš„é›†åˆã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ï¼š&lt;br>
DPR å¯èƒ½æª¢ç´¢åˆ°æ®µè½ A, B, C, D, Eã€‚&lt;br>
BM25 å¯èƒ½æª¢ç´¢åˆ°æ®µè½ C, F, G, H, Iã€‚&lt;br>
åˆä½µå¾Œï¼Œåˆå§‹å€™é¸é›†å°±å¯èƒ½åŒ…å« A, B, C, D, E, F, G, H, Iã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="é‡æ’åºå±¤äº’å‹•æ¨¡å‹çš„å¼·å¤§èƒ½åŠ›">é‡æ’åºå±¤ï¼šäº’å‹•æ¨¡å‹çš„å¼·å¤§èƒ½åŠ›
&lt;/h3>&lt;p>é‡æ’åºå±¤çš„æ ¸å¿ƒç›®çš„æ˜¯ç²¾ç…‰åˆå§‹æª¢ç´¢çµæœçš„æ’åï¼Œä¸¦å¯¦ç¾ä¾†è‡ªä¸åŒæª¢ç´¢æ–¹æ³•çµæœçš„åˆä½µã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ¨¡å‹é¡å‹&lt;/strong>ï¼šRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G ä½¿ç”¨åŸºæ–¼ Nogueira å’Œ Cho åºåˆ—å°åˆ†é¡æ–¹æ³•çš„ã€Œäº’å‹•æ¨¡å‹ã€é€²è¡Œé‡æ’åºã€‚&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;hr>
&lt;!-- raw HTML omitted -->
&lt;hr>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>æ©Ÿåˆ¶&lt;/strong>ï¼š åœ¨äº’å‹•æ¨¡å‹ä¸­ï¼ŒæŸ¥è©¢å’Œæ®µè½æœƒä½œç‚ºä¸€å€‹æ•´é«”è¼¸å…¥åˆ° BERT è®Šæ›å™¨ä¸­ï¼Œæ¨¡å‹æœƒåœ¨å…©å€‹åºåˆ—çš„æ‰€æœ‰è©å…ƒä¸Šå…±åŒæ‡‰ç”¨äº¤å‰æ³¨æ„åŠ›æ©Ÿåˆ¶ï¼Œå¾è€Œæ•æ‰æŸ¥è©¢å’Œæ®µè½ä¹‹é–“æ›´æ·±å±¤æ¬¡çš„äº¤äº’é—œä¿‚ã€‚ Â &lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å„ªå‹¢&lt;/strong>ï¼šé€éä½¿ç”¨äº’å‹•æ¨¡å‹å°ä¾†è‡ªè¡¨ç¤ºæ¨¡å‹çš„ Top-N æ®µè½é€²è¡Œé‡æ’åºï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G èƒ½å¤ åŒæ™‚ç²å¾—å…©ç¨®æ¨¡å‹é¡å‹çš„å„ªå‹¢ï¼šäº’å‹•æ¨¡å‹å¸¶ä¾†çš„æ›´é«˜æº–ç¢ºæ€§ï¼ˆå› å…¶èƒ½é€²è¡Œæ›´ç´°ç·»çš„äº¤å‰æ³¨æ„åŠ›è¨ˆç®—ï¼‰ï¼Œä»¥åŠè¡¨ç¤ºæ¨¡å‹å¸¶ä¾†çš„å¯æ“´å±•æ€§ï¼ˆå› å…¶å…è¨±é«˜æ•ˆçš„åˆå§‹æª¢ç´¢ï¼‰ã€‚é€™ç¨®è¨­è¨ˆæ¨¡å¼åœ¨è¨±å¤šå¤§è¦æ¨¡è³‡è¨Šæª¢ç´¢ç³»çµ±ä¸­éå¸¸æœ‰æ•ˆï¼Œå¹³è¡¡äº†å°å¤§å‹èªæ–™åº«çš„å¿«é€Ÿåˆå§‹æª¢ç´¢èˆ‡å°è¼ƒå°å€™é¸é›†çš„ç²¾ç´°æ’åã€‚ Â &lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆå§‹åŒ–èˆ‡æ¨æ–·&lt;/strong>ï¼š é‡æ’åºå™¨å¾ NBoost åœ¨ MS MARCO æ•¸æ“šé›†ä¸Šè¨“ç·´çš„ BERT æ¨¡å‹åˆå§‹åŒ–ã€‚åœ¨æ¨æ–·æ™‚ï¼Œå¾åˆå§‹æª¢ç´¢å±¤åˆä½µå¾Œçš„æ®µè½é›†æœƒå‚³éçµ¦é‡æ’åºå™¨é€²è¡Œè©•åˆ†ï¼Œä¸¦é¸å‡º Top-5 çš„æ®µè½ä¾›ç”Ÿæˆå™¨ä½¿ç”¨ã€‚ Â &lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="ç”Ÿæˆå±¤åŸºæ–¼bartçš„åºåˆ—ç”Ÿæˆ">ç”Ÿæˆå±¤ï¼šåŸºæ–¼BARTçš„åºåˆ—ç”Ÿæˆ
&lt;/h3>&lt;p>ç”Ÿæˆå±¤è² è²¬æ ¹æ“šé‡æ’åºå¾Œçš„æ®µè½å’ŒæŸ¥è©¢ç”Ÿæˆæœ€çµ‚çš„ç›®æ¨™è¼¸å‡ºåºåˆ—ã€‚ Â &lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>åŸºç¤æ¨¡å‹&lt;/strong>ï¼šRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G ä½¿ç”¨åŸºæ–¼ BART çš„åºåˆ—åˆ°åºåˆ—ç”Ÿæˆæ¨¡å‹ï¼Œå…·é«”æ˜¯ $BART_{LARGE}$ã€‚BART çµåˆäº†é›™å‘ç·¨ç¢¼å™¨ï¼ˆå¦‚ BERTï¼‰å’Œè‡ªå›æ­¸è§£ç¢¼å™¨ï¼ˆå¦‚ GPTï¼‰çš„å„ªå‹¢ï¼Œä½¿å…¶éå¸¸é©åˆåºåˆ—åˆ°åºåˆ—ä»»å‹™ï¼Œä¸¦èƒ½æœ‰æ•ˆåœ°æ•´åˆæª¢ç´¢åˆ°çš„è³‡è¨Šã€‚é€™ç¨®é¸æ“‡åˆ©ç”¨äº†ç¾æœ‰çš„ç©©å¥ç”Ÿæˆæ¨¡å‹ï¼Œä¸¦é€éå¤–éƒ¨çŸ¥è­˜å¢å¼·äº†å®ƒå€‘çš„èƒ½åŠ›ã€‚ Â &lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ç”Ÿæˆå™¨è¼¸å…¥èˆ‡è¼¸å‡º&lt;/strong>ï¼šä¾†è‡ªé‡æ’åºå™¨çš„ Top-5 æ®µè½æœƒèˆ‡åŸå§‹æŸ¥è©¢çµåˆï¼Œä½œç‚º $BART_{LARGE}$ çš„è¼¸å…¥ä»¥ç”Ÿæˆè¼¸å‡ºã€‚BART ç”Ÿæˆçš„äº”å€‹è¼¸å‡ºåºåˆ—éš¨å¾Œæœƒæ ¹æ“šé‡æ’åºå™¨åˆ†æ•¸çš„ softmax é€²è¡ŒåŠ æ¬Šï¼Œä»¥ç”¢ç”Ÿæœ€çµ‚çš„è¼¸å‡ºã€‚é€™å€‹éç¨‹åœ¨ RAG ä¸­ç¨±ç‚ºé‚Šç·£åŒ– (marginalization)ï¼Œå®ƒç¢ºä¿äº†æª¢ç´¢åˆ°çš„ç›¸é—œæ€§ä¿¡æ¯èƒ½å¤ æœ‰æ•ˆæŒ‡å°æœ€çµ‚çš„ç”Ÿæˆã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="å››éšæ®µè¨“ç·´æ–¹æ³•èˆ‡ç·šä¸ŠçŸ¥è­˜è’¸é¤¾">å››éšæ®µè¨“ç·´æ–¹æ³•èˆ‡ç·šä¸ŠçŸ¥è­˜è’¸é¤¾
&lt;/h2>&lt;h3 id="ç¬¬ä¸€éšæ®µdpr-è¨“ç·´">ç¬¬ä¸€éšæ®µï¼šDPR è¨“ç·´
&lt;/h3>&lt;p>è¨“ç·´æ•¸æ“šç”±æŸ¥è©¢ã€æ­£å‘æ®µè½ï¼ˆä¾†è‡ªçœŸå¯¦æ¨™ç±¤çš„ä¾†æºè³‡è¨Šï¼‰ä»¥åŠã€Œç¡¬è² å‘ã€æ®µè½ï¼ˆå¾ BM25 æª¢ç´¢ä½†éçœŸå¯¦æ¨™ç±¤çš„æ®µè½ï¼‰çš„ä¸‰å…ƒçµ„çµ„æˆï¼Œé€™äº›å¯¦ä¾‹æœƒè¢«æ‰¹æ¬¡è™•ç†ï¼Œä¸¦ä¸”æ‰¹æ¬¡ä¸­å…¶ä»–å¯¦ä¾‹çš„æ­£å‘å’Œç¡¬è² å‘æ®µè½æœƒè¢«ç”¨ä½œç•¶å‰å¯¦ä¾‹çš„ã€Œæ‰¹æ¬¡è² å‘ã€ï¼ŒDPR é›™ç·¨ç¢¼å™¨æ¨¡å‹éš¨å¾Œæœƒç‚ºæ¯å€‹æŸ¥è©¢æä¾›å…¶å°æ­£å‘ã€ç¡¬è² å‘å’Œæ‰¹æ¬¡è² å‘æ®µè½çš„æ¦‚ç‡åˆ†ä½ˆã€‚æ­¤éšæ®µçš„æå¤±å‡½æ•¸æ˜¯æ­£å‘æ®µè½çš„è² å°æ•¸ä¼¼ç„¶ï¼Œå®Œæˆæ­¤éšæ®µè¨“ç·´å¾Œï¼Œèªæ–™åº«ä¸­çš„æ‰€æœ‰æ®µè½éƒ½æœƒä½¿ç”¨åˆ†å±¤å¯å°èˆªå°ä¸–ç•Œåœ– (HNSW) çµåˆ FAISS åº«é€²è¡Œç´¢å¼•ï¼Œä»¥ä¾¿å¾ŒçºŒé«˜æ•ˆæª¢ç´¢ã€‚&lt;/p>
&lt;h3 id="ç¬¬äºŒéšæ®µç”Ÿæˆè¨“ç·´">ç¬¬äºŒéšæ®µï¼šç”Ÿæˆè¨“ç·´
&lt;/h3>&lt;p>æ­¤éšæ®µçš„è¨“ç·´ç›®æ¨™æ˜¯æ“´å±•æŸ¥è©¢ç·¨ç¢¼å™¨çš„è¨“ç·´ï¼Œä¸¦è¨“ç·´ BART&lt;!-- raw HTML omitted -->LARGE&lt;!-- raw HTML omitted --> åºåˆ—åˆ°åºåˆ—æ¨¡å‹ä»¥ç”Ÿæˆæœ€çµ‚çš„ç›®æ¨™åºåˆ—è¼¸å‡ºã€‚é€™å€‹è¨“ç·´éç¨‹èˆ‡ Lewis ç­‰äººæè¿°çš„ RAG æ¨¡å‹ç”Ÿæˆè¨“ç·´æ–¹æ³•ä¸€è‡´ã€‚&lt;/p>
&lt;h3 id="ç¬¬ä¸‰éšæ®µé‡æ’åºè¨“ç·´">ç¬¬ä¸‰éšæ®µï¼šé‡æ’åºè¨“ç·´
&lt;/h3>&lt;p>é‡æ’åºå™¨çš„ç¨ç«‹è¨“ç·´å§‹æ–¼æ”¶é›†è¨“ç·´é›†ä¸Šä¾†è‡ª DPR å’Œ BM25 çš„åˆå§‹æª¢ç´¢çµæœï¼Œé€™äº›çµæœéš¨å¾Œæœƒè¢«åˆä½µï¼Œä¸¦ä½œç‚ºé‡æ’åºå™¨çš„è¨“ç·´æ•¸æ“šã€‚ç”±æ–¼æŸäº›æ•¸æ“šé›†å¯èƒ½å­˜åœ¨å¤šå€‹æ­£å‘æ®µè½ï¼Œå› æ­¤æ­¤éšæ®µæ¡ç”¨çš„æå¤±å‡½æ•¸æ˜¯é€™äº›æ­£å‘æ®µè½è² å°æ•¸ä¼¼ç„¶ä¹‹å’Œã€‚&lt;/p>
&lt;h3 id="ç¬¬å››éšæ®µç«¯åˆ°ç«¯è¨“ç·´">ç¬¬å››éšæ®µï¼šç«¯åˆ°ç«¯è¨“ç·´
&lt;/h3>&lt;p>ç«¯åˆ°ç«¯è¨“ç·´å¸¶ä¾†äº†ä¸€å€‹ç‰¹æ®ŠæŒ‘æˆ°ï¼šåœ¨ Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G ä¸­ï¼Œé‡æ’åºå™¨çš„åˆ†æ•¸è€Œéåˆå§‹æª¢ç´¢åˆ†æ•¸ç”¨æ–¼åŠ æ¬Šæ¯å€‹åºåˆ—åœ¨ç”Ÿæˆä¸­çš„å½±éŸ¿ã€‚é€™æ„å‘³è‘—é‡æ’åºå™¨å¯ä»¥ç›´æ¥é€éç›®æ¨™è¼¸å‡ºçš„çœŸå¯¦æ¨™ç±¤é€²è¡Œè¨“ç·´ï¼Œä½†æŸ¥è©¢ç·¨ç¢¼å™¨çš„æ¢¯åº¦å°‡ç‚ºé›¶ï¼Œå› ç‚ºé‚Šç·£åŒ–éç¨‹ä¸å†ç›´æ¥ä¾è³´æ–¼æŸ¥è©¢å’Œæ®µè½è¡¨ç¤ºå‘é‡çš„å…§ç©ã€‚ Â &lt;/p>
&lt;p>ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼ŒRe&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G å¼•å…¥äº†ä¸€ç¨®æ–°ç©çš„ç·šä¸ŠçŸ¥è­˜è’¸é¤¾æ‡‰ç”¨ã€‚åœ¨é€™ç¨®æ–¹æ³•ä¸­ï¼Œé‡æ’åºå™¨ä½œç‚ºã€Œæ•™å¸«æ¨¡å‹ã€ï¼Œç‚º DPRã€Œå­¸ç”Ÿæ¨¡å‹ã€æä¾›è»Ÿæ¨™ç±¤ã€‚é€™ç¨®çŸ¥è­˜è’¸é¤¾æ˜¯ã€Œç·šä¸Šã€ç™¼ç”Ÿçš„ï¼Œå³åœ¨é‡æ’åºå™¨è¨“ç·´çš„åŒæ™‚é€²è¡Œï¼Œå¯¦ç¾äº†çŸ¥è­˜å¾ä¸€ç¨®æ¶æ§‹ï¼ˆäº’å‹•æ¨¡å‹ï¼‰åˆ°å¦ä¸€ç¨®æ¶æ§‹ï¼ˆè¡¨ç¤ºæ¨¡å‹ï¼‰çš„è½‰ç§»ã€‚åˆå§‹æª¢ç´¢ï¼ˆDPRï¼‰çš„æå¤±å‡½æ•¸æ˜¯å…¶åœ¨æª¢ç´¢åˆ°çš„æ®µè½ä¸Šçµ¦å‡ºçš„æ¦‚ç‡åˆ†ä½ˆèˆ‡é‡æ’åºå™¨åœ¨ç›¸åŒæ®µè½ä¸Šçµ¦å‡ºçš„æ¦‚ç‡åˆ†ä½ˆä¹‹é–“çš„ KL æ•£åº¦ã€‚ç‚ºäº†å¹³æ»‘é€™äº›åˆ†ä½ˆã€é˜²æ­¢éåº¦æå¤±ä¸¦ç©©å®šè¨“ç·´ï¼Œæ¨¡å‹ä½¿ç”¨äº†æº«åº¦è¶…åƒæ•¸ (T)ã€‚é€™ç¨®æ–¹æ³•ä¸åƒ…æä¾›äº†æ­£å‘å’Œè² å‘å¯¦ä¾‹çš„ä¿¡è™Ÿï¼Œé‚„æä¾›äº†ã€Œè² å‘ç¨‹åº¦ã€çš„ä¿¡è™Ÿï¼Œä¸¦ä¸”èƒ½å¤ åˆ©ç”¨æ›´å¤šæ®µè½é€²è¡Œè¨“ç·´ï¼ˆDPR æª¢ç´¢ 12 å€‹æ®µè½ï¼Œè€Œç”Ÿæˆåªä½¿ç”¨ Top-5ï¼‰ï¼Œå¾è€Œæä¾›äº†æ¯”äºŒå…ƒæ¨™ç±¤æ›´è±å¯Œçš„è¨“ç·´ä¿¡è™Ÿã€‚&lt;/p>
&lt;hr>
&lt;h2 id="å¯¦é©—çµæœèˆ‡æ€§èƒ½åˆ†æ">å¯¦é©—çµæœèˆ‡æ€§èƒ½åˆ†æ
&lt;/h2>&lt;p>æ­¤éƒ¨åˆ†å°šæœªæ’°å¯«ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="çµè«–">çµè«–
&lt;/h2>&lt;p>Re&lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->G åœ¨æ§½å¡«å……ã€å•ç­”ã€äº‹å¯¦æ ¸æŸ¥å’Œå°è©±ç­‰ä»»å‹™ä¸­ï¼Œç„¡è«–æ˜¯æª¢ç´¢é‚„æ˜¯ç«¯åˆ°ç«¯æ€§èƒ½éƒ½å¾—åˆ°äº†å¯¦è³ªæ€§æå‡ã€‚&lt;/p>
&lt;p>æœ¬ç ”ç©¶çš„é—œéµæˆæœåŒ…æ‹¬ï¼š&lt;/p>
&lt;ul>
&lt;li>é‡æ’åºå™¨çš„æœ‰æ•ˆæ€§ã€‚ Â &lt;/li>
&lt;li>ç·šä¸ŠçŸ¥è­˜è’¸é¤¾çš„æˆåŠŸã€‚ Â &lt;/li>
&lt;li>å¤šæºæª¢ç´¢çš„ç›Šè™•ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://ar5iv.labs.arxiv.org/html/2207.06300" target="_blank" rel="noopener"
>Re2G: Retrieve, Rerank, Generate-ar5iv å¯è¦–åŒ–ç‰ˆæœ¬&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ä¸‰ç¨® RAG æ¶æ§‹æ¯”è¼ƒèˆ‡æ‡‰ç”¨è§£æ â€” Naiveã€Advancedã€Modular RAG å·®ç•°æ•´ç†</title><link>https://Dandelionlibra.github.io/post/note/rag-type-compare-note/</link><pubDate>Mon, 21 Jul 2025 09:16:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/rag-type-compare-note/</guid><description>&lt;h1 id="ä¸‰ç¨®-rag-æŠ€è¡“æ¶æ§‹æ¯”è¼ƒnaive-ragadvanced-rag-èˆ‡-modular-rag">ä¸‰ç¨® RAG æŠ€è¡“æ¶æ§‹æ¯”è¼ƒï¼šNaive RAGã€Advanced RAG èˆ‡ Modular RAG
&lt;/h1>&lt;p>æœ¬æ–‡æ¯”è¼ƒã€ŠRetrieval-Augmented Generation for Large Language Models: A Surveyã€‹ä¸­æå‡ºçš„ä¸‰ç¨®æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRAGï¼‰æŠ€è¡“æ¶æ§‹ï¼šNaive RAGã€Advanced RAG å’Œ Modular RAGã€‚RAG æ—¨åœ¨çµåˆå¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å…§éƒ¨çŸ¥è­˜èˆ‡å¤–éƒ¨è³‡æ–™æª¢ç´¢ï¼Œä»¥æå‡äº‹å¯¦æ­£ç¢ºæ€§èˆ‡æ™‚æ•ˆæ€§ã€‚é€™ä¸‰ç¨®æ¶æ§‹ä»£è¡¨äº† RAG æŠ€è¡“çš„æ¼”é€²è·¯å¾‘ï¼Œå„è‡ªå¼•å…¥ä¸åŒæ¨¡çµ„èˆ‡ç­–ç•¥ä¾†å…‹æœå…ˆå‰æ¶æ§‹çš„ä¾·é™ã€‚æœ¬æ–‡å°‡å¾æ¶æ§‹çµ„æˆã€å¯¦ä½œæ–¹å¼ã€æŠ€è¡“ç´°ç¯€ã€æ‡‰ç”¨å ´æ™¯èˆ‡å„ªåŠ£æ¯”è¼ƒç­‰é¢å‘ï¼Œæ·±å…¥å‰–æä¸‰é¡æ¶æ§‹çš„å·®ç•°èˆ‡é©ç”¨æ€§ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="æ¶æ§‹çµ„æˆèˆ‡æµç¨‹å·®ç•°">æ¶æ§‹çµ„æˆèˆ‡æµç¨‹å·®ç•°
&lt;/h2>&lt;h3 id="naive-rag">Naive RAG
&lt;/h3>&lt;p>æœ€æ—©æœŸä¸”åŸºç¤çš„ RAG æ¶æ§‹ï¼Œåƒ…åŒ…å«ç´¢å¼•ï¼ˆIndexingï¼‰ã€æª¢ç´¢ï¼ˆRetrievalï¼‰èˆ‡ç”Ÿæˆï¼ˆGenerationï¼‰ä¸‰å€‹ä¸²é€£æ¨¡çµ„ã€‚æµç¨‹ç‚ºï¼šè³‡æ–™å‘é‡åŒ– â†’ æª¢ç´¢å‰ $K$ å€‹ç›¸é—œç‰‡æ®µ â†’ æŸ¥è©¢èˆ‡æª¢ç´¢çµæœä¸€ä½µé¤µçµ¦ LLM ç”¢ç”Ÿå›ç­”ã€‚æ­¤æ¶æ§‹æµç¨‹ç°¡å–®ã€æ¨¡çµ„å–®ä¸€ï¼Œç¼ºä¹æŸ¥è©¢å„ªåŒ–æˆ–åé¥‹æ©Ÿåˆ¶ï¼Œé©åˆå¿«é€ŸåŸå‹é–‹ç™¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/e0/d6/naive-rag.png"
loading="lazy"
alt="Naive RAG æ¶æ§‹åœ–"
>&lt;/p>
&lt;h3 id="advanced-rag">Advanced RAG
&lt;/h3>&lt;p>åœ¨ Naive åŸºç¤ä¸Šå¢åŠ å‰è™•ç†èˆ‡å¾Œè™•ç†æ¨¡çµ„ï¼Œå¦‚æŸ¥è©¢å„ªåŒ–ã€é‡æ’åºã€å…§å®¹éæ¿¾/å£“ç¸®ç­‰ã€‚æµç¨‹ä»ç‚ºç´¢å¼•â†’æª¢ç´¢â†’ç”Ÿæˆï¼Œä½†åœ¨æª¢ç´¢å‰å¾Œæ’å…¥å„ªåŒ–æ­¥é©Ÿï¼Œæå‡æª¢ç´¢å“è³ªèˆ‡ç”Ÿæˆç›¸é—œæ€§ã€‚çµ„ä»¶åŒ…å«æŸ¥è©¢æ”¹å¯«ã€æ··åˆæª¢ç´¢ã€é‡æ’åºç­‰ï¼Œèƒ½é‡å°æ€§å¼·åŒ–æª¢ç´¢èˆ‡ç”Ÿæˆéšæ®µã€‚&lt;/p>
&lt;p>&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/8f/cb/advances-rag.png"
loading="lazy"
alt="Advanced RAG æ¶æ§‹åœ–"
>&lt;/p>
&lt;h3 id="modular-rag">Modular RAG
&lt;/h3>&lt;p>æœ€æ–°éšæ®µï¼Œå¼·èª¿ç©æœ¨å¼æ¨¡çµ„åŒ–è¨­è¨ˆã€‚é™¤ç¹¼æ‰¿å‰è¿°æµç¨‹å¤–ï¼Œå…è¨±å¤šè¼ªæª¢ç´¢-ç”Ÿæˆã€å¹³è¡Œè³‡è¨Šèåˆã€è‡ªé©æ‡‰æµç¨‹ç­‰ã€‚å¯éˆæ´»å¢æ¸›å¦‚ç¶²è·¯æœå°‹ã€é•·ç¨‹è¨˜æ†¶ã€è·¯ç”±æ±ºç­–ç­‰æ¨¡çµ„ï¼Œæµç¨‹å¯é‡çµ„ã€è¿­ä»£æˆ–åˆ†æ”¯ï¼Œé©æ‡‰è¤‡é›œå¤šè®Šçš„ä»»å‹™éœ€æ±‚ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/a7/e6/modular-rag.component.crop-16by9-m.ts=1740501066286.png/content/adobe-cms/us/en/think/topics/rag-techniques/jcr:content/root/table_of_contents/body-article-8/image_1228195012"
loading="lazy"
alt="Modular RAG æ¶æ§‹åœ–"
>&lt;/p>
&lt;hr>
&lt;h2 id="å¯¦ä½œæ–¹å¼èˆ‡ç³»çµ±ç‰¹æ€§">å¯¦ä½œæ–¹å¼èˆ‡ç³»çµ±ç‰¹æ€§
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šå¯¦ä½œæœ€ç›´æ¥ï¼Œåƒ…éœ€åµŒå…¥æ¨¡å‹ã€å‘é‡è³‡æ–™åº«èˆ‡ LLMã€‚æ¨¡çµ„ç·šæ€§ä¸²æ¥ï¼Œç„¡éœ€å¾®èª¿ï¼Œéƒ¨ç½²ç¶­è­·æˆæœ¬ä½ï¼Œé©åˆç°¡å–®æ‡‰ç”¨ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šéœ€å¼•å…¥æŸ¥è©¢å„ªåŒ–ã€é‡æ’åºç­‰æ¨¡çµ„ï¼Œå¸¸ç”¨ LlamaIndexã€LangChain ç­‰æ¡†æ¶ã€‚ç³»çµ±è¤‡é›œåº¦æå‡ï¼Œéœ€èª¿æ ¡å¤šå€‹å­ç³»çµ±ï¼Œé©åˆä¸­ç­‰è¤‡é›œåº¦ä»»å‹™ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šé«˜åº¦æ¨¡çµ„åŒ–ï¼Œå¸¸ç”¨æµæ°´ç·šç·¨æ’æ¡†æ¶ã€‚æ¯å€‹åŠŸèƒ½ç¨ç«‹å°è£ï¼Œç³»çµ±å¯ç‚ºæœ‰å‘åœ–çµæ§‹ï¼Œä¾¿æ–¼æ“´å……èˆ‡ç¶­è­·ï¼Œä½†é–‹ç™¼å”èª¿æˆæœ¬é«˜ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="æ ¸å¿ƒæŠ€è¡“ç´°ç¯€">æ ¸å¿ƒæŠ€è¡“ç´°ç¯€
&lt;/h2>&lt;h3 id="è³‡æ–™é è™•ç†èˆ‡åµŒå…¥">è³‡æ–™é è™•ç†èˆ‡åµŒå…¥
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šæ–‡æœ¬æ¸…æ´—ã€åˆ‡åˆ†ã€åµŒå…¥ï¼Œå»ºç«‹å‘é‡ç´¢å¼•ï¼Œé‡é»åœ¨èªç¾©è¡¨ç¤ºã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šç´°ç²’åº¦åˆ‡åˆ†ã€æ»‘å‹•è¦–çª—ã€metadata æ¨™è¨»ã€æ··åˆåµŒå…¥ï¼ˆå¯†é›†+ç¨€ç–ï¼‰ï¼Œæå‡æª¢ç´¢è¦†è“‹ç‡èˆ‡ç²¾ç¢ºæ€§ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šå‹•æ…‹è³‡æ–™è™•ç†ï¼Œå¯å³æ™‚æŠ“å–æ–°è³‡æ–™ã€å¤šæ¨¡æ…‹è³‡æ–™ã€è¨˜æ†¶æ¨¡çµ„è‡ªæˆ‘å¢å¼·ï¼ŒåµŒå…¥ç­–ç•¥å¤šå…ƒä¸”å¯æ¼”åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="æª¢ç´¢ç­–ç•¥èˆ‡æŸ¥è©¢å„ªåŒ–">æª¢ç´¢ç­–ç•¥èˆ‡æŸ¥è©¢å„ªåŒ–
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šå–®è¼ªèªç¾©ç›¸ä¼¼åº¦æª¢ç´¢ï¼Œç„¡æŸ¥è©¢å„ªåŒ–æˆ–å¤šè¼ªäº¤äº’ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šæŸ¥è©¢é‡å¯«/æ“´å±•ã€å¤šæ¬¡/æ··åˆæª¢ç´¢ã€é‡æ’åºèˆ‡éæ¿¾ï¼Œæå‡æª¢ç´¢æº–ç¢ºç‡èˆ‡è¦†è“‹ç‡ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šè‡ªé©æ‡‰å¤šéšæ®µæª¢ç´¢ã€è·¯ç”±æ±ºç­–ã€å¹³è¡Œå¤šæŸ¥è©¢ã€éæ­¸å¼æª¢ç´¢ï¼Œæ ¹æ“šä»»å‹™å‹•æ…‹èª¿åº¦æª¢ç´¢ç­–ç•¥ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="ä¸Šä¸‹æ–‡èåˆèˆ‡è³‡è¨Šå¢å¼·">ä¸Šä¸‹æ–‡èåˆèˆ‡è³‡è¨Šå¢å¼·
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šç›´æ¥æ‹¼æ¥æŸ¥è©¢èˆ‡æª¢ç´¢å…§å®¹ï¼Œç„¡é¡å¤–è™•ç†ï¼Œæ˜“å—é›œè¨Šå¹²æ“¾ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šé‡æ’åºã€å£“ç¸®ã€éæ¿¾ã€æ˜ç¢ºå¼•å°æ¨¡å‹å¼•ç”¨æª¢ç´¢å…§å®¹ï¼Œæå‡è¨Šæ¯å“è³ªã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šå¤šæ­¥èåˆã€ç¤ºç¯„-æœç´¢-é æ¸¬ã€å‹•æ…‹è¨˜æ†¶ã€äº‹å¾Œæ ¡é©—ï¼Œæ·±åº¦æ•´åˆå¤–éƒ¨çŸ¥è­˜èˆ‡æ¨¡å‹æ¨ç†ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å›ç­”ç”Ÿæˆèˆ‡æ§åˆ¶">å›ç­”ç”Ÿæˆèˆ‡æ§åˆ¶
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šLLM ç›´æ¥ç”Ÿæˆï¼Œæ§åˆ¶åŠ›å¼±ï¼Œæ˜“å‡ºç¾å¹»è¦ºæˆ–æ‹¼è²¼ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šæç¤ºå·¥ç¨‹ã€å¾®èª¿ã€åé¥‹è¿´è·¯ã€ç”Ÿæˆå¾Œéæ¿¾ï¼Œå¼·åŒ–å¯é æ€§èˆ‡å®‰å…¨æ€§ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šç¤ºç¯„æ¨¡çµ„ã€è¿­ä»£ç”Ÿæˆã€å¾Œè™•ç†æ ¡é©—ã€ç”¨æˆ¶åé¥‹è¿´è·¯ï¼Œå¯¦ç¾åš´è¬¹çš„ç”Ÿæˆç®¡æ§ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="é©ç”¨å ´æ™¯èˆ‡é™åˆ¶">é©ç”¨å ´æ™¯èˆ‡é™åˆ¶
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šé©åˆåŸå‹ã€FAQã€å…§éƒ¨çŸ¥è­˜åº«ç­‰ä½è¤‡é›œåº¦å ´æ™¯ï¼Œé–‹ç™¼å¿«ä½†ä¸é©åˆé«˜ç²¾åº¦æˆ–å¤šæ­¥æ¨ç†ä»»å‹™ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šé©ç”¨æ–¼é†«ç™‚ã€æ³•å¾‹ã€æ•™è‚²ç­‰çŸ¥è­˜å¯†é›†å‹å•ç­”ï¼Œèƒ½è™•ç†è¼ƒå¤§è¦æ¨¡çŸ¥è­˜åº«ï¼Œä½†è³‡æºéœ€æ±‚èˆ‡ç¶­è­·æˆæœ¬è¼ƒé«˜ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šé©åˆå¤§å‹ä¼æ¥­ã€è·¨é ˜åŸŸç³»çµ±ã€éœ€å¤šéšæ®µæ¨ç†æˆ–å¤šæºè³‡è¨Šæ•´åˆçš„å ´æ™¯ï¼Œæ“´å±•æ€§èˆ‡ç¶­è­·æ€§æœ€ä½³ï¼Œä½†é–‹ç™¼è¤‡é›œåº¦èˆ‡åˆå§‹æˆæœ¬é«˜ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="å„ªåŠ£æ¯”è¼ƒ">å„ªåŠ£æ¯”è¼ƒ
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ¶æ§‹&lt;/th>
&lt;th>å¯¦ç”¨æ€§&lt;/th>
&lt;th>å¯æ“´å±•æ€§&lt;/th>
&lt;th>ç¶­è­·æˆæœ¬&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Naive RAG&lt;/td>
&lt;td>é«˜ï¼ˆæ˜“ç”¨ï¼‰&lt;/td>
&lt;td>ä½ï½ä¸­&lt;/td>
&lt;td>ä½&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Advanced RAG&lt;/td>
&lt;td>ä¸­ï¼ˆéœ€å°ˆæ¥­ï¼‰&lt;/td>
&lt;td>ä¸­ï½é«˜&lt;/td>
&lt;td>ä¸­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Modular RAG&lt;/td>
&lt;td>ä½ï¼ˆè¤‡é›œï¼‰&lt;/td>
&lt;td>æ¥µé«˜&lt;/td>
&lt;td>é«˜ï¼ˆåˆå§‹ï¼‰ï¼Œä½ï¼ˆå±€éƒ¨ç¶­è­·ï¼‰&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>&lt;strong>Naive RAG&lt;/strong>ï¼šç°¡å–®æ˜“ç”¨ã€æˆæœ¬ä½ï¼Œä½†é‡åˆ°è¤‡é›œä»»å‹™æ˜“é”å¤©èŠ±æ¿ã€‚&lt;/li>
&lt;li>&lt;strong>Advanced RAG&lt;/strong>ï¼šæ€§èƒ½èˆ‡è¤‡é›œåº¦å¹³è¡¡ï¼Œé©åˆå¤šæ•¸å°ˆæ¥­æ‡‰ç”¨ï¼Œç¶­è­·éœ€å°ˆæ¥­æŠ•å…¥ã€‚&lt;/li>
&lt;li>&lt;strong>Modular RAG&lt;/strong>ï¼šå½ˆæ€§èˆ‡æ“´å±•æ€§æœ€å¼·ï¼Œé©åˆé«˜ç«¯éœ€æ±‚ï¼Œä½†é–‹ç™¼èˆ‡å”èª¿æˆæœ¬é«˜ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="çµè«–">çµè«–
&lt;/h2>&lt;p>ä¸‰ç¨® RAG æ¶æ§‹å„æœ‰é©ç”¨å ´æ™¯èˆ‡å„ªåŠ£ã€‚Naive RAG é©åˆå¿«é€ŸåŸå‹èˆ‡ç°¡å–®æ‡‰ç”¨ï¼ŒAdvanced RAG é©åˆå°ˆæ¥­é ˜åŸŸèˆ‡ä¸­å¤§å‹çŸ¥è­˜åº«ï¼ŒModular RAG å‰‡ç‚ºé«˜è¤‡é›œåº¦ã€éœ€é•·æœŸæ¼”åŒ–çš„ç³»çµ±æä¾›æœ€ä½³è§£æ±ºæ–¹æ¡ˆã€‚é¸æ“‡ä½•ç¨®æ¶æ§‹ï¼Œæ‡‰æ ¹æ“šå¯¦éš›éœ€æ±‚ã€è³‡æºèˆ‡é•·æœŸç¶­è­·è€ƒé‡æ¬Šè¡¡å–æ¨ã€‚&lt;/p>
&lt;h2 id="reference">Reference
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://arxiv.org/abs/2312.10997" target="_blank" rel="noopener"
>Retrieval-Augmented Generation for Large Language Models: A Survey&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.thecloudgirl.dev/blog/three-paradigms-of-retrieval-augmented-generation-rag-for-llms#:~:text=,on%20embeddings%20from%20language%20models" target="_blank" rel="noopener"
>Three Paradigms of Retrieval-Augmented Generation (RAG) for LLMs&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.ibm.com/think/topics/rag-techniques#:~:" target="_blank" rel="noopener"
>RAG Techniques | IBM Think&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>æª¢ç´¢å¢å¼·å¤§å‹èªè¨€æ¨¡å‹ç¶œè¿° â€” RA-LLMs ç³»çµ±æ€§å›é¡§èˆ‡æ‡‰ç”¨è§£æ</title><link>https://Dandelionlibra.github.io/post/note/rag-llms-survey-note/</link><pubDate>Sun, 20 Jul 2025 08:50:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/rag-llms-survey-note/</guid><description>&lt;blockquote>
&lt;p>æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2405.06211" target="_blank" rel="noopener"
>A Survey on RAG Meeting LLMs: Towards Retrieval-Augmented Large Language Models&lt;/a>&lt;br>
ä½œè€…ï¼šWenqi Fan, Yujuan Ding, Liangbo Ning, Shijie Wang, Hengyun Li, Dawei Yin, Tat-Seng Chua, Qing Li&lt;br>
ç™¼ä½ˆæ–¼ arXivï¼Œ2024å¹´5æœˆ&lt;/p>&lt;/blockquote>
&lt;h1 id="æ‘˜è¦">æ‘˜è¦
&lt;/h1>&lt;p>å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰é›–å±•ç¾å¼·å¤§ç”Ÿæˆèƒ½åŠ›ï¼Œä½†å—é™æ–¼å…§éƒ¨çŸ¥è­˜èˆ‡å¹»è¦ºå•é¡Œã€‚æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRetrieval-Augmented Generation;RAGï¼‰é€éå³æ™‚æª¢ç´¢å¤–éƒ¨è³‡è¨Šï¼Œæå‡å›æ‡‰çš„å¯é æ€§èˆ‡æ™‚æ•ˆæ€§ã€‚æœ¬æ–‡æ•´ç† RA-LLMs çš„æ¶æ§‹ã€è¨“ç·´ç­–ç•¥èˆ‡æ‡‰ç”¨ï¼Œä¸¦æ¢è¨å…¶é¢è‡¨çš„æŒ‘æˆ°èˆ‡æœªä¾†ç™¼å±•ï¼Œå±•ç¾æª¢ç´¢å°æå‡ LLM å¯¦ç”¨æ€§çš„é—œéµåƒ¹å€¼ã€‚&lt;/p>
&lt;h1 id="å‰è¨€">å‰è¨€
&lt;/h1>&lt;p>æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRAGï¼‰æŠ€è¡“é€éçµåˆè³‡è¨Šæª¢ç´¢èˆ‡å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰ï¼Œè£œè¶³æ¨¡å‹çŸ¥è­˜ä¸è¶³èˆ‡å¹»è¦ºå•é¡Œï¼Œè¿‘å¹´å—åˆ°å»£æ³›é—œæ³¨ã€‚LLMs é›–å…·å¼·å¤§ç”Ÿæˆèƒ½åŠ›ï¼Œå»å¸¸å—é™æ–¼çŸ¥è­˜æ™‚æ•ˆèˆ‡å°ˆé ˜åŸŸæ‡‰ç”¨ï¼Œè€Œ RA-LLMs å‰‡é€éæª¢ç´¢å¤–éƒ¨è³‡æ–™æå‡ç”Ÿæˆå“è³ªã€‚&lt;/p>
&lt;h1 id="èƒŒæ™¯">èƒŒæ™¯
&lt;/h1>&lt;h2 id="å¤§å‹èªè¨€æ¨¡å‹">å¤§å‹èªè¨€æ¨¡å‹
&lt;/h2>&lt;ul>
&lt;li>
&lt;p>æ‡‰ç”¨&lt;/p>
&lt;ul>
&lt;li>åœ¨ç‰¹å®šè³‡æ–™é›†ä¸Šé€²è¡Œå¾®èª¿ï¼ŒLLM å¯ä»¥é©æ‡‰å„ç¨®ä¸‹æ¸¸ä»»å‹™ï¼Œä½¿å…¶èƒ½å¤ å°ˆæ³¨æ–¼ç‰¹å®šé ˜åŸŸæˆ–æ‡‰ç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ¶æ§‹:&lt;/p>
&lt;ul>
&lt;li>Encoder-only æ¨¡å‹ï¼Œé›™å‘ç·¨ç¢¼ï¼Œå¯åŒæ™‚è€ƒæ…®å–®è©å·¦å³èªå¢ƒã€‚&lt;br>
ex. BERT&lt;/li>
&lt;li>Decoder-only æ¨¡å‹ï¼Œå–®å‘ç”Ÿæˆï¼ˆå·¦è‡³å³ï¼‰ï¼Œæ ¹æ“šå‰æ–‡é æ¸¬ä¸‹å€‹å­—å…ƒã€‚&lt;br>
ex. GPT&lt;/li>
&lt;li>Encoder-Decoder æ¨¡å‹ï¼Œå°‡è¼¸å…¥ç·¨ç¢¼å¾Œï¼Œå†ç”±è§£ç¢¼å™¨ç”Ÿæˆå°æ‡‰è¼¸å‡ºã€‚&lt;br>
ex. T5&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="æç¤ºå­¸ç¿’">æç¤ºå­¸ç¿’
&lt;/h2>&lt;h3 id="æç¤ºå·¥ç¨‹prompt-engineering">æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰
&lt;/h3>&lt;p>å› ç‚º LLM çš„åƒæ•¸é‡é€šå¸¸éå¸¸é¾å¤§ï¼Œå› æ­¤æç¤ºå­¸ç¿’çš„ç™¼å±•å¯ä½¿ LLM ä¸éœ€ç‚ºäº†ç‰¹å®šä»»å‹™é€²è¡Œå¤§é‡å¾®èª¿ï¼Œå°±å¯ä»¥å¯¦ç¾å„é …ä»»å‹™ã€‚&lt;br>
ç¼ºé»ï¼šç•¶ç¼ºä¹å°ˆæ¥­é ˜åŸŸçŸ¥è­˜æ™‚ï¼Œç”Ÿæˆçµæœå¯èƒ½ä¸å¤ ç²¾ç¢ºã€‚&lt;/p>
&lt;h3 id="ä¸Šä¸‹æ–‡å­¸ç¿’in-context-learning-icl">ä¸Šä¸‹æ–‡å­¸ç¿’ï¼ˆIn-Context Learning, ICLï¼‰
&lt;/h3>&lt;p>ç‚ºæç¤ºå­¸ç¿’çš„ä¸€ç¨®å½¢å¼ï¼Œé€éåœ¨æç¤ºä¸­æä¾›ç¯„ä¾‹ç¤ºç¯„ï¼Œè®“ LLM è§€å¯Ÿä¸¦å­¸ç¿’ä»»å‹™æ¨¡å¼ã€‚&lt;br>
ç¼ºé»ï¼šæˆæ•ˆé«˜åº¦ä¾è³´ç¯„ä¾‹å“è³ªã€ç•¶ç¼ºä¹å¿…è¦çŸ¥è­˜æˆ–è³‡è¨Šæ™‚ï¼Œå¯èƒ½å°è‡´ç”Ÿæˆçµæœä¸ç†æƒ³ã€‚&lt;/p>
&lt;p>ç‚ºå…‹æœé€™äº›å•é¡Œï¼Œç™¼å±•å‡º RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰æŠ€è¡“ï¼ŒRAG çµåˆæª¢ç´¢èˆ‡ç”Ÿæˆï¼Œæå‡ LLM åœ¨å¤šä»»å‹™ä¸­çš„è¡¨ç¾èˆ‡é©æ‡‰æ€§ã€‚&lt;/p>
&lt;h1 id="å…§æ–‡">å…§æ–‡
&lt;/h1>&lt;p>LLMs æ™‚ä»£çš„ RAG æ¶æ§‹å¤§è‡´åŒ…å«æª¢ç´¢ã€ç”¢ç”Ÿå’Œå¢å¼·ä¸‰å€‹ä¸»è¦æµç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x2.png"
loading="lazy"
alt="RAG ç³»çµ±ç¸½è¦½"
>&lt;br>
&lt;em>åœ– 1ï¼šRAG ç³»çµ±ç¸½è¦½ï¼Œæ¶µè“‹æª¢ç´¢ã€ç”Ÿæˆèˆ‡å¢å¼·ä¸‰å¤§æµç¨‹ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x3.png"
loading="lazy"
alt="RAG ç³»çµ±ç´°ç¯€æµç¨‹"
>&lt;br>
&lt;em>åœ– 2ï¼šRAG åœ¨ RA-LLM ä¸­çš„æµç¨‹åœ–ï¼Œå±•ç¤ºå„æ¨¡çµ„é–“çš„äº’å‹•ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em>&lt;/p>
&lt;h2 id="retrieval">Retrieval
&lt;/h2>&lt;p>RAG æ—¨åœ¨å¾å¤–éƒ¨çŸ¥è­˜æºæä¾›é—œéµè¨Šæ¯çµ¦ LLMã€‚&lt;/p>
&lt;h3 id="retriever-type">Retriever Type
&lt;/h3>&lt;p>ä¾ç…§è³‡è¨Šç·¨ç¢¼å€åˆ†ã€‚&lt;/p>
&lt;ul>
&lt;li>ç¨€ç–æª¢ç´¢ï¼ˆSparse Retrievalï¼‰ï¼šç›´æ¥åŒ¹é…è©å½™ä¸¦ä¾é »ç‡æ’åã€‚&lt;/li>
&lt;li>ç¨ å¯†æª¢ç´¢ï¼ˆDense Retrievalï¼‰ï¼šå°‡æŸ¥è©¢èˆ‡æ–‡æª”åµŒå…¥ç‚ºå‘é‡ï¼Œé€éèªæ„ç›¸ä¼¼åº¦æª¢ç´¢ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="retrieval-granularity">Retrieval Granularity
&lt;/h3>&lt;p>æª¢ç´¢å–®ä½çš„é¸æ“‡å°æ•ˆèƒ½èˆ‡è¨ˆç®—æˆæœ¬æœ‰é‡å¤§å½±éŸ¿ã€‚&lt;/p>
&lt;ul>
&lt;li>Chunk(passages): åŒ…å«ç·Šæ¹Šä¸”å®Œæ•´çš„è³‡è¨Šï¼Œå†—é¤˜å’Œä¸ç›¸é—œæ€§è¼ƒå°‘ï¼Œæ˜¯ RAG ä¸­ä¸»æµçš„æª¢ç´¢æ–‡æœ¬ç²’åº¦ã€‚&lt;/li>
&lt;li>Token: å¯¦ç¾æ›´å¿«çš„æœå°‹ï¼Œä½†æœƒçµ¦è³‡æ–™åº«å„²å­˜å¸¶ä¾†æ›´å¤šè² æ“”ã€‚é©ç”¨æ–¼éœ€è¦ç¨€æœ‰æ¨¡å¼æˆ–é ˜åŸŸå¤–è³‡æ–™çš„æƒ…æ³ã€‚&lt;/li>
&lt;li>Entity: å¯¦é«”æª¢ç´¢æ˜¯å¾çŸ¥è­˜è€Œéèªè¨€çš„è§’åº¦æª¢ç´¢ï¼Œå°æ–¼ä»¥å¯¦é«”ç‚ºä¸­å¿ƒçš„ä»»å‹™æ›´æœ‰æ•ˆï¼Œä¸¦ä¸”èˆ‡è©å…ƒæª¢ç´¢ç›¸æ¯”ï¼Œåœ¨ç©ºé–“ä¸Šæ›´é«˜æ•ˆã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="retrieval-enhancement-strategies">Retrieval Enhancement strategies
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>æª¢ç´¢å‰å„ªåŒ–ï¼ˆPre-retrievalï¼‰&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Query Expansion (æŸ¥è©¢æ“´å±•)ï¼šé€éåŠ å…¥ç›¸é—œè©å½™æˆ–æ¦‚å¿µä¾†æ“´å¤§åŸå§‹æŸ¥è©¢çš„ç¯„åœã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨å¤§å‹èªè¨€æ¨¡å‹ (LLM) ç”Ÿæˆå½æ–‡ä»¶ï¼Œä¸¦å¾ä¸­æå–ç›¸é—œè³‡è¨Šä¾†æ“´å±•æŸ¥è©¢ï¼Œæœ‰åŠ©æ–¼æ¶ˆé™¤æ­§ç¾©ä¸¦å¼•å°æª¢ç´¢å™¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Query Rewrite (æŸ¥è©¢é‡å¯«)ï¼šæ—¨åœ¨é‡æ–°å½ŒåˆåŸå§‹æŸ¥è©¢ï¼Œä½¿å…¶æ›´é©åˆæª¢ç´¢ã€‚é€™å¯èƒ½æ¶‰åŠæ¾„æ¸…æŸ¥è©¢æ„åœ–ã€ä½¿å…¶æ›´ç²¾ç¢ºï¼Œæˆ–æ˜¯å°‡å…¶è½‰æ›ç‚ºæª¢ç´¢åŠŸèƒ½æ›´å®¹æ˜“ç†è§£çš„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨ LLM å°‡åŸå§‹å•é¡Œé‡å¯«ç‚ºæ›´åˆ©æ–¼æª¢ç´¢çš„ç‰ˆæœ¬ã€‚&lt;br>
èˆ‰ä¾‹ï¼Œ&lt;strong>å¤šæ¬¡&lt;/strong>è©¢å•æ¨¡å‹ä»–çš„æª¢ç´¢è³‡æ–™æ˜¯å¦æ­£ç¢ºã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Query Augmentation (æŸ¥è©¢å¢å¼·)ï¼šå°‡åŸå§‹æŸ¥è©¢èˆ‡åˆæ­¥ç”Ÿæˆçš„å…§å®¹çµåˆï¼Œå½¢æˆä¸€å€‹æ–°çš„æŸ¥è©¢ã€‚é€™ç¨®ç­–ç•¥å¯ä»¥å¢åŠ æŸ¥è©¢èˆ‡æ½›åœ¨ç›¸é—œæ–‡ä»¶ä¹‹é–“çš„è©å½™å’Œèªç¾©é‡ç–Šï¼Œæœ‰åŠ©æ–¼æª¢ç´¢å‡ºæ›´å¤šæœ‰åŠ©æ–¼ç­”æ¡ˆç”Ÿæˆçš„è³‡è¨Šã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æª¢ç´¢å¾Œå„ªåŒ–ï¼ˆPost-retrievalï¼‰&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é‡æ’åºèˆ‡éæ¿¾&lt;br>
å°æª¢ç´¢åˆ°çš„æ–‡ä»¶é€²è¡Œé‡æ–°æ’åºï¼Œå°‡æœ€ç›¸é—œçš„è³‡è¨Šæ’åœ¨å‰é¢ï¼Œä¸¦éæ¿¾æ‰ä¸ç›¸é—œæˆ–ä½å“è³ªçš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œé€éä¸åŒçš„æª¢ç´¢æ–¹æ³•çµ„è£æ–‡ä»¶ä¸¦é€²è¡Œé‡æ’åºï¼Œä»¥æå‡æª¢ç´¢çµæœçš„ç©©å¥æ€§ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é›œè¨Šéæ¿¾èˆ‡æ•´åˆ&lt;br>
è™•ç†æª¢ç´¢åˆ°çš„è³‡è¨Šä¸­å¯èƒ½å­˜åœ¨çš„é›œè¨Šæˆ–ä¸ç›¸é—œå…§å®¹ï¼Œä»¥é¿å…å…¶å°ç”Ÿæˆéç¨‹ç”¢ç”Ÿè² é¢å½±éŸ¿ã€‚åŒæ™‚ï¼Œå°‡æ¸…æ´—éçš„è³‡è¨Šæœ‰æ•ˆåœ°æ•´åˆé€²ç”Ÿæˆæ¨¡å‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å£“ç¸®èˆ‡æ‘˜è¦&lt;br>
é‡å°æª¢ç´¢åˆ°çš„é•·ç¯‡æ–‡ä»¶ï¼Œé€²è¡Œå£“ç¸®æˆ–ç”Ÿæˆæ‘˜è¦ï¼Œä»¥è§£æ±ºå¤§å‹èªè¨€æ¨¡å‹è¼¸å…¥é•·åº¦é™åˆ¶çš„å•é¡Œã€‚ä¾‹å¦‚ï¼Œå°‡æª¢ç´¢åˆ°çš„æ–‡ä»¶è™•ç†æˆæ–‡æœ¬æ‘˜è¦ï¼Œå†ç”¨æ–¼æ¨¡å‹ç”Ÿæˆã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="database">Database
&lt;/h3>&lt;p>RA-LLM çš„æª¢ç´¢è³‡æ–™åº«å¯ç‚ºå°é–‰å¼æˆ–é–‹æ”¾å¼ä¾†æºã€‚&lt;/p>
&lt;ul>
&lt;li>å°é–‰å¼è³‡æ–™åº«:
é€šå¸¸ä»¥éµå€¼å° (key-value pairs) çš„å½¢å¼å„²å­˜çŸ¥è­˜ã€‚&lt;/li>
&lt;li>é–‹æ”¾å¼è³‡æ–™åº«:
åˆ©ç”¨æœå°‹å¼•æ“ï¼ˆå¦‚ Bingã€Googleï¼‰ç²å–å³æ™‚è³‡è¨Šã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ç”Ÿæˆgeneration">ç”Ÿæˆï¼ˆGenerationï¼‰
&lt;/h2>&lt;p>ç”Ÿæˆæ¨¡çµ„çš„è¨­è¨ˆé«˜åº¦ä¾è³´æ–¼ä¸‹æ¸¸ä»»å‹™éœ€æ±‚ï¼Œå› è€Œå¾—ä»¥é©æ‡‰ä¸åŒçš„ä»»å‹™éœ€æ±‚ã€‚&lt;/p>
&lt;h3 id="å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ç™½ç®±parameter-accessible-generators">å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ï¼ˆç™½ç®±ï¼ŒParameter-Accessible Generatorsï¼‰
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>Encoder-Decoder&lt;/p>
&lt;ul>
&lt;li>æ“æœ‰ç¨ç«‹çš„ç·¨ç¢¼å™¨ï¼ˆEncoderï¼‰èˆ‡è§£ç¢¼å™¨ï¼ˆDecoderï¼‰ï¼Œåˆ†åˆ¥è™•ç†è¼¸å…¥èˆ‡ç”Ÿæˆçš„ç›®æ¨™ã€‚&lt;/li>
&lt;li>Encoder å…ˆå°‡è¼¸å…¥ç·¨ç¢¼ç‚ºä¸Šä¸‹æ–‡è¡¨ç¤ºï¼ŒDecoder ä»¥ Cross-Attention è®€å– Encoder è¼¸å‡ºï¼Œé€æ­¥ç”Ÿæˆçµæœã€‚&lt;/li>
&lt;li>æ¨¡å‹çš„ç›®æ¨™æ˜¯ã€Œæ ¹æ“šç·¨ç¢¼å¾Œçš„è¼¸å…¥èˆ‡å…ˆå‰ç”Ÿæˆçš„çµæœï¼Œé æ¸¬ä¸‹ä¸€å€‹ tokenã€ã€‚&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>è¼¸å…¥ï¼šè«‹ä»‹ç´¹ Transformerã€‚
Encoder ç·¨ç¢¼å¾Œ â†’ [å…§éƒ¨ä¸Šä¸‹æ–‡è¡¨ç¤º]
Decoder è®€å–è¡¨ç¤º â†’ ç”Ÿæˆï¼šTransformer æ˜¯ä¸€ç¨®...
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>Decoder-only&lt;/p>
&lt;ul>
&lt;li>æ²’æœ‰ç¨ç«‹çš„ç·¨ç¢¼å™¨ã€‚&lt;/li>
&lt;li>è¼¸å…¥ï¼ˆå¦‚å•é¡Œã€æç¤ºï¼‰ å’Œ ç›®æ¨™ï¼ˆè¦ç”Ÿæˆçš„å…§å®¹ï¼‰ æœƒè¢«ä¸²æ¥æˆåŒä¸€åºåˆ—ï¼Œä¸¦å¾å·¦åˆ°å³é€²è¡Œè™•ç†ã€‚&lt;/li>
&lt;li>æ¨¡å‹çš„ç›®æ¨™æ˜¯å­¸æœƒã€Œæ ¹æ“šå‰é¢å…§å®¹ï¼Œé æ¸¬ä¸‹ä¸€å€‹ tokenã€ã€‚&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>è¼¸å…¥ï¼šè«‹ä»‹ç´¹ Transformerã€‚
æ¨¡å‹çœ‹åˆ°çš„å…§å®¹ï¼šè«‹ä»‹ç´¹ Transformerã€‚&amp;lt;æ¥è‘—æ˜¯ç”Ÿæˆçš„å›ç­”...&amp;gt;
&lt;/code>&lt;/pre>&lt;/li>
&lt;/ul>
&lt;h3 id="ä¸å¯èª¿åƒæ•¸ç”Ÿæˆå™¨é»‘ç®±parameter-inaccessible-generators">ä¸å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ï¼ˆé»‘ç®±ï¼ŒParameter-Inaccessible Generatorsï¼‰
&lt;/h3>&lt;p>ç„¡æ³•ç›´æ¥ä¿®æ”¹æ¨¡å‹æœ¬èº«ï¼Œä¸”é›£ä»¥é€²è¡Œå¾®èª¿ï¼Œå› æ­¤æ›´å´é‡æ–¼å„ªåŒ–æª¢ç´¢å’Œå¢å¼·çš„éç¨‹ã€‚å®ƒå€‘çš„ç›®æ¨™æ˜¯é€éç‚ºè¼¸å…¥ (prompts) æä¾›æ›´å„ªè³ªçš„çŸ¥è­˜ã€æŒ‡å°æˆ–ç¯„ä¾‹ä¾†å¢å¼· Generator çš„æ€§èƒ½ã€‚&lt;/p>
&lt;h2 id="å¢å¼·augmentation">å¢å¼·ï¼ˆAugmentationï¼‰
&lt;/h2>&lt;h3 id="input-layer-integration">Input-Layer Integration:
&lt;/h3>&lt;ul>
&lt;li>
&lt;p>&lt;strong>ä¸²è¯æ•´åˆ&lt;/strong>ï¼šå¦‚ In-Context RALM (Ram et al., 2023)ï¼Œå°‡åŸå§‹è¼¸å…¥èˆ‡æ‰€æœ‰æª¢ç´¢æ–‡ä»¶ä¸²è¯ç‚ºå–®ä¸€åºåˆ—è¼¸å…¥ç”Ÿæˆæ¨¡å‹ã€‚&lt;/p>
&lt;ul>
&lt;li>å•é¡Œï¼šè¼¸å…¥é•·åº¦æ˜“è¶…éæ¨¡å‹è™•ç†ä¸Šé™ï¼Œéœ€ç§»é™¤éƒ¨åˆ†è©å…ƒï¼Œå¯èƒ½å°è‡´è³‡è¨Šéºå¤±ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å¹³è¡Œæ•´åˆ&lt;/strong>ï¼šå¦‚ FID (Izacard and Grave, 2021b)ã€Atlasã€REPLUGï¼Œå°‡æ¯å€‹æª¢ç´¢æ–‡ä»¶ç¨ç«‹ç·¨ç¢¼ï¼Œåƒ…åœ¨å¾ŒçºŒæ­¥é©Ÿèšåˆçµæœã€‚&lt;/p>
&lt;ul>
&lt;li>å„ªé»ï¼šæ›´èƒ½æ“´å±•è‡³å¤§é‡ä¸Šä¸‹æ–‡ï¼Œæ¸›å°‘è³‡è¨Šä¸Ÿå¤±é¢¨éšªã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é€šå¸¸ï¼Œå¤§å¤šæ•¸åŸºæ–¼é»‘ç›’ç”Ÿæˆçš„ RAG æ–¹æ³•éƒ½æ¡ç”¨æ­¤æ³•ï¼Œå› ç‚ºç”Ÿæˆæ¨¡å‹çš„ä¸­é–“å±¤å’Œè¼¸å‡ºåˆ†ä½ˆéƒ½ç„¡æ³•å­˜å–ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="output-layer-integration">Output-Layer Integration:
&lt;/h3>&lt;p>ä¸€ç¨®å¾Œè™•ç† (post-hoc) çš„æª¢ç´¢å¢å¼·æ–¹å¼ï¼Œå®ƒä¸ç›´æ¥å¹²é ç”Ÿæˆæ¨¡å‹çš„å…§éƒ¨é‹ä½œæˆ–å…¶ç”Ÿæˆéç¨‹ï¼Œè€Œæ˜¯åœ¨æ¨¡å‹ç”¢ç”Ÿåˆæ­¥çµæœä¹‹å¾Œï¼Œæ‰å°‡æª¢ç´¢åˆ°çš„è³‡è¨Šèˆ‡é€™äº›çµæœé€²è¡Œçµåˆã€‚&lt;/p>
&lt;h3 id="intermediate-layer-integration">Intermediate-Layer Integration:
&lt;/h3>&lt;p>åœ¨ç”Ÿæˆæ¨¡å‹å…§éƒ¨çš„ä¸­é–“å±¤æ³¨å…¥æª¢ç´¢è³‡è¨Šï¼Œç›¸è¼ƒæ–¼è¼¸å…¥å±¤èˆ‡è¼¸å‡ºå±¤æ•´åˆï¼Œå±¬æ–¼ åŠåƒæ•¸å¼ï¼ˆSemi-parametricï¼‰ çš„å¼·åŒ–æ–¹å¼ï¼Œå…·æœ‰æ›´é«˜çš„è³‡è¨Šèåˆæ·±åº¦èˆ‡æ½›åŠ›ã€‚&lt;/p>
&lt;h3 id="34retrieval-augmentation-necessity-and-frequency">3.4.Retrieval Augmentation Necessity and Frequency
&lt;/h3>&lt;p>åŸºæ–¼ LLM çš„ç”Ÿæˆä¸­ï¼Œæª¢ç´¢æ“ä½œæ—¨åœ¨è£œå……çŸ¥è­˜ä»¥å¢å¼·ç”Ÿæˆã€‚å„˜ç®¡æª¢ç´¢å¢å¼·æ¨¡å‹å‰æ™¯å…‰æ˜ï¼Œä½†è‹¥ä¸åŠ å€åˆ†åœ°ä½¿ç”¨ä¸ç›¸é—œçš„æ®µè½é€²è¡Œå¢å¼·ï¼Œå¯èƒ½æœƒè¦†è“‹ LLM å·²æœ‰çš„æ­£ç¢ºçŸ¥è­˜ï¼Œå°è‡´éŒ¯èª¤å›æ‡‰ï¼Œç”šè‡³ä½¿å¹»è¦ºç‡ç¿»å€ã€‚å› æ­¤ï¼Œå°æ–¼æª¢ç´¢å¢å¼·å‹ LLM (RA-LLMs) ä¾†èªªï¼Œ&lt;strong>æº–ç¢ºå›æ†¶å…ˆé©—çŸ¥è­˜ä¸¦åƒ…åœ¨å¿…è¦æ™‚é¸æ“‡æ€§åœ°æ•´åˆæª¢ç´¢è³‡è¨Š&lt;/strong>è‡³é—œé‡è¦ï¼Œé€™æ˜¯å¯¦ç¾ç©©å¥ RA-LLMs çš„é—œéµã€‚&lt;/p>
&lt;h4 id="æª¢ç´¢å¿…è¦æ€§åˆ¤æ–·">æª¢ç´¢å¿…è¦æ€§åˆ¤æ–·
&lt;/h4>&lt;p>å¤§å¤šæ•¸æ–¹æ³•åŸºæ–¼ LLM çš„åˆæ­¥ç­”æ¡ˆæˆ–å…§éƒ¨æ¨ç†çµæœä¾†åˆ¤æ–·æ˜¯å¦éœ€è¦æª¢ç´¢ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç‰¹æ®Šæ¨™è¨˜æ§åˆ¶&lt;/strong>ï¼šå¦‚ Self-RAGï¼Œå¼•å…¥ç‰¹æ®Šæ¨™è¨˜è©•ä¼°æª¢ç´¢å¿…è¦æ€§ä¸¦æ§åˆ¶è¡Œç‚ºã€‚&lt;/li>
&lt;li>&lt;strong>è¿­ä»£æç¤ºæ±ºç­–&lt;/strong>ï¼šè¨­è¨ˆè¿­ä»£æç¤ºæ±ºå®šç”Ÿæˆä¸­æ˜¯å¦éœ€è¦é¡å¤–è³‡è¨Šã€‚&lt;/li>
&lt;li>&lt;strong>åŸºæ–¼ä¿¡è³´åº¦ (Logits Confidence)&lt;/strong>ï¼šå‚³çµ± RAG ä¸­é€éè©•ä¼°ç”Ÿæˆæ¨¡å‹è¼¸å‡ºçš„ logits ä¿¡è³´åº¦ä¾†åˆ¤æ–·ã€‚å¦‚ FLAREï¼Œç•¶ logits ä½æ–¼é–¾å€¼æ™‚å‹•æ…‹è§¸ç™¼ RAGã€‚&lt;/li>
&lt;li>&lt;strong>å”åŒæª¢æ¸¬&lt;/strong>ï¼šå¦‚ SlimPLMï¼Œåˆ©ç”¨è¼•é‡ç´šä»£ç†æ¨¡å‹ç”Ÿæˆã€Œå•Ÿç™¼å¼ç­”æ¡ˆã€æª¢æ¸¬ LLM ç¼ºå¤±çŸ¥è­˜ï¼Œä¸¦ç”¨æ–¼æŸ¥è©¢é‡å¯«ä»¥ä¿ƒé€²æª¢ç´¢ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="æª¢ç´¢é »ç‡-retrieval-frequency">æª¢ç´¢é »ç‡ (Retrieval Frequency)
&lt;/h4>&lt;p>æª¢ç´¢é »ç‡ï¼ˆæˆ–ç¨±æª¢ç´¢æ­¥é•·ï¼‰æ˜¯æ±ºå®šç”Ÿæˆéç¨‹ä¸­æª¢ç´¢ä½¿ç”¨ç¨‹åº¦çš„é‡è¦è¨­è¨ˆè€ƒé‡ï¼Œå½±éŸ¿æ¨¡å‹çš„æ•ˆç‡å’Œæœ‰æ•ˆæ€§ã€‚ç•¶ä¸è€ƒæ…®æª¢ç´¢å¿…è¦æ€§æ™‚ï¼Œæª¢ç´¢é »ç‡é€šå¸¸æ˜¯é å®šç¾©å’Œå›ºå®šçš„ï¼Œä¸»è¦æœ‰ä¸‰ç¨®è¨­å®šï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>ä¸€æ¬¡æ€§æª¢ç´¢ (One-time retrieval)&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ–¹å¼&lt;/strong>ï¼šåœ¨ç”Ÿæˆéç¨‹é–‹å§‹æ™‚åªèª¿ç”¨ä¸€æ¬¡æª¢ç´¢åŠŸèƒ½ï¼Œæª¢ç´¢æ‰€æœ‰æ‰€éœ€è³‡è¨Šï¼Œç„¶å¾Œæä¾›çµ¦ç”Ÿæˆæ¨¡å‹ã€‚&lt;/li>
&lt;li>&lt;strong>é©ç”¨å ´æ™¯&lt;/strong>ï¼šå¤–éƒ¨è³‡æ–™åº«è³‡è¨Šéœ€æ±‚å° LLM ä¾†èªªå¾ˆæ˜ç¢ºçš„æƒ…æ³ã€‚&lt;/li>
&lt;li>&lt;strong>é™åˆ¶&lt;/strong>ï¼šå°æ–¼éœ€è¦é•·ç¯‡è¼¸å‡ºçš„ä»»å‹™ï¼ˆå¦‚é–‹æ”¾åŸŸæ‘˜è¦ï¼‰ï¼Œé å…ˆæª¢ç´¢çš„æ–‡ä»¶å¯èƒ½ä¸è¶³ä»¥æ”¯æŒæ•´å€‹ç”Ÿæˆåºåˆ—ï¼Œéœ€è¦ç”Ÿæˆä¸­é€²è¡Œæª¢ç´¢æ“ä½œã€‚&lt;/li>
&lt;li>&lt;strong>ç¯„ä¾‹&lt;/strong>ï¼šREALMã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¯ N å€‹è©å…ƒæª¢ç´¢ (Every-n-token retrieval)&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ–¹å¼&lt;/strong>ï¼šåœ¨ç”Ÿæˆéç¨‹ä¸­æ¯éš” N å€‹è©å…ƒè§¸ç™¼ä¸€æ¬¡æª¢ç´¢ã€‚&lt;/li>
&lt;li>&lt;strong>é©ç”¨å ´æ™¯&lt;/strong>ï¼šéœ€è¦æŒçºŒè³‡è¨Šè£œå……çš„é•·ç¯‡ç”Ÿæˆä»»å‹™ã€‚&lt;/li>
&lt;li>&lt;strong>ç¯„ä¾‹&lt;/strong>ï¼šIn-Context RALMã€RETROã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>æ¯å€‹è©å…ƒæª¢ç´¢ (Every-token retrieval)&lt;/strong>ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ–¹å¼&lt;/strong>ï¼šåœ¨ç”Ÿæˆéç¨‹ä¸­ï¼Œç‚ºæ¯å€‹è©å…ƒçš„é æ¸¬éƒ½æª¢ç´¢è³‡è¨Šã€‚&lt;/li>
&lt;li>&lt;strong>é »ç‡&lt;/strong>ï¼šæœ€é »ç¹çš„æª¢ç´¢ç­–ç•¥ã€‚&lt;/li>
&lt;li>&lt;strong>ç¯„ä¾‹&lt;/strong>ï¼škNN-LMã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ¬Šè¡¡&lt;/strong>ï¼š
ç¸½é«”è€Œè¨€ï¼Œæª¢ç´¢é »ç‡å½±éŸ¿ RAG æ–¹æ³•çš„æœ‰æ•ˆæ€§å’Œæ•ˆç‡ã€‚æ›´é »ç¹çš„æª¢ç´¢é€šå¸¸å¸¶ä¾†æ›´å¥½çš„æ€§èƒ½ï¼Œä½†ä¹Ÿé¡¯è‘—å¢åŠ è¨ˆç®—æˆæœ¬ã€‚&lt;/p>
&lt;h2 id="ra-llms-è¨“ç·´ç­–ç•¥æ¦‚è¿°">RA-LLMs è¨“ç·´ç­–ç•¥æ¦‚è¿°
&lt;/h2>&lt;p>&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x4.png"
loading="lazy"
alt="RA-LLMs è¨“ç·´ç­–ç•¥ç¸½è¦½"
>&lt;br>
&lt;em>åœ– 3ï¼šRA-LLMs è¨“ç·´ç­–ç•¥ç¸½è¦½ï¼Œæ¶µè“‹å…è¨“ç·´èˆ‡éœ€è¨“ç·´æ–¹æ³•ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em>&lt;/p>
&lt;h3 id="å…è¨“ç·´æ–¹æ³•training-free">å…è¨“ç·´æ–¹æ³•ï¼ˆTraining-Freeï¼‰
&lt;/h3>&lt;h4 id="prompt-engineering-based-methods">Prompt Engineering-based Methods
&lt;/h4>&lt;p>å°‡æª¢ç´¢åˆ°çš„å¤–éƒ¨çŸ¥è­˜ï¼Œç›´æ¥æ•´åˆé€² LLM çš„æç¤ºï¼ˆPromptï¼‰ï¼Œä½œç‚ºä¸Šä¸‹æ–‡è¼”åŠ©æ¨¡å‹ç”Ÿæˆã€‚&lt;br>
èˆ‰ä¾‹ï¼ŒIn-Context RALM åœ¨ä¸æ”¹å‹• LLM åƒæ•¸çš„æƒ…æ³ä¸‹ï¼Œç›´æ¥å°‡æª¢ç´¢åˆ°çš„æ–‡ä»¶æ’å…¥æ–¼åŸå§‹æç¤ºä¹‹å‰ï¼Œå¢å¼·ç”Ÿæˆéç¨‹ã€‚IRCoT å‰‡äº¤éŒ¯é€²è¡Œ chain-of-thoughtï¼ˆCoTï¼‰ç”Ÿæˆèˆ‡çŸ¥è­˜æª¢ç´¢æ­¥é©Ÿï¼Œä½¿æ¯ä¸€æ­¥æ¨ç†éƒ½èƒ½æª¢ç´¢åˆ°æ›´ç›¸é—œçš„è³‡è¨Šã€‚GENREAD ä¸æ˜¯å¾å¤§å‹èªæ–™åº«æª¢ç´¢çŸ¥è­˜ï¼Œè€Œæ˜¯å…ˆè®“ LLM æ ¹æ“šæŸ¥è©¢ç”Ÿæˆä¸Šä¸‹æ–‡æ–‡ä»¶ï¼Œå†æ ¹æ“šé€™äº›ä¸Šä¸‹æ–‡èˆ‡å•é¡Œç”¢ç”Ÿç­”æ¡ˆã€‚SKR å‰‡å¼•å° LLM åˆ¤æ–·æ˜¯å¦èƒ½åƒ…ä¾é å…§éƒ¨çŸ¥è­˜å›ç­”å•é¡Œï¼Œè‹¥ä¸è¶³å†é¸æ“‡æ€§èª¿ç”¨æª¢ç´¢å™¨ï¼Œéˆæ´»çµåˆå…§å¤–éƒ¨çŸ¥è­˜ã€‚TOC é‡å°æ¨¡ç³Šå•é¡Œï¼Œå…ˆæª¢ç´¢ç›¸é—œçŸ¥è­˜ï¼Œä¸¦éè¿´å°‡å•é¡Œæ‹†è§£ç‚ºå¤šå€‹æ˜ç¢ºå­å•é¡Œï¼Œæœ€çµ‚èšåˆç”Ÿæˆé•·ç¯‡ç­”æ¡ˆã€‚&lt;/p>
&lt;ul>
&lt;li>ç‰¹é»ï¼š
&lt;ul>
&lt;li>ç„¡éœ€æ¨¡å‹è¨“ç·´&lt;/li>
&lt;li>é è¨­è¨ˆåˆç†çš„æç¤ºèˆ‡æª¢ç´¢æµç¨‹æå‡æ•ˆæœ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h4 id="retrieval-guided-token-generation-methods">Retrieval-Guided Token Generation Methods
&lt;/h4>&lt;p>é€éæª¢ç´¢çµæœä¾†èª¿æ•´ LLM çš„ Token é æ¸¬åˆ†å¸ƒï¼Œå½±éŸ¿æ¯ä¸€æ­¥çš„ç”Ÿæˆã€‚&lt;br>
èˆ‰ä¾‹ï¼Œä¾‹å¦‚ KNN-LMs æœƒæ ¹æ“šç•¶å‰æŸ¥è©¢å¾è³‡æ–™åº«æª¢ç´¢å‡º k å€‹æœ€ç›¸é—œçš„ä¸Šä¸‹æ–‡ï¼Œè¨ˆç®—é„°è¿‘åˆ†å¸ƒï¼Œä¸¦å°‡å…¶èˆ‡åŸæ¨¡å‹çš„è¼¸å‡ºåˆ†å¸ƒé€²è¡Œæ’å€¼æ ¡æ­£ï¼Œä»¥æå‡ç”Ÿæˆçµæœçš„æº–ç¢ºæ€§ã€‚Rest å‰‡ä»¥éåƒæ•¸æª¢ç´¢è³‡æ–™åº«å–ä»£å‚³çµ±çš„åƒæ•¸å¼è‰ç¨¿æ¨¡å‹ï¼Œæ ¹æ“šç•¶å‰ä¸Šä¸‹æ–‡æª¢ç´¢ç›¸é—œ tokenï¼Œè¼”åŠ©æ¨æ¸¬å¼ç”Ÿæˆï¼ˆspeculative decodingï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>ç‰¹é»ï¼š
&lt;ul>
&lt;li>ä¸æ›´æ”¹æ¨¡å‹æ¬Šé‡&lt;/li>
&lt;li>é€šå¸¸ä½œç‚ºå¾Œè™•ç†æˆ–æ¨æ¸¬æ€§ç”Ÿæˆçš„è¼”åŠ©&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>â€» é€™å…©é¡å…è¨“ç·´æ–¹æ³•ï¼Œåˆ†åˆ¥è‘—é‡æ–¼ï¼š&lt;/p>
&lt;ul>
&lt;li>æç¤ºå·¥ç¨‹ â€” èª¿æ•´è¼¸å…¥&lt;/li>
&lt;li>ç”Ÿæˆæ§åˆ¶ â€” èª¿æ•´è¼¸å‡ºéç¨‹&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="éœ€è¨“ç·´æ–¹æ³•training-based">éœ€è¨“ç·´æ–¹æ³•ï¼ˆTraining-Basedï¼‰
&lt;/h3>&lt;ol>
&lt;li>Independent Training&lt;br>
ç¨ç«‹è¨“ç·´æ–¹æ³•æœƒå°‡ RAG æµç¨‹ä¸­çš„æ¯å€‹çµ„ä»¶åˆ†é–‹ã€ç¨ç«‹åœ°é€²è¡Œè¨“ç·´ï¼Œé€™æ„å‘³è‘—åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œé€™å…©å€‹çµ„ä»¶ä¹‹é–“æ²’æœ‰ä»»ä½•äº¤äº’ä½œç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>ç›®çš„èˆ‡å„ªå‹¢ï¼š&lt;/strong>&lt;br>
ç›¸è¼ƒæ–¼ç„¡éœ€è¨“ç·´çš„æ–¹æ³•ï¼Œç¨ç«‹è¨“ç·´èƒ½æœ‰æ•ˆæå‡ RAG æ¨¡å‹çš„æ€§èƒ½ã€‚&lt;br>
1. è¨“ç·´ LLMs ä»¥æ›´å¥½åœ°åˆ©ç”¨æª¢ç´¢åˆ°çš„çŸ¥è­˜ã€‚&lt;br>
2. è¨“ç·´æª¢ç´¢å™¨ä»¥å½Œåˆè³‡è¨Šæª¢ç´¢èˆ‡èªè¨€ç”Ÿæˆä¹‹é–“çš„å·®è·ã€‚&lt;/p>
&lt;p>&lt;strong>æª¢ç´¢å™¨é¡å‹ï¼š&lt;/strong>
* ç¨€ç–æª¢ç´¢å™¨ (Sparse Retriever) ï¼š
é€™é¡æª¢ç´¢å™¨é€šå¸¸åˆ©ç”¨ç¨€ç–ç‰¹å¾µï¼Œä¾‹å¦‚è©é »ï¼Œä¾†è¡¨ç¤ºæ–‡ä»¶ï¼Œä¸¦æ ¹æ“šä»»å‹™ç‰¹å®šçš„æŒ‡æ¨™ï¼ˆå¦‚ TF-IDF å’Œ BM25ï¼‰è¨ˆç®—ç›¸é—œæ€§åˆ†æ•¸ ã€‚&lt;/p>
&lt;pre>&lt;code>* å¯†é›†æª¢ç´¢å™¨ (Dense Retriever) ï¼š
å¯†é›†æª¢ç´¢å™¨å‰‡æ¡ç”¨æ·±åº¦ç¥ç¶“ç¶²çµ¡å°‡æŸ¥è©¢å’Œæ–‡ä»¶ç·¨ç¢¼æˆå¯†é›†è¡¨ç¤º (dense representations)ã€‚ç„¶å¾Œï¼Œé€šå¸¸ä½¿ç”¨å…§ç©è¨ˆç®—ç›¸é—œæ€§åˆ†æ•¸ä¸¦æª¢ç´¢ç›¸é—œçš„å¤–éƒ¨çŸ¥è­˜ã€‚åºåˆ—è¨“ç·´é€éå”èª¿è¨“ç·´çš„æ–¹å¼ï¼Œå°‹æ±‚æ›´æ·±å±¤æ¬¡çš„æ•´åˆæ•ˆæœã€‚
&lt;/code>&lt;/pre>
&lt;ol start="2">
&lt;li>
&lt;p>Sequential Training&lt;br>
åºåˆ—è¨“ç·´æ–¹æ³•å‰‡æ¡å–åˆ†éšæ®µçš„è¨“ç·´æ–¹å¼ã€‚é¦–å…ˆè¨“ç·´ä¸€å€‹æ¨¡çµ„ï¼ˆä¾‹å¦‚æª¢ç´¢å™¨ï¼‰ï¼Œç„¶å¾Œå†åˆ©ç”¨é€™å€‹è¨“ç·´å¥½çš„æ¨¡çµ„å»æŒ‡å°å¦ä¸€å€‹æ¨¡çµ„ï¼ˆä¾‹å¦‚ç”Ÿæˆå™¨ï¼‰çš„èª¿æ•´éç¨‹ï¼Œç›®çš„åœ¨æ”¹å–„æ¨¡çµ„é–“çš„å”åŒä½œç”¨ã€‚&lt;/p>
&lt;p>&lt;strong>è¨“ç·´æµç¨‹ï¼š&lt;/strong> åºåˆ—è¨“ç·´é€šå¸¸åˆ†ç‚ºå…©å€‹éšæ®µ&lt;/p>
&lt;ol>
&lt;li>**åˆå§‹é è¨“ç·´ï¼š**é¦–å…ˆå°æª¢ç´¢å™¨æˆ–ç”Ÿæˆå™¨ä¸­çš„ä¸€å€‹æ¨¡çµ„é€²è¡Œç¨ç«‹çš„é è¨“ç·´ã€‚&lt;/li>
&lt;li>**å›ºå®šèˆ‡è¨“ç·´ï¼š**ä¸€æ—¦å…¶ä¸­ä¸€å€‹æ¨¡çµ„å®Œæˆé è¨“ç·´ï¼Œå®ƒå°±æœƒè¢«å›ºå®šï¼ˆfreezeï¼‰ä¸‹ä¾†ï¼Œè€Œå¦ä¸€å€‹æ¨¡çµ„å‰‡åœ¨å…¶è¼”åŠ©ä¸‹é€²è¡Œè¨“ç·´ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>å„ªå‹¢èˆ‡éˆæ´»æ€§ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>å”åŒå¢ç›Šï¼šèˆ‡ç¨ç«‹è¨“ç·´ç›¸æ¯”ï¼Œåºåˆ—è¨“ç·´çš„å„ªå‹¢åœ¨æ–¼å¯è¨“ç·´çš„æ¨¡çµ„èƒ½å¤ å—ç›Šæ–¼å›ºå®šæ¨¡çµ„çš„å¼•å°å’Œå”åŠ©ï¼Œå¾è€Œæ›´å¥½åœ°é©æ‡‰å½¼æ­¤ã€‚&lt;/li>
&lt;li>åˆ©ç”¨ç¾æœ‰æ¨¡å‹ï¼šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¨±å¤šå·²ç¶“é è¨“ç·´å¥½çš„å¼·å¤§æ¨¡å‹ï¼ˆä¾‹å¦‚ BERTã€CLIPã€T5ï¼‰å¯ä»¥ç›´æ¥ä½œç‚ºå›ºå®šæ¨¡çµ„ä½¿ç”¨ï¼Œå¾è€Œçœç•¥äº†åˆå§‹çš„é è¨“ç·´æ­¥é©Ÿï¼Œé€²ä¸€æ­¥æé«˜äº†æ•ˆç‡ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>æ ¹æ“šæª¢ç´¢å™¨å’Œç”Ÿæˆå™¨ä¹‹é–“çš„è¨“ç·´é †åºï¼Œåºåˆ—è¨“ç·´å¯åˆ†ç‚ºå…©å¤§é¡ï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æª¢ç´¢å™¨å„ªå…ˆ (Retriever First)ï¼š&lt;br>
æ­¤é¡æ–¹æ³•é¦–å…ˆè¨“ç·´æª¢ç´¢å™¨ï¼Œç„¶å¾Œå°‡å…¶å›ºå®šï¼Œå†è¨“ç·´ç”Ÿæˆå™¨ã€‚&lt;/li>
&lt;li>LLMs å„ªå…ˆ (LLMs First)ï¼š&lt;br>
æ­¤é¡æ–¹æ³•å‰‡ç›¸åï¼Œå…ˆè¨“ç·´ LLMï¼Œå†å°‡å…¶å›ºå®šï¼Œç„¶å¾Œè¨“ç·´æª¢ç´¢å™¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Joint Training&lt;br>
è¯åˆè¨“ç·´æ–¹æ³•å‰‡æ˜¯åŒæ™‚è¨“ç·´æª¢ç´¢å™¨å’Œç”Ÿæˆå™¨ï¼Œé€™ç¨®æ–¹å¼æ˜¯ç‚ºäº†è®“å…©å€‹æ¨¡çµ„åœ¨è¨“ç·´éç¨‹ä¸­ç›¸äº’å”èª¿ã€å…±åŒé€²æ­¥ã€‚&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>LangChain è¨˜æ†¶å‹æª¢ç´¢å•ç­”ï¼šã€Šå°ç‹å­ã€‹æ–‡æœ¬äº’å‹•å¯¦è¸</title><link>https://Dandelionlibra.github.io/post/langchain/retrieverqa-2/</link><pubDate>Fri, 18 Jul 2025 08:39:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/retrieverqa-2/</guid><description>&lt;h2 id="ä»¥-langchain-è¨˜æ†¶å‹æª¢ç´¢å•ç­”å¯¦ç¾å°ç‹å­æ–‡æœ¬äº’å‹•">ä»¥ LangChain è¨˜æ†¶å‹æª¢ç´¢å•ç­”å¯¦ç¾ã€Šå°ç‹å­ã€‹æ–‡æœ¬äº’å‹•
&lt;/h2>&lt;p>æœ¬æ–‡ä»‹ç´¹å¦‚ä½•åˆ©ç”¨ LangChain æ¡†æ¶ï¼Œçµåˆ Ollama Embeddingsã€ChromaDB èˆ‡è¨˜æ†¶å‹å•ç­”éˆï¼ˆRunnableWithMessageHistoryï¼‰ï¼Œå¯¦ç¾èƒ½è¨˜ä½ä¸Šä¸‹æ–‡çš„äº’å‹•å¼æª¢ç´¢å•ç­”ã€‚ä»¥ã€Šå°ç‹å­ã€‹æ–‡æœ¬ç‚ºä¾‹ï¼Œå±•ç¤ºè¨˜æ†¶å‹å•ç­”èˆ‡ä¸€èˆ¬æª¢ç´¢å•ç­”çš„å·®ç•°ã€‚&lt;/p>
&lt;h3 id="ä¸€è¨˜æ†¶å‹å•ç­”éˆè¨­è¨ˆ">ä¸€ã€è¨˜æ†¶å‹å•ç­”éˆè¨­è¨ˆ
&lt;/h3>&lt;p>LangChain æä¾› &lt;code>RunnableWithMessageHistory&lt;/code>ï¼Œå¯æ ¹æ“š session_id ä¿å­˜å°è©±æ­·ç¨‹ï¼Œè®“æ¨¡å‹å…·å‚™ã€Œè¨˜æ†¶ã€åŠŸèƒ½ã€‚æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>å»ºç«‹ InMemoryHistory é¡&lt;/strong>ï¼šç”¨æ–¼å„²å­˜æ¯å€‹ session çš„è¨Šæ¯ã€‚&lt;/li>
&lt;li>&lt;strong>è¼‰å…¥ PDF ä¸¦åˆ†å‰²æ–‡æœ¬&lt;/strong>ï¼šä½¿ç”¨ &lt;code>PyPDFLoader&lt;/code> å’Œ &lt;code>RecursiveCharacterTextSplitter&lt;/code>ã€‚&lt;/li>
&lt;li>&lt;strong>å»ºç«‹å‘é‡è³‡æ–™åº«&lt;/strong>ï¼šç”¨ Ollama Embeddings å°‡æ–‡æœ¬è½‰å‘é‡ï¼Œå­˜å…¥ ChromaDBã€‚&lt;/li>
&lt;li>&lt;strong>è¨­è¨ˆ Prompt èˆ‡ Chain&lt;/strong>ï¼šçµåˆæ­·å²è¨Šæ¯èˆ‡æå•ï¼Œä¸²æ¥ LLMã€‚&lt;/li>
&lt;li>&lt;strong>å•Ÿå‹•è¨˜æ†¶å‹å•ç­”éˆ&lt;/strong>ï¼šæ¯æ¬¡æå•éƒ½èƒ½ä¿ç•™ä¸Šä¸‹æ–‡ï¼Œå¯¦ç¾å¤šè¼ªäº’å‹•ã€‚&lt;/li>
&lt;/ol>
&lt;h4 id="ä¸»è¦ç¨‹å¼ç‰‡æ®µ">ä¸»è¦ç¨‹å¼ç‰‡æ®µ
&lt;/h4>&lt;p>å®Œæ•´ç¨‹å¼ç¢¼è«‹åƒè€ƒï¼š&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/example/LangChain_memory_ask_via_pdf.ipynb" target="_blank" rel="noopener"
>GitHub ç¯„ä¾‹ç¨‹å¼&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å»ºç«‹è¨˜æ†¶ç®¡ç†å™¨&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">InMemoryHistory&lt;/span>(BaseChatMessageHistory, BaseModel):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messages: list[BaseMessage] &lt;span style="color:#f92672">=&lt;/span> Field(default_factory&lt;span style="color:#f92672">=&lt;/span>list)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">add_messages&lt;/span>(self, messages: list[BaseMessage]) &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>messages&lt;span style="color:#f92672">.&lt;/span>extend(messages)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">clear&lt;/span>(self) &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">None&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> self&lt;span style="color:#f92672">.&lt;/span>messages &lt;span style="color:#f92672">=&lt;/span> []
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>store &lt;span style="color:#f92672">=&lt;/span> {}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">get_by_session_id&lt;/span>(session_id: str) &lt;span style="color:#f92672">-&amp;gt;&lt;/span> BaseChatMessageHistory:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> session_id &lt;span style="color:#f92672">not&lt;/span> &lt;span style="color:#f92672">in&lt;/span> store:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> store[session_id] &lt;span style="color:#f92672">=&lt;/span> InMemoryHistory()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> store[session_id]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å•Ÿå‹•è¨˜æ†¶å‹å•ç­”éˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chain_with_history &lt;span style="color:#f92672">=&lt;/span> RunnableWithMessageHistory(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> chain,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> get_by_session_id,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_messages_key&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;question&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> history_messages_key&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;history&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="äºŒäº’å‹•ç¯„ä¾‹">äºŒã€äº’å‹•ç¯„ä¾‹
&lt;/h3>&lt;h4 id="å•ç­”ä¸€ä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å—">å•ç­”ä¸€ï¼šä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å—ï¼Ÿ
&lt;/h4>&lt;p>æ¨¡å‹å›ç­”ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æˆ‘çœ‹éã€Šå°ç‹å­ã€‹ï¼é€™æ˜¯å€‹éå¸¸è‘—åçš„å°èªªï¼Œä½œè€…æ˜¯å®‰æ‰˜ç“¦å…§Â·å¾·Â·è–-åŸƒå…‹çµ®ä½©é‡Œã€‚æ•…äº‹å……æ»¿å“²ç†èˆ‡å¯“æ„ï¼Œè®“äººæ€è€ƒç”Ÿå‘½ã€æ„›æƒ…å’Œå‹èª¼ã€‚&lt;/p>&lt;/blockquote>
&lt;h4 id="å•ç­”äºŒå•Ÿè’™äº†ä½ ä»€éº¼">å•ç­”äºŒï¼šå•Ÿè’™äº†ä½ ä»€éº¼ï¼Ÿ
&lt;/h4>&lt;p>æ¨¡å‹å›ç­”ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å°ç‹å­å’Œé€™å€‹æ•…äº‹éƒ½å•Ÿè’™äº†æˆ‘å°ç”Ÿå‘½ã€æ„›æƒ…å’Œå‹èª¼çš„çœ‹æ³•ã€‚å®ƒæ•™æœƒæˆ‘è¦çæƒœç”Ÿå‘½ã€é—œå¿ƒä»–äººå’Œè¿½æ±‚å¤¢æƒ³ã€‚&lt;/p>&lt;/blockquote>
&lt;h4 id="å•ç­”ä¸‰ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äºº">å•ç­”ä¸‰ï¼šä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ
&lt;/h4>&lt;p>æ¨¡å‹å›ç­”ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å°ç‹å­æ˜¯ä¸€å€‹ç¨ç‰¹ã€æ•æ„Ÿå’Œæµªæ¼«çš„å¹´è¼•äººã€‚ä»–èƒ½çœ‹åˆ°ä¸–ç•Œçš„ç¾éº—å’Œåƒ¹å€¼ï¼Œé¡˜æ„ç‚ºä¹‹ä»˜å‡ºåŠªåŠ›ï¼Œä½†ä¹Ÿæœ‰äº›ç¼ºä¹å‹‡æ°£æ‰¿èªè‡ªå·±çš„æƒ…æ„Ÿã€‚&lt;/p>&lt;/blockquote>
&lt;h4 id="å•ç­”å››çºŒå¯«ç¬¬äºŒéƒ¨å°ç‹å­">å•ç­”å››ï¼šçºŒå¯«ç¬¬äºŒéƒ¨å°ç‹å­
&lt;/h4>&lt;p>æ¨¡å‹å›ç­”ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æ ¹æ“šå°ç‹å­çš„æ•…äº‹ï¼Œæˆ‘å€‘å¯ä»¥ç¹¼çºŒä»–çš„å†’éšªæ—…ç¨‹ã€‚ä»–æƒ³æ¢ç´¢æ›´å¤§çš„ä¸–ç•Œï¼Œæ²¿é€”é‡åˆ°è¨±å¤šæ–°å¥‡çš„ç”Ÿç‰©å’Œæ™¯è‰²ï¼Œå°æ¯ä»¶äº‹éƒ½å……æ»¿å¥½å¥‡å’Œèˆˆè¶£ã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="ä¸‰è¨˜æ†¶å‹å•ç­”-vs-ä¸€èˆ¬æª¢ç´¢å•ç­”">ä¸‰ã€è¨˜æ†¶å‹å•ç­” VS ä¸€èˆ¬æª¢ç´¢å•ç­”
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>è¨˜æ†¶å‹å•ç­”&lt;/strong>ï¼šèƒ½ä¿ç•™ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè¼ªäº’å‹•ï¼Œå›ç­”æ›´è²¼åˆå°è©±è„ˆçµ¡ã€‚&lt;/li>
&lt;li>&lt;strong>ä¸€èˆ¬æª¢ç´¢å•ç­”&lt;/strong>ï¼šæ¯æ¬¡æå•ç¨ç«‹ï¼Œç„¡æ³•è¨˜ä½å‰æ–‡ï¼Œå›ç­”è¼ƒç‚ºç‰‡æ®µã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="ä¸€èˆ¬æª¢ç´¢å•ç­”ç¯„ä¾‹">ä¸€èˆ¬æª¢ç´¢å•ç­”ç¯„ä¾‹
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>qa_chain &lt;span style="color:#f92672">=&lt;/span> RetrievalQA&lt;span style="color:#f92672">.&lt;/span>from_chain_type(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> llm&lt;span style="color:#f92672">=&lt;/span>ollama_llm,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> retriever&lt;span style="color:#f92672">=&lt;/span>vector_db&lt;span style="color:#f92672">.&lt;/span>as_retriever(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qa_chain&lt;span style="color:#f92672">.&lt;/span>invoke(&lt;span style="color:#e6db74">&amp;#39;ä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å˜›ï¼Ÿ&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å›ç­”ï¼šæ˜¯çš„ï¼Œæˆ‘çœ‹éã€Šå°ç‹å­ã€‹ã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å››ç¸½çµ">å››ã€ç¸½çµ
&lt;/h3>&lt;p>çµåˆ LangChain è¨˜æ†¶å‹å•ç­”éˆï¼Œå¯é‡å°æ–‡æœ¬é€²è¡Œå¤šè¼ªäº’å‹•ï¼Œæ¨¡å‹èƒ½è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œå›ç­”æ›´è‡ªç„¶ä¸”å…·å»¶çºŒæ€§ã€‚é©åˆç”¨æ–¼æ·±å…¥æ–‡æœ¬æ¢ç´¢ã€æ•…äº‹çºŒå¯«ç­‰å ´æ™¯ã€‚&lt;/p>
&lt;h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://python.langchain.com/api_reference/core/runnables/langchain_core.runnables.history.RunnableWithMessageHistory.html" target="_blank" rel="noopener"
>LangChain RunnableWithMessageHistory å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://dandelionlibra.github.io/post/langchain/retrieverqa-1/" target="_blank" rel="noopener"
>LangChain æª¢ç´¢å•ç­”åŸºç¤ç¯‡&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>ä½¿ç”¨ Langchain æ¡†æ¶é€²è¡Œæª¢ç´¢æå•</title><link>https://Dandelionlibra.github.io/post/langchain/retrieverqa-1/</link><pubDate>Fri, 18 Jul 2025 02:59:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/retrieverqa-1/</guid><description>&lt;h2 id="ç¨‹å¼é‹è¡Œè©³ç´°æ­¥é©Ÿ">ç¨‹å¼é‹è¡Œè©³ç´°æ­¥é©Ÿ
&lt;/h2>&lt;p>ä»¥ä¸‹ä»¥ Jupyter Notebook æ ¼å¼ï¼Œè¨˜éŒ„å¦‚ä½•ä½¿ç”¨ LangChain æ¡†æ¶çµåˆ Ollama Embeddings èˆ‡ ChromaDBï¼Œå¯¦ç¾ PDF æ–‡ä»¶çš„æª¢ç´¢å¼å•ç­”ã€‚&lt;br>
è©³ç´°ç¨‹å¼åƒè€ƒï¼š&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/example/LangChain_ask_via_pdf.ipynb" target="_blank" rel="noopener"
>GitHub ç¯„ä¾‹ç¨‹å¼&lt;/a>&lt;/p>
&lt;h3 id="1-è¼‰å…¥å¿…è¦å¥—ä»¶èˆ‡åˆå§‹åŒ–-embedding-æ¨¡å‹">1. è¼‰å…¥å¿…è¦å¥—ä»¶èˆ‡åˆå§‹åŒ– Embedding æ¨¡å‹
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_community.document_loaders &lt;span style="color:#f92672">import&lt;/span> PyPDFLoader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_text_splitters &lt;span style="color:#f92672">import&lt;/span> RecursiveCharacterTextSplitter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaEmbeddings
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_chroma &lt;span style="color:#f92672">import&lt;/span> Chroma
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># åˆå§‹åŒ– Ollama Embeddings&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>embeddings_model &lt;span style="color:#f92672">=&lt;/span> OllamaEmbeddings(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base_url&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;http://dandelion-ollama-1:11434&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;bge-m3:567m&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="2-è¼‰å…¥-pdf-æ–‡ä»¶ä¸¦åˆ†å‰²æ–‡æœ¬">2. è¼‰å…¥ PDF æ–‡ä»¶ä¸¦åˆ†å‰²æ–‡æœ¬
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¼‰å…¥ PDF&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>loader &lt;span style="color:#f92672">=&lt;/span> PyPDFLoader(&lt;span style="color:#e6db74">&amp;#39;./data/PDF_file.pdf&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docs &lt;span style="color:#f92672">=&lt;/span> loader&lt;span style="color:#f92672">.&lt;/span>load_and_split()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¨­å®šåˆ†æ®µåƒæ•¸&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chunk_size &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">256&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chunk_overlap &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">128&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>text_splitter &lt;span style="color:#f92672">=&lt;/span> RecursiveCharacterTextSplitter(chunk_size&lt;span style="color:#f92672">=&lt;/span>chunk_size, chunk_overlap&lt;span style="color:#f92672">=&lt;/span>chunk_overlap)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>documents &lt;span style="color:#f92672">=&lt;/span> text_splitter&lt;span style="color:#f92672">.&lt;/span>split_documents(docs)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="3-å»ºç«‹-chroma-å‘é‡è³‡æ–™åº«">3. å»ºç«‹ Chroma å‘é‡è³‡æ–™åº«
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>db &lt;span style="color:#f92672">=&lt;/span> Chroma&lt;span style="color:#f92672">.&lt;/span>from_documents(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> documents,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> embedding&lt;span style="color:#f92672">=&lt;/span>embeddings_model,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> persist_directory&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;./story-db&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="4-å•Ÿå‹•æª¢ç´¢å¼å•ç­”éˆ-retrievalqa-chain">4. å•Ÿå‹•æª¢ç´¢å¼å•ç­”éˆ (RetrievalQA Chain)
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.chains &lt;span style="color:#f92672">import&lt;/span> RetrievalQA
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ollama_llm &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base_url&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;http://dandelion-ollama-1:11434&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> temperature&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">0.0&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> num_predict&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">512&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>qa_chain &lt;span style="color:#f92672">=&lt;/span> RetrievalQA&lt;span style="color:#f92672">.&lt;/span>from_chain_type(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> llm&lt;span style="color:#f92672">=&lt;/span>ollama_llm,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> retriever&lt;span style="color:#f92672">=&lt;/span>db&lt;span style="color:#f92672">.&lt;/span>as_retriever(),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="5-å•ç­”ç¯„ä¾‹åŠæ¨¡å‹å›ç­”">5. å•ç­”ç¯„ä¾‹åŠæ¨¡å‹å›ç­”
&lt;/h3>&lt;p>ä»¥ä¸‹åƒ…åˆ—å‡ºéƒ¨åˆ†å•ç­”ç¯„ä¾‹ï¼Œå…¶é¤˜å¯è‡ªè¡Œå˜—è©¦ï¼š&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>query &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ç«ç‘°æ˜¯èª°ï¼Ÿ&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>result &lt;span style="color:#f92672">=&lt;/span> qa_chain&lt;span style="color:#f92672">.&lt;/span>invoke(query)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(result)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>æ¨¡å‹å›ç­”ï¼š&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code>{&amp;#39;query&amp;#39;: &amp;#39;ç«ç‘°æ˜¯èª°ï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;ç«ç‘°æ˜¯å°ç‹å­çš„ç«ç‘°èŠ±ï¼Œé‚„æœ‰åœ’ä¸­å…¶ä»–äº”åƒæœµç«ç‘°èŠ±ï¼ˆä½†å°ç‹å­çš„ç«ç‘°èŠ±æ˜¯ç¨ä¸€ç„¡äºŒçš„ï¼‰ã€‚&amp;#39;}
&lt;/code>&lt;/pre>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>qa_chain&lt;span style="color:#f92672">.&lt;/span>invoke(&lt;span style="color:#e6db74">&amp;#39;å°ç‹å­çš„ä¾†æ­·æ˜¯ä»€ï¼Ÿ&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>æ¨¡å‹å›ç­”ï¼š&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code>{&amp;#39;query&amp;#39;: &amp;#39;å°ç‹å­çš„ä¾†æ­·æ˜¯ä»€ï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;å°ç‹å­æ‰€ä¾†è‡ªçš„é‚£å€‹æ˜Ÿçƒæ˜¯å°è¡Œæ˜ŸB612ã€‚&amp;#39;}
&lt;/code>&lt;/pre>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>qa_chain&lt;span style="color:#f92672">.&lt;/span>invoke(&lt;span style="color:#e6db74">&amp;#39;ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>æ¨¡å‹å›ç­”ï¼š&lt;/strong>&lt;/p>
&lt;pre tabindex="0">&lt;code>{&amp;#39;query&amp;#39;: &amp;#39;ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;æ ¹æ“šæ–‡ä¸­æè¿°ï¼Œå°ç‹å­çš„æ€§æ ¼å¯ä»¥çœ‹å‡ºä¾†ã€‚ä»–ä¼¼ä¹æ˜¯ä¸€å€‹æ•æ„Ÿã€æµªæ¼«ã€ç¨ç«‹çš„å¹´è¼•äººã€‚ä»–å°ä»–æ‰€é‡åˆ°çš„é™Œç”Ÿäººçš„è©•åƒ¹å¾ˆç´°è‡´ï¼Œèƒ½å¤ çœ‹ç©¿åˆ¥äººçš„çœŸå¯¦é¢ç›®ã€‚ä»–ä¹Ÿé¡¯ç¤ºå‡ºå°è‡ªç”±å’Œè‡ªä¸»çš„æ¸´æœ›ã€‚&amp;#39;}
&lt;/code>&lt;/pre>&lt;hr>
&lt;blockquote>
&lt;p>æ›´å¤šå•é¡Œå¯ä¾æ“šæ–‡æœ¬å…§å®¹è‡ªç”±ç™¼æ®ï¼Œæ¢ç´¢ä¸åŒç­”æ¡ˆã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="ç­†è¨˜é‡é»">ç­†è¨˜é‡é»
&lt;/h3>&lt;ul>
&lt;li>é€é &lt;code>PyPDFLoader&lt;/code> è®€å– PDFï¼Œä¸¦ç”¨ &lt;code>RecursiveCharacterTextSplitter&lt;/code> åˆ†å‰²æ–‡æœ¬ï¼Œåˆ©æ–¼å¾ŒçºŒæª¢ç´¢ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ Ollama Embeddings å°‡æ–‡æœ¬è½‰ç‚ºå‘é‡ï¼Œå­˜å…¥ ChromaDBã€‚&lt;/li>
&lt;li>çµåˆ Ollama LLM èˆ‡ RetrievalQA Chainï¼Œå¯¦ç¾è‡ªç„¶èªè¨€å•ç­”ã€‚&lt;/li>
&lt;li>å¯é‡å°æ–‡æœ¬å…§å®¹é€²è¡Œå¤šæ¨£åŒ–æå•ï¼Œå¿«é€Ÿç²å¾—ç­”æ¡ˆã€‚&lt;/li>
&lt;/ul></description></item><item><title>ä½¿ç”¨ Docker å¿«é€Ÿå»ºç«‹ Jupyter Notebook ç’°å¢ƒæ•™å­¸</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/</link><pubDate>Thu, 17 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±">å…§å®¹å¤§ç¶±
&lt;/h2>&lt;ol>
&lt;li>ç‚ºä»€éº¼ç”¨ Docker å»ºç«‹ Jupyter Notebookï¼Ÿ&lt;/li>
&lt;li>å®‰è£ Docker
&lt;ul>
&lt;li>Linux&lt;/li>
&lt;li>Mac&lt;/li>
&lt;li>Windows&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¸‹è¼‰èˆ‡åŸ·è¡Œ Jupyter Notebook Docker æ˜ åƒæª”&lt;/li>
&lt;li>è¨­å®š Notebook å­˜å–èˆ‡è³‡æ–™æ›è¼‰&lt;/li>
&lt;li>ä½¿ç”¨ GPU&lt;/li>
&lt;li>åƒè€ƒè³‡æ–™&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="1-ç‚ºä»€éº¼ç”¨-docker-å»ºç«‹-jupyter-notebook">1. ç‚ºä»€éº¼ç”¨ Docker å»ºç«‹ Jupyter Notebookï¼Ÿ
&lt;/h2>&lt;p>Docker å¯è®“ä½ å¿«é€Ÿå»ºç«‹éš”é›¢çš„é–‹ç™¼ç’°å¢ƒï¼Œé¿å…æœ¬æ©Ÿå®‰è£è¡çªã€‚Jupyter Notebook æ˜¯è³‡æ–™ç§‘å­¸å¸¸ç”¨çš„äº’å‹•å¼é–‹ç™¼å·¥å…·ï¼Œé€é Docker å¯è¼•é¬†éƒ¨ç½²ã€ç§»æ¤èˆ‡åˆ†äº«ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="2-å®‰è£-docker">2. å®‰è£ Docker
&lt;/h2>&lt;h3 id="linux">Linux
&lt;/h3>&lt;p>å¤§å¤šæ•¸ Linux ç™¼è¡Œç‰ˆå¯é€éå¥—ä»¶ç®¡ç†å™¨å®‰è£ Dockerï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ›´æ–°å¥—ä»¶æ¸…å–®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å®‰è£ Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install docker.io
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å•Ÿå‹• Docker æœå‹™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl start docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl enable docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mac">Mac
&lt;/h3>&lt;p>å‰å¾€ &lt;a class="link" href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener"
>Docker Desktop for Mac&lt;/a> ä¸‹è¼‰ä¸¦å®‰è£ã€‚&lt;/p>
&lt;h3 id="windows">Windows
&lt;/h3>&lt;p>å‰å¾€ &lt;a class="link" href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener"
>Docker Desktop for Windows&lt;/a> ä¸‹è¼‰ä¸¦å®‰è£ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="3-ä¸‹è¼‰èˆ‡åŸ·è¡Œ-jupyter-notebook-docker-æ˜ åƒæª”">3. ä¸‹è¼‰èˆ‡åŸ·è¡Œ Jupyter Notebook Docker æ˜ åƒæª”
&lt;/h2>&lt;p>å®˜æ–¹æ˜ åƒæª”æ¨è–¦ä½¿ç”¨ &lt;a class="link" href="https://hub.docker.com/r/jupyter/base-notebook" target="_blank" rel="noopener"
>&lt;code>jupyter/base-notebook&lt;/code>&lt;/a> æˆ– &lt;a class="link" href="https://hub.docker.com/r/jupyter/scipy-notebook" target="_blank" rel="noopener"
>&lt;code>jupyter/scipy-notebook&lt;/code>&lt;/a>ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>æ‹‰å–æ˜ åƒæª”&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker pull jupyter/base-notebook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>å»ºç«‹å®¹å™¨&lt;br>
&lt;code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]&lt;/code>&lt;/p>
&lt;p>å•Ÿå‹•å®¹å™¨ä¸¦é–‹å•Ÿæœ¬æ©Ÿ 8888 ç«¯å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -p 8888:8888 jupyter/base-notebook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å•Ÿå‹•å¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºä¸€çµ„ tokenï¼Œè¤‡è£½ç¶²å€ï¼ˆå¦‚ &lt;code>http://127.0.0.1:8888/?token=...&lt;/code>ï¼‰åœ¨ç€è¦½å™¨é–‹å•Ÿå³å¯é€²å…¥ Jupyter Notebookã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>â€» &lt;a class="link" href="https://hub.docker.com" target="_blank" rel="noopener"
>&lt;code>DockerHub&lt;/code>&lt;/a>: DockerHub æ˜¯å®˜æ–¹çš„ Docker æ˜ åƒæª”é›†ä¸­å¹³å°ï¼Œæä¾›å„ç¨®æ‡‰ç”¨ç¨‹å¼çš„æ˜ åƒæª”ä¸‹è¼‰èˆ‡åˆ†äº«ï¼Œå¯ä»¥åœ¨é€™è£¡æœå°‹ã€å–å¾—æ˜ åƒæª”ï¼Œå¿«é€Ÿéƒ¨ç½²ç’°å¢ƒã€‚&lt;/p>
&lt;hr>
&lt;h2 id="4-è¨­å®š-notebook-å­˜å–èˆ‡è³‡æ–™æ›è¼‰">4. è¨­å®š Notebook å­˜å–èˆ‡è³‡æ–™æ›è¼‰
&lt;/h2>&lt;p>è‹¥è¦å°‡æœ¬æ©Ÿè³‡æ–™å¤¾æ›è¼‰åˆ°å®¹å™¨ï¼Œæ–¹ä¾¿å­˜å–èˆ‡ä¿å­˜ notebook æª”æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -p 8888:8888 -v /your/local/path:/home/jovyan/work --name my-jupyter jupyter/base-notebook
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-p&lt;/code>: Assigns the internal port to the external port&lt;/li>
&lt;li>&lt;code>-v&lt;/code>: Assigns a local directory to a container directory (mounts a volume)&lt;/li>
&lt;li>&lt;code>/your/local/path&lt;/code>ï¼šæœ¬æ©Ÿè³‡æ–™å¤¾è·¯å¾‘&lt;/li>
&lt;li>&lt;code>/home/jovyan/work&lt;/code>ï¼šå®¹å™¨å…§é è¨­å·¥ä½œç›®éŒ„&lt;/li>
&lt;li>&lt;code>--name&lt;/code>: Sets the container name; otherwise, a random name will be assigned&lt;/li>
&lt;/ul>
&lt;p>å¯è‡ªè¨‚å¯†ç¢¼æˆ– tokenï¼Œè©³è¦‹ &lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/common.html#docker-options" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡ä»¶&lt;/a>ã€‚&lt;/p>
&lt;h2 id="5-ä½¿ç”¨-gpu">5. ä½¿ç”¨ GPU
&lt;/h2>&lt;p>è‹¥ä½ çš„ä¸»æ©Ÿæ”¯æ´ NVIDIA GPUï¼Œå¯åˆ©ç”¨ &lt;a class="link" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html" target="_blank" rel="noopener"
>NVIDIA Container Toolkit&lt;/a> è®“ Docker å®¹å™¨å­˜å– GPU è³‡æºã€‚&lt;/p>
&lt;h3 id="æ­¥é©Ÿ">æ­¥é©Ÿ
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>&lt;strong>å®‰è£ NVIDIA é©…å‹•ç¨‹å¼&lt;/strong>&lt;br>
è«‹å…ˆå®‰è£å°æ‡‰ä½œæ¥­ç³»çµ±çš„ NVIDIA é¡¯ç¤ºå¡é©…å‹•ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>å®‰è£ NVIDIA Container Toolkit&lt;/strong>&lt;br>
ä¾ç…§å®˜æ–¹æ–‡ä»¶å®‰è£ &lt;code>nvidia-docker&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get install -y nvidia-docker2
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl restart docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>å•Ÿå‹•æ”¯æ´ GPU çš„ Jupyter Notebook å®¹å™¨&lt;/strong>&lt;br>
ä½¿ç”¨ &lt;code>--gpus all&lt;/code> åƒæ•¸å•Ÿå‹•å®¹å™¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run --gpus all -p 8888:8888 --name gpu_note -v ~/name:/tf/name tensorflow/tensorflow:latest-gpu-jupyter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>é©—è­‰ GPU æ˜¯å¦å¯ç”¨&lt;/strong>&lt;br>
åœ¨ Notebook ä¸­åŸ·è¡Œä¸‹åˆ—ç¨‹å¼ç¢¼ï¼Œç¢ºèª GPU æ˜¯å¦è¢«åµæ¸¬åˆ°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> tensorflow &lt;span style="color:#66d9ef">as&lt;/span> tf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(tf&lt;span style="color:#f92672">.&lt;/span>config&lt;span style="color:#f92672">.&lt;/span>list_physical_devices(&lt;span style="color:#e6db74">&amp;#39;GPU&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>æ³¨æ„ï¼šéƒ¨åˆ†æ˜ åƒæª”å¯èƒ½éœ€é¡å¤–å®‰è£ CUDAã€cuDNN æˆ–æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼Œè«‹åƒè€ƒ &lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/recipes.html#using-gpus" target="_blank" rel="noopener"
>Jupyter Docker Stacks å®˜æ–¹èªªæ˜&lt;/a>ã€‚&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;h2 id="6-åƒè€ƒè³‡æ–™">6. åƒè€ƒè³‡æ–™
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/" target="_blank" rel="noopener"
>Jupyter Docker Stacks å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
>Docker å®˜æ–¹ç¶²ç«™&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://jupyter.org/" target="_blank" rel="noopener"
>Jupyter Notebook å®˜æ–¹ç¶²ç«™&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-4</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-4/</link><pubDate>Tue, 15 Jul 2025 21:12:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-4/</guid><description>&lt;h1 id="ç”šéº¼æ˜¯-langchain-çš„éˆçµæ§‹">ç”šéº¼æ˜¯ Langchain çš„éˆçµæ§‹?
&lt;/h1>&lt;h2 id="å®šç¾©">å®šç¾©
&lt;/h2>&lt;p>å°‡å°çš„æ¨¡çµ„ä¸²èµ·ä¾†ï¼Œè€Œå½¢æˆçš„ä¸²åˆ—çµæ§‹ã€‚&lt;br>
èˆ‰ä¾‹: å®šç¾©æç¤ºè© -&amp;gt; é¸æ“‡ LLM -&amp;gt; é‹è¡Œ inferencing(å‘¼å« function) -&amp;gt; å¾—åˆ°çµæœã€‚&lt;/p>
&lt;ul>
&lt;li>å„ªé»:
&lt;ul>
&lt;li>æ¨¡çµ„åŒ–æ›´å®¹æ˜“ä¿®æ”¹å€‹åˆ¥åŠŸèƒ½ï¼Œè€Œä¸å½±éŸ¿å…¶ä»–éƒ¨åˆ†&lt;/li>
&lt;li>æé«˜äº†æ¨¡çµ„çš„æ¨™æº–åŒ–ã€å¯å†ç”¨æ€§&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h1 id="éˆçµæ§‹åˆ†é¡">éˆçµæ§‹åˆ†é¡
&lt;/h1>&lt;ul>
&lt;li>
&lt;p>åŸºç¤éˆçµæ§‹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>LLM chain (å–®éˆ)&lt;br>
å°æ‡‰ç›´æ¥èª¿ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼Œæœ€å°‘ 1 æ¬¡ LLM callã€‚&lt;br>
ex. llm.invoke()&lt;/p>
&lt;ol>
&lt;li>å®šç¾© prompt&lt;/li>
&lt;li>å®šç¾© llm&lt;/li>
&lt;li>å®šç¾© chain&lt;/li>
&lt;li>é‹è¡Œ predict&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Router chain (å¤šéˆ)&lt;br>
åˆ¤æ–·è¦ä½¿ç”¨å“ªå€‹éˆï¼Œæœ€å°‘ 2 æ¬¡ LLM callï¼Œç¬¬ä¸€æ¬¡å‘¼å«æ˜¯ç‚ºäº†æ±ºå®šä½¿ç”¨å“ªæ¢éˆï¼Œç¬¬äºŒæ¬¡æ˜¯ç‚ºäº†å¾—åˆ°å›ç­”ã€‚&lt;/p>
&lt;ol>
&lt;li>å®šç¾© prompt&lt;/li>
&lt;li>å®šç¾© llm/emdeddings&lt;/li>
&lt;li>å®šç¾© chain (å¤šéˆä½µè¡Œï¼Œé¸ä¸€æ¢éˆè™•ç†)&lt;/li>
&lt;li>é‹è¡Œ predict
&lt;img src="https://Dandelionlibra.github.io/image/Router_chain.JPG"
loading="lazy"
alt="Data_Connection"
>&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Sequential chain (å¤šéˆ)&lt;br>
ä¸Šä¸€å€‹èªè¨€æ¨¡å‹çš„èª¿ç”¨çµæœæ˜¯ä¸‹ä¸€å€‹èªè¨€æ¨¡å‹èª¿ç”¨çš„è¼¸å…¥ã€‚&lt;/p>
&lt;ol>
&lt;li>å®šç¾© prompt&lt;/li>
&lt;li>å®šç¾© llm/emdeddings&lt;/li>
&lt;li>å®šç¾© chain (å¤šéˆä½µè¡Œï¼Œä¾ç…§é †åºåŸ·è¡Œ)&lt;/li>
&lt;li>é‹è¡Œ predict&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>Transformation chain (æ–‡æœ¬è™•ç†éˆ)&lt;br>
å°‡è¼¸å…¥æ–‡æœ¬è™•ç†å¾Œã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Transformation_chain.JPG"
loading="lazy"
alt="Data_Connection"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ‡‰ç”¨éˆçµæ§‹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Document chains type (é•·æ–‡æœ¬è™•ç†éˆ): ç¸½çµã€å‘é‡æ•¸æ“šåº«&lt;/p>
&lt;ul>
&lt;li>Stuff:
ç•¶è¦è©¢å•æ¨¡å‹æ²’æœ‰è¨“ç·´éçš„è¨Šæ¯æ™‚ï¼Œè¦é€é prompt å°‡è³‡è¨Šå‚³å…¥ï¼Œä½†è‹¥è¼¸å…¥é•·åº¦è¶…éæ¨¡å‹å¯æ¥å—çš„æœ€å¤§ token æœƒç„¡æ³•é‹è¡Œã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Stuff.JPG"
loading="lazy"
alt="Data_Connection"
>&lt;/li>
&lt;li>Refine:
èª¿ç”¨å¤šæ¬¡èªè¨€æ¨¡å‹ï¼Œå°‡åŸæœ¬çš„é•·ä¸Šä¸‹æ–‡åˆ†æ®µè½ï¼Œé¿å…è¼¸å…¥è¶…éæœ€å¤§ token çš„å•é¡Œï¼Œå°‡ä¸Šä¸€è¼ªçš„è¼¸å‡ºä½œç‚ºä¸­é–“å›ç­”æ”¾åˆ°ç¬¬ä¸‰éƒ¨åˆ†ä¸­
&lt;img src="https://Dandelionlibra.github.io/image/Refine.JPG"
loading="lazy"
alt="Data_Connection"
>&lt;/li>
&lt;li>Map reduce&lt;/li>
&lt;li>Map rerank&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Retrieval QA&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="ç¨‹å¼äº‹ä¾‹">ç¨‹å¼äº‹ä¾‹
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_link.ipynb" target="_blank" rel="noopener"
>è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a>&lt;/p>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
>https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-3</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-3/</link><pubDate>Mon, 14 Jul 2025 10:56:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-3/</guid><description>&lt;h1 id="data-connection">Data Connection
&lt;/h1>&lt;h2 id="å®šç¾©">å®šç¾©
&lt;/h2>&lt;p>è¨±å¤šåŸºæ–¼å¤§å‹èªè¨€æ¨¡å‹è€ŒåŸ·è¡Œçš„æ‡‰ç”¨å¸¸æœƒç”¨åˆ°æ¨¡å‹æ•¸æ“šé›†ä¸­æ²’æœ‰çš„æ•¸æ“šã€‚è€Œé‡å°é€™é¡éœ€æ±‚ï¼ŒLangchain æä¾›äº†è¨±å¤šå·¥å…·ä½¿ç”¨æˆ¶å¯ä»¥å¾å„é¡æ•¸æ“šæºä¸­åŠ è¼‰æ–°çš„æ•¸æ“šã€è½‰æ›æ•¸æ“šã€å„²å­˜æ•¸æ“šã€è¨ªå•æ•¸æ“šã€‚&lt;/p>
&lt;p>â€»å¤§å‹èªè¨€æ¨¡å‹ä¸å¯èƒ½åœ¨è¨“ç·´éšæ®µå°±æ¶µè“‹æ‰€æœ‰æ•¸æ“šï¼Œä¸”æ¯æ™‚æ¯åˆ»éƒ½æœ‰æ–°çš„æ•¸æ“šç”¢ç”Ÿã€‚&lt;/p>
&lt;ul>
&lt;li>æ–‡æª”è¼‰å…¥å™¨(Document loaders): å¾å¤šç¨®æ•¸æ“šæºåŠ è¼‰æ–‡æª”ï¼Œex.ç¶²é ã€pdfã€‚&lt;/li>
&lt;li>æ–‡æª”è½‰æ›å™¨: æ‹†åˆ†æ–‡æª”ã€ä¸Ÿæ£„å†—é¤˜æ–‡æª”ï¼Œä¸»è¦é‹è¡Œåœ¨æ–‡æª”è¼‰å…¥å™¨ä¹‹å¾Œï¼Œé‡å°åŠ è¼‰å‡ºä¾†çš„æ–‡æª”åšè™•ç†ã€‚&lt;/li>
&lt;li>æ–‡æœ¬åµŒå…¥(embedding)æ¨¡å‹: å°‡éçµæ§‹åŒ–çš„æ–‡æœ¬è½‰ç‚ºæµ®é»æ•¸åˆ—è¡¨ã€‚&lt;/li>
&lt;li>å‘é‡æ•¸æ“šåº«: å„²å­˜å’Œæœå°‹ embedding æ•¸æ“šã€‚&lt;/li>
&lt;li>æª¢ç´¢å™¨: æŸ¥è©¢å‘é‡æ•¸æ“šã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="data-connection-è™•ç†æµç¨‹">Data Connection è™•ç†æµç¨‹
&lt;/h2>&lt;p>&lt;img src="https://Dandelionlibra.github.io/image/Data_Connection.JPG"
loading="lazy"
alt="Data_Connection"
>&lt;/p>
&lt;h3 id="1-æ–‡æœ¬è¼‰å…¥å™¨document-loaders">1. æ–‡æœ¬è¼‰å…¥å™¨(Document loaders)
&lt;/h3>&lt;p>å°‡æ–‡æœ¬æ•¸æ“šå¾åŸå§‹æ•¸æ“š(Source)ä¸­æå–å‡ºä¾†ï¼Œæ”¹æˆ langchain èªè­˜çš„èªè¨€ï¼Œç¸½è€Œè¨€ä¹‹å°±æ˜¯å°‡éçµæ§‹åŒ–çš„æ–‡æœ¬æ•¸æ“šåŠ è¼‰åˆ°çµæ§‹åŒ–çš„å­—ç¬¦ä¸²ä¸­ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è¼¸å…¥: å„ç¨®æ•¸æ“šæºï¼Œex.PDFã€URLã€å½±ç‰‡ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¼¸å‡º: ä¸€ç³»åˆ—çš„ Document å°è±¡ï¼Œä¾‹ï¼Œæœ‰6é pdfæœƒç”¢å‡º6å€‹ documentsï¼Œä»¥åˆ†åˆ¥å°æ‡‰ã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Document_loaders.JPG"
loading="lazy"
alt="Document_loaders.JPG"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>èˆ‰ä¾‹&lt;/p>
&lt;ul>
&lt;li>
&lt;p>çµæ§‹åŒ–æ–‡ä»¶: åŠ è¼‰ CSV æ–‡ä»¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.document_loaders.csv_loader &lt;span style="color:#f92672">import&lt;/span> CSVLoader
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>loader &lt;span style="color:#f92672">=&lt;/span> CSVLoader(file_path&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;./data/file.csv&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>data &lt;span style="color:#f92672">=&lt;/span> loader&lt;span style="color:#f92672">.&lt;/span>load()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>éçµæ§‹åŒ–æ–‡ä»¶: ç´”æ–‡æœ¬ã€pptã€htmlã€pdfã€åœ–ç‰‡ã€‚&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/" target="_blank" rel="noopener"
>å…¨éƒ¨æ–‡ä»¶æ ¼å¼&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="2-æ–‡æœ¬åˆ†å‰²å™¨document-transformers">2. æ–‡æœ¬åˆ†å‰²å™¨(Document transformers)
&lt;/h3>&lt;p>å°‡åŠ è¼‰å¥½çš„æ–‡æª”é€²è¡Œè½‰æ›ï¼Œå¾è€Œæ›´å¥½çš„é©æ‡‰å„ç¨®å ´æ™¯ã€‚èˆ‰ä¾‹ï¼Œå°‡æ–‡æª”æ‹†åˆ†æˆè¼ƒå°çš„å¡Šï¼Œä»¥é¿å…å¤§å‹èªè¨€æ¨¡å‹å°æ–¼è¼¸å…¥é•·åº¦çš„é™åˆ¶ã€‚&lt;br>
Langchain ä¸­æä¾›çš„æ–‡æª”è½‰æ›å™¨å¯ä»¥æä¾›æ‹†åˆ†ã€åˆä½µã€éæ¿¾ç­‰åŠŸèƒ½ã€‚&lt;/p>
&lt;ul>
&lt;li>æ–‡æœ¬åˆ†å‰²å™¨-æ‹†åˆ†: åˆ†å‰²é•·æ–‡æœ¬ï¼Œæ ¹æ“šèªæ„ç›¸é—œæ€§å°‡æ‰€æœ‰æœ‰é—œè¯çš„æ–‡æœ¬æ”¾åœ¨åŒä¸€å€‹åˆ†å‰²æ®µä¸­ã€‚&lt;br>
&lt;img src="https://Dandelionlibra.github.io/image/Document_transformers.JPG"
loading="lazy"
alt="Document_transformers.JPG.JPG"
>&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>å°‡æ–‡æœ¬æ‹†åˆ†ç‚ºå°ã€å…·èªæ„æ„ç¾©çš„å¡Šã€‚&lt;/li>
&lt;li>å°‡å°å¡Šçµ„åˆæˆå¤§å¡Šï¼Œç›´åˆ°é”åˆ°ä¸€å®šè¦æ¨¡ã€‚&lt;/li>
&lt;li>å°‡é”åˆ°ä¸€å®šè¦æ¨¡çš„å¡Šä½œç‚ºç¨ç«‹çš„æ–‡æœ¬ç‰‡æ®µï¼Œç„¶å¾Œå‰µå»ºæ–°çš„æ–‡æœ¬å¡Šï¼Œæ­¤å¤–ï¼Œç‚ºäº†ç¶­æŒå¡Šé–“çš„é€£è²«æ€§ï¼Œå…©å€‹æ–‡æœ¬å¡Šä¹‹é–“æœƒæœ‰é‡ç–Šçš„éƒ¨åˆ†ã€‚&lt;br>
ä»¥åœ–ä¾‹è€Œè¨€ï¼ŒDocument ç”±ä¸€å¡Šè®Šç‚ºä¸‰å¡Šã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="3-æ–‡æœ¬è©åµŒå…¥word-embedding">3. æ–‡æœ¬è©åµŒå…¥(Word Embedding)
&lt;/h3>&lt;p>è©åµŒå…¥æ˜¯å°‡è©èªæ•¸å€¼åŒ–è¡¨é”çš„æ–¹å¼ï¼Œé€šå¸¸æœƒå°‡è©æ˜ å°„åˆ°é«˜ç¶­çš„å‘é‡ä¸­ï¼Œä½¿é›»è…¦è—‰ç”±é«˜ç¶­çš„æ•¸å­—åŒ–è¡¨é”å¾—ä»¥ç†è§£è‡ªç„¶èªè¨€çš„èªæ„ï¼Œæ¥è¿‘çš„èªæ„=æ¥è¿‘çš„å‘é‡è·é›¢ã€‚&lt;/p>
&lt;h3 id="4-å‘é‡æ•¸æ“šåº«">4. å‘é‡æ•¸æ“šåº«
&lt;/h3>&lt;p>ç”¨æ–¼å„²å­˜åµŒå…¥çš„æ•¸æ“šå‘é‡ã€‚&lt;/p>
&lt;h3 id="5-æª¢ç´¢å™¨">5. æª¢ç´¢å™¨
&lt;/h3>&lt;p>æ ¹æ“šè¼¸å…¥çš„éçµæ§‹åŒ–æŸ¥è©¢èªå¥è¿”å›å°æ‡‰æ–‡æª”çš„æ¥å£(ä¸€ç³»åˆ— Documents å°è±¡)ã€‚&lt;br>
ä¸åŒæ–¼å‘é‡æ•¸æ“šåº«ï¼Œå‘é‡æ•¸æ“šåº«å¯ä»¥è¦–ç‚ºä¸€ç¨®å…·å‚™å„²å­˜åŠŸèƒ½çš„æª¢ç´¢å™¨ï¼Œä½†æª¢ç´¢å™¨ä¸ä¸€å®šéœ€è¦å…·å‚™å„²å­˜çš„åŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="ç¨‹å¼äº‹ä¾‹">ç¨‹å¼äº‹ä¾‹
&lt;/h2>&lt;p>&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_csv_loader.ipynb" target="_blank" rel="noopener"
>è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a>&lt;/p>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
>https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-2</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-2/</link><pubDate>Sun, 13 Jul 2025 08:06:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-2/</guid><description>&lt;h1 id="æç¤ºæ¨¡æ¿">æç¤ºæ¨¡æ¿
&lt;/h1>&lt;ul>
&lt;li>å°èªè¨€æ¨¡å‹çš„æŒ‡ä»¤&lt;/li>
&lt;li>æä¾›ç°¡å–®çš„äº‹ä¾‹çµ¦èªè¨€æ¨¡å‹ä½¿æ¨¡å‹æ¥è¿‘ç†æƒ³çµæœ&lt;/li>
&lt;li>æçµ¦èªè¨€æ¨¡å‹çš„å•é¡Œ&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain &lt;span style="color:#f92672">import&lt;/span> PromptTemplate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ä½¿ç”¨ PromptTemplate ä¾†å®šç¾©å°è©±çš„æç¤ºæ¨¡æ¿&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>no_input_prompt_template &lt;span style="color:#f92672">=&lt;/span> PromptTemplate(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_variables&lt;span style="color:#f92672">=&lt;/span>[],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> template&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;èªªå€‹æ•…äº‹&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multi_input_prompt_template &lt;span style="color:#f92672">=&lt;/span> PromptTemplate(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_variables&lt;span style="color:#f92672">=&lt;/span>[&lt;span style="color:#e6db74">&amp;#34;ä¸»é¡Œ&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;é¢¨æ ¼&amp;#34;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> template&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;è«‹è¬›ä¸€å€‹é—œæ–¼&lt;/span>&lt;span style="color:#e6db74">{ä¸»é¡Œ}&lt;/span>&lt;span style="color:#e6db74">çš„æ•…äº‹ï¼Œé¢¨æ ¼æ˜¯&lt;/span>&lt;span style="color:#e6db74">{é¢¨æ ¼}&lt;/span>&lt;span style="color:#e6db74">ã€‚&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>multi_input_prompt_template&lt;span style="color:#f92672">.&lt;/span>format(ä¸»é¡Œ&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;å‹‡æ°£&amp;#34;&lt;/span>, é¢¨æ ¼&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;ç«¥è©±&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># other exampleï¼Œç”± from_template å°‡ string è½‰æˆ PromptTemplate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>template &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;è«‹è¬›ä¸€å€‹é—œæ–¼&lt;/span>&lt;span style="color:#e6db74">{ä¸»é¡Œ}&lt;/span>&lt;span style="color:#e6db74">çš„æ•…äº‹ï¼Œé¢¨æ ¼æ˜¯&lt;/span>&lt;span style="color:#e6db74">{é¢¨æ ¼}&lt;/span>&lt;span style="color:#e6db74">ã€‚&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>prompt_template &lt;span style="color:#f92672">=&lt;/span> PromptTemplate&lt;span style="color:#f92672">.&lt;/span>from_template(template)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æ­¤æ™‚è¼¸å‡º [&amp;#34;ä¸»é¡Œ&amp;#34;, &amp;#34;é¢¨æ ¼&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>prompt_template&lt;span style="color:#f92672">.&lt;/span>input_variables
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ¥æ”¶éƒ¨åˆ†åƒæ•¸">æ¥æ”¶éƒ¨åˆ†åƒæ•¸
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>åœ¨æ‰€æœ‰åƒæ•¸ç„¡æ³•åŒæ­¥ç²å–æ™‚ï¼Œå¯ä»¥å…ˆç”¨ç¾æœ‰åƒæ•¸å‚³å…¥ç¬¬ä¸€å€‹æ¨¡æ¿ï¼Œä»¥ç²å¾—æ–°çš„åƒæ•¸ï¼Œå†å°‡æ–°åƒæ•¸å‚³å…¥æ–°çš„æ¨¡æ¿ä¸­ï¼Œä»¥å¾—åˆ°æœ€çµ‚æƒ³å•çš„å•é¡Œã€‚&lt;br>
&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_1.JPG"
loading="lazy"
alt="partial_prompt_template"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ‰äº›åƒæ•¸è¦ç”¨ç‰¹å®šæ–¹å¼ç²å– (ex.å‡½å¼å‘¼å«)
&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_2.JPG"
loading="lazy"
alt="partial_prompt_template"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain &lt;span style="color:#f92672">import&lt;/span> PromptTemplate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> datetime &lt;span style="color:#f92672">import&lt;/span> datetime
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">get_date&lt;/span>():
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> now &lt;span style="color:#f92672">=&lt;/span> datetime&lt;span style="color:#f92672">.&lt;/span>now()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> now&lt;span style="color:#f92672">.&lt;/span>strftime(&lt;span style="color:#e6db74">&amp;#34;%mæœˆ&lt;/span>&lt;span style="color:#e6db74">%d&lt;/span>&lt;span style="color:#e6db74">æ—¥&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>prompt &lt;span style="color:#f92672">=&lt;/span> PromptTemplate(template&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;å‘Šè¨´æˆ‘&lt;/span>&lt;span style="color:#e6db74">{åŸå¸‚}&lt;/span>&lt;span style="color:#e6db74">åœ¨&lt;/span>&lt;span style="color:#e6db74">{å¹´ä»½}&lt;/span>&lt;span style="color:#e6db74">å¹´&lt;/span>&lt;span style="color:#e6db74">{æ—¥æœŸ}&lt;/span>&lt;span style="color:#e6db74">çš„å¹³å‡æ°£æº«æ˜¯å¤šå°‘ï¼Ÿ&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_variables&lt;span style="color:#f92672">=&lt;/span>[&lt;span style="color:#e6db74">&amp;#34;åŸå¸‚&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;å¹´ä»½&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;æ—¥æœŸ&amp;#34;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>PromptTemplate_2 &lt;span style="color:#f92672">=&lt;/span> prompt&lt;span style="color:#f92672">.&lt;/span>partial(åŸå¸‚&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;å°åŒ—&amp;#34;&lt;/span>, æ—¥æœŸ&lt;span style="color:#f92672">=&lt;/span>get_date())
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(PromptTemplate_2&lt;span style="color:#f92672">.&lt;/span>format(å¹´ä»½&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;2023&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡º:&lt;/p>
&lt;pre tabindex="0">&lt;code>å‘Šè¨´æˆ‘å°åŒ—åœ¨2023å¹´07æœˆ13æ—¥çš„å¹³å‡æ°£æº«æ˜¯å¤šå°‘ï¼Ÿ
&lt;/code>&lt;/pre>&lt;h2 id="å°‘æ¨£æœ¬å­¸ç¿’-few-shot">å°‘æ¨£æœ¬å­¸ç¿’ (few-shot)
&lt;/h2>&lt;ul>
&lt;li>è—‰ç”±å°‘é‡çš„æ¨£æœ¬ã€ç¯„ä¾‹ï¼Œä½¿èªè¨€æ¨¡å‹èƒ½è™•ç†ç‰¹å®šå•é¡Œ&lt;/li>
&lt;li>ä¸åŒæ–¼å¾®èª¿ (fine-tuning)ï¼Œå¾®èª¿æœƒä½¿ç”¨å¤§é‡æ¨£æœ¬ï¼Œæœ€çµ‚æœƒæ”¹è®Šæ¨¡å‹æœ¬èº«&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ä¾‹å­:&lt;br>
&amp;ldquo;ä½ å¥½å—?&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚&amp;rdquo;&lt;br>
&amp;ldquo;ä»Šå¤©ç¦®æ‹œå¹¾?&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚&amp;rdquo;&lt;br>
&amp;ldquo;å¤©æ°£çœŸå¥½å‘€ã€‚&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚&amp;rdquo;&lt;/p>
&lt;p>å¸Œæœ›æ¨¡å‹å­¸æœƒ&amp;quot;ä¸»äºº&amp;quot;çš„å‰ç¶´ã€‚&lt;/p>&lt;/blockquote>
&lt;h3 id="fewshot-prompt-template">FewShot Prompt Template
&lt;/h3>&lt;p>åˆ©ç”¨æç¤ºæ¨¡æ¿ï¼Œå°‡æ¨£æœ¬æ•¸æ“šåŠ è¼‰æˆå®Œæ•´çš„æç¤ºè©ï¼Œæ¥è‘—å°‡æ¨£æœ¬é€£åŒæç¤ºè©ä¸€ä½µé€çµ¦æ¨£æœ¬æç¤ºæ¨¡æ¿ï¼Œæœ€çµ‚å¾—åˆ°å®Œæ•´çš„æç¤ºè©ã€‚&lt;/p>
&lt;p>&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_3.JPG"
loading="lazy"
alt="partial_prompt_template"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.prompts.few_shot &lt;span style="color:#f92672">import&lt;/span> FewShotPromptTemplate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.prompts.prompt &lt;span style="color:#f92672">import&lt;/span> PromptTemplate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># FewShot examples&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>examples &lt;span style="color:#f92672">=&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;question&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ä½ å¥½å—?&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;answer&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;question&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ä»Šå¤©ç¦®æ‹œå¹¾?&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;answer&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;question&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;å¤©æ°£çœŸå¥½å‘€ã€‚&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;answer&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># FewShotPromptTemplate-æ¨£æœ¬æç¤ºæ¨¡æ¿&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æç¤ºæ¨¡æ¿ä»¥ Question:é–‹é ­&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>example_prompt &lt;span style="color:#f92672">=&lt;/span> PromptTemplate(input_variables&lt;span style="color:#f92672">=&lt;/span>[&lt;span style="color:#e6db74">&amp;#34;question&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;answer&amp;#34;&lt;/span>], template&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Question: &lt;/span>&lt;span style="color:#e6db74">{question}&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">Answer: &lt;/span>&lt;span style="color:#e6db74">{answer}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>few_shot_prompt &lt;span style="color:#f92672">=&lt;/span> FewShotPromptTemplate(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> examples&lt;span style="color:#f92672">=&lt;/span>examples, &lt;span style="color:#75715e"># å‚³å…¥æ¨£æœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> example_prompt&lt;span style="color:#f92672">=&lt;/span>example_prompt, &lt;span style="color:#75715e"># å‚³å…¥æ¨£æœ¬æ¨¡æ¿&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> suffix&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;Question: &lt;/span>&lt;span style="color:#e6db74">{input}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># å•é¡Œçš„æç¤ºè©&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> input_variables&lt;span style="color:#f92672">=&lt;/span>[&lt;span style="color:#e6db74">&amp;#34;input&amp;#34;&lt;/span>],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(few_shot_prompt&lt;span style="color:#f92672">.&lt;/span>format(input&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡ºå®Œæ•´æç¤ºè©å¦‚ä¸‹ï¼Œä½†å‰é¢ä¸‰çµ„ç‚ºæä¾›çš„ç¯„ä¾‹æ¡ˆä¾‹ï¼Œæœ€å¾Œä¸€çµ„æ˜¯è¼¸å…¥çš„æå•ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>Question: ä½ å¥½å—?
Answer: ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚
Question: ä»Šå¤©ç¦®æ‹œå¹¾?
Answer: ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚
Question: å¤©æ°£çœŸå¥½å‘€ã€‚
Answer: ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚
Question: ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>llm &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>response &lt;span style="color:#f92672">=&lt;/span> llm&lt;span style="color:#f92672">.&lt;/span>invoke(few_shot_prompt&lt;span style="color:#f92672">.&lt;/span>format(input&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(response)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡ºçµæœï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>ä½ çš„å•é¡Œæ˜¯å•ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£ï¼Ÿæˆ‘å¯ä»¥å›ç­”èªªï¼šæ‚¨ä¹Ÿå¾ˆå¥½ã€‚æˆ–è€…ï¼Œæˆ‘å¯ä»¥è©¢å•ä¸€ä¸‹æ‚¨ä»Šå¤©éå¾—æ€éº¼æ¨£ï¼Ÿ
å¦‚æœä½ æƒ³çŸ¥é“æˆ‘çš„ç­”æ¡ˆï¼Œé‚£å°±æ˜¯ï¼šä¸»äººï¼Œä»Šå¤©æˆ‘å¾ˆå¥½ï¼Œè¬è¬æ‚¨çš„é—œå¿ƒï¼
&lt;/code>&lt;/pre>&lt;h3 id="æ¨£æœ¬ç¯©é¸å™¨-exampleselector">æ¨£æœ¬ç¯©é¸å™¨ (ExampleSelector)
&lt;/h3>&lt;ul>
&lt;li>æ¨£æœ¬æ•¸é‡å¤ªå¤šæ™‚&lt;/li>
&lt;li>ä¸æ˜¯æ‰€æœ‰æ¨£æœ¬éƒ½èƒ½å¹«åŠ©æå‡è¼¸å‡ºè³ªé‡
&lt;img src="https://Dandelionlibra.github.io/image/ExampleSelector.JPG"
loading="lazy"
alt="partial_prompt_template"
>&lt;/li>
&lt;li>èˆ‰ä¾‹: SemanticSimilarityExampleSelector (èªæ„ç›¸ä¼¼åº¦ç¯©é¸å™¨)ï¼Œä¾æ“šæœ€çµ‚æçš„å•é¡Œï¼Œåœ¨æ‰€æœ‰æ¨£æœ¬ä¸­å°‹æ‰¾èªæ„æœ€ç‚ºæ¥è¿‘çš„æ¨£æœ¬ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="å¤§å‹èªè¨€æ¨¡å‹çš„å°è£">å¤§å‹èªè¨€æ¨¡å‹çš„å°è£
&lt;/h2>&lt;ul>
&lt;li>Langchain ä¸æä¾›ç¾æˆçš„å¤§å‹èªè¨€æ¨¡å‹&lt;/li>
&lt;li>Langchain æä¾›çš„æ˜¯é‡å°ä¸åŒèªè¨€æ¨¡å‹çš„æ¨™æº–åŒ–æ¥å£&lt;/li>
&lt;/ul>
&lt;h3 id="å¤§å‹èªè¨€æ¨¡å‹llmæ¨¡å¡Šçš„åŸºæœ¬ç”¨æ³•">å¤§å‹èªè¨€æ¨¡å‹(LLM)æ¨¡å¡Šçš„åŸºæœ¬ç”¨æ³•
&lt;/h3>&lt;ul>
&lt;li>ç›´æ¥å‘¼å«
&lt;ul>
&lt;li>é¡ä¼¼ç›´æ¥å‘¼å«.invoke()ï¼Œè®“èªè¨€æ¨¡å‹æ ¹æ“šè¼¸å…¥å›ç­”å…§å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>llm &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(llm(&lt;span style="color:#e6db74">&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹ç¬‘è©±ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡ºï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>ç‚ºä»€éº¼é›»æ± èµ°è·¯å»äº†? å› ç‚ºå®ƒæƒ³å……é›»
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>æ‰¹é‡ç”Ÿæˆ
&lt;ul>
&lt;li>generate()&lt;/li>
&lt;li>è¼¸å…¥ï¼šæ–‡æœ¬çš„åˆ—è¡¨&lt;/li>
&lt;li>è¼¸å‡ºï¼šæ–‡æœ¬çš„åˆ—è¡¨&lt;/li>
&lt;li>ex. è¼¸å…¥å•é¡Œçš„åˆ—è¡¨ï¼Œè¼¸å‡ºå›ç­”çš„åˆ—è¡¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>generate_res &lt;span style="color:#f92672">=&lt;/span> llm&lt;span style="color:#f92672">.&lt;/span>generate([&lt;span style="color:#e6db74">&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹ç¬‘è©±ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹æ‚²å‚·çš„æ•…äº‹ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(generate_res)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡ºï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>generations=[[GenerationChunk(text=&amp;#39;ç‚ºä»€éº¼äººé¡æœƒèµ°è·¯?\n\nå› ç‚ºé³¥ä¸å–œæ­¡åƒè·¯ä¸Šçš„æ±è¥¿!&amp;#39;, generation_info={&amp;#39;model&amp;#39;: &amp;#39;llama3.1:8b&amp;#39;, &amp;#39;created_at&amp;#39;: &amp;#39;2025-07-13T14:22:01.5478452Z&amp;#39;, &amp;#39;done&amp;#39;: True, &amp;#39;done_reason&amp;#39;: &amp;#39;stop&amp;#39;, &amp;#39;total_duration&amp;#39;: 2588937700, &amp;#39;load_duration&amp;#39;: 39039000, &amp;#39;prompt_eval_count&amp;#39;: 23, &amp;#39;prompt_eval_duration&amp;#39;: 335147300, &amp;#39;eval_count&amp;#39;: 22, &amp;#39;eval_duration&amp;#39;: 2214149200, &amp;#39;response&amp;#39;: &amp;#39;&amp;#39;, &amp;#39;thinking&amp;#39;: None, &amp;#39;context&amp;#39;: [128006, 882, 128007, 271, 104142, 37046, 106336, 114634, 49838, 87177, 3922, 16555, 94, 33857, 112825, 106649, 1811, 128009, 128006, 78191, 128007, 271, 101399, 101567, 114064, 17792, 104770, 101835, 102149, 47095, 1980, 63212, 101399, 116750, 16937, 104940, 125741, 105271, 47095, 106583, 101778, 61786, 0]})], [GenerationChunk(text=&amp;#39;æœ‰ä¸€å€‹å¹´è¼•å¥³å­©ï¼Œå¥¹èˆ‡è‡ªå·±çš„çˆ¶è¦ªéå¸¸ç›¸æ„›ã€‚å¯æ˜¯å› ç‚ºå·¥ä½œå¤ªå¿™ï¼Œçˆ¸çˆ¸é•·æœŸå¤–å‡ºï¼Œä¸¦ä¸”å¿½ç•¥äº†å¥³å…’ã€‚ç›´åˆ°ä¸€å¤©ï¼Œä¸€å ´é‡å¤§äº‹æ•…è®“çˆ¸çˆ¸å»ä¸–ã€‚åœ¨æ‚²ç—›ä¸­ï¼Œå¥³å­©ç™¼ç¾äº†ä¹‹å‰çˆ¶è¦ªçµ¦å¥¹çš„ä¿¡ï¼Œè£¡é¢æœ‰å°å¥¹çš„æº«æš–å‘Šç™½å’Œæ·±æƒ…æ‡·å¿µã€‚é€™å€‹æ¶ˆæ¯ä½¿å¥¹å¿ƒç—›æ¬²è£‚ï¼Œå¾æ­¤å¥³å­©å†ä¹Ÿæ²’æœ‰æ¢å¾©éã€‚&amp;#39;, generation_info={&amp;#39;model&amp;#39;: &amp;#39;llama3.1:8b&amp;#39;, &amp;#39;created_at&amp;#39;: &amp;#39;2025-07-13T14:22:16.1064263Z&amp;#39;, &amp;#39;done&amp;#39;: True, &amp;#39;done_reason&amp;#39;: &amp;#39;stop&amp;#39;, &amp;#39;total_duration&amp;#39;: 14556868200, &amp;#39;load_duration&amp;#39;: 39856500, &amp;#39;prompt_eval_count&amp;#39;: 25, &amp;#39;prompt_eval_duration&amp;#39;: 516644200, &amp;#39;eval_count&amp;#39;: 104, &amp;#39;eval_duration&amp;#39;: 13999594200, &amp;#39;response&amp;#39;: &amp;#39;&amp;#39;, &amp;#39;thinking&amp;#39;: None, &amp;#39;context&amp;#39;: [128006, 882, 128007, 271, 104142, 37046, 106336, 114634, 116292, 114218, 9554, 117625, 3922, 16555, 94, 33857, 112825, 106649, 1811, 128009, 128006, 78191, 128007, 271, 108830, 102159, 8107, 125063, 58850, 105989, 105902, 102789, 107924, 104503, 106759, 108008, 50021, 103926, 1811, 113426, 63212, 101399, 102301, 101402, 112008, 3922, 117283, 117283, 101544, 23538, 48915, 20834, 113415, 103786, 120994, 105838, 35287, 58850, 114763, 1811, 74245, 28037, 15120, 36827, 104295, 75267, 125478, 123429, 114816, 117283, 117283, 86436, 101083, 107644, 116292, 108631, 16325, 3922, 58850, 105989, 103106, 102321, 35287, 112065, 104503, 106759, 110698, 109506, 22023, 3922, 115556, 28190, 19361, 104314, 109506, 117986, 118937, 58655, 101828, 34208, 102987, 40474, 103435, 115, 104611, 1811, 103864, 102159, 65305, 33655, 100911, 64209, 108631, 111654, 117068, 3922, 110039, 33091, 58850, 105989, 88356, 75863, 116721, 123843, 109095, 103188, 1811]})]] llm_output=None run=[RunInfo(run_id=UUID(&amp;#39;bc24e5b6-0c3f-4d2c-afb4-95f477e81adf&amp;#39;)), RunInfo(run_id=UUID(&amp;#39;f8f5fe28-4c1d-4b6f-8a74-fdcc6f397f7a&amp;#39;))] type=&amp;#39;LLMResult&amp;#39;
&lt;/code>&lt;/pre>&lt;p>å¯ç”¨é™£åˆ—ç²å–ç‰¹å®šè¼¸å‡ºã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>print(generate_res&lt;span style="color:#f92672">.&lt;/span>generations[&lt;span style="color:#ae81ff">0&lt;/span>][&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>text)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(generate_res&lt;span style="color:#f92672">.&lt;/span>generations[&lt;span style="color:#ae81ff">1&lt;/span>][&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>text)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;pre tabindex="0">&lt;code>ç‚ºä»€éº¼äººé¡æœƒèµ°è·¯?
å› ç‚ºé³¥ä¸å–œæ­¡åƒè·¯ä¸Šçš„æ±è¥¿!
æœ‰ä¸€å€‹å¹´è¼•å¥³å­©ï¼Œå¥¹èˆ‡è‡ªå·±çš„çˆ¶è¦ªéå¸¸ç›¸æ„›ã€‚å¯æ˜¯å› ç‚ºå·¥ä½œå¤ªå¿™ï¼Œçˆ¸çˆ¸é•·æœŸå¤–å‡ºï¼Œä¸¦ä¸”å¿½ç•¥äº†å¥³å…’ã€‚ç›´åˆ°ä¸€å¤©ï¼Œä¸€å ´é‡å¤§äº‹æ•…è®“çˆ¸çˆ¸å»ä¸–ã€‚åœ¨æ‚²ç—›ä¸­ï¼Œå¥³å­©ç™¼ç¾äº†ä¹‹å‰çˆ¶è¦ªçµ¦å¥¹çš„ä¿¡ï¼Œè£¡é¢æœ‰å°å¥¹çš„æº«æš–å‘Šç™½å’Œæ·±æƒ…æ‡·å¿µã€‚é€™å€‹æ¶ˆæ¯ä½¿å¥¹å¿ƒç—›æ¬²è£‚ï¼Œå¾æ­¤å¥³å­©å†ä¹Ÿæ²’æœ‰æ¢å¾©éã€‚
&lt;/code>&lt;/pre>&lt;h3 id="è‡ªå®šç¾©-llm-æ¨¡çµ„">è‡ªå®šç¾© LLM æ¨¡çµ„
&lt;/h3>&lt;ul>
&lt;li>ç”¨æ–¼å°è£ Langchain å°šæœªæ”¯æŒçš„å¤§å‹èªè¨€æ¨¡å‹&lt;/li>
&lt;li>å¯ä»¥ç”¨ä¾†æ¨¡æ“¬æ¸¬è©¦&lt;/li>
&lt;li>è‡ªè¡Œå®šç¾©ç•¶ LLM è¢«èª¿ç”¨æ™‚ï¼Œå¦‚ä½•æ ¹æ“šè¼¸å…¥çš„æ–‡æœ¬å…§å®¹ä¾†è¼¸å‡º&lt;/li>
&lt;/ul>
&lt;p>&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_code.ipynb" target="_blank" rel="noopener"
>è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a>&lt;/p>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
>https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>å¦‚ä½•ä½¿ç”¨ SSH é€²è¡Œé ç«¯é€£ç·šæ•™å­¸</title><link>https://Dandelionlibra.github.io/post/ssh/how-to-use-ssh/</link><pubDate>Thu, 10 Jul 2025 16:03:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/ssh/how-to-use-ssh/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±">å…§å®¹å¤§ç¶±
&lt;/h2>&lt;ol>
&lt;li>SSH åŸºæœ¬ä»‹ç´¹&lt;/li>
&lt;li>å®‰è£ SSH å®¢æˆ¶ç«¯
&lt;ul>
&lt;li>Linux&lt;/li>
&lt;li>Mac&lt;/li>
&lt;li>Windows&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ç”¢ç”Ÿ SSH é‡‘é‘°&lt;/li>
&lt;li>è¨­å®š SSH é€£ç·š
&lt;ul>
&lt;li>å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ&lt;/li>
&lt;li>æ¸¬è©¦é€£ç·š&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ
&lt;ul>
&lt;li>ä½¿ç”¨ VSCode é€é SSH é ç«¯é–‹ç™¼&lt;/li>
&lt;li>ä½¿ç”¨ Git é€é SSH é€²è¡Œç‰ˆæœ¬æ§åˆ¶&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åƒè€ƒè³‡æ–™&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="1-ssh-åŸºæœ¬ä»‹ç´¹">1. SSH åŸºæœ¬ä»‹ç´¹
&lt;/h2>&lt;p>SSHï¼ˆSecure Shellï¼‰æ˜¯ä¸€ç¨®åŠ å¯†çš„ç¶²è·¯å”å®šï¼Œç”¨æ–¼åœ¨ä¸å®‰å…¨çš„ç¶²è·¯ä¸Šå®‰å…¨åœ°é€²è¡Œé ç«¯ç™»å…¥èˆ‡å…¶ä»–ç¶²è·¯æœå‹™ã€‚å¸¸è¦‹ç”¨é€”åŒ…æ‹¬é ç«¯ä¼ºæœå™¨ç®¡ç†ã€æª”æ¡ˆå‚³è¼¸ç­‰ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="2-å®‰è£-ssh-å®¢æˆ¶ç«¯">2. å®‰è£ SSH å®¢æˆ¶ç«¯
&lt;/h2>&lt;h3 id="linux">Linux
&lt;/h3>&lt;p>å¤§å¤šæ•¸ Linux ç™¼è¡Œç‰ˆé è¨­å·²å®‰è£ OpenSSHã€‚è‹¥æœªå®‰è£ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install openssh-client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mac">Mac
&lt;/h3>&lt;p>macOS é è¨­å·²å®‰è£ SSH å®¢æˆ¶ç«¯ï¼Œå¯ç›´æ¥åœ¨çµ‚ç«¯æ©Ÿä½¿ç”¨ &lt;code>ssh&lt;/code> æŒ‡ä»¤ã€‚&lt;/p>
&lt;h3 id="windows">Windows
&lt;/h3>&lt;p>å»ºè­°å®‰è£ &lt;a class="link" href="https://gitforwindows.org/" target="_blank" rel="noopener"
>Git for Windows&lt;/a> æˆ– &lt;a class="link" href="https://aka.ms/terminal" target="_blank" rel="noopener"
>Windows Terminal&lt;/a>ã€‚Windows 10 ä»¥ä¸Šå¯å•Ÿç”¨å…§å»º OpenSSHï¼š&lt;/p>
&lt;ol>
&lt;li>é–‹å•Ÿã€Œè¨­å®šã€&amp;gt;ã€Œæ‡‰ç”¨ç¨‹å¼ã€&amp;gt;ã€Œé¸æ“‡æ€§åŠŸèƒ½ã€ã€‚&lt;/li>
&lt;li>æ‰¾åˆ°ä¸¦å®‰è£ã€ŒOpenSSH Clientã€ã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="3-ç”¢ç”Ÿ-ssh-é‡‘é‘°">3. ç”¢ç”Ÿ SSH é‡‘é‘°
&lt;/h2>&lt;p>åœ¨æœ¬åœ°ç«¯ç”¢ç”Ÿ SSH é‡‘é‘°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ssh-keygen -t rsa -b &lt;span style="color:#ae81ff">4096&lt;/span> -C &lt;span style="color:#e6db74">&amp;#34;your_email@example.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¾ç…§æç¤ºè¨­å®šæª”æ¡ˆåç¨±èˆ‡å¯†ç¢¼ã€‚é è¨­æœƒç”¢ç”Ÿæ–¼ &lt;code>~/.ssh/id_rsa&lt;/code>ï¼ˆç§é‘°ï¼‰èˆ‡ &lt;code>~/.ssh/id_rsa.pub&lt;/code>ï¼ˆå…¬é‘°ï¼‰ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;code>ssh-keygen&lt;/code>:
&lt;ul>
&lt;li>Private key: Stored locally, default path is &lt;code>~/.ssh/id_rsa&lt;/code>&lt;/li>
&lt;li>Public key: Placed on the server to enable passwordless login, default path is &lt;code>~/.ssh/id_rsa.pub&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>-t&lt;/code>: Assign the key type&lt;/li>
&lt;li>&lt;code>-b&lt;/code>: Assign the key length&lt;/li>
&lt;li>&lt;code>-C&lt;/code>: Adds a comment to the key for identifying the user and purpose&lt;/li>
&lt;/ul>
&lt;p>Press Enter save as default, if exist same name key, will prompt if you want to cover it or not, if not, need to use other key name.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>C:&lt;span style="color:#ae81ff">\W&lt;/span>INDOWS&lt;span style="color:#ae81ff">\s&lt;/span>ystem32&amp;gt;ssh-keygen -t rsa -b &lt;span style="color:#ae81ff">4096&lt;/span> -C &lt;span style="color:#e6db74">&amp;#34;test@gmail.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Generating public/private rsa key pair.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter file in which to save the key &lt;span style="color:#f92672">(&lt;/span>C:&lt;span style="color:#ae81ff">\U&lt;/span>sers&lt;span style="color:#ae81ff">\u&lt;/span>sername/.ssh/id_rsa&lt;span style="color:#f92672">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># press enter login without passwordï¼ˆå®‰å…¨æ€§è¼ƒä½ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è¨­å®šå¯†ç¢¼çš„è©±ï¼Œå³ä½¿ private key è¢«ç›œï¼Œä»é ˆå¯†ç¢¼&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter passphrase &lt;span style="color:#f92672">(&lt;/span>empty &lt;span style="color:#66d9ef">for&lt;/span> no passphrase&lt;span style="color:#f92672">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Enter same passphrase again:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your identification has been saved in C:&lt;span style="color:#ae81ff">\U&lt;/span>sers&lt;span style="color:#ae81ff">\u&lt;/span>sername/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Your public key has been saved in C:&lt;span style="color:#ae81ff">\U&lt;/span>sers&lt;span style="color:#ae81ff">\u&lt;/span>sername/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The key fingerprint is:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SHA256:...çœç•¥... test@gmail.com
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>The key&lt;span style="color:#960050;background-color:#1e0010">&amp;#39;&lt;/span>s randomart image is:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---&lt;span style="color:#f92672">[&lt;/span>RSA 4096&lt;span style="color:#f92672">]&lt;/span>----+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...çœç•¥...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="4-è¨­å®š-ssh-é€£ç·š">4. è¨­å®š SSH é€£ç·š
&lt;/h2>&lt;h3 id="å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ">å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ
&lt;/h3>&lt;p>å°‡æœ¬åœ°çš„å…¬é‘°å…§å®¹ (&lt;code>~/.ssh/id_rsa.pub&lt;/code>) è¤‡è£½åˆ°é ç«¯ä¸»æ©Ÿçš„ &lt;code>~/.ssh/authorized_keys&lt;/code> æª”æ¡ˆä¸­ï¼Œå¯ä½¿ç”¨æŒ‡ä»¤ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ssh-copy-id user@remote_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ–æ‰‹å‹•è¤‡è£½æœ¬åœ°å…§å®¹åˆ° server ä¸­ã€‚&lt;/p>
&lt;p>On Linux or Mac, you can use the following command in the terminal to display your public key:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cat ~/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ¸¬è©¦é€£ç·š">æ¸¬è©¦é€£ç·š
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ssh user@remote_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è‹¥æˆåŠŸç™»å…¥ä¸¦ä¸”ä¸éœ€è¼¸å…¥å¯†ç¢¼å³è¨­å®šå®Œæˆã€‚&lt;/p>
&lt;hr>
&lt;h2 id="5-å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ">5. å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ
&lt;/h2>&lt;h3 id="ä½¿ç”¨-vscode-é€é-ssh-é ç«¯é–‹ç™¼">ä½¿ç”¨ VSCode é€é SSH é ç«¯é–‹ç™¼
&lt;/h3>&lt;ol>
&lt;li>
&lt;p>å®‰è£ &lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh" target="_blank" rel="noopener"
>Remote - SSH æ“´å……å¥—ä»¶&lt;/a>ã€‚&lt;br>
åœ¨ VSCode ä¸­å¯çœ‹åˆ° Remote-SSH åœ–ç¤ºï¼Œé»æ“Šå¾Œå¯é€²è¡Œé€£ç·šè¨­å®šï¼š
&lt;img src="https://Dandelionlibra.github.io/image/Remote-SSH.png"
loading="lazy"
alt="Remote-SSH"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>é»æ“Š VScode å·¦ä¸‹è§’çš„é›™ç®­é ­åœ–æ¨™ï¼Œæˆ–è€…æŒ‰ä¸‹ &lt;code>F1&lt;/code>ï¼Œè¼¸å…¥ &lt;code>Remote-SSH: Connect to Host...&lt;/code>ï¼Œé¸æ“‡æˆ–æ–°å¢ä¸»æ©Ÿã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code># remote_host è¼¸å…¥ä¼ºæœå™¨ ip ä½å€
user@remote_host [-p port_number]
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>é€£ç·šå¾Œè¼¸å…¥ç”¨æˆ¶åœ¨ server ä¸Šçš„å¯†ç¢¼å³å¯åœ¨é ç«¯ä¸»æ©Ÿä¸Šé–‹ç™¼ï¼Œæˆ–è€…å·²ç¶“è¨­å®šéé‡‘é‘°å¯ä¸ç”¨å†è¼¸å¯†ç¢¼ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä½¿ç”¨-git-é€é-ssh-é€²è¡Œç‰ˆæœ¬æ§åˆ¶">ä½¿ç”¨ Git é€é SSH é€²è¡Œç‰ˆæœ¬æ§åˆ¶
&lt;/h3>&lt;ol>
&lt;li>å°‡å…¬é‘°åŠ å…¥ Git æœå‹™ï¼ˆå¦‚ GitHubã€GitLabï¼‰ã€‚&lt;/li>
&lt;li>ä½¿ç”¨ SSH æ–¹å¼ clone æˆ– pushï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>git clone git@github.com:username/repo.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="6-åƒè€ƒè³‡æ–™">6. åƒè€ƒè³‡æ–™
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.openssh.com/manual.html" target="_blank" rel="noopener"
>OpenSSH å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" target="_blank" rel="noopener"
>GitHub SSH æ•™å­¸&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://code.visualstudio.com/docs/remote/ssh" target="_blank" rel="noopener"
>VSCode Remote SSH å®˜æ–¹èªªæ˜&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>LangChain å®‰è£èˆ‡åŸºæœ¬ä½¿ç”¨-1</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-1/</link><pubDate>Sun, 06 Jul 2025 15:33:11 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-1/</guid><description>&lt;h1 id="å®‰è£-langchain">å®‰è£ LangChain
&lt;/h1>&lt;p>ä½¿ç”¨ pip æŒ‡ä»¤å®‰è£ LangChain æ ¸å¿ƒå¥—ä»¶ï¼Œå…¶ä¸­æä¾›å„çµ„ä»¶èˆ‡åŸºæœ¬æ¡†æ¶ã€‚&lt;br>
LangChain ç›¸é—œå¥—ä»¶çš„è©³ç´°è³‡è¨Šå¯ä»¥åƒè€ƒ&lt;a class="link" href="https://python.langchain.com/api_reference/" target="_blank" rel="noopener"
>langchain å®˜æ–¹æ–‡ä»¶&lt;/a>ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>pip install langchain
&lt;/code>&lt;/pre>&lt;p>å®‰è£ LangChain ç¤¾ç¾¤å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«ç”±ç¤¾ç¾¤ç¶­è­·çš„ç¬¬ä¸‰æ–¹æ•´åˆæ¨¡çµ„ã€‚&lt;br>
éš¨è‘— LangChain çš„æ¨¡çµ„åŒ–ï¼Œè¨±å¤šåŸæœ¬å…§å»ºæ–¼æ ¸å¿ƒå¥—ä»¶çš„æ•´åˆåŠŸèƒ½è¢«è½‰ç§»åˆ°æ­¤å¥—ä»¶ä¸­ï¼Œä»¥ä¿æŒæ ¸å¿ƒå¥—ä»¶çš„è¼•é‡åŒ–ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>pip install langchain_community
&lt;/code>&lt;/pre>&lt;p>å®‰è£ LangChain èˆ‡æœ¬åœ° Ollama æ¨¡å‹æ•´åˆå°ˆç”¨é©…å‹•ï¼Œ
å¯ä»¥åœ¨ LangChain ä¸­ä½¿ç”¨æœ¬åœ° Ollama æ¨¡å‹ä½œç‚º LLMã€‚
LangChain å®˜æ–¹ç¶­è­·çš„å°ˆé–€ç”¨æ–¼æ•´åˆæœ¬åœ° Ollama LLM çš„æ’ä»¶å¥—ä»¶ã€‚&lt;/p>
&lt;p>å› ç‚º LangChain åœ¨ 0.3.1 å¾Œå°‡åŸæœ¬å…§å»ºæ–¼ &lt;code>langchain_community.llms.Ollama&lt;/code> çš„ Ollama æ•´åˆæ¨¡çµ„ æ‹†åˆ†ç‚ºç¨ç«‹çš„ &lt;code>langchain-ollama&lt;/code> å¥—ä»¶ã€‚&lt;br>
è©³ç´°è³‡è¨Šå¯ä»¥åƒè€ƒ&lt;a class="link" href="https://python.langchain.com/api_reference/ollama/index.html" target="_blank" rel="noopener"
>langchain å®˜æ–¹æ–‡ä»¶&lt;/a>ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>pip install langchain-ollama
&lt;/code>&lt;/pre>&lt;h1 id="ç°¡å–®æ‡‰ç”¨">ç°¡å–®æ‡‰ç”¨
&lt;/h1>&lt;p>æœ¬æ–‡æ‰€æœ‰ç¯„ä¾‹ç¨‹å¼ç¢¼éƒ½å¯ä»¥åœ¨ &lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_code.ipynb" target="_blank" rel="noopener"
>Jupyter Notebook&lt;/a> ä¸­æ‰¾åˆ°ã€‚&lt;/p>
&lt;h2 id="æ–‡æœ¬ç”Ÿæˆ">æ–‡æœ¬ç”Ÿæˆ
&lt;/h2>&lt;p>LangChain ä¸­ LLM çš„æœ€åŸºæœ¬åŠŸèƒ½æ˜¯æ ¹æ“šè¼¸å…¥çš„æ–‡æœ¬ç”Ÿæˆæ–°çš„æ–‡æœ¬ã€‚&lt;/p>
&lt;p>è¨»:ä¸æ¸…æ¥š Ollama å¦‚ä½•ä½¿ç”¨çš„å¯ä»¥å»çœ‹æˆ‘é—œæ–¼ Ollama çš„åŸºç¤ä½¿ç”¨æ–‡ç« ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>from langchain_ollama import OllamaLLM
llm = OllamaLLM(model=&amp;#34;llama3.1:8b&amp;#34;)
response = llm.invoke(&amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;)
print(response)
&lt;/code>&lt;/pre>&lt;p>temperature ç”¨æ–¼æ§åˆ¶ LLM ç”Ÿæˆå›ç­”çš„éš¨æ©Ÿæ€§èˆ‡å‰µé€ æ€§ã€‚&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;code>temperature&lt;/code> å€¼&lt;/th>
&lt;th>è¡Œç‚ºç‰¹æ€§&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>0&lt;/code>&lt;/td>
&lt;td>å®Œå…¨å¯é‡ç¾ï¼Œå¹¾ä¹ç¸½æ˜¯çµ¦å‡ºç›¸åŒå›ç­”ï¼Œé©åˆéœ€è¦æº–ç¢ºä¸”ç©©å®šè¼¸å‡ºæ™‚ä½¿ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>0.3 ~ 0.7&lt;/code>&lt;/td>
&lt;td>ä¸­åº¦å‰µé€ æ€§ï¼Œé©åˆä¸€èˆ¬æ‡‰ç”¨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>1.0&lt;/code>&lt;/td>
&lt;td>é«˜åº¦å‰µé€ æ€§ï¼Œå›ç­”å¯èƒ½æ›´å¤šæ¨£åŒ–èˆ‡éš¨æ©Ÿ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>&amp;gt;1&lt;/code>&lt;/td>
&lt;td>éå¸¸éš¨æ©Ÿï¼Œå›ç­”å¯èƒ½è·³è„«å¸¸è¦&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>ä¾‹å¦‚å¯ä»¥åœ¨å‰›å‰›çš„ response ä¸­ä½¿ç”¨ options å°‡ temperature è¨­ç‚º 0ï¼Œä½¿è¼¸å‡ºæ¯æ¬¡éƒ½æœƒå¾—åˆ°ä¸€æ¨£çš„ç­”æ¡ˆã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>response = llm.invoke(&amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;, options={&amp;#34;temperature&amp;#34;: 0})
&lt;/code>&lt;/pre>&lt;h2 id="èŠå¤©æ¨¡çµ„">èŠå¤©æ¨¡çµ„
&lt;/h2>&lt;pre tabindex="0">&lt;code>from langchain_ollama import ChatOllama
from langchain.schema import HumanMessage
Chatllm = ChatOllama(model=&amp;#34;llama3.1:8b&amp;#34;)
test = &amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;
messages = [HumanMessage(content=test)]
response = Chatllm.invoke(messages)
print(response)
&lt;/code>&lt;/pre>&lt;h3 id="ollamallm-vschatollama">OllamaLLM vs.ChatOllama
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>é …ç›®&lt;/th>
&lt;th>&lt;strong>OllamaLLM&lt;/strong>&lt;/th>
&lt;th>&lt;strong>ChatOllama&lt;/strong>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>ä¾†æº&lt;/strong>&lt;/td>
&lt;td>&lt;code>from langchain_ollama import OllamaLLM&lt;/code>&lt;/td>
&lt;td>&lt;code>from langchain_ollama import ChatOllama&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>ç”¨é€”&lt;/strong>&lt;/td>
&lt;td>å–®è¼ªæ–‡å­—ç”Ÿæˆï¼ˆSingle-turn LLMï¼‰&lt;/td>
&lt;td>å¤šè¼ªå°è©±ï¼ˆChat-based LLMï¼‰&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>å…¸å‹æ‡‰ç”¨å ´æ™¯&lt;/strong>&lt;/td>
&lt;td>å–®æ¬¡å›ç­”ã€æ‰¹æ¬¡ç”Ÿæˆè³‡æ–™ã€æ–‡å­—ç”Ÿæˆå·¥å…·&lt;/td>
&lt;td>èŠå¤©æ©Ÿå™¨äººã€å¤šè¼ªä¸Šä¸‹æ–‡å°è©±ã€Memory çµåˆ&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>è¼¸å…¥å‹æ…‹&lt;/strong>&lt;/td>
&lt;td>&lt;code>str&lt;/code>ï¼ˆç´”æ–‡å­— promptï¼‰&lt;/td>
&lt;td>&lt;code>List[BaseMessage]&lt;/code>ï¼ˆåŒ…å« &lt;code>SystemMessage&lt;/code>, &lt;code>HumanMessage&lt;/code>, &lt;code>AIMessage&lt;/code>ï¼‰&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>å›å‚³å‹æ…‹&lt;/strong>&lt;/td>
&lt;td>&lt;code>str&lt;/code>ï¼ˆæ–‡å­—å›æ‡‰ï¼‰&lt;/td>
&lt;td>&lt;code>AIMessage(content='...')&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>å›å‚³å…§å®¹å­˜å–&lt;/strong>&lt;/td>
&lt;td>ç›´æ¥ä½¿ç”¨ &lt;code>print(response)&lt;/code>&lt;/td>
&lt;td>ä½¿ç”¨ &lt;code>print(response.content)&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>æ˜¯å¦æ”¯æ´å¤šè¼ªä¸Šä¸‹æ–‡&lt;/strong>&lt;/td>
&lt;td>X&lt;/td>
&lt;td>O&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>é©åˆçµåˆ Agent&lt;/strong>&lt;/td>
&lt;td>ä½œç‚ºæ¨è«–å¼•æ“&lt;/td>
&lt;td>ä½œç‚º Chat Agent å°è©±å¼•æ“&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>å¯æ­é… Memory&lt;/strong>&lt;/td>
&lt;td>X&lt;/td>
&lt;td>å¯æ­é… Memory å¯¦ç¾ä¸Šä¸‹æ–‡æŒçºŒå°è©±&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="éˆå¼çµæ§‹">éˆå¼çµæ§‹
&lt;/h2>&lt;p>é€£æ¥å¤šå€‹ LLM æ¨¡çµ„ã€‚
&lt;img src="https://Dandelionlibra.github.io/image/LLMChain.png"
loading="lazy"
alt="LLMChain"
>&lt;/p>
&lt;h3 id="å¦‚ä½•é¿å…é‡è¤‡å®šç¾©ç›¸ä¼¼çš„-llm-æ¨¡çµ„">å¦‚ä½•é¿å…é‡è¤‡å®šç¾©ç›¸ä¼¼çš„ LLM æ¨¡çµ„?
&lt;/h3>&lt;p>ä½¿ç”¨æç¤ºæ¨¡æ¿(prompt template)å»é¿å…é‡è¤‡å®šç¾©åŠŸèƒ½ç›¸ä¼¼çš„çµ„ä»¶ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.prompts &lt;span style="color:#f92672">import&lt;/span> PromptTemplate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>llm_model &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>user_prompt &lt;span style="color:#f92672">=&lt;/span> PromptTemplate&lt;span style="color:#f92672">.&lt;/span>from_template(&lt;span style="color:#e6db74">&amp;#34;å¹«æˆ‘å–ä¸€å€‹&lt;/span>&lt;span style="color:#e6db74">{å½¢å®¹è©}{å°è±¡}&lt;/span>&lt;span style="color:#e6db74">å, ä¸¦å°æ‡‰ä¸€å€‹å°åã€‚&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(user_prompt&lt;span style="color:#f92672">.&lt;/span>format(å°è±¡ &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;å¯µç‰©&amp;#39;&lt;/span>, å½¢å®¹è© &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;å¯æ„›çš„&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(user_prompt&lt;span style="color:#f92672">.&lt;/span>format(å°è±¡ &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;ç”·å­©&amp;#39;&lt;/span>, å½¢å®¹è© &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;æ–‡é›…çš„&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.chains &lt;span style="color:#f92672">import&lt;/span> LLMChain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chain &lt;span style="color:#f92672">=&lt;/span> LLMChain(llm&lt;span style="color:#f92672">=&lt;/span>llm_model, prompt&lt;span style="color:#f92672">=&lt;/span>user_prompt)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(chain&lt;span style="color:#f92672">.&lt;/span>run(å°è±¡ &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;å°ç‹—&amp;#39;&lt;/span>, å½¢å®¹è© &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;æœ‰è¶£çš„&amp;#39;&lt;/span>))
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ä»£ç†äºº">ä»£ç†äºº
&lt;/h2>&lt;p>ä¸»è¦ç”¨æ–¼è™•ç†éˆå¼çµæ§‹ç„¡æ³•è™•ç†çš„å•é¡Œï¼Œä¸¦å¯é”æˆå‹•æ…‹æ±ºç­–ã€‚
èˆ‰ä¾‹è€Œè¨€ï¼Œä¸€èˆ¬å¤§å‹èªè¨€æ¨¡å‹æ˜¯ç„¡æ³•è¯ç¶²çš„ï¼Œè€Œç‚ºäº†è®“ LangChain å»ç²å¾—æœ€æ–°çš„å…§å®¹æˆ–è€…ç¾æœ‰è³‡æ–™åº«ä¸­ä¸å­˜åœ¨çš„è³‡è¨Šï¼Œå°±éœ€è¦ä½¿ç”¨ä»£ç†äºº (Agents) çµ„ä»¶é”æˆè¯ç¶²ã€‚&lt;/p>
&lt;h3 id="è¡Œç‚ºæ–¹å¼">è¡Œç‚ºæ–¹å¼
&lt;/h3>&lt;p>ä»£ç†äººå¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—é è¨­çš„å·¥å…·&lt;/p>
&lt;ul>
&lt;li>é¸æ“‡å·¥å…·&lt;/li>
&lt;li>ä½¿ç”¨å·¥å…·&lt;/li>
&lt;li>è§€æ¸¬ä¸¦è™•ç†å·¥å…·ä½¿ç”¨çµæœ&lt;/li>
&lt;li>é‡è¤‡ä»¥ä¸Šæ­¥é©Ÿ&lt;/li>
&lt;/ul>
&lt;h3 id="ç¯„ä¾‹">ç¯„ä¾‹
&lt;/h3>&lt;p>ä½¿ä»£ç†äººèƒ½å®Œæˆæ•¸å­¸é‹ç®—ä»»å‹™ã€‚&lt;/p>
&lt;p>&lt;strong>step1: å®šç¾©åº•å±¤ LLM æ¨¡çµ„&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>llm_model &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>step2: å®šç¾©å…è¨±ä»£ç†äººä½¿ç”¨çš„å·¥å…·&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.agents &lt;span style="color:#f92672">import&lt;/span> initialize_agent, load_tools
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tools &lt;span style="color:#f92672">=&lt;/span> load_tools([&lt;span style="color:#e6db74">&amp;#34;llm-math&amp;#34;&lt;/span>], llm&lt;span style="color:#f92672">=&lt;/span>llm_model)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>step3: åˆå§‹åŒ–ä»£ç†äºº&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>agent &lt;span style="color:#f92672">=&lt;/span> initialize_agent(tools, llm_model, agent&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;zero-shot-react-description&amp;#34;&lt;/span>, verbose&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>step4: é‹è¡Œä»£ç†äºº&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>agent&lt;span style="color:#f92672">.&lt;/span>invoke(&lt;span style="color:#e6db74">&amp;#34;å¦‚æœæˆ‘æœ‰ 100 å…ƒï¼Œè²·äº† 3 å€‹è˜‹æœï¼Œæ¯å€‹è˜‹æœ 10 å…ƒï¼Œå‰©ä¸‹å¤šå°‘éŒ¢ï¼Ÿ&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="èŠå¤©ç´€éŒ„">èŠå¤©ç´€éŒ„
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain_ollama &lt;span style="color:#f92672">import&lt;/span> OllamaLLM
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>llm_model &lt;span style="color:#f92672">=&lt;/span> OllamaLLM(model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> langchain.chains &lt;span style="color:#f92672">import&lt;/span> ConversationChain
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>conversation &lt;span style="color:#f92672">=&lt;/span> ConversationChain(llm&lt;span style="color:#f92672">=&lt;/span>llm_model, verbose&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">True&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>conversation&lt;span style="color:#f92672">.&lt;/span>run(&lt;span style="color:#e6db74">&amp;#34;æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡º&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.
Current conversation:
Human: æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?
AI:
&amp;gt; Finished chain.
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>&amp;#39;å•Šå“ˆï¼ä½ æƒ³è¦ä¸€å€‹è°æ˜åˆå¯æ„›çš„ä¼´ä¾¶å—ï¼Ÿæˆ‘æœ‰ä¸€äº›è¶…å¥½çš„å»ºè­°ï¼åŸºæ–¼ä½ çš„æè¿°ï¼Œæˆ‘æ¨æ¸¬ä½ å¯èƒ½æ˜¯æ–°æ‰‹ç‹—ä¸»äººï¼Œæ‰€ä»¥æˆ‘è¦é¦–å…ˆä»‹ç´¹ä¸€ä¸‹æœ€é©åˆåˆå­¸è€…çš„çŠ¬ç¨®ã€‚æœ‰äº†é€™äº›çŠ¬ç¨®ï¼Œä½ å°±èƒ½è¼•é¬†åœ°åŸ¹é¤Šèµ·ä¸€å€‹è½è©±åˆå–„è‰¯çš„ä¼´ä¾¶ã€‚\n\nå…¶ä¸­ï¼Œæ‹‰å¸ƒæ‹‰å¤šçŠ¬å’Œé‡‘æ°é«”å‹å°çµçŠ¬ï¼ˆCavalier King Charles Spanielï¼‰éƒ½å¾ˆå—äººå–œæ„›ï¼Œ.......ä½ å°æ–¼çŠ¬ç¨®çš„åå¥½æ˜¯ä»€éº¼ï¼Ÿä½ æƒ³è¦ä¸€éš»å¤§çŠ¬é‚„æ˜¯ä¸€éš»å°çŠ¬å‘¢ï¼Ÿ&amp;#39;
&lt;/code>&lt;/pre>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>conversation&lt;span style="color:#f92672">.&lt;/span>run(&lt;span style="color:#e6db74">&amp;#34;é‚£è²“å‘¢?&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¼¸å‡º&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.
Current conversation:
Human: æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?
AI: å•Šå“ˆï¼ä½ æƒ³è¦ä¸€å€‹è°æ˜åˆå¯æ„›çš„ä¼´ä¾¶å—ï¼Ÿæˆ‘æœ‰ä¸€äº›è¶…å¥½çš„å»ºè­°ï¼åŸºæ–¼ä½ çš„æè¿°ï¼Œæˆ‘æ¨æ¸¬ä½ å¯èƒ½æ˜¯æ–°æ‰‹ç‹—ä¸»äººï¼Œæ‰€ä»¥æˆ‘è¦é¦–å…ˆä»‹ç´¹ä¸€ä¸‹æœ€é©åˆåˆå­¸è€…çš„çŠ¬ç¨®ã€‚æœ‰äº†é€™äº›çŠ¬ç¨®ï¼Œä½ å°±èƒ½è¼•é¬†åœ°åŸ¹é¤Šèµ·ä¸€å€‹è½è©±åˆå–„è‰¯çš„ä¼´ä¾¶ã€‚
...çœç•¥...
æœ€å¾Œï¼Œæˆ‘æƒ³å•ä¸€ä¸‹ï¼Œä½ å°æ–¼çŠ¬ç¨®çš„åå¥½æ˜¯ä»€éº¼ï¼Ÿä½ æƒ³è¦ä¸€éš»å¤§çŠ¬é‚„æ˜¯ä¸€éš»å°çŠ¬å‘¢ï¼Ÿ
Human: é‚£è²“å‘¢?
AI:
&amp;gt; Finished chain.
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>&amp;#39;è²“ï¼æˆ‘å¾ˆæ¨‚æ„å¹«åŠ©ä½ æ‰¾ä¸€å€‹é©åˆä½ çš„è²“ä¼´ä¾¶ï¼ä½†æ˜¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä¹‹å‰ä¸»è¦æ˜¯åœ¨èªªç‹—çš„è©±é¡Œï¼Œå› ç‚ºæˆ‘çš„è¨“ç·´è³‡æ–™é›†ä¸­åœ¨çŠ¬é¡ä¸Šã€‚\n\nä½†æ˜¯åœ¨è²“é¡æ–¹é¢ï¼Œæˆ‘å¯ä»¥æä¾›ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚...çœç•¥...æˆ–è€…ä½ å°è²“çš„éœ€æ±‚å’Œç”Ÿæ´»æ–¹å¼æ˜¯å¦æœ‰æ‰€è®ŠåŒ–ï¼Ÿ&amp;#39;
&lt;/code>&lt;/pre>&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
>https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Introduction langchain</title><link>https://Dandelionlibra.github.io/post/langchain/introlangchain/</link><pubDate>Sun, 06 Jul 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/introlangchain/</guid><description>&lt;h1 id="ä»‹ç´¹-langchain">ä»‹ç´¹ LangChain
&lt;/h1>&lt;p>LangChain ç‚º 2022 å¹´ç™¼å¸ƒçš„é–‹æºæ¡†æ¶ï¼Œä¸»è¦ç”¨æ–¼é–‹ç™¼ç”±èªè¨€æ¨¡å‹é©…å‹•çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¯é€£æ¥å¤šç¨®èªè¨€æ¨¡å‹èˆ‡å¤–éƒ¨å·¥å…·ã€‚&lt;br>
&lt;a class="link" href="https://www.langchain.com" target="_blank" rel="noopener"
>LangChain å®˜æ–¹ç¶²ç«™&lt;/a>
&lt;img src="https://Dandelionlibra.github.io/image/ecosystem_packages-32943b32657e7a187770c9b585f22a64.png"
loading="lazy"
alt="LLMChain"
>&lt;/p>
&lt;h2 id="å„ªé»">å„ªé»
&lt;/h2>&lt;ul>
&lt;li>é–‹æºå·¥å…·&lt;/li>
&lt;li>æ”¯æŒå¤šç¨®é–‹æºæ¨¡å‹&lt;/li>
&lt;li>å¯æ•´åˆå¤šé …å¤–éƒ¨æœå‹™&lt;/li>
&lt;/ul>
&lt;h2 id="ä¸»è¦çµ„ä»¶">ä¸»è¦çµ„ä»¶
&lt;/h2>&lt;ul>
&lt;li>æ¨¡å‹ (Models)
&lt;ul>
&lt;li>èªè¨€æ¨¡å‹ã€æ–‡æœ¬åµŒå…¥æ¨¡å‹ç­‰ç­‰&amp;hellip;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>è¨˜æ†¶é«” (Memory)
&lt;ul>
&lt;li>çŸ­æœŸèˆ‡é•·æœŸè¨˜æ†¶ï¼Œç”¨æ–¼å„²å­˜èˆ‡æª¢ç´¢èŠå¤©æ­·å²&lt;/li>
&lt;li>åŒ…å«å°è©±ç·©è¡è¨˜æ†¶é«”ã€å¯¦é«”è¨˜æ†¶é«”ã€å‘é‡å„²å­˜è¨˜æ†¶é«”&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä»£ç† (Agents)
&lt;ul>
&lt;li>æ¨ç†å¼•æ“&lt;/li>
&lt;li>å¯ä»¥æ ¹æ“šçµ¦å®šçš„æƒ…å¢ƒèˆ‡æ•¸æ“šåšå‡ºåˆç†çš„æ±ºç­–èˆ‡æ¨ç†&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>LangChain è—‰ç”±é€™äº›çµ„ä»¶é€£çµå„ç¨®æ¨¡å‹èˆ‡å·¥å…·ï¼Œä»¥é”æˆæª¢ç´¢èˆ‡åˆ†ææ•¸æ“šï¼Œä¸¦å¯é€²è¡Œå€‹æ€§åŒ–çš„è¨‚è£½ã€‚&lt;/p>
&lt;h2 id="ä¸»è¦è§£æ±ºå•é¡Œ">ä¸»è¦è§£æ±ºå•é¡Œ
&lt;/h2>&lt;ul>
&lt;li>å¦‚ä½•æ ¼å¼åŒ–è¼¸å‡º?&lt;/li>
&lt;li>å¦‚ä½•è¼¸å‡ºå¾ˆé•·çš„æ–‡æœ¬?&lt;/li>
&lt;li>å¦‚ä½•å‘¼å«å¤šæ¬¡ api?&lt;/li>
&lt;li>å¦‚ä½•ä½¿ api èƒ½å‘¼å«å¤–éƒ¨çš„æœå‹™ã€å·¥å…·?&lt;/li>
&lt;li>å¦‚ä½•é€²è¡Œæ¨™æº–åŒ–çš„é–‹ç™¼?&lt;/li>
&lt;li>&amp;hellip;&lt;/li>
&lt;/ul>
&lt;h1 id="reference">Reference
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://python.langchain.com/docs/introduction/" target="_blank" rel="noopener"
>https://python.langchain.com/docs/introduction/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=feFp5TbrVMo" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=feFp5TbrVMo&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
>https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>How to install and use Ollama?</title><link>https://Dandelionlibra.github.io/post/ollama/ollama/</link><pubDate>Sat, 05 Jul 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/ollama/ollama/</guid><description>&lt;h1 id="ä»‹ç´¹-ollama">ä»‹ç´¹ Ollama
&lt;/h1>&lt;p>Ollama æ˜¯ä¸€å€‹èƒ½åœ¨ æœ¬åœ°ï¼ˆWindows/Mac/Linuxï¼‰åŸ·è¡Œå¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œ Vision Language Modelï¼ˆVLMï¼‰ çš„æ¡†æ¶ã€‚&lt;/p>
&lt;ul>
&lt;li>é–‹æºå·¥å…·&lt;/li>
&lt;li>åœ¨æœ¬åœ°ç«¯é‹è¡Œå¤§å‹èªè¨€æ¨¡å‹&lt;/li>
&lt;li>é›¢ç·šç‰¹æ€§ä»¥ä¿è­·éš±ç§&lt;/li>
&lt;/ul>
&lt;h1 id="å®‰è£-ollama">å®‰è£ Ollama
&lt;/h1>&lt;h2 id="windows">Windows
&lt;/h2>&lt;p>è‡³ &lt;a class="link" href="https://ollama.com/" target="_blank" rel="noopener"
>Ollama å®˜æ–¹ç¶²ç«™&lt;/a>
ä¸‹è¼‰ windows ç‰ˆæœ¬å¾Œï¼Œé»æ“ŠåŸ·è¡Œæª”å®‰è£ã€‚&lt;br>
å®‰è£å¾Œæ–¼çµ‚ç«¯æ©Ÿä¸­æ¸¬è©¦æ˜¯å¦å®‰è£æˆåŠŸã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>ollama --help
&lt;/code>&lt;/pre>&lt;h2 id="mac">Mac
&lt;/h2>&lt;p>åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„ä¸‹è¼‰æŒ‡ä»¤ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>brew install ollama
&lt;/code>&lt;/pre>&lt;h2 id="linux">Linux
&lt;/h2>&lt;p>åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„ä¸‹è¼‰æŒ‡ä»¤ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>curl -fsSL https://ollama.com/install.sh | sh
&lt;/code>&lt;/pre>&lt;h1 id="å¦‚ä½•ä½¿ç”¨-ollama">å¦‚ä½•ä½¿ç”¨ Ollama?
&lt;/h1>&lt;h3 id="åœ¨æœ¬åœ°å•Ÿå‹•æœå‹™">åœ¨æœ¬åœ°å•Ÿå‹•æœå‹™
&lt;/h3>&lt;pre tabindex="0">&lt;code>ollama serve
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>C:\Users\user&amp;gt;ollama serve
&lt;/code>&lt;/pre>&lt;h3 id="åŸ·è¡Œèªè¨€æ¨¡å‹">åŸ·è¡Œèªè¨€æ¨¡å‹
&lt;/h3>&lt;p>å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­æä¾›çš„æ¨¡å‹ &lt;a class="link" href="https://ollama.com/search" target="_blank" rel="noopener"
>https://ollama.com/search&lt;/a>&lt;/p>
&lt;pre tabindex="0">&lt;code>ollama run [model name]
&lt;/code>&lt;/pre>&lt;p>è‹¥æ˜¯ç¬¬ä¸€æ¬¡é‹è¡Œè©²æ¨¡å‹å‰‡æœƒåŸ·è¡Œä¸‹è¼‰ã€‚
minicpm-V æ˜¯å¯ç”¨æ–¼è§£èªªåœ–ç‰‡çš„èªè¨€æ¨¡å‹ï¼Œä½¿ç”¨ &lt;code>/bye&lt;/code> é›¢é–‹ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>C:\Users\user&amp;gt;ollama run minicpm-v:latest
pulling manifest
pulling 262843d4806a: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 4.4 GB
pulling f8a805e9e620: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 1.0 GB
pulling 60ed67c565f8: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 506 B
pulling 8603ca877636: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 5.7 KB
pulling f02dd72bb242: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 59 B
pulling 175e3bb367ab: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 566 B
verifying sha256 digest
writing manifest
success
&amp;gt;&amp;gt;&amp;gt; Discribe this picture &amp;#34;C:\Users\user\Downloads\picture.png&amp;#34;
Added image &amp;#39;C:\Users\user\Downloads\picture.png&amp;#39;
This image depicts a small white rodent sitting on the ground in an
outdoor setting. The animal appears to have soft fur with light
brownish-grey patches around its eyes and ears. Its pink nose is
prominent, as are its large black eyes which stand out against its pale
face.
&amp;gt;&amp;gt;&amp;gt; /bye
&lt;/code>&lt;/pre>&lt;p>çµ‚ç«¯å‘¼å«æ¨¡å‹ä¸¦è¼¸å…¥æŒ‡ä»¤ã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>C:\Users\user&amp;gt;ollama run llama3.1:8b &amp;#34;define what is atom&amp;#34;
An **atom** (from the Greek word &amp;#34;atomos,&amp;#34; meaning indivisible) is the smallest
unit of a chemical element that retains its chemical properties and is
considered the fundamental building block of matter.
In simpler terms, an atom is:
1. **Indivisible**: An atom cannot be broken down into smaller particles using
any known means.
2. **Stable**: Atoms are stable entities that do not change their structure or
composition over time.
3. **Unique**: Each element has a unique set of atoms with specific properties.
... å¿½ç•¥ ...
Would you like me to explain any related concepts or clarify anything about
atoms?
&lt;/code>&lt;/pre>&lt;h3 id="æŸ¥çœ‹ç›®å‰å·²å®‰è£çš„èªè¨€æ¨¡å‹">æŸ¥çœ‹ç›®å‰å·²å®‰è£çš„èªè¨€æ¨¡å‹
&lt;/h3>&lt;pre tabindex="0">&lt;code>ollama list
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>C:\Users\user&amp;gt;ollama list
NAME ID SIZE MODIFIED
minicpm-v:latest c92bfad01205 5.5 GB 2 hours ago
llama3.1:8b 46e0c10c039e 4.9 GB 2 hours ago
&lt;/code>&lt;/pre>&lt;h3 id="åˆªé™¤å·²å®‰è£çš„èªè¨€æ¨¡å‹">åˆªé™¤å·²å®‰è£çš„èªè¨€æ¨¡å‹
&lt;/h3>&lt;pre tabindex="0">&lt;code>ollama rm [model name]
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>C:\Users\user&amp;gt;ollama rm minicpm-v:latest
deleted &amp;#39;minicpm-v:latest&amp;#39;
C:\Users\user&amp;gt;ollama list
NAME ID SIZE MODIFIED
llama3.1:8b 46e0c10c039e 4.9 GB 8 hours ago
&lt;/code>&lt;/pre>&lt;h3 id="">
&lt;/h3>&lt;h3 id="role-çš„-3-å€‹ä¸»è¦é¡å‹">&lt;code>role&lt;/code> çš„ 3 å€‹ä¸»è¦é¡å‹
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>role&lt;/th>
&lt;th>èªªæ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>system&lt;/code>&lt;/td>
&lt;td>ç³»çµ±è§’è‰²ï¼Œè¨­å®šã€Œé€™å€‹æ¨¡å‹è©²å¦‚ä½•è¡¨ç¾è‡ªå·±ã€ï¼Œå®šç¾©æ•´å€‹å°è©±çš„è§’è‰²èƒŒæ™¯ã€å£å»ã€é™åˆ¶ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>user&lt;/code>&lt;/td>
&lt;td>ä½¿ç”¨è€…è§’è‰²ï¼Œæ¨¡æ“¬çœŸå¯¦ä½¿ç”¨è€…è¼¸å…¥çš„è¨Šæ¯ã€‚&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>assistant&lt;/code>&lt;/td>
&lt;td>æ¨¡å‹æ‰®æ¼”çš„è§’è‰²å›è¦†ã€‚ç”¨ä¾†æä¾›ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚å¤šè¼ªå°è©±ï¼‰ã€‚&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="ä½¿ç”¨-python-èˆ‡ç¨‹å¼ä¸²æ¥">ä½¿ç”¨ Python èˆ‡ç¨‹å¼ä¸²æ¥
&lt;/h2>&lt;h3 id="ä½¿ç”¨-requests-å‘¼å«">ä½¿ç”¨ requests å‘¼å«
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> requests
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># API URL&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>url &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;http://127.0.0.1:11434/v1/chat/completions&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># è«‹æ±‚è³‡æ–™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>payload &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;model&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># å°æ‡‰ä½ æœ¬åœ°æ‹‰å–çš„æ¨¡å‹åç¨±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;messages&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;system&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;You are a helpful assistant.&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;What is the capital of France?&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;assistant&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;The capital of France is Paris.&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;What is the population of Paris?&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;assistant&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;As of 2023, the population of Paris is about 2.1 million.&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;What river flows through Paris?&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Headers&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>headers &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;Content-Type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;application/json&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># &amp;#34;Authorization&amp;#34;: &amp;#34;Bearer ollama&amp;#34; # å‚³éèº«ä»½é©—è­‰è³‡è¨Šï¼Œæœ¬åœ°ä¼ºæœå™¨é è¨­ä¸é©—è­‰é‡‘é‘°å¯çœç•¥&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç™¼é€ POST è«‹æ±‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>response &lt;span style="color:#f92672">=&lt;/span> requests&lt;span style="color:#f92672">.&lt;/span>post(url, headers&lt;span style="color:#f92672">=&lt;/span>headers, data&lt;span style="color:#f92672">=&lt;/span>json&lt;span style="color:#f92672">.&lt;/span>dumps(payload))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é¡¯ç¤ºçµæœ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> response&lt;span style="color:#f92672">.&lt;/span>status_code &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">200&lt;/span>: &lt;span style="color:#75715e"># HTTP ç‹€æ…‹ç¢¼ 200 ä»£è¡¨è«‹æ±‚æˆåŠŸã€‚&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> data &lt;span style="color:#f92672">=&lt;/span> response&lt;span style="color:#f92672">.&lt;/span>json() &lt;span style="color:#75715e"># è§£æ JSON è³‡æ–™ï¼Œæ­¤æ–¹æ³•å°‡å›æ‡‰å…§å®¹ï¼ˆex.å­—ä¸²ï¼‰è½‰æ›æˆ Python çš„è³‡æ–™çµæ§‹ï¼ˆex.dictï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(data[&lt;span style="color:#e6db74">&amp;#34;choices&amp;#34;&lt;/span>][&lt;span style="color:#ae81ff">0&lt;/span>][&lt;span style="color:#e6db74">&amp;#34;message&amp;#34;&lt;/span>][&lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> print(&lt;span style="color:#e6db74">&amp;#34;Error:&amp;#34;&lt;/span>, response&lt;span style="color:#f92672">.&lt;/span>status_code, response&lt;span style="color:#f92672">.&lt;/span>text)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>response è¿”å›çµæ§‹é¡ä¼¼ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;id&amp;#34;: &amp;#34;chatcmpl-1234567890abcdef&amp;#34;,
&amp;#34;object&amp;#34;: &amp;#34;chat.completion&amp;#34;,
&amp;#34;created&amp;#34;: 1700000000,
&amp;#34;model&amp;#34;: &amp;#34;llama3.1:8b&amp;#34;,
&amp;#34;choices&amp;#34;: [
{
&amp;#34;index&amp;#34;: 0,
&amp;#34;message&amp;#34;: {
&amp;#34;role&amp;#34;: &amp;#34;assistant&amp;#34;,
&amp;#34;content&amp;#34;: &amp;#34;The capital of France is Paris.&amp;#34;
},
&amp;#34;finish_reason&amp;#34;: &amp;#34;stop&amp;#34;
}
],
&amp;#34;usage&amp;#34;: {
&amp;#34;prompt_tokens&amp;#34;: 20,
&amp;#34;completion_tokens&amp;#34;: 10,
&amp;#34;total_tokens&amp;#34;: 30
}
}
&lt;/code>&lt;/pre>&lt;h3 id="ä½¿ç”¨-openai-sdk-å‘¼å«">ä½¿ç”¨ openai SDK å‘¼å«
&lt;/h3>&lt;h4 id="å®‰è£-openai">å®‰è£ openai
&lt;/h4>&lt;p>ä½¿ç”¨ pip æŒ‡ä»¤é€²è¡Œå®‰è£ã€‚&lt;br>
ps.è‹¥æ²’æœ‰ pip æˆ‘æœªä¾†å†å¯«ä¸€ç¯‡å®‰è£èˆ‡ä½¿ç”¨ pip çš„æ–‡ç«  ;)&lt;/p>
&lt;pre tabindex="0">&lt;code>pip install openai
&lt;/code>&lt;/pre>&lt;p>æŸ¥çœ‹å®‰è£ç‰ˆæœ¬ &amp;amp; æ˜¯å¦å·²å®‰è£é&lt;/p>
&lt;pre tabindex="0">&lt;code>pip show openai
&lt;/code>&lt;/pre>&lt;pre tabindex="0">&lt;code>WARNING: Package(s) not found: openai
&lt;/code>&lt;/pre>&lt;p>è‹¥å·²å®‰è£éä¸”ç‰ˆæœ¬å°æ–¼ 1.0.0ï¼Œæ›´æ–° openai å¥—ä»¶&lt;/p>
&lt;pre tabindex="0">&lt;code>pip install --upgrade openai
&lt;/code>&lt;/pre>&lt;h3 id="ä½¿ç”¨èªè¨€æ¨¡å‹">ä½¿ç”¨èªè¨€æ¨¡å‹
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> openai &lt;span style="color:#f92672">import&lt;/span> OpenAI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>client &lt;span style="color:#f92672">=&lt;/span> OpenAI(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># base_url = &amp;#34;http://localhost:11434/v1&amp;#34;,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base_url &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;http://127.0.0.1:11434/v1&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># æœ¬åœ° Ollama ä¼ºæœå™¨çš„ URLï¼Œé è¨­ç«¯å£ç‚º 11434&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> api_key &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;ollama&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># æœ¬åœ° Ollama ä¸é©—è­‰å¯†é‘°ï¼Œåªè¦éš¨æ„å¡«å…¥å³å¯ï¼Œç¿’æ…£ä½¿ç”¨ ollama&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å‘¼å«æœ¬åœ° Ollama ä¼ºæœå™¨é€²è¡Œ Chat Completion&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>response &lt;span style="color:#f92672">=&lt;/span> client&lt;span style="color:#f92672">.&lt;/span>chat&lt;span style="color:#f92672">.&lt;/span>completions&lt;span style="color:#f92672">.&lt;/span>create(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;llama3.1:8b&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messages&lt;span style="color:#f92672">=&lt;/span>[ &lt;span style="color:#75715e"># è¨­å®šå°è©±å…§å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;system&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># è¨­å®šæ¨¡å‹è¡Œç‚º&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;You are a helpful assistant.&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># ä½¿ç”¨è€…è¼¸å…¥çš„å•é¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;What is the capital of France?&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(response&lt;span style="color:#f92672">.&lt;/span>choices[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>message&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="ä½¿ç”¨-vision-model">ä½¿ç”¨ Vision model
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">import&lt;/span> base64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">from&lt;/span> openai &lt;span style="color:#f92672">import&lt;/span> OpenAI
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>image_path &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">r&lt;/span>&lt;span style="color:#e6db74">&amp;#34;C:\åœ–ç‰‡è·¯å¾‘.png&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">with&lt;/span> open(image_path, &lt;span style="color:#e6db74">&amp;#34;rb&amp;#34;&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> img_file:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> b64_string &lt;span style="color:#f92672">=&lt;/span> base64&lt;span style="color:#f92672">.&lt;/span>b64encode(img_file&lt;span style="color:#f92672">.&lt;/span>read())&lt;span style="color:#f92672">.&lt;/span>decode(&lt;span style="color:#e6db74">&amp;#34;utf-8&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å»ºç«‹å¯å‚³å…¥ Ollama çš„å®Œæ•´ URL å­—ä¸²&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>image_b64_url &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">f&lt;/span>&lt;span style="color:#e6db74">&amp;#34;data:image/png;base64,&lt;/span>&lt;span style="color:#e6db74">{&lt;/span>b64_string&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>client &lt;span style="color:#f92672">=&lt;/span> OpenAI(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> base_url&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;http://127.0.0.1:11434/v1&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> api_key&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;ollama&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>response &lt;span style="color:#f92672">=&lt;/span> client&lt;span style="color:#f92672">.&lt;/span>chat&lt;span style="color:#f92672">.&lt;/span>completions&lt;span style="color:#f92672">.&lt;/span>create(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> model&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;minicpm-v&amp;#34;&lt;/span>, &lt;span style="color:#75715e"># æ”¯æ´åœ–ç‰‡è¼¸å…¥çš„æ¨¡å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messages&lt;span style="color:#f92672">=&lt;/span>[
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;role&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;user&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;content&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#e6db74">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;text&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;text&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Please describe the image in detail.&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;image_url&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;image_url&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;url&amp;#34;&lt;/span>: image_b64_url
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>print(response&lt;span style="color:#f92672">.&lt;/span>choices[&lt;span style="color:#ae81ff">0&lt;/span>]&lt;span style="color:#f92672">.&lt;/span>message&lt;span style="color:#f92672">.&lt;/span>content)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>31. Next Permutation</title><link>https://Dandelionlibra.github.io/post/leetcode/31/leetcode/</link><pubDate>Sun, 02 Feb 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/leetcode/31/leetcode/</guid><description>&lt;h2 id="é¡Œç›®">é¡Œç›®
&lt;/h2>&lt;p>A permutation of an array of integers is an arrangement of its members into a sequence or linear order.&lt;/p>
&lt;p>For example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].
The next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).&lt;/p>
&lt;p>For example, the next permutation of arr = [1,2,3] is [1,3,2].
Similarly, the next permutation of arr = [2,3,1] is [3,1,2].
While the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.
Given an array of integers nums, find the next permutation of nums.&lt;/p>
&lt;p>The replacement must be in place and use only constant extra memory.&lt;/p>
&lt;h3 id="constraints">Constraints:
&lt;/h3>&lt;ul>
&lt;li>1 &amp;lt;= nums.length &amp;lt;= 100&lt;/li>
&lt;li>0 &amp;lt;= nums[i] &amp;lt;= 100&lt;/li>
&lt;/ul>
&lt;h3 id="example-1">Example 1:
&lt;/h3>&lt;blockquote>
&lt;p>Input: nums = [1,2,3]&lt;br>
Output: [1,3,2]&lt;/p>&lt;/blockquote>
&lt;h3 id="example-2">Example 2:
&lt;/h3>&lt;blockquote>
&lt;p>Input: nums = [3,2,1]&lt;br>
Output: [1,2,3]&lt;/p>&lt;/blockquote>
&lt;h3 id="example-2-1">Example 2:
&lt;/h3>&lt;blockquote>
&lt;p>Input: nums = [1,1,5]&lt;br>
Output: [1,5,1]&lt;/p>&lt;/blockquote>
&lt;h2 id="è§£é¡Œæ–¹æ³•">è§£é¡Œæ–¹æ³•
&lt;/h2>&lt;ol>
&lt;li>
&lt;p>å¾å³å‘å·¦å°‹æ‰¾éæ¸›åºåˆ—çš„è½‰æŠ˜é»ï¼š
æ‰¾åˆ°ç¬¬ä¸€å€‹ä½ç½® iï¼Œä½¿å¾— nums[i] &amp;lt; nums[i + 1]ã€‚é€™è¡¨ç¤ºå¾ i ä¹‹å¾Œçš„æ•¸å­—æ˜¯éæ¸›çš„ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœæ‰¾ä¸åˆ°ï¼Œèªªæ˜ç•¶å‰æ’åˆ—æ˜¯æœ€å¤§çš„ï¼Œç›´æ¥åè½‰é™£åˆ—ï¼š
å¦‚æœæ•´å€‹é™£åˆ—æ˜¯éæ¸›çš„ï¼ˆå¦‚ [3, 2, 1]ï¼‰ï¼Œå‰‡ç›´æ¥åè½‰æ•´å€‹é™£åˆ—è®Šç‚ºæœ€å°æ’åˆ—ï¼ˆå¦‚ [1, 2, 3]ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰¾åˆ°æ¯” nums[i] å¤§çš„æœ€å°æ•¸å­—ä¸¦äº¤æ›ï¼š
åœ¨ i å³é‚Šçš„æ•¸å­—ä¸­ï¼Œæ‰¾åˆ°æœ€æ¥è¿‘ä¸”æ¯” nums[i] å¤§çš„æ•¸å­— nums[j]ï¼Œç„¶å¾Œäº¤æ› nums[i] å’Œ nums[j]ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åè½‰ i + 1 ä¹‹å¾Œçš„å­é™£åˆ—ï¼š
é€™æ¨£èƒ½ä¿è­‰è½‰æŠ˜é»å¾Œçš„æ•¸å­—è®Šç‚ºæœ€å°æ’åˆ—ï¼Œç¢ºä¿æ•´é«”æ˜¯ä¸‹ä¸€å€‹æ’åˆ—ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ç¨‹å¼">ç¨‹å¼
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-C" data-lang="C">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;bits/stdc++.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>using namespace std;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>class Solution {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>public:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">nextPermutation&lt;/span>(vector&lt;span style="color:#f92672">&amp;lt;&lt;/span>&lt;span style="color:#66d9ef">int&lt;/span>&lt;span style="color:#f92672">&amp;gt;&amp;amp;&lt;/span> nums) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> size &lt;span style="color:#f92672">=&lt;/span> nums.&lt;span style="color:#a6e22e">size&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cout &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> size ;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Solution sol;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cout &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> sol.&lt;span style="color:#a6e22e">divide&lt;/span>(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">2147483648&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>) &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> endl;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
>Pawel Czerwinski&lt;/a> on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
>Unsplash&lt;/a>&lt;/p>&lt;/blockquote></description></item><item><title>29. Divide Two Integers</title><link>https://Dandelionlibra.github.io/post/leetcode/29/leetcode/</link><pubDate>Sat, 01 Feb 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/leetcode/29/leetcode/</guid><description>&lt;h2 id="é¡Œç›®">é¡Œç›®
&lt;/h2>&lt;p>Given two integers dividend and divisor, divide two integers without using multiplication, division, and mod operator.&lt;/p>
&lt;p>The integer division should truncate toward zero, which means losing its fractional part. For example, 8.345 would be truncated to 8, and -2.7335 would be truncated to -2.&lt;/p>
&lt;p>Return the quotient after dividing dividend by divisor.&lt;/p>
&lt;p>Note: Assume we are dealing with an environment that could only store integers within the 32-bit signed integer range: $[âˆ’2^{31}, 2^{31} âˆ’ 1]$. For this problem, if the quotient is strictly greater than $2^{31} - 1$, then return $2^{31} - 1$, and if the quotient is strictly less than $-2^{31}$, then return $-2^{31}$.&lt;/p>
&lt;h3 id="constraints">Constraints:
&lt;/h3>&lt;ul>
&lt;li>$-2^{31}$ &amp;lt;= dividend, divisor &amp;lt;= $-2^{31}-1$&lt;/li>
&lt;li>divisor != 0&lt;/li>
&lt;/ul>
&lt;h3 id="example-1">Example 1:
&lt;/h3>&lt;blockquote>
&lt;p>Input: dividend = 10, divisor = 3&lt;br>
Output: 3&lt;br>
Explanation: 10/3 = 3.33333.. which is truncated to 3.&lt;/p>&lt;/blockquote>
&lt;h3 id="example-2">Example 2:
&lt;/h3>&lt;blockquote>
&lt;p>Input: dividend = 7, divisor = -3&lt;br>
Output: -2&lt;br>
Explanation: 7/-3 = -2.33333.. which is truncated to -2.&lt;/p>&lt;/blockquote>
&lt;h2 id="è§£é¡Œæ–¹æ³•">è§£é¡Œæ–¹æ³•
&lt;/h2>&lt;h2 id="ç¨‹å¼">ç¨‹å¼
&lt;/h2>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-C" data-lang="C">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;bits/stdc++.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>using namespace std;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>class Solution {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>public:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">divide&lt;/span>(&lt;span style="color:#66d9ef">int&lt;/span> dividend, &lt;span style="color:#66d9ef">int&lt;/span> divisor) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç‰¹æ®Šæƒ…æ³è™•ç†ï¼Œé¿å…æº¢å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> (dividend &lt;span style="color:#f92672">==&lt;/span> INT_MIN &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> divisor &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>) &lt;span style="color:#66d9ef">return&lt;/span> INT_MAX;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (dividend &lt;span style="color:#f92672">==&lt;/span> INT_MIN &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> divisor &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>) &lt;span style="color:#66d9ef">return&lt;/span> INT_MIN;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// è¨ˆç®—å•†çš„æ­£è² 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">bool&lt;/span> positive &lt;span style="color:#f92672">=&lt;/span> (dividend &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) &lt;span style="color:#f92672">==&lt;/span> (divisor &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ä½¿ç”¨ long long ä¾†é¿å… INT_MIN çš„æº¢å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">long&lt;/span> divd &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">labs&lt;/span>(dividend);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">long&lt;/span> div &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">labs&lt;/span>(divisor);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">long&lt;/span> result &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç•¶è¢«é™¤æ•¸å¤§æ–¼é™¤æ•¸æ™‚ï¼Œé€²è¡Œé™¤æ³•
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">while&lt;/span> (divd &lt;span style="color:#f92672">&amp;gt;=&lt;/span> div) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">long&lt;/span> temp &lt;span style="color:#f92672">=&lt;/span> div, multiple &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é€²è¡Œå€å¢æ“ä½œï¼Œæ‰¾åˆ°æœ€å¤§çš„å€æ•¸
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">while&lt;/span> (divd &lt;span style="color:#f92672">&amp;gt;=&lt;/span> (temp &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>)) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> temp &lt;span style="color:#f92672">&amp;lt;&amp;lt;=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> multiple &lt;span style="color:#f92672">&amp;lt;&amp;lt;=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ¸›å»å€æ•¸å°æ‡‰çš„éƒ¨åˆ†ï¼Œä¸¦å°‡å•†åŠ åˆ°çµæœä¸­
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> divd &lt;span style="color:#f92672">-=&lt;/span> temp;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> result &lt;span style="color:#f92672">+=&lt;/span> multiple;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æ ¹æ“šæ­£è² ç¬¦è™Ÿèª¿æ•´çµæœ
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> result &lt;span style="color:#f92672">=&lt;/span> positive &lt;span style="color:#f92672">?&lt;/span> result : &lt;span style="color:#f92672">-&lt;/span>result;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// æœ€å¾Œæª¢æŸ¥æ˜¯å¦æº¢å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">return&lt;/span> result &lt;span style="color:#f92672">&amp;gt;&lt;/span> INT_MAX &lt;span style="color:#f92672">?&lt;/span> INT_MAX : (result &lt;span style="color:#f92672">&amp;lt;&lt;/span> INT_MIN &lt;span style="color:#f92672">?&lt;/span> INT_MIN : result);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(){
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Solution sol;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> cout &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> sol.&lt;span style="color:#a6e22e">divide&lt;/span>(&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">2147483648&lt;/span>, &lt;span style="color:#ae81ff">3&lt;/span>) &lt;span style="color:#f92672">&amp;lt;&amp;lt;&lt;/span> endl;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
>Pawel Czerwinski&lt;/a> on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
>Unsplash&lt;/a>&lt;/p>&lt;/blockquote></description></item><item><title>å¾®è¡¨æƒ…(Micro Facial Expression)</title><link>https://Dandelionlibra.github.io/post/note/micro_facial_expression/</link><pubDate>Sun, 20 Oct 2024 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/note/micro_facial_expression/</guid><description>&lt;img src="https://Dandelionlibra.github.io/unsplash.jpg" alt="Featured image of post å¾®è¡¨æƒ…(Micro Facial Expression)" />&lt;h2 id="è‡‰éƒ¨è¡¨æƒ…ç¨®é¡">è‡‰éƒ¨è¡¨æƒ…ç¨®é¡
&lt;/h2>&lt;p>&lt;a class="link" href="https://zh.wikipedia.org/zh-tw/%E4%BF%9D%E7%BD%97%C2%B7%E8%89%BE%E5%85%8B%E6%9B%BC" target="_blank" rel="noopener"
>ä¿ç¾…Â·è‰¾å…‹æ›¼&lt;/a>ï¼ˆPaul Ekmanï¼‰å¾1970å¹´ä»£ä»¥ä¾†çš„ç ”ç©¶ï¼ŒæŠŠè‡‰éƒ¨å¾®è¡¨æƒ…åˆ†æˆï¼š&lt;/p>
&lt;ul>
&lt;li>å¿«æ¨‚(happy)&lt;/li>
&lt;li>æ‚²å‚·(sad)&lt;/li>
&lt;li>ç”Ÿæ°£(angry)&lt;/li>
&lt;li>é©šè¨(surprised)&lt;/li>
&lt;li>å®³æ€•(scared)&lt;/li>
&lt;li>å­æƒ¡(disgusted)&lt;/li>
&lt;li>é„™è¦–(contempt)&lt;/li>
&lt;li>ä¸­æ€§(neutral)&lt;/li>
&lt;/ul>
&lt;h2 id="å¾®è¡¨æƒ…æ‡‰ç”¨">å¾®è¡¨æƒ…æ‡‰ç”¨
&lt;/h2>&lt;blockquote>
&lt;p>è‡ºå¸«å¤§é‚±ç¾è™¹ï¼šã€Œæˆ‘å¸Œæœ›ç”¨æ–°èˆˆç§‘æŠ€æ‰¾åˆ°å­¸ç”Ÿåœ¨å­¸ç¿’ç§‘å­¸çŸ¥è­˜æ™‚çš„é›£é»ï¼Œæ”¹å–„ç§‘å­¸å­¸ç¿’æ™‚çš„å›°å¢ƒã€‚è€Œå…¶ä¸­çš„ä¸€æ­¥ï¼Œå°±æ˜¯ç”¨è¾¨è­˜å¾®è¡¨æƒ…çš„AIç³»çµ±ï¼Œæ‰¾å‡ºå­¸ç”Ÿé¢å°éé æœŸçš„ç§‘å­¸ç¾è±¡å’Œå¤šé‡è¡¨å¾µçš„è§£é‡‹æ‰€å‡ºç¾çš„æŸäº›ç‰¹å®šå¾®è¡¨æƒ…æ™‚æ‰€ä»£è¡¨çš„æ„ç¾©ï¼Œä»¥ç­è§£å­¸ç”Ÿé¢å°é€™äº›æƒ…æ³æ™‚çš„åæ‡‰èˆ‡æ•ˆç›Šï¼Œä»¥ä¾¿è¨­è¨ˆæœ‰æ„ç¾©çš„å­¸ç¿’å’Œæ•™å­¸ç­–ç•¥ã€‚ã€&lt;br>
&lt;a class="link" href="https://humanityisland.nccu.edu.tw/qiumeihong_a/" target="_blank" rel="noopener"
>æ–‡ç« å ±å°&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>è¿ªå£«å°¼ç ”ç©¶ä¸­å¿ƒ(FVAE â€“ æ·±åº¦å­¸ç¿’è§€çœ¾è¡¨æƒ…ï¼Œå®‰æ’åŠ‡æƒ…èµ°å‘)ï¼Œåœ¨é»‘æš—çš„å½±å»³å…§è§€å¯Ÿè§€çœ¾çš„è‡‰éƒ¨è¡¨æƒ…ï¼Œä¸¦å­¸ç¿’åˆ†è¾¨å¾®ç¬‘ã€å¤§ç¬‘ç­‰ä¸åŒç¨‹åº¦çš„æƒ…ç·’ã€‚é€™æ¨£çš„ç¥ç¶“ç¶²çµ¡å­¸ç¿’ï¼Œä¸åªè¦èª¿æŸ¥ä½ æœ‰å¤šå–œæ­¡ç•¶ä¸‹çš„åŠ‡æƒ…ï¼Œæ›´è¦é æ¸¬ä½ æ˜¯å¦å¯èƒ½å–œæ­¡æ¥ä¸‹ä¾†çš„èµ°å‘ï¼Œå®ƒèƒ½æ ¹æ“šéå»å­¸ç¿’çš„çµæœï¼Œåœ¨é–‹æ¼”çš„å‰ååˆ†é˜å°±é æ¸¬è§€çœ¾ä¹‹å¾Œçš„æƒ…ç·’ï¼&lt;br>
&lt;a class="link" href="https://mile.cloud/zh/resources/blog/facial-detection-technology-is-popular-quantifying-micro-expressions-into-big-data_39" target="_blank" rel="noopener"
>æ–‡ç« å ±å°&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>å°‡å¾®è¡¨æƒ…æ‡‰ç”¨æ–¼é¢è©¦ä¸Šï¼Œä¹Ÿèƒ½æº–ç¢ºæŠ“å‡ºæ‡‰å¾µè€…çš„è·å ´æ€§æ ¼èˆ‡æºé€šèƒ½åŠ›ï¼Œæå‰å”åŠ©é¢è©¦å®˜ç¯©é™¤ä¸é©ä»»çš„å“¡å·¥ã€‚&lt;br>
&lt;a class="link" href="https://www.ithome.com.tw/news/143000" target="_blank" rel="noopener"
>æ–‡ç« å ±å°&lt;/a>&lt;/p>&lt;/blockquote>
&lt;blockquote>
&lt;p>ç›£æ§å‡ç´šï¼šäººè‡‰è­˜åˆ¥ç³»çµ±èƒ½è®€å‡ºæƒ…ç·’å’Œå¨è„…æ€§&lt;br>
&lt;a class="link" href="https://www.bbc.com/zhongwen/trad/world-44859007" target="_blank" rel="noopener"
>æ–‡ç« å ±å°&lt;/a>&lt;/p>&lt;/blockquote>
&lt;h2 id="åƒè€ƒå…§å®¹">åƒè€ƒå…§å®¹
&lt;/h2>&lt;p>æ·ºè«‡ç‚ºè¡¨æƒ…å¿ƒç†å­¸ï¼šhttps://www.thenewslens.com/article/128732&lt;/p>
&lt;blockquote>
&lt;p>Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
>Pawel Czerwinski&lt;/a> on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
>Unsplash&lt;/a>&lt;/p>&lt;/blockquote></description></item><item><title>Example content</title><link>https://Dandelionlibra.github.io/post/hello-world/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/hello-world/</guid><description>&lt;img src="https://Dandelionlibra.github.io/post/hello-world/unsplash.jpg" alt="Featured image of post Example content" />&lt;p>Welcome to Hugo theme Stack. This is your first post. Edit or delete it, then start writing!&lt;/p>
&lt;p>For more information about this theme, check the documentation: &lt;a class="link" href="https://stack.jimmycai.com/" target="_blank" rel="noopener"
>https://stack.jimmycai.com/&lt;/a>&lt;/p>
&lt;p>Want a site like this? Check out &lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack-starter" target="_blank" rel="noopener"
>hugo-theme-stack-stater&lt;/a>&lt;/p>
&lt;blockquote>
&lt;p>Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
>Pawel Czerwinski&lt;/a> on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
>Unsplash&lt;/a>&lt;/p>&lt;/blockquote></description></item><item><title>Profile</title><link>https://Dandelionlibra.github.io/about/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/about/</guid><description>&lt;p>ä½ å¥½:)&lt;/p></description></item><item><title>ä½¿ç”¨ Docker-compose å¿«é€Ÿå»ºç«‹å¤šå€‹é—œè¯çš„ container</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker-compose/</link><pubDate>Thu, 17 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker-compose/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±">å…§å®¹å¤§ç¶±
&lt;/h2>&lt;ol>
&lt;li>ç‚ºä»€éº¼è¦ç”¨ Docker-compose?&lt;/li>
&lt;li>Docker-compose åŸºæœ¬èªæ³•èˆ‡çµæ§‹&lt;/li>
&lt;li>å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹&lt;/li>
&lt;li>å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼&lt;/li>
&lt;li>åƒè€ƒè³‡æ–™&lt;/li>
&lt;/ol>
&lt;h2 id="1-ç‚ºä»€éº¼è¦ç”¨-docker-compose">1. ç‚ºä»€éº¼è¦ç”¨ Docker-composeï¼Ÿ
&lt;/h2>&lt;p>ç•¶å°ˆæ¡ˆéœ€è¦å¤šå€‹æœå‹™ï¼ˆå¦‚è³‡æ–™åº«ã€å¾Œç«¯ã€å‰ç«¯ï¼‰å”åŒé‹ä½œæ™‚ï¼Œå–®é  &lt;code>docker run&lt;/code> æŒ‡ä»¤ç®¡ç†å¤šå€‹å®¹å™¨æœƒè®Šå¾—è¤‡é›œã€‚Docker-compose è®“ä½ èƒ½ç”¨ä¸€ä»½ YAML è¨­å®šæª”ï¼Œå®šç¾©å¤šå€‹ container çš„å»ºç½®ã€ç¶²è·¯ã€è³‡æ–™æ›è¼‰èˆ‡ä¾è³´é—œä¿‚ï¼Œä¸€éµå•Ÿå‹•æˆ–é—œé–‰æ•´å€‹æ‡‰ç”¨ç’°å¢ƒï¼Œæå‡é–‹ç™¼æ•ˆç‡èˆ‡å¯ç¶­è­·æ€§ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="2-docker-compose-åŸºæœ¬èªæ³•èˆ‡çµæ§‹">2. Docker-compose åŸºæœ¬èªæ³•èˆ‡çµæ§‹
&lt;/h2>&lt;p>Docker-compose é€é &lt;code>docker-compose.yml&lt;/code> æª”æ¡ˆæè¿°å¤šå€‹æœå‹™ã€ç¶²è·¯ã€è³‡æ–™å·ï¼Œä¸¦å¯è¨­å®šå¥åº·æª¢æŸ¥èˆ‡æŒ‡å®š GPUã€‚åŸºæœ¬çµæ§‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>è©³ç´°èªªæ˜å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼š&lt;a class="link" href="https://docs.docker.com/reference/compose-file/services/" target="_blank" rel="noopener"
>Docker Compose&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">version&lt;/span>: &lt;span style="color:#e6db74">&amp;#39;3.8&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">æœå‹™åç¨±&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">æ˜ åƒæª”åç¨±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;ä¸»æ©Ÿport:å®¹å™¨port&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">ä¸»æ©Ÿè·¯å¾‘:å®¹å™¨è·¯å¾‘&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">è‡ªè¨‚ç¶²è·¯åç¨±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">deploy&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">resources&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">reservations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">devices&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">nvidia&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">count&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">capabilities&lt;/span>: [&lt;span style="color:#ae81ff">gpu]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">healthcheck&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">test&lt;/span>: [&lt;span style="color:#e6db74">&amp;#34;CMD&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;ä½ çš„å¥åº·æª¢æŸ¥æŒ‡ä»¤&amp;#34;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">interval&lt;/span>: &lt;span style="color:#ae81ff">30s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">timeout&lt;/span>: &lt;span style="color:#ae81ff">10s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">retries&lt;/span>: &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">start_period&lt;/span>: &lt;span style="color:#ae81ff">60s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">è‡ªè¨‚ç¶²è·¯åç¨±&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">bridge&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>services&lt;/code>: å®šç¾©å¤šå€‹å®¹å™¨æœå‹™ã€‚&lt;/li>
&lt;li>&lt;code>image&lt;/code>: æŒ‡å®šæ˜ åƒæª”ã€‚&lt;/li>
&lt;li>&lt;code>ports&lt;/code>: å°æ‡‰ä¸»æ©Ÿèˆ‡å®¹å™¨çš„ portã€‚&lt;/li>
&lt;li>&lt;code>volumes&lt;/code>: æ›è¼‰ä¸»æ©Ÿè³‡æ–™å¤¾åˆ°å®¹å™¨ã€‚&lt;/li>
&lt;li>&lt;code>networks&lt;/code>: å®šç¾©è‡ªè¨‚ç¶²è·¯ï¼Œè®“æœå‹™é–“å¯äº’é€šã€‚&lt;/li>
&lt;li>&lt;code>deploy.resources.reservations.devices&lt;/code>: æŒ‡å®š GPU è³‡æºã€‚&lt;/li>
&lt;li>&lt;code>healthcheck&lt;/code>: å¥åº·æª¢æŸ¥è¨­å®šï¼Œç¢ºä¿æœå‹™æ­£å¸¸é‹ä½œã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="3-å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹">3. å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹
&lt;/h2>&lt;p>ä»¥ä¸‹ç¯„ä¾‹èªªæ˜å¦‚ä½•ç”¨ Docker-compose åŒæ™‚å•Ÿå‹• Jupyterï¼ˆæ”¯æ´ GPUï¼‰èˆ‡ Ollama å…©å€‹æœå‹™ï¼Œä¸¦è®“å®ƒå€‘é€éè‡ªè¨‚ç¶²è·¯ &lt;code>ollama_net&lt;/code> äº’ç›¸æºé€šï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">dandelion&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ollama_net&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">bridge&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">services&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">jupyter&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">pytorch/pytorch:2.3.0-cuda12.1-cudnn8-devel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tty&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;8888:8888&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">~/yuchen:/workspace/yuchen&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">ollama_net&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">deploy&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">resources&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">reservations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">devices&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">nvidia&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">count&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">capabilities&lt;/span>: [&lt;span style="color:#ae81ff">gpu]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ollama&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tty&lt;/span>: &lt;span style="color:#66d9ef">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">ollama/ollama&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">networks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">ollama_net&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">volumes&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#ae81ff">~/yuchen/ollama:/root/.ollama&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ports&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;11435:11434&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">deploy&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">resources&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">reservations&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">devices&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">driver&lt;/span>: &lt;span style="color:#ae81ff">nvidia&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">count&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">capabilities&lt;/span>: [&lt;span style="color:#ae81ff">gpu]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">healthcheck&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">test&lt;/span>: &lt;span style="color:#ae81ff">/usr/local/bin/docker-healthcheck.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">interval&lt;/span>: &lt;span style="color:#ae81ff">30s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">timeout&lt;/span>: &lt;span style="color:#ae81ff">10s&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">retries&lt;/span>: &lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">start_period&lt;/span>: &lt;span style="color:#ae81ff">60s&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>networks&lt;/code> è®“ jupyter èˆ‡ ollama æœå‹™å¯äº’é€šã€‚&lt;/li>
&lt;li>&lt;code>port&lt;/code>
&lt;ul>
&lt;li>&amp;ldquo;11435:11434&amp;rdquo; è¡¨ç¤ºå°‡ä¸»æ©Ÿï¼ˆå°å¤–ï¼‰ä¸Šçš„ 11435 ç«¯å£æ˜ å°„åˆ°å®¹å™¨ï¼ˆå°å…§ï¼‰ä¸­çš„ 11434 ç«¯å£ã€‚&lt;/li>
&lt;li>å¤–éƒ¨è¨ªå•ä¸»æ©Ÿçš„ 11435 ç«¯å£æ™‚ï¼Œå¯¦éš›æœƒè½‰ç™¼åˆ°å®¹å™¨å…§éƒ¨çš„ 11434 ç«¯å£ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;code>deploy.resources.reservations.devices&lt;/code> æŒ‡å®šå…©å€‹æœå‹™éƒ½å¯ä½¿ç”¨æ‰€æœ‰ GPUã€‚&lt;/li>
&lt;li>&lt;code>healthcheck&lt;/code> å¯è‡ªå‹•æª¢æŸ¥æœå‹™å¥åº·ç‹€æ…‹ã€‚&lt;/li>
&lt;li>&lt;code>volumes&lt;/code> ä¿æŒè³‡æ–™æŒä¹…åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;p>é€™æ¨£è¨­å®šå¾Œï¼Œåªéœ€ä¸€è¡ŒæŒ‡ä»¤å³å¯åŒæ™‚å•Ÿå‹•ã€ç®¡ç†å¤šå€‹å®¹å™¨ï¼Œä¸¦ç¢ºä¿å®ƒå€‘èƒ½äº’ç›¸é€£ç·šèˆ‡è³‡æ–™å…±äº«ã€‚&lt;/p>
&lt;p>å•Ÿå‹•æ‰€æœ‰æœå‹™ï¼š&lt;br>
&lt;code>-d&lt;/code> åƒæ•¸ä»£è¡¨ã€Œdetached modeã€ï¼Œä¹Ÿå°±æ˜¯è®“ Docker-Compose åœ¨èƒŒæ™¯åŸ·è¡Œæ‰€æœ‰æœå‹™ï¼Œè€Œä¸ä½”ç”¨ç›®å‰çš„çµ‚ç«¯è¦–çª—ï¼Œä¸æœƒé¡¯ç¤ºå³æ™‚æ—¥èªŒã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker-compose up -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœæ­¢ä¸¦ç§»é™¤æ‰€æœ‰æœå‹™ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker-compose down
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="4-å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼">4. å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼
&lt;/h2>&lt;ul>
&lt;li>å•Ÿå‹•æ‰€æœ‰æœå‹™ï¼š&lt;code>docker-compose up&lt;/code>&lt;/li>
&lt;li>èƒŒæ™¯åŸ·è¡Œï¼š&lt;code>docker-compose up -d&lt;/code>&lt;/li>
&lt;li>åœæ­¢æœå‹™ï¼š&lt;code>docker-compose down&lt;/code>&lt;/li>
&lt;li>æŸ¥çœ‹æ—¥èªŒï¼š&lt;code>docker-compose logs&lt;/code>&lt;/li>
&lt;li>é€²å…¥å®¹å™¨ï¼š&lt;code>docker-compose exec &amp;lt;service&amp;gt; bash&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>æ›´å¤šæŒ‡ä»¤å¯åƒè€ƒ &lt;a class="link" href="https://docs.docker.com/compose/reference/overview/" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡ä»¶&lt;/a>ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="5-åƒè€ƒè³‡æ–™">5. åƒè€ƒè³‡æ–™
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.docker.com/compose/" target="_blank" rel="noopener"
>Docker Compose å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
>Docker å®˜æ–¹ç¶²ç«™&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/" target="_blank" rel="noopener"
>å¦‚ä½•å®‰è£ Dockerï¼ˆå»¶ä¼¸é–±è®€ï¼‰&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Docker åŸºæœ¬ä½¿ç”¨æŒ‡ä»¤</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker/</link><pubDate>Thu, 10 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±">å…§å®¹å¤§ç¶±
&lt;/h2>&lt;ol>
&lt;li>Docker æ˜¯ä»€éº¼ï¼Ÿ&lt;/li>
&lt;li>Docker å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜&lt;/li>
&lt;li>Docker å¯¦ç”¨æ“ä½œç¯„ä¾‹&lt;/li>
&lt;li>åƒè€ƒè³‡æ–™&lt;/li>
&lt;/ol>
&lt;h2 id="1-docker-æ˜¯ä»€éº¼">1. Docker æ˜¯ä»€éº¼ï¼Ÿ
&lt;/h2>&lt;p>Docker æ˜¯ä¸€å¥—é–‹æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œè®“é–‹ç™¼è€…èƒ½å¤ å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶ä¾è³´ç’°å¢ƒæ‰“åŒ…æˆä¸€å€‹è¼•é‡ç´šã€å¯æ”œå¸¶çš„å®¹å™¨ï¼ˆContainerï¼‰ã€‚é€™äº›å®¹å™¨å¯ä»¥åœ¨ä»»ä½•æ”¯æ´ Docker çš„ä½œæ¥­ç³»çµ±ä¸Šå¿«é€Ÿéƒ¨ç½²èˆ‡åŸ·è¡Œï¼Œè§£æ±ºã€Œåœ¨æˆ‘é›»è…¦å¯ä»¥è·‘ã€çš„å•é¡Œï¼Œæå‡é–‹ç™¼ã€æ¸¬è©¦èˆ‡éƒ¨ç½²çš„æ•ˆç‡ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="2-docker-å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜">2. Docker å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜
&lt;/h2>&lt;p>ä»¥ä¸‹ä»‹ç´¹å¹¾å€‹ Docker å¸¸ç”¨æŒ‡ä»¤åŠå…¶é‡è¦åƒæ•¸ï¼š&lt;/p>
&lt;h3 id="å•Ÿå‹•å®¹å™¨">å•Ÿå‹•å®¹å™¨
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run &lt;span style="color:#f92672">[&lt;/span>OPTIONS&lt;span style="color:#f92672">]&lt;/span> IMAGE &lt;span style="color:#f92672">[&lt;/span>COMMAND&lt;span style="color:#f92672">]&lt;/span> &lt;span style="color:#f92672">[&lt;/span>ARG...&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¸¸ç”¨åƒæ•¸">å¸¸ç”¨åƒæ•¸
&lt;/h3>&lt;ul>
&lt;li>&lt;code>-d, --detach&lt;/code>ï¼šåœ¨èƒŒæ™¯åŸ·è¡Œå®¹å™¨ã€‚&lt;/li>
&lt;li>&lt;code>--detach-keys&lt;/code>ï¼šè‡ªè¨‚åˆ†é›¢å®¹å™¨çš„éµçµ„åˆã€‚&lt;/li>
&lt;li>&lt;code>-e, --env&lt;/code>ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸ã€‚&lt;/li>
&lt;li>&lt;code>--env-file&lt;/code>ï¼šå¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸ã€‚&lt;/li>
&lt;li>&lt;code>-i, --interactive&lt;/code>ï¼šä¿æŒæ¨™æº–è¼¸å…¥é–‹å•Ÿï¼ˆäº’å‹•æ¨¡å¼ï¼‰ã€‚&lt;/li>
&lt;li>&lt;code>-t, --tty&lt;/code>ï¼šåˆ†é…ä¸€å€‹è™›æ“¬çµ‚ç«¯æ©Ÿã€‚&lt;/li>
&lt;li>&lt;code>--privileged&lt;/code>ï¼šçµ¦äºˆå®¹å™¨é¡å¤–çš„æ¬Šé™ã€‚&lt;/li>
&lt;li>&lt;code>-u, --user&lt;/code>ï¼šä»¥æŒ‡å®šä½¿ç”¨è€…èº«ä»½åŸ·è¡Œå®¹å™¨ã€‚&lt;/li>
&lt;li>&lt;code>-w, --workdir&lt;/code>ï¼šæŒ‡å®šå®¹å™¨å…§çš„å·¥ä½œç›®éŒ„ã€‚&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="3-docker-å¯¦ç”¨æ“ä½œç¯„ä¾‹">3. Docker å¯¦ç”¨æ“ä½œç¯„ä¾‹
&lt;/h2>&lt;h3 id="ä»¥äº’å‹•æ¨¡å¼å•Ÿå‹•-ubuntu-å®¹å™¨">ä»¥äº’å‹•æ¨¡å¼å•Ÿå‹• Ubuntu å®¹å™¨
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -it ubuntu:latest /bin/bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-i&lt;/code> ä¿æŒæ¨™æº–è¼¸å…¥é–‹å•Ÿï¼Œ&lt;code>-t&lt;/code> åˆ†é…çµ‚ç«¯æ©Ÿï¼Œæ–¹ä¾¿äº’å‹•æ“ä½œã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="åœ¨èƒŒæ™¯åŸ·è¡Œ-nginx-å®¹å™¨">åœ¨èƒŒæ™¯åŸ·è¡Œ Nginx å®¹å™¨
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -d -p 8080:80 nginx:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-d&lt;/code> è®“å®¹å™¨åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œ&lt;code>-p&lt;/code> å°æ‡‰ä¸»æ©Ÿèˆ‡å®¹å™¨çš„åŸ å£ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="è¨­å®šç’°å¢ƒè®Šæ•¸ä¸¦æŒ‡å®šå·¥ä½œç›®éŒ„">è¨­å®šç’°å¢ƒè®Šæ•¸ä¸¦æŒ‡å®šå·¥ä½œç›®éŒ„
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -e ENV_VAR&lt;span style="color:#f92672">=&lt;/span>value -w /app -it python:3.10 bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-e&lt;/code> è¨­å®šç’°å¢ƒè®Šæ•¸ï¼Œ&lt;code>-w&lt;/code> æŒ‡å®šå·¥ä½œç›®éŒ„ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="ä»¥æŒ‡å®šä½¿ç”¨è€…åŸ·è¡Œ">ä»¥æŒ‡å®šä½¿ç”¨è€…åŸ·è¡Œ
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run -u 1000:1000 -it ubuntu bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;code>-u&lt;/code> æŒ‡å®šä½¿ç”¨è€…èˆ‡ç¾¤çµ„ IDã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸">å¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸
&lt;/h3>&lt;p>å‡è¨­æœ‰ &lt;code>.env&lt;/code> æª”æ¡ˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker run --env-file .env ubuntu env
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;h2 id="4-åƒè€ƒè³‡æ–™">4. åƒè€ƒè³‡æ–™
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.docker.com/" target="_blank" rel="noopener"
>Docker å®˜æ–¹æ–‡ä»¶&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener"
>Docker æŒ‡ä»¤åƒè€ƒ&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hub.docker.com/" target="_blank" rel="noopener"
>Docker Hub&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/" target="_blank" rel="noopener"
>Docker å®‰è£æ•™å­¸ï¼ˆå»¶ä¼¸é–±è®€ï¼‰&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>