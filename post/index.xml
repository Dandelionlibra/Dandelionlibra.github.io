<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on YuChen</title><link>https://Dandelionlibra.github.io/post/</link><description>Recent content in Posts on YuChen</description><generator>Hugo -- gohugo.io</generator><language>zh-Hant-TW</language><lastBuildDate>Mon, 03 Nov 2025 11:20:00 +0800</lastBuildDate><atom:link href="https://Dandelionlibra.github.io/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Data mining</title><link>https://Dandelionlibra.github.io/post/note/data-mining/</link><pubDate>Mon, 03 Nov 2025 11:20:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/data-mining/</guid><description>&lt;blockquote&gt;
&lt;p&gt;é€™ä»½ç°¡å ±æª”æ¡ˆæ˜¯é—œæ–¼ã€Œé€²éšè³‡æ–™æ¢å‹˜ã€(Advanced Data Mining) èª²ç¨‹çš„ä»‹ç´¹ï¼Œæˆèª²æ•™å¸«ç‚ºèŠç§€æ• (Hsiu-Min Chuang) æ•™æˆï¼Œéš¸å±¬æ–¼ä¸­åŸå¤§å­¸è³‡è¨Šå·¥ç¨‹å­¸ç³»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="ç‚ºä»€éº¼éœ€è¦è³‡æ–™æ¢å‹˜"&gt;ç‚ºä»€éº¼éœ€è¦è³‡æ–™æ¢å‹˜?
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å‹•æ©Ÿï¼š è³‡è¨Šçš„çˆ†ç‚¸æ€§å¢é•·ï¼ˆå¾ TB åˆ° PB ç­‰ç´šï¼‰ã€‚æˆ‘å€‘è™•æ–¼ã€Œè³‡æ–™å……æ–¥ (drowning in data)ï¼Œä½†ç¼ºä¹çŸ¥è­˜ (starving for knowledge)ã€çš„ç‹€æ…‹ ã€‚&lt;/li&gt;
&lt;li&gt;éœ€æ±‚ï¼šè³‡æ–™æ¢å‹˜çš„å‡ºç¾æ˜¯ç‚ºäº†ã€Œè‡ªå‹•åŒ–åˆ†æå·¨é‡è³‡æ–™é›†ã€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="ä»€éº¼æ˜¯è³‡æ–™æ¢å‹˜"&gt;ä»€éº¼æ˜¯è³‡æ–™æ¢å‹˜?
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å®šç¾©ï¼šè³‡æ–™æ¢å‹˜æ˜¯ã€Œå¾å·¨é‡è³‡æ–™ä¸­ï¼Œèƒå–å‡ºæœ‰è¶£çš„ (éé¡¯è€Œæ˜“è¦‹ã€éš±å«çš„ã€å…ˆå‰æœªçŸ¥ä¸”å…·æœ‰æ½›åœ¨ç”¨é€”çš„) æ¨¡å¼æˆ–çŸ¥è­˜ã€ã€‚&lt;/li&gt;
&lt;li&gt;åˆ¥åï¼šå®ƒä¹Ÿè¢«ç¨±ç‚º KDD (è³‡æ–™åº«çŸ¥è­˜ç™¼ç¾)ã€çŸ¥è­˜èƒå–ã€è³‡æ–™/æ¨¡å¼åˆ†æç­‰ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="knowledge-discovery-kdd-process"&gt;Knowledge Discovery (KDD) Process
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;è³‡æ–™æ•´åˆ (Data Integration)&lt;/li&gt;
&lt;li&gt;è³‡æ–™æ¸…ç† (Data Cleaning)&lt;/li&gt;
&lt;li&gt;è³‡æ–™å€‰å„² (Data Warehouse)&lt;/li&gt;
&lt;li&gt;é¸å–ä»»å‹™ç›¸é—œè³‡æ–™ (Task-relevant Data / Selection)&lt;/li&gt;
&lt;li&gt;è³‡æ–™æ¢å‹˜ (Data Mining)&lt;/li&gt;
&lt;li&gt;æ¨¡å¼è©•ä¼° (Pattern Evaluation)&lt;/li&gt;
&lt;li&gt;çŸ¥è­˜å‘ˆç¾ (Knowledge)&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="è³‡æ–™æ¢å‹˜çš„åŠŸèƒ½-patternsfunctions"&gt;è³‡æ–™æ¢å‹˜çš„åŠŸèƒ½ (Patterns/Functions)
&lt;/h2&gt;&lt;h3 id="æ¦‚åŒ–-generalization"&gt;æ¦‚åŒ– (Generalization)
&lt;/h3&gt;&lt;p&gt;å°‡ä½å±¤æ¬¡ã€è©³ç´°çš„è³‡æ–™ï¼Œè½‰æ›ç‚ºé«˜å±¤æ¬¡ã€æ›´æ˜“æ–¼ç†è§£çš„æ‘˜è¦è³‡è¨Šï¼ŒåŠ©æ–¼å¾å®è§€çš„è§’åº¦ä¾†ç†è§£è³‡æ–™çš„ç¸½é«”ç‰¹å¾µã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è³‡è¨Šæ•´åˆèˆ‡è³‡æ–™å€‰å„²å»ºæ§‹ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å°‡ä¾†è‡ªä¸åŒä¾†æºçš„è³‡æ–™é€²è¡Œæ¸…ç† (cleaning)ã€è½‰æ› (transformation) å’Œæ•´åˆ (integration)ã€‚&lt;/li&gt;
&lt;li&gt;ç›®æ¨™æ˜¯å»ºç«‹ä¸€å€‹å¤šç¶­åº¦è³‡æ–™æ¨¡å‹ (multidimensional data model)ï¼Œé€™ä¹Ÿæ˜¯è³‡æ–™å€‰å„² (Data Warehouse) çš„åŸºç¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;è³‡æ–™æ–¹å¡ŠæŠ€è¡“ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å¯æ“´å±•çš„æ–¹æ³• (Scalable methods) ä¾†é å…ˆè¨ˆç®— (computing / materializing) å„ç¨®ç¶­åº¦çµ„åˆä¸‹çš„å½™ç¸½å€¼ (aggregates)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;å¤šç¶­åº¦æ¦‚å¿µæè¿°ï¼š&lt;br&gt;
é€™æ˜¯æ¦‚åŒ–çš„å…·é«”æ‡‰ç”¨ï¼Œä¸»è¦åˆ†ç‚ºå…©ç¨®ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¹å¾µåŒ– (Characterization)ï¼š æè¿°æŸä¸€ç‰¹å®šè³‡æ–™ç¾¤çµ„çš„ç¸½é«”ç‰¹å¾µã€‚ä¾‹å¦‚ï¼šç¸½çµã€Œé«˜é¡åº¦ä¿¡ç”¨å¡å®¢æˆ¶ã€çš„å…±åŒç‰¹å¾µï¼ˆå¦‚å¹´é½¡ã€æ”¶å…¥ã€è·æ¥­åˆ†ä½ˆï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å€è¾¨ (Discrimination)ï¼š æ¯”è¼ƒå…©å€‹æˆ–å¤šå€‹ä¸åŒè³‡æ–™ç¾¤çµ„ä¹‹é–“çš„ç‰¹å¾µå·®ç•° ã€‚ä¾‹å¦‚ï¼ŒæŠ•å½±ç‰‡ä¸­çš„ä¾‹å­ï¼šæ¯”è¼ƒã€Œä¹¾ç‡¥åœ°å€ (dry region)ã€èˆ‡ã€Œæ½®æ¿•åœ°å€ (wet region)ã€åœ¨ç‰¹æ€§ä¸Šçš„å·®ç•° ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="é—œè¯æ€§åˆ†æassociation-analysis"&gt;é—œè¯æ€§åˆ†æ(Association Analysis)
&lt;/h3&gt;&lt;p&gt;æ‰¾å‡ºè³‡æ–™ä¸­ç¶“å¸¸ä¸€èµ·å‡ºç¾çš„é …ç›®ï¼Œä¾‹å¦‚ã€Œè²·äº†å°¿å¸ƒçš„é¡§å®¢ï¼Œä¹Ÿå¾ˆå¸¸ä¸€èµ·è²·å•¤é…’ã€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é »ç¹æ¨£å¼ (Frequent patterns)ï¼š æŒ‡ç¶“å¸¸ä¸€èµ·å‡ºç¾çš„é …ç›®çµ„åˆ (itemsets)ã€‚ä¾‹å¦‚ï¼Œåœ¨è¶…å¸‚ä¸­ï¼Œã€Œå°¿å¸ƒã€å’Œã€Œå•¤é…’ã€æ˜¯å¦ç¶“å¸¸è¢«ä¸€èµ·è³¼è²·ï¼Ÿ&lt;/li&gt;
&lt;li&gt;é—œè¯è¦å‰‡ (Association rule)ï¼š ç”¨ä¾†è¡¨ç¤ºé …ç›®é–“é—œè¯æ€§çš„è¦å‰‡ã€‚&lt;/li&gt;
&lt;li&gt;ã€Œé—œè¯ (Association)ã€æˆ–ã€Œç›¸é—œ (Correlation)ã€ä¸ç­‰æ–¼ã€Œå› æœé—œä¿‚ (Causality)ã€ã€‚(è²·å°¿å¸ƒä¸¦ä¸æœƒå°è²·å•¤é…’)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="åˆ†é¡-classification"&gt;åˆ†é¡ (Classification)
&lt;/h3&gt;&lt;p&gt;ç‚ºä¸€é …ã€Œç›£ç£å¼å­¸ç¿’ã€ä»»å‹™ï¼Œæ ¹æ“šå·²çŸ¥çš„è¨“ç·´è³‡æ–™å»ºç«‹æ¨¡å‹ï¼Œç”¨ä»¥é æ¸¬æœªçŸ¥è³‡æ–™çš„é¡åˆ¥æ¨™ç±¤ã€‚ä¾‹å¦‚åˆ¤æ–·ä¿¡ç”¨å¡äº¤æ˜“æ˜¯å¦ç‚ºç›œåˆ·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æµç¨‹ï¼š
&lt;ol&gt;
&lt;li&gt;å»ºç«‹æ¨¡å‹ï¼šä¾æ“šä¸€çµ„å·²çŸ¥çš„ã€Œè¨“ç·´ç¯„ä¾‹ (training examples)ã€ä¾†å»ºç«‹ä¸€å€‹æ¨¡å‹æˆ–å‡½æ•¸ã€‚&lt;/li&gt;
&lt;li&gt;é æ¸¬æœªä¾†ï¼šä½¿ç”¨é€™å€‹æ¨¡å‹ä¾†æè¿°å’Œå€åˆ†ä¸åŒçš„é¡åˆ¥ï¼Œä¸¦é æ¸¬ã€ŒæœªçŸ¥é¡åˆ¥æ¨™ç±¤ã€çš„è³‡æ–™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ç¯„ä¾‹ï¼š
&lt;ul&gt;
&lt;li&gt;æ ¹æ“šã€Œæ°£å€™ (climate)ã€ä¾†åˆ†é¡åœ‹å®¶ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ“šã€Œæ²¹è€— (gas mileage)ã€ä¾†åˆ†é¡æ±½è»Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å…¸å‹æ–¹æ³•ï¼šæ±ºç­–æ¨¹ (Decision trees)ã€è²æ°åˆ†é¡ (naÃ¯ve Bayesian)ã€æ”¯æŒå‘é‡æ©Ÿ (SVM)ã€ç¥ç¶“ç¶²è·¯ (neural networks)ã€è¿´æ­¸ (logistic regression) ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;å…¸å‹æ‡‰ç”¨ï¼šä¿¡ç”¨å¡è©æ¬ºåµæ¸¬ã€ç²¾æº–è¡ŒéŠ·ã€ç–¾ç—…åˆ†é¡ã€ç¶²é åˆ†é¡ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="åˆ†ç¾¤-cluster-analysis"&gt;åˆ†ç¾¤ (Cluster Analysis)
&lt;/h3&gt;&lt;p&gt;ç‚ºä¸€é …ã€Œéç›£ç£å¼å­¸ç¿’ã€ä»»å‹™ï¼Œåœ¨æ²’æœ‰é¡åˆ¥æ¨™ç±¤çš„æƒ…æ³ä¸‹(éç›£ç£å¼ï¼Œå°‡è³‡æ–™ä¾ç…§ã€Œç¾¤å…§ç›¸ä¼¼åº¦é«˜ã€ç¾¤é–“ç›¸ä¼¼åº¦ä½ã€çš„åŸå‰‡ï¼Œè‡ªå‹•åˆ†æˆæ•¸å€‹ç¾¤çµ„)ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŸºæœ¬åŸå‰‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€å¤§åŒ–ã€Œç¾¤å…§ã€ç›¸ä¼¼åº¦ (Maximizing intra-class similarity)ï¼šåŒä¸€ç¾¤é›†å…§çš„è³‡æ–™é»å½¼æ­¤ç›¡å¯èƒ½ç›¸åƒã€‚&lt;/li&gt;
&lt;li&gt;æœ€å°åŒ–ã€Œç¾¤é–“ã€ç›¸ä¼¼åº¦ (Minimizing interclass similarity)ï¼šä¸åŒç¾¤é›†ä¹‹é–“çš„è³‡æ–™é»å½¼æ­¤ç›¡å¯èƒ½ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¯„ä¾‹ï¼š å°æˆ¿å±‹è³‡æ–™é€²è¡Œåˆ†ç¾¤ï¼Œä»¥æ‰¾å‡ºå…¶åˆ†ä½ˆæ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="é›¢ç¾¤å€¼åˆ†æ-outlier-analysis"&gt;é›¢ç¾¤å€¼åˆ†æ (Outlier Analysis)
&lt;/h3&gt;&lt;p&gt;åµæ¸¬å‡ºã€Œä¸ç¬¦åˆè³‡æ–™ä¸€èˆ¬è¡Œç‚ºã€çš„è³‡æ–™ï¼Œå¯ç”¨æ–¼è©æ¬ºåµæ¸¬æˆ–ç¨€æœ‰äº‹ä»¶åˆ†æã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›¢ç¾¤å€¼ (Outlier)ï¼šæ˜¯ä¸€å€‹è³‡æ–™ç‰©ä»¶ï¼Œå…¶è¡Œç‚ºä¸ç¬¦åˆè³‡æ–™çš„ã€Œä¸€èˆ¬è¡Œç‚º (general behavior)ã€ã€‚&lt;/li&gt;
&lt;li&gt;é‡è¦æ¦‚å¿µï¼šé›¢ç¾¤å€¼æ˜¯ã€Œé›œè¨Š (Noise)ã€é‚„æ˜¯ã€Œç‰¹ä¾‹ (Exception)ã€ï¼Ÿã€Œä¸€å€‹äººçš„åƒåœ¾å¯èƒ½æ˜¯å¦ä¸€å€‹äººçš„å¯¶è— (One person&amp;rsquo;s garbage could be another person&amp;rsquo;s treasure)ã€ã€‚é€™æ„å‘³è‘—é›¢ç¾¤å€¼é›–ç„¶ç•°å¸¸ï¼Œä½†å¯èƒ½è˜Šå«è‘—éå¸¸é‡è¦çš„è³‡è¨Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="æ™‚é–“å’Œé †åº-time-and-ordering-ç›¸é—œçš„è³‡æ–™æ¢å‹˜åŠŸèƒ½"&gt;æ™‚é–“å’Œé †åº (Time and Ordering) ç›¸é—œçš„è³‡æ–™æ¢å‹˜åŠŸèƒ½
&lt;/h3&gt;&lt;p&gt;åˆ†ææœ‰æ™‚é–“é †åºçš„æ¨¡å¼ (å¦‚å…ˆè²·Aã€å†è²·B) ï¼Œæˆ–æ˜¯çµæ§‹æ€§è³‡æ–™ (å¦‚ç¤¾ç¾¤ç¶²è·¯ã€åœ–å½¢)ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åºåˆ—ã€è¶¨å‹¢èˆ‡æ¼”åŒ–åˆ†æ (Sequence, trend and evolution analysis)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¶¨å‹¢ã€æ™‚é–“åºåˆ—èˆ‡åå·®åˆ†æ (Trend, time-series, and deviation analysis)ï¼š é€™é¡åˆ†æè‘—é‡æ–¼è³‡æ–™éš¨æ™‚é–“çš„è®ŠåŒ–è¶¨å‹¢ï¼Œä¾‹å¦‚ä½¿ç”¨ã€Œè¿´æ­¸ (regression)ã€ä¾†é€²è¡Œã€Œæ•¸å€¼é æ¸¬ (value prediction)ã€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åºåˆ—æ¨¡å¼æ¢å‹˜ (Sequential pattern mining)ï¼š æ‰¾å‡ºç¶“å¸¸ã€Œä¾åºç™¼ç”Ÿã€çš„äº‹ä»¶æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹å¦‚ï¼šé¡§å®¢ã€Œå…ˆ è²·äº†æ•¸ä½ç›¸æ©Ÿï¼Œç„¶å¾Œ æ‰å»è²·å¤§å®¹é‡ SD è¨˜æ†¶å¡ã€ã€‚é€™å’Œé—œè¯è¦å‰‡ (åŒæ™‚è³¼è²·) ä¸åŒï¼Œé€™è£¡å¼·èª¿çš„æ˜¯ã€Œå…ˆå¾Œé †åºã€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€±æœŸæ€§åˆ†æ (Periodicity analysis)ï¼š æ‰¾å‡ºè³‡æ–™ä¸­é‡è¤‡å‡ºç¾çš„å¾ªç’°æˆ–é€±æœŸ (ä¾‹å¦‚ï¼šå­£ç¯€æ€§éŠ·å”®é«˜å³°)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŸºåºèˆ‡ç”Ÿç‰©åºåˆ—åˆ†æ (Motifs and biological sequence analysis)ï¼š æ‰¾å‡ºåœ¨åºåˆ—è³‡æ–™ä¸­ (ä¾‹å¦‚ DNA æˆ–è›‹ç™½è³ªåºåˆ—) åè¦†å‡ºç¾çš„å­åºåˆ—æˆ–ã€ŒåŸºåº (motifs)ã€ï¼ŒåŒ…å«ã€Œè¿‘ä¼¼ (approximate)ã€æˆ–ã€Œé€£çºŒ (consecutive)ã€çš„æ¨¡å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›¸ä¼¼æ€§åˆ†æ (Similarity-based analysis)ï¼š æ¯”è¼ƒä¸åŒæ™‚é–“åºåˆ—æˆ–åºåˆ—æ¨¡å¼ä¹‹é–“çš„ç›¸ä¼¼åº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;æ¢å‹˜è³‡æ–™ä¸²æµ (Mining data streams)&lt;br&gt;
è³‡æ–™ä¸²æµçš„ç‰¹æ€§æ˜¯ï¼šæœ‰é †åºæ€§ (Ordered)ã€éš¨æ™‚é–“è®ŠåŒ– (time-varying)ï¼Œä¸”å¯èƒ½æ˜¯ç„¡é™çš„ (potentially infinite)ã€‚ä¾‹å¦‚ï¼šæ„Ÿæ¸¬å™¨è³‡æ–™ã€ç¶²ç«™é»æ“Šæµ (clickstreams) æˆ–é‡‘èäº¤æ˜“è³‡æ–™ï¼Œé€™äº›è³‡æ–™å¿…é ˆå³æ™‚ä¸”é€£çºŒåœ°é€²è¡Œåˆ†æã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="èªè­˜ä½ çš„è³‡æ–™"&gt;èªè­˜ä½ çš„è³‡æ–™
&lt;/h1&gt;&lt;h2 id="è³‡æ–™é›†çš„çµ„æˆ"&gt;è³‡æ–™é›†çš„çµ„æˆ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ä¸€å€‹è³‡æ–™é›†ï¼ˆData Setï¼‰æ˜¯ç”±å¤šå€‹è³‡æ–™ç‰©ä»¶ï¼ˆData Objectsï¼‰æ‰€æ§‹æˆã€‚&lt;/li&gt;
&lt;li&gt;æ¯å€‹è³‡æ–™ç‰©ä»¶ä»£è¡¨ä¸€å€‹å¯¦é«”ï¼ˆEntityï¼‰ï¼Œä¹Ÿå°±æ˜¯ç¾å¯¦ä¸–ç•Œä¸­å¯è¢«è§€å¯Ÿæˆ–åˆ†æçš„å°è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å±¬æ€§æè¿°è³‡æ–™ç‰©ä»¶"&gt;å±¬æ€§æè¿°è³‡æ–™ç‰©ä»¶
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ¯å€‹è³‡æ–™ç‰©ä»¶æ˜¯ç”±ä¸€çµ„å±¬æ€§ï¼ˆAttributesï¼‰ä¾†æè¿°çš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è³‡æ–™åº«ä¸­ï¼Œæ¯ä¸€åˆ—ï¼ˆrowï¼‰ä»£è¡¨ä¸€å€‹è³‡æ–™ç‰©ä»¶ï¼Œæ¯ä¸€æ¬„ï¼ˆcolumnï¼‰å‰‡ä»£è¡¨ä¸€å€‹å±¬æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="è³‡æ–™é›†çš„é¡å‹"&gt;è³‡æ–™é›†çš„é¡å‹
&lt;/h2&gt;&lt;h3 id="è¨˜éŒ„å‹è³‡æ–™"&gt;è¨˜éŒ„å‹è³‡æ–™
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é—œè¯å¼è¨˜éŒ„ï¼ˆRelational Recordsï¼‰ï¼šå¦‚è³‡æ–™åº«ä¸­çš„è¡¨æ ¼ï¼Œæ¯åˆ—ç‚ºä¸€ç­†è³‡æ–™ï¼Œæ¯æ¬„ç‚ºä¸€å€‹å±¬æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è³‡æ–™çŸ©é™£ï¼ˆData Matrixï¼‰ï¼šä¾‹å¦‚æ•¸å€¼çŸ©é™£æˆ–äº¤å‰è¡¨ï¼ˆcrosstabsï¼‰ï¼Œå¸¸è¦‹æ–¼çµ±è¨ˆåˆ†æã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–‡ä»¶è³‡æ–™ï¼ˆDocument Dataï¼‰ï¼šæ–‡å­—æ–‡ä»¶å¯è½‰æ›ç‚ºã€Œè©é »å‘é‡ï¼ˆTerm-Frequency Vectorï¼‰ã€&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;team&lt;/th&gt;
&lt;th&gt;coach&lt;/th&gt;
&lt;th&gt;ball&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Document1&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Document2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Document3&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äº¤æ˜“è³‡æ–™ï¼ˆTransaction Dataï¼‰ï¼šæ¯ç­†äº¤æ˜“åŒ…å«ä¸€çµ„é …ç›®ï¼Œä¾‹å¦‚è³¼ç‰©ç±ƒä¸­çš„å•†å“ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;TID&lt;/th&gt;
&lt;th&gt;Items&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Bread, Coke, Milk&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Beer, Bread&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Beer, Coke, Diaper, Milk&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="åœ–å½¢èˆ‡ç¶²è·¯è³‡æ–™"&gt;åœ–å½¢èˆ‡ç¶²è·¯è³‡æ–™
&lt;/h3&gt;&lt;p&gt;é€™é¡è³‡æ–™å…·æœ‰ç¯€é»èˆ‡é€£çµçš„çµæ§‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨çƒè³‡è¨Šç¶²ï¼ˆWorld Wide Webï¼‰ï¼šç¶²é ä¹‹é–“çš„è¶…é€£çµå½¢æˆç¶²è·¯çµæ§‹ã€‚&lt;/li&gt;
&lt;li&gt;ç¤¾ç¾¤æˆ–è³‡è¨Šç¶²è·¯ï¼ˆSocial/Information Networksï¼‰ï¼šå¦‚ Facebookã€LinkedIn çš„äººéš›é—œä¿‚åœ–ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†å­çµæ§‹ï¼ˆMolecular Structuresï¼‰ï¼šåŒ–å­¸åˆ†å­å¯è¡¨ç¤ºç‚ºåŸå­ç¯€é»èˆ‡éµçµé‚Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æœ‰åºè³‡æ–™"&gt;æœ‰åºè³‡æ–™
&lt;/h3&gt;&lt;p&gt;é€™é¡è³‡æ–™å…·æœ‰æ™‚é–“æˆ–é †åºæ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½±åƒè³‡æ–™ï¼ˆVideo Dataï¼‰ï¼šç”±ä¸€é€£ä¸²å½±åƒæ§‹æˆã€‚&lt;/li&gt;
&lt;li&gt;æ™‚é–“åºåˆ—è³‡æ–™ï¼ˆTemporal Dataï¼‰ï¼šå¦‚è‚¡åƒ¹ã€æ°£æº«ç­‰éš¨æ™‚é–“è®ŠåŒ–çš„è³‡æ–™ã€‚&lt;/li&gt;
&lt;li&gt;åºåˆ—è³‡æ–™ï¼ˆSequential Dataï¼‰ï¼šå¦‚é¡§å®¢è³¼ç‰©è¡Œç‚ºåºåˆ—ã€ç¶²é ç€è¦½è·¯å¾‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç©ºé–“å½±åƒèˆ‡å¤šåª’é«”è³‡æ–™"&gt;ç©ºé–“ã€å½±åƒèˆ‡å¤šåª’é«”è³‡æ–™
&lt;/h3&gt;&lt;p&gt;é€™é¡è³‡æ–™é€šå¸¸å…·æœ‰ä½ç½®æˆ–è¦–è¦ºç‰¹æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç©ºé–“è³‡æ–™ï¼ˆSpatial Dataï¼‰ï¼šå¦‚åœ°åœ–ã€åœ°ç†è³‡è¨Šç³»çµ±ï¼ˆGISï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å½±åƒèˆ‡å½±ç‰‡è³‡æ–™ï¼ˆImage &amp;amp; Video Dataï¼‰ï¼šå¦‚ç…§ç‰‡ã€ç›£è¦–å™¨éŒ„å½±ã€é†«å­¸å½±åƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å±¬æ€§attributesæ¦‚å¿µèˆ‡åˆ†é¡"&gt;å±¬æ€§ï¼ˆAttributesï¼‰æ¦‚å¿µèˆ‡åˆ†é¡
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å±¬æ€§ï¼ˆä¹Ÿç¨±ç‚ºç¶­åº¦ã€ç‰¹å¾µã€è®Šæ•¸ï¼‰æ˜¯è³‡æ–™ç‰©ä»¶çš„ç‰¹å¾µæ¬„ä½ã€‚&lt;/li&gt;
&lt;li&gt;æ¯å€‹å±¬æ€§ä»£è¡¨ä¸€ç¨®ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼šé¡§å®¢çš„ IDã€å§“åã€åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è³‡æ–™è¡¨ä¸­ï¼Œæ¯ä¸€æ¬„ï¼ˆcolumnï¼‰å°±æ˜¯ä¸€å€‹å±¬æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å±¬æ€§é¡å‹"&gt;å±¬æ€§é¡å‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åç›®å‹å±¬æ€§ï¼ˆNominalï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¡¨ç¤ºåˆ†é¡æˆ–åç¨±ï¼Œç„¡é †åºæ€§ã€‚&lt;/li&gt;
&lt;li&gt;é©åˆç”¨æ–¼åˆ†é¡åˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;äºŒå…ƒå±¬æ€§ï¼ˆBinaryï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åªæœ‰å…©ç¨®ç‹€æ…‹ï¼Œé€šå¸¸ä»¥ 0 å’Œ 1 è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;å°ç¨±äºŒå…ƒï¼ˆSymmetric Binaryï¼‰ï¼šå…©ç¨®ç‹€æ…‹åŒç­‰é‡è¦ï¼Œä¾‹å¦‚æ€§åˆ¥ã€‚&lt;/li&gt;
&lt;li&gt;éå°ç¨±äºŒå…ƒï¼ˆAsymmetric Binaryï¼‰ï¼šå…¶ä¸­ä¸€ç¨®ç‹€æ…‹è¼ƒé‡è¦ï¼Œä¾‹å¦‚é†«ç™‚æª¢æ¸¬çµæœï¼ˆé™½æ€§ vs é™°æ€§ï¼‰ï¼Œé€šå¸¸å°‡é‡è¦ç‹€æ…‹è¨­ç‚º 1ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åºä½å‹å±¬æ€§ï¼ˆOrdinalï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å±¬æ€§å€¼æœ‰æ˜ç¢ºçš„é †åºï¼Œä½†ç„¡æ³•é‡åŒ–å·®è·ã€‚&lt;/li&gt;
&lt;li&gt;ç¯„ä¾‹ï¼šå°ºå¯¸ = {å°ã€ä¸­ã€å¤§}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•¸å€¼å‹å±¬æ€§ï¼ˆNumericï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å€é–“å°ºåº¦ï¼ˆInterval-Scaledï¼‰
&lt;ul&gt;
&lt;li&gt;æœ‰é †åºï¼Œä¸”å–®ä½é–“è·ç›¸ç­‰ï¼Œç„¡çµ•å°é›¶é»ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹ï¼Œæ—¥æœŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¯”ä¾‹å°ºåº¦ï¼ˆRatio-Scaledï¼‰
&lt;ul&gt;
&lt;li&gt;æœ‰é †åºï¼Œä¸”å–®ä½é–“è·ç›¸ç­‰ï¼Œæœ‰çµ•å°é›¶é»ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹ï¼Œé•·åº¦ã€é‡‘é¡ã€è¨ˆæ•¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é›¢æ•£èˆ‡é€£çºŒå±¬æ€§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›¢æ•£å±¬æ€§ï¼ˆDiscreteï¼‰ï¼šåªæœ‰æœ‰é™æˆ–å¯æ•¸ç„¡é™å€‹å€¼ã€‚&lt;/li&gt;
&lt;li&gt;é€£çºŒå±¬æ€§ï¼ˆContinuousï¼‰ï¼šå±¬æ€§å€¼ç‚ºå¯¦æ•¸ï¼Œé€šå¸¸ä»¥æµ®é»æ•¸è¡¨ç¤ºï¼Œå¯¦éš›ä¸Šå—é™æ–¼å„€å™¨ç²¾åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="çµæ§‹åŒ–è³‡æ–™çš„é‡è¦ç‰¹æ€§"&gt;çµæ§‹åŒ–è³‡æ–™çš„é‡è¦ç‰¹æ€§
&lt;/h2&gt;&lt;h3 id="ç¶­åº¦æ€§dimensionality"&gt;ç¶­åº¦æ€§ï¼ˆDimensionalityï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒ‡è³‡æ–™ä¸­å±¬æ€§çš„æ•¸é‡ï¼Œä¹Ÿå°±æ˜¯æ¯ç­†è³‡æ–™çš„æ¬„ä½æ•¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç¨€ç–æ€§sparsity"&gt;ç¨€ç–æ€§ï¼ˆSparsityï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒ‡è³‡æ–™ä¸­å¤§å¤šæ•¸æ¬„ä½å€¼ç‚ºé›¶æˆ–ç¼ºå€¼ï¼Œåªæœ‰å°‘æ•¸æ¬„ä½æœ‰æ„ç¾©çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œã€Œæœ‰å‡ºç¾ã€æ¯”ã€Œæ²’å‡ºç¾ã€æ›´é‡è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è§£æåº¦resolution"&gt;è§£æåº¦ï¼ˆResolutionï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒ‡è³‡æ–™çš„å°ºåº¦æˆ–ç²¾ç´°ç¨‹åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="åˆ†å¸ƒæ€§distribution"&gt;åˆ†å¸ƒæ€§ï¼ˆDistributionï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æŒ‡è³‡æ–™å€¼çš„åˆ†å¸ƒæƒ…å½¢ï¼ŒåŒ…æ‹¬é›†ä¸­è¶¨å‹¢èˆ‡é›¢æ•£ç¨‹åº¦ã€‚
&lt;ul&gt;
&lt;li&gt;é›†ä¸­æ€§ï¼ˆCentralityï¼‰ï¼šå¦‚å¹³å‡å€¼ã€ä¸­ä½æ•¸ï¼Œåæ˜ è³‡æ–™çš„ä¸­å¿ƒä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;é›¢æ•£æ€§ï¼ˆDispersionï¼‰ï¼šå¦‚è®Šç•°æ•¸ã€æ¨™æº–å·®ï¼Œåæ˜ è³‡æ–™çš„æ“´æ•£ç¨‹åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LightRAG Server æª”æ¡ˆå„²å­˜åŸºæœ¬ä»‹ç´¹</title><link>https://Dandelionlibra.github.io/post/note/lightrag-json-db/</link><pubDate>Wed, 06 Aug 2025 09:03:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/lightrag-json-db/</guid><description>&lt;h1 id="lightrag-api-server-æ•™å­¸å¿«é€Ÿä¸Šæ‰‹æŒ‡å—"&gt;LightRAG API Server æ•™å­¸ï¼šå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
&lt;/h1&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/HKUDS/LightRAG" target="_blank" rel="noopener"
&gt;LightRAG&lt;/a&gt; æ˜¯ä¸€å€‹è¼•é‡ç´šã€æ¨¡çµ„åŒ–çš„ RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰æ¡†æ¶ï¼Œæ—¨åœ¨ç°¡åŒ– RAG æ‡‰ç”¨çš„é–‹ç™¼èˆ‡éƒ¨ç½²ã€‚å…¶å…§å»ºçš„ API Server éµå¾ª OpenAI API æ¨™æº–ï¼Œä¸¦æä¾›ä¸€å¥—å®Œæ•´çš„ Web UI API ä¾†ç®¡ç†æ–‡ä»¶èˆ‡çŸ¥è­˜åœ–è­œï¼Œè®“é–‹ç™¼è€…èƒ½è¼•æ˜“åœ°å°‡è‡ªè¨‚çš„ RAG æµç¨‹å°è£æˆæœå‹™ï¼Œä¸¦èˆ‡ç¾æœ‰ç”Ÿæ…‹ç³»ç„¡ç¸«æ¥è»Œã€‚æœ¬æ–‡å°‡å¼•å°åˆå­¸è€…å®Œæˆå¾ç’°å¢ƒè¨­å®šåˆ° API å‘¼å«çš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="lightrag-æ”¯æ´çš„å„²å­˜é¡å‹"&gt;LightRAG æ”¯æ´çš„å„²å­˜é¡å‹
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;KV_STORAGEï¼šllm å›æ‡‰å¿«å–ã€æ–‡å­—å€å¡Šã€æ–‡ä»¶è¨Šæ¯&lt;/li&gt;
&lt;li&gt;VECTOR_STORAGEï¼šå¯¦é«”å‘é‡ã€é—œä¿‚å‘é‡ã€å€å¡Šå‘é‡&lt;/li&gt;
&lt;li&gt;GRAPH_STORAGEï¼šå¯¦é«”é—œä¿‚åœ–&lt;/li&gt;
&lt;li&gt;DOC_STATUS_STORAGEï¼šæ–‡æª”ç´¢å¼•ç‹€æ…‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="1-kv_store_doc_statusjson"&gt;1. kv_store_doc_status.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šç´€éŒ„æ¯ä»½æ–‡ä»¶åœ¨çŸ¥è­˜åº«ä¸­çš„è™•ç†ç‹€æ…‹èˆ‡ç›¸é—œè³‡è¨Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šæ–‡ä»¶çš„å”¯ä¸€è­˜åˆ¥ç¢¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file_path&lt;/code&gt;ï¼šåŸå§‹æ–‡ä»¶æª”åæˆ–è·¯å¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;status&lt;/code&gt;ï¼šè™•ç†ç‹€æ…‹ï¼ˆå¦‚ï¼šprocessed, pending, errorï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;updated_at&lt;/code&gt;ï¼šæœ€å¾Œæ›´æ–°æ™‚é–“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›£æ§æ–‡ä»¶æ˜¯å¦å·²å®Œæˆåˆ‡å‰²ã€åµŒå…¥èˆ‡å­˜å…¥å‘é‡è³‡æ–™åº«ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿è¿½è¹¤èˆ‡é™¤éŒ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="2-kv_store_full_docsjson"&gt;2. kv_store_full_docs.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šå„²å­˜å®Œæ•´çš„åŸå§‹æ–‡æª”ï¼Œä½œç‚ºèªç¾©æª¢ç´¢çš„ä¾†æºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šæ–‡ä»¶å”¯ä¸€ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file_path&lt;/code&gt;ï¼šæª”æ¡ˆä¾†æºè·¯å¾‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;ï¼šå®Œæ•´æ–‡ä»¶çš„æ–‡å­—å…§å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;metadata&lt;/code&gt;ï¼šé™„å±¬è³‡è¨Šï¼ˆå¦‚æ¨™é¡Œã€ä½œè€…ã€åˆ†é¡ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿ç•™å®Œæ•´èªå¢ƒï¼Œä¾¿æ–¼ LLM åœ¨å›ç­”æ™‚å›æº¯å…¨æ–‡ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ã€Œéåˆ†å¡Šã€çš„å…¨æ–‡æª¢ç´¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="3-kv_store_llm_response_cachejson"&gt;3. kv_store_llm_response_cache.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šä½œç‚º LLM æŸ¥è©¢çµæœçš„å¿«å–ï¼Œé¿å…é‡è¤‡è¨ˆç®—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;query&lt;/code&gt;ï¼šä½¿ç”¨è€…è¼¸å…¥çš„æŸ¥è©¢å­—ä¸²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;response&lt;/code&gt;ï¼šLLM ç”Ÿæˆçš„å›ç­”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timestamp&lt;/code&gt;ï¼šå¿«å–ç”Ÿæˆæ™‚é–“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hit_count&lt;/code&gt;ï¼šè©²æŸ¥è©¢è¢«é‡è¤‡ä½¿ç”¨çš„æ¬¡æ•¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æå‡ç³»çµ±æ•ˆèƒ½ï¼Œæ¸›å°‘æ¨¡å‹é‡è¤‡æ¨ç†ã€‚&lt;/li&gt;
&lt;li&gt;å…è¨±åˆ†æç†±é–€æŸ¥è©¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="4-kv_store_text_chunksjson"&gt;4. kv_store_text_chunks.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šå„²å­˜å°‡æ–‡ä»¶åˆ‡å‰²å¾Œçš„å°ç‰‡æ®µï¼ˆchunksï¼‰ï¼Œæ–¹ä¾¿å‘é‡æª¢ç´¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šæ–‡æœ¬ç‰‡æ®µ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file_path&lt;/code&gt;ï¼šä¾†æºæ–‡ä»¶åç¨±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chunk_index&lt;/code&gt;ï¼šç‰‡æ®µé †åºè™Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;ï¼šç‰‡æ®µå…§å®¹æ–‡å­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;embedding_vector&lt;/code&gt;ï¼ˆå¯é¸ï¼‰ï¼šå°æ‡‰çš„å‘é‡åµŒå…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æ´èªæ„æª¢ç´¢ï¼ˆRAG: Retrieval-Augmented Generationï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ¯å€‹ chunk å°æ‡‰ä¸€çµ„ embeddingï¼Œåˆ©æ–¼è¿‘ä¼¼æœå°‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å­˜æœ‰ token æ•¸ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="vdb_chunksjson"&gt;vdb_chunks.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šå„²å­˜ç¶“åµŒå…¥è™•ç†çš„æ–‡æœ¬å‘é‡ï¼ˆVector DB æ ¸å¿ƒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šchunk çš„å”¯ä¸€è­˜åˆ¥ç¢¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;embedding_dim&lt;/code&gt;ï¼šå‘é‡ç¶­åº¦ï¼ˆå¦‚ 1024ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;embedding_vector&lt;/code&gt;ï¼šåµŒå…¥å‘é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;ï¼šå°æ‡‰æ–‡æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source_id&lt;/code&gt;ï¼šä¾†æº chunk çš„ IDã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›é«˜æ•ˆç›¸ä¼¼åº¦æœå°‹ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¯ RAG ç³»çµ±çš„æ ¸å¿ƒæª¢ç´¢è³‡æ–™ä¾†æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="vdb_entitiesjson"&gt;vdb_entities.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šå„²å­˜å¾æ–‡æœ¬ä¸­æŠ½å–çš„å‘½åå¯¦é«”èˆ‡ç›¸é—œæè¿°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šå¯¦é«” IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;entity_name&lt;/code&gt;ï¼šå¯¦é«”åç¨±ï¼ˆå¦‚ã€Œæ—è‡´è¿œã€ã€Œé˜¿å¢¨ã€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;ï¼šå¯¦é«”çš„æè¿°æˆ–å®šç¾©ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file_path&lt;/code&gt;ï¼šä¾†æºæª”æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source_id&lt;/code&gt;ï¼šå°æ‡‰æ–‡æœ¬ç‰‡æ®µ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__created_at__&lt;/code&gt;ï¼šå»ºç«‹æ™‚é–“æˆ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;embedding_dim&lt;/code&gt;ï¼šåµŒå…¥å‘é‡ç¶­åº¦ï¼ˆå¦‚ 1024ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹è‰²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å€‹å¯¦é«”å¯èƒ½ä¾†è‡ªå¤šå€‹æ–‡æœ¬ç‰‡æ®µï¼Œç”¨ &lt;!-- raw HTML omitted --&gt; åˆ†éš”ã€‚&lt;/li&gt;
&lt;li&gt;å¯æ”¯æ´å¤šèªè¨€æˆ–å¤šç‰ˆæœ¬ï¼ˆå¦‚ çŸ¥ä¸€ä¹¦å±‹ vs çŸ¥ä¸€æ›¸å±‹ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚ºçŸ¥è­˜åœ–è­œä¸­çš„ç¯€é»ï¼ˆentitiesï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æ´èªç¾©é—œè¯æª¢ç´¢èˆ‡ä¸Šä¸‹æ–‡è£œå…¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="vdb_relationshipsjson"&gt;vdb_relationships.json
&lt;/h2&gt;&lt;p&gt;åŠŸèƒ½ï¼šå„²å­˜å¯¦é«”ä¹‹é–“çš„èªç¾©é—œä¿‚ï¼Œå½¢æˆçŸ¥è­˜åœ–è­œ (Knowledge Graph)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦æ¬„ä½&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;__id__&lt;/code&gt;ï¼šé—œä¿‚ IDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src_id&lt;/code&gt;ï¼šé—œä¿‚çš„èµ·å§‹å¯¦é«”åç¨±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tgt_id&lt;/code&gt;ï¼šé—œä¿‚çš„ç›®æ¨™å¯¦é«”åç¨±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;content&lt;/code&gt;ï¼šé—œä¿‚çš„æè¿°èˆ‡é¡åˆ¥ï¼ˆå¯èƒ½åŒ…å«å¤šç¨®èªæ„æ¨™ç±¤ï¼Œå¦‚ companionship, ownershipï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;file_path&lt;/code&gt;ï¼šä¾†æºæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source_id&lt;/code&gt;ï¼šå°æ‡‰çš„æ–‡æœ¬ chunkã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__created_at__&lt;/code&gt;ï¼šå»ºç«‹æ™‚é–“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ”¯æ´ã€Œèªç¾©åœ–è­œæª¢ç´¢ã€ï¼Œä¾‹å¦‚ï¼š&lt;br&gt;
å•ã€Œé˜¿å¢¨å’Œæ—è‡´è¿œçš„é—œä¿‚ï¼Ÿã€ â†’ æª¢ç´¢ companionship èˆ‡ mysterious connectionã€‚&lt;/li&gt;
&lt;li&gt;æä¾›çµæ§‹åŒ–çš„èªæ„æ¨ç†ï¼Œè£œå¼·å‘é‡æª¢ç´¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="4-ç¸½çµ"&gt;4. ç¸½çµ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;kv_store* ç³»åˆ— â†’ åå‘æ–‡ä»¶èˆ‡ç‰‡æ®µçš„ç®¡ç†ã€ç‹€æ…‹èˆ‡å¿«å–ã€‚&lt;/li&gt;
&lt;li&gt;vdb* ç³»åˆ— â†’ åå‘èªç¾©å±¤é¢çš„çŸ¥è­˜åœ–è­œèˆ‡å‘é‡æª¢ç´¢ã€‚&lt;/li&gt;
&lt;li&gt;entities èˆ‡ relationships â†’ æ§‹æˆçŸ¥è­˜åœ–è­œ (Knowledge Graph)ã€‚&lt;/li&gt;
&lt;li&gt;chunks èˆ‡ embeddings â†’ æ§‹æˆèªæ„æª¢ç´¢çš„åŸºç¤ã€‚&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LightRAG API Server æ•™å­¸ï¼šå¿«é€Ÿä¸Šæ‰‹æŒ‡å—</title><link>https://Dandelionlibra.github.io/post/note/lightrag-api-server-tutorial/</link><pubDate>Fri, 01 Aug 2025 06:00:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/lightrag-api-server-tutorial/</guid><description>&lt;h1 id="lightrag-api-server-æ•™å­¸å¿«é€Ÿä¸Šæ‰‹æŒ‡å—"&gt;LightRAG API Server æ•™å­¸ï¼šå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
&lt;/h1&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/HKUDS/LightRAG" target="_blank" rel="noopener"
&gt;LightRAG&lt;/a&gt; æ˜¯ä¸€å€‹è¼•é‡ç´šã€æ¨¡çµ„åŒ–çš„ RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰æ¡†æ¶ï¼Œæ—¨åœ¨ç°¡åŒ– RAG æ‡‰ç”¨çš„é–‹ç™¼èˆ‡éƒ¨ç½²ã€‚å…¶å…§å»ºçš„ API Server éµå¾ª OpenAI API æ¨™æº–ï¼Œä¸¦æä¾›ä¸€å¥—å®Œæ•´çš„ Web UI API ä¾†ç®¡ç†æ–‡ä»¶èˆ‡çŸ¥è­˜åœ–è­œï¼Œè®“é–‹ç™¼è€…èƒ½è¼•æ˜“åœ°å°‡è‡ªè¨‚çš„ RAG æµç¨‹å°è£æˆæœå‹™ï¼Œä¸¦èˆ‡ç¾æœ‰ç”Ÿæ…‹ç³»ç„¡ç¸«æ¥è»Œã€‚æœ¬æ–‡å°‡å¼•å°åˆå­¸è€…å®Œæˆå¾ç’°å¢ƒè¨­å®šåˆ° API å‘¼å«çš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="1-å®‰è£èˆ‡ç’°å¢ƒè¨­å®š"&gt;1. å®‰è£èˆ‡ç’°å¢ƒè¨­å®š
&lt;/h2&gt;&lt;h3 id="11-å®‰è£-lightrag"&gt;1.1. å®‰è£ LightRAG
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;install from PyPl&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install &lt;span style="color:#e6db74"&gt;&amp;#34;lightrag-hku[api]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Installation from Source&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 1. Clone the repository&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone https://github.com/HKUDS/LightRAG.git
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cd LightRAG
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 2. create a Python virtual environment if necessary&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 3. Install in editable mode with API support&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install -e &lt;span style="color:#e6db74"&gt;&amp;#34;.[api]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 4. ä¿®æ”¹ç¯„ä¾‹ç’°å¢ƒæ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cp env.example .env
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# 5. å•Ÿå‹• API Server&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lightrag-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="12-ç’°å¢ƒæ–‡ä»¶è¨­å®š"&gt;1.2. ç’°å¢ƒæ–‡ä»¶è¨­å®š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;OpenAI LLM + Ollama Embedding:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LLM_BINDING=openai
LLM_MODEL=gpt-4o
LLM_BINDING_HOST=https://api.openai.com/v1
LLM_BINDING_API_KEY=your_api_key
EMBEDDING_BINDING=ollama
EMBEDDING_BINDING_HOST=http://localhost:11434
EMBEDDING_MODEL=bge-m3:latest
EMBEDDING_DIM=1024
# EMBEDDING_BINDING_API_KEY=your_api_key
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;Ollama LLM + Ollama Embedding:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;LLM_BINDING=ollama
LLM_MODEL=mistral-nemo:latest
LLM_BINDING_HOST=http://localhost:11434
# LLM_BINDING_API_KEY=your_api_key
### Ollama Server context length (Must be larger than MAX_TOTAL_TOKENS+2000)
OLLAMA_LLM_NUM_CTX=16384
EMBEDDING_BINDING=ollama
EMBEDDING_BINDING_HOST=http://localhost:11434
EMBEDDING_MODEL=bge-m3:latest
EMBEDDING_DIM=1024
# EMBEDDING_BINDING_API_KEY=your_api_key
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;å…¶ä»–ç’°å¢ƒè¨­å®šåƒæ•¸ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--host&lt;/code&gt;ï¼šä¼ºæœå™¨ç›£è½ä½å€ï¼ˆé è¨­ï¼š0.0.0.0ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--port&lt;/code&gt;ï¼šä¼ºæœå™¨ç›£è½é€£æ¥åŸ ï¼ˆé è¨­ï¼š9621ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--timeout&lt;/code&gt;ï¼šLLM è«‹æ±‚é€¾æ™‚ï¼ˆé è¨­å€¼ï¼š150 ç§’ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--log-level&lt;/code&gt;ï¼šæ—¥èªŒç­‰ç´šï¼ˆé è¨­ï¼šINFOï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--working-dir&lt;/code&gt;ï¼šè³‡æ–™åº«æŒä¹…ç›®éŒ„ï¼ˆé è¨­ï¼š./rag_storageï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--input-dir&lt;/code&gt;ï¼šä¸Šå‚³æª”æ¡ˆçš„ç›®éŒ„ï¼ˆé è¨­å€¼ï¼š./inputsï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--workspace&lt;/code&gt;ï¼šå·¥ä½œå€åç¨±ï¼Œç”¨æ–¼é‚è¼¯éš”é›¢å¤šå€‹ LightRAG å¯¦ä¾‹ä¹‹é–“çš„è³‡æ–™ï¼ˆé è¨­ï¼šç©ºï¼‰ï¼ŒåŠæ‰€ä»¥å·¥ä½œå…±ç”¨åŒä¸€å€‹è³‡æ–™ç›®éŒ„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="13-ä½¿ç”¨-docker-å•Ÿå‹•-lightrag-ä¼ºæœå™¨"&gt;1.3. ä½¿ç”¨ Docker å•Ÿå‹• LightRAG ä¼ºæœå™¨
&lt;/h3&gt;&lt;p&gt;å»ºç«‹åç‚º &lt;code&gt;docker compose.yml&lt;/code&gt; çš„æª”æ¡ˆï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;services:
lightrag:
container_name: lightrag
image: ghcr.io/hkuds/lightrag:latest
ports:
- &amp;#34;${PORT:-9621}:9621&amp;#34;
volumes:
- ./data/rag_storage:/app/data/rag_storage
- ./data/inputs:/app/data/inputs
- ./config.ini:/app/config.ini
- ./.env:/app/.env
env_file:
- .env
restart: unless-stopped
extra_hosts:
- &amp;#34;host.docker.internal:host-gateway&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å•Ÿå‹• LightRAG ä¼ºæœå™¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker compose up
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# If you want the program to run in the background after startup, add the -d parameter at the end of the command.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="2-å•Ÿå‹•-api-server"&gt;2. å•Ÿå‹• API Server
&lt;/h2&gt;&lt;p&gt;LightRAG ä½¿ç”¨ä¸€å€‹ YAML æª”æ¡ˆä¾†è¨­å®š API Serverï¼ŒåŒ…å«ç«¯å£ã€API è·¯å¾‘ä»¥åŠè¦è¼‰å…¥çš„æ¨¡å‹ã€‚å°ˆæ¡ˆå…§å·²æä¾›ä¸€å€‹ç¯„ä¾‹è¨­å®šæª” &lt;code&gt;lightrag_webui/config.yaml&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€²å…¥å®¹å™¨å¾Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•ä¼ºæœå™¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;lightrag-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Server æˆåŠŸå•Ÿå‹•å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹çš„è¼¸å‡ºï¼Œä»£è¡¨ä¼ºæœå™¨æ­£åœ¨ &lt;code&gt;localhost:9621&lt;/code&gt; ä¸Šé‹è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt; â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ LightRAG Server v1.4.4/0189 â•‘
â•‘ Fast, Lightweight RAG Server Implementation â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¡ Server Configuration:
â”œâ”€ Host: 0.0.0.0
â”œâ”€ Port: 9621
â”œâ”€ Workers: 1
â”œâ”€ CORS Origins: *
â”œâ”€ SSL Enabled: False
â”œâ”€ Ollama Emulating Model: lightrag:latest
â”œâ”€ Log Level: INFO
â”œâ”€ Verbose Debug: False
â”œâ”€ History Turns: 0
â”œâ”€ API Key: Not Set
â””â”€ JWT Auth: Disabled
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;h2 id="3-api-ç«¯é»è©³è§£"&gt;3. API ç«¯é»è©³è§£
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;-X&lt;/code&gt;: æŒ‡å®š HTTP æ–¹æ³•&lt;br&gt;
&lt;code&gt;-H&lt;/code&gt;: åŠ å…¥ HTTP æ¨™é ­&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ex. &lt;code&gt;-H &amp;quot;Content-Type: application/json&amp;quot;&lt;/code&gt; ç”¨æ–¼å‘ŠçŸ¥ä¼ºæœå™¨æ­¤æ¬¡è«‹æ±‚çš„è³‡æ–™æ ¼å¼æ˜¯ JSONã€‚&lt;br&gt;
å¯å¤šæ¬¡ä½¿ç”¨ &lt;code&gt;-H&lt;/code&gt; åŠ æ¨™é ­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;-d&lt;/code&gt;: å‚³é€è«‹æ±‚è³‡æ–™ï¼Œå¸¸æ­é… &lt;code&gt;POST&lt;/code&gt;,&lt;code&gt;PUT&lt;/code&gt; ä½¿ç”¨ï¼Œç•¶æŒ‡å®š &lt;code&gt;Content-Type: application/json&lt;/code&gt; æ™‚ï¼ŒæœƒæŠŠå…§å®¹ç•¶ JSON å‚³é€ã€‚&lt;br&gt;
&lt;code&gt;-v&lt;/code&gt;: verbose æ¨¡å¼ï¼Œé¡¯ç¤ºå®Œæ•´è«‹æ±‚èˆ‡å›æ‡‰éç¨‹ï¼Œä¸»è¦ç”¨æ–¼é™¤éŒ¯ã€‚&lt;br&gt;
&lt;code&gt;-o &amp;lt;file&amp;gt;&lt;/code&gt;: è¼¸å‡ºåˆ°æª”æ¡ˆä¸­ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;ç²å–æ–‡ä»¶ api æ•™å­¸&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;lightrag-server --help
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–åœ¨é€£ä¸Š server å¾Œé–‹å•Ÿ: http://localhost:9621/redoc#tag/documents/operation&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="31-documents"&gt;3.1. Documents
&lt;/h3&gt;&lt;hr&gt;
&lt;h4 id="311-scan-for-new-documents"&gt;3.1.1. Scan For New Documents
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;POST&lt;/code&gt;: &lt;code&gt;/documents/scan&lt;/code&gt;&lt;br&gt;
å•Ÿå‹•èƒŒæ™¯æƒæï¼Œå»æª¢æŸ¥è¼¸å…¥ç›®éŒ„ä¸­æ˜¯å¦æœ‰æ–°çš„æ–‡ä»¶ï¼Œè‹¥æœ‰å‰‡è®€å–é€™äº›æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å›å‚³å…§å®¹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;status&lt;/code&gt;(required): Status of the scanning operation.&lt;br&gt;
value: &lt;code&gt;scanning_started&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;message&lt;/code&gt;: Additional details about the scanning operation.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -X POST &lt;span style="color:#e6db74"&gt;&amp;#34;http://localhost:9621/documents/scan&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h4 id="312-upload-to-input-dir"&gt;3.1.2. Upload To Input Dir
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;POST&lt;/code&gt;: &lt;code&gt;/documents/upload&lt;/code&gt;&lt;br&gt;
å°‡æª”æ¡ˆä¸Šå‚³åˆ°æŒ‡å®šçš„ç›®éŒ„ï¼Œå†å°å…¶é€²è¡Œç´¢å¼•ï¼Œä»¥ä¾¿æª¢ç´¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚³å…¥åƒæ•¸&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;file&lt;/code&gt;(required): è¦ä¸Šå‚³çš„æª”æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;api_key_header_value&lt;/code&gt;: æœ‰äº›ä¼ºæœå™¨å¯èƒ½éœ€è¦ API Key åšèº«ä»½é©—è­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å›å‚³å…§å®¹&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;status&lt;/code&gt;(required): Status of the uploadding operation.&lt;br&gt;
Enum: &lt;code&gt;success&lt;/code&gt;ã€&lt;code&gt;duplicated&lt;/code&gt;ã€&lt;code&gt;partial_success&lt;/code&gt;ã€&lt;code&gt;failure&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;message&lt;/code&gt;(required): Message describing the operation result.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â€»&lt;code&gt;-F &amp;quot;file=@æª”æ¡ˆè·¯å¾‘&amp;quot;&lt;/code&gt; ç”¨æ–¼å‚³ multipart/form-dataã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -X POST &lt;span style="color:#e6db74"&gt;&amp;#34;http://localhost:9621/documents/upload&amp;#34;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt; -F &lt;span style="color:#e6db74"&gt;&amp;#34;file=@./../prince_docs/little_prince_1.txt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id="32-query"&gt;3.2. Query
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;mode: Literal[&amp;quot;local&amp;quot;, &amp;quot;global&amp;quot;, &amp;quot;hybrid&amp;quot;, &amp;quot;naive&amp;quot;, &amp;quot;mix&amp;quot;, &amp;quot;bypass&amp;quot;] = &amp;quot;global&amp;quot;
&amp;quot;&amp;quot;&amp;quot;Specifies the retrieval mode:
- &amp;quot;local&amp;quot;: Focuses on context-dependent information.
- &amp;quot;global&amp;quot;: Utilizes global knowledge.
- &amp;quot;hybrid&amp;quot;: Combines local and global retrieval methods.
- &amp;quot;naive&amp;quot;: Performs a basic search without advanced techniques.
- &amp;quot;mix&amp;quot;: Integrates knowledge graph and vector retrieval.
&amp;quot;&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h3 id="33-documents"&gt;3.3. Documents
&lt;/h3&gt;&lt;p&gt;LightRAG API Server æä¾›å…©é¡ä¸»è¦çš„ç«¯é»ï¼šä¸€é¡æ˜¯éµå¾ª OpenAI æ¨™æº–çš„æ ¸å¿ƒèŠå¤© APIï¼Œå¦ä¸€é¡æ˜¯ Web UI ç”¨æ–¼ç®¡ç†è³‡æ–™çš„ APIã€‚&lt;/p&gt;
&lt;h3 id="31-openai-æ¨™æº–-api"&gt;3.1. OpenAI æ¨™æº– API
&lt;/h3&gt;&lt;p&gt;é€™çµ„ API è®“ LightRAG å¯ä»¥è¼•æ˜“åœ°æ•´åˆé€²ç¾æœ‰çš„ OpenAI ç”Ÿæ…‹ç³»ã€‚&lt;/p&gt;
&lt;h4 id="311-get-apiv1models"&gt;3.1.1. &lt;code&gt;GET /api/v1/models&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;æ­¤ç«¯é»ç”¨æ–¼æŸ¥è©¢ç•¶å‰ä¼ºæœå™¨ä¸Šæ‰€æœ‰å¯ç”¨çš„æ¨¡å‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;: åˆ—å‡ºåœ¨è¨­å®šæª”ä¸­å®šç¾©çš„æ‰€æœ‰æ¨¡å‹åç¨±ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯„ä¾‹&lt;/strong&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -X GET http://localhost:8008/api/v1/models
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›æ‡‰&lt;/strong&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;object&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;list&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;data&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;LightRAG&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;object&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;model&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;created&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;1721615822&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;owned_by&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;lightrag&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="312-post-apiv1chatcompletions"&gt;3.1.2. &lt;code&gt;POST /api/v1/chat/completions&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;é€™æ˜¯æ ¸å¿ƒçš„èŠå¤©äº’å‹•ç«¯é»ï¼ŒåŠŸèƒ½èˆ‡ OpenAI çš„ Chat Completions API å®Œå…¨ç›¸å®¹ã€‚å®ƒæ¥æ”¶ä½¿ç”¨è€…è¼¸å…¥ï¼ŒåŸ·è¡Œ RAG æµç¨‹ï¼Œä¸¦å›å‚³ LLM ç”Ÿæˆçš„ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;: åŸ·è¡Œä¸€å€‹å®Œæ•´çš„ RAG æŸ¥è©¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯„ä¾‹&lt;/strong&gt;:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;curl -X POST http://localhost:8008/api/v1/chat/completions &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt;-H &lt;span style="color:#e6db74"&gt;&amp;#34;Content-Type: application/json&amp;#34;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;&lt;/span&gt;-d &lt;span style="color:#e6db74"&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;model&amp;#34;: &amp;#34;LightRAG&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;messages&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;role&amp;#34;: &amp;#34;user&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;content&amp;#34;: &amp;#34;What is Retrieval-Augmented Generation?&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="32-web-ui-api-ç¸½è¦½"&gt;3.2. Web UI API ç¸½è¦½
&lt;/h3&gt;&lt;p&gt;é€™çµ„ API ä¸»è¦ç”± LightRAG çš„ Web UI ä½¿ç”¨ï¼Œæä¾›æ–‡ä»¶è™•ç†ã€æŸ¥è©¢ã€çŸ¥è­˜åœ–è­œç®¡ç†ç­‰é€²éšåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h4 id="321-æ–‡ä»¶-documents-api"&gt;3.2.1. æ–‡ä»¶ (Documents) API
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ–¹æ³•&lt;/th&gt;
&lt;th style="text-align: left"&gt;è·¯å¾‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/scan&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æƒæè¼¸å…¥è³‡æ–™å¤¾ä¸­çš„æ–°æ–‡ä»¶ä¸¦é€²è¡Œè™•ç†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/upload&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ä¸Šå‚³æ–‡ä»¶è‡³è¼¸å…¥è³‡æ–™å¤¾ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/text&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ’å…¥å–®ç­†æ–‡å­—è³‡æ–™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/texts&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ’å…¥å¤šç­†æ–‡å­—è³‡æ–™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¸…é™¤æ‰€æœ‰å·²è™•ç†çš„æ–‡ä»¶è³‡æ–™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–å·²è™•ç†çš„æ–‡ä»¶åˆ—è¡¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/pipeline_status&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–æ–‡ä»¶è™•ç†ç®¡é“çš„ç‹€æ…‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/delete_document&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ¹æ“šæ–‡ä»¶ ID åˆªé™¤æŒ‡å®šæ–‡ä»¶åŠå…¶ç›¸é—œè³‡æ–™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/clear_cache&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ¸…é™¤å¿«å–ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/delete_entity&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆªé™¤æŒ‡å®šçš„å¯¦é«”ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;DELETE&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/documents/delete_relation&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;åˆªé™¤æŒ‡å®šçš„é—œä¿‚ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="322-æŸ¥è©¢-query-api"&gt;3.2.2. æŸ¥è©¢ (Query) API
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ–¹æ³•&lt;/th&gt;
&lt;th style="text-align: left"&gt;è·¯å¾‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/query&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æäº¤ä¸€å€‹æŸ¥è©¢ä¸¦ç²å–ä¸€æ¬¡æ€§å›è¦†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/query/stream&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æäº¤ä¸€å€‹æŸ¥è©¢ä¸¦ä»¥ä¸²æµæ–¹å¼ç²å–å›è¦†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="323-çŸ¥è­˜åœ–è­œ-graph-api"&gt;3.2.3. çŸ¥è­˜åœ–è­œ (Graph) API
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ–¹æ³•&lt;/th&gt;
&lt;th style="text-align: left"&gt;è·¯å¾‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/graph/label/list&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–çŸ¥è­˜åœ–è­œä¸­æ‰€æœ‰çš„æ¨™ç±¤ (Labels)ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/graphs&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–å®Œæ•´çš„çŸ¥è­˜åœ–è­œè³‡æ–™ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/graph/entity/exists&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æª¢æŸ¥æŒ‡å®šçš„å¯¦é«”æ˜¯å¦å­˜åœ¨ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/graph/entity/edit&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ›´æ–°ä¸€å€‹å¯¦é«”çš„è³‡è¨Šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/graph/relation/edit&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ›´æ–°ä¸€å€‹é—œä¿‚çš„è³‡è¨Šã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="324-ollama-ç›¸å®¹-api"&gt;3.2.4. Ollama ç›¸å®¹ API
&lt;/h4&gt;&lt;p&gt;LightRAG ä¹Ÿæä¾›èˆ‡ Ollama ç›¸å®¹çš„ API ç«¯é»ï¼Œæ–¹ä¾¿èˆ‡ç›¸é—œå·¥å…·æ•´åˆã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style="text-align: left"&gt;æ–¹æ³•&lt;/th&gt;
&lt;th style="text-align: left"&gt;è·¯å¾‘&lt;/th&gt;
&lt;th style="text-align: left"&gt;èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/api/version&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å– API ç‰ˆæœ¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/api/tags&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–å¯ç”¨çš„æ¨¡å‹æ¨™ç±¤ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;GET&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/api/ps&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;ç²å–æ­£åœ¨é‹è¡Œçš„æ¨¡å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/api/generate&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;æ ¹æ“šæç¤ºç”Ÿæˆæ–‡å­—ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;POST&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;&lt;code&gt;/api/chat&lt;/code&gt;&lt;/td&gt;
&lt;td style="text-align: left"&gt;é€²è¡ŒèŠå¤©äº’å‹•ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="4-ç¸½çµ"&gt;4. ç¸½çµ
&lt;/h2&gt;&lt;p&gt;LightRAG çš„ API Server æä¾›äº†ä¸€å€‹æ¨™æº–åŒ–ä¸”åŠŸèƒ½è±å¯Œçš„ä»‹é¢ï¼Œè®“é–‹ç™¼è€…èƒ½å°‡è¤‡é›œçš„ RAG æµç¨‹éƒ¨ç½²ç‚ºä¸€å€‹ç¨ç«‹æœå‹™ã€‚é€ééµå¾ª OpenAI çš„ API æ ¼å¼ä¸¦æä¾›å®Œæ•´çš„æ–‡ä»¶ç®¡ç† APIï¼Œå®ƒæ¥µå¤§åœ°é™ä½äº†æ•´åˆé–€æª»ï¼Œç„¡è«–æ˜¯é€²è¡Œå¿«é€ŸåŸå‹è¨­è¨ˆï¼Œé‚„æ˜¯å°‡å…¶æ•´åˆåˆ°ç¾æœ‰çš„æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œéƒ½è®Šå¾—éå¸¸æ–¹ä¾¿ã€‚å¸Œæœ›æœ¬ç¯‡æ•™å­¸èƒ½å¹«åŠ©æ‚¨é †åˆ©è¸å‡ºä½¿ç”¨ LightRAG çš„ç¬¬ä¸€æ­¥ã€‚&lt;/p&gt;</description></item><item><title>GraphRAG vs LightRAG</title><link>https://Dandelionlibra.github.io/post/note/graphrag-lightrag-compare/</link><pubDate>Thu, 31 Jul 2025 03:24:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/graphrag-lightrag-compare/</guid><description>&lt;h1 id="rag-ç¨®é¡"&gt;RAG ç¨®é¡
&lt;/h1&gt;&lt;h2 id="native-rag"&gt;Native RAG
&lt;/h2&gt;&lt;p&gt;å˜—è©¦è§£æ±ºå…§éƒ¨è³‡è¨Šç¼ºå¤±çš„å•é¡Œã€‚&lt;br&gt;
RAG åœ¨å›ç­”å‰æœƒå…ˆåŸºæ–¼æå•èˆ‡è³‡æ–™åº«ä¸­å…§å®¹çš„èªæ„ç›¸ä¼¼åº¦ç¯©é¸å‡ºæœ€å…·é—œé€£çš„æ®µè½ (chunk) å†å°‡é€™äº›è³‡è¨Šå‚³çµ¦ LLM é€²è¡Œå›ç­”ï¼Œä½†å—é™æ–¼æª¢ç´¢åˆ°çš„ chunk å…§å®¹ï¼Œå› æ­¤è‹¥æ˜¯è©¢å•çš„å•é¡Œæ¯”è¼ƒå…¨é¢ï¼Œä¾‹å¦‚ä¸»é¡Œå¤§ç¶±ç­‰ç­‰ï¼Œå› ç‚ºéœ€è¦å…¨é¢çš„è³‡æ–™å…§å®¹ï¼Œä½†æª¢ç´¢å¾Œå»ä½¿æœƒæä¾›çµ¦ LLM éƒ¨åˆ†å…§å®¹è€Œå·²ï¼Œå› æ­¤å¯é æ¸¬å›ç­”æº–ç¢ºç‡å¤§æ¦‚ä¸é«˜ï¼Œä½†æ˜¯è‹¥æ˜¯æ³•è¦ç­‰å•é¡Œå›ç­”çµæœæœƒæ›´ç²¾ç¢ºã€‚&lt;/p&gt;
&lt;h2 id="graph-rag"&gt;Graph RAG
&lt;/h2&gt;&lt;p&gt;å˜—è©¦è§£æ±º Native RAG å›ç­”ä¸ç²¾ç¢ºçš„å•é¡Œã€‚&lt;/p&gt;
&lt;h2 id="light-rag"&gt;Light RAG
&lt;/h2&gt;&lt;hr&gt;
&lt;h1 id="å¼•è¨€"&gt;å¼•è¨€
&lt;/h1&gt;&lt;h2 id="ç¾æœ‰-rag-ç³»çµ±çš„å±€é™æ€§"&gt;ç¾æœ‰ RAG ç³»çµ±çš„å±€é™æ€§
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾è³´å¹³é¢è³‡æ–™è¡¨ç¤ºï¼š&lt;/strong&gt; è¨±å¤šæ–¹æ³•ä¾è³´æ–¼å¹³é¢è³‡æ–™è¡¨ç¤ºï¼ˆflat data representationsï¼‰ï¼Œé™åˆ¶äº†å®ƒå€‘æ ¹æ“šå¯¦é«”ä¹‹é–“è¤‡é›œé—œä¿‚ä¾†ç†è§£å’Œæª¢ç´¢è³‡è¨Šçš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºä¹ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼š&lt;/strong&gt; é€™äº›ç³»çµ±é€šå¸¸ç¼ºä¹ç¶­æŒä¸åŒå¯¦é«”åŠå…¶ç›¸äº’é—œä¿‚ä¹‹é–“é€£è²«æ€§æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œå°è‡´å›æ‡‰å¯èƒ½ç„¡æ³•å®Œå…¨è§£æ±ºç”¨æˆ¶æŸ¥è©¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹ï¼šè€ƒæ…®ç”¨æˆ¶æå•ã€Œé›»å‹•è»Šçš„èˆˆèµ·å¦‚ä½•å½±éŸ¿åŸå¸‚ç©ºæ°£å“è³ªå’Œå¤§çœ¾é‹è¼¸åŸºç¤è¨­æ–½ï¼Ÿã€ç¾æœ‰ RAG æ–¹æ³•å¯èƒ½æª¢ç´¢åˆ°é—œæ–¼é›»å‹•è»Šã€ç©ºæ°£æ±¡æŸ“å’Œå…¬å…±äº¤é€šæŒ‘æˆ°çš„ç¨ç«‹æ–‡æª”ï¼Œä½†é›£ä»¥å°‡é€™äº›ä¿¡æ¯ç¶œåˆç‚ºä¸€å€‹é€£è²«çš„å›æ‡‰ã€‚å®ƒå€‘å¯èƒ½ç„¡æ³•è§£é‡‹é›»å‹•è»Šçš„æ™®åŠå¦‚ä½•æ”¹å–„ç©ºæ°£å“è³ªï¼Œé€²è€Œå¯èƒ½å½±éŸ¿å…¬å…±äº¤é€šè¦åŠƒï¼Œç”¨æˆ¶å¯èƒ½æ”¶åˆ°ä¸€å€‹ç¢ç‰‡åŒ–çš„ç­”æ¡ˆï¼Œæœªèƒ½å……åˆ†æ•æ‰é€™äº›ä¸»é¡Œä¹‹é–“è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="lightrag-æ¨¡å‹æ¦‚è¿°"&gt;LightRAG æ¨¡å‹æ¦‚è¿°
&lt;/h2&gt;&lt;p&gt;å¢å¼·äº†ç³»çµ±æ•æ‰å¯¦é«”ä¹‹é–“è¤‡é›œç›¸äº’ä¾è³´é—œä¿‚çš„èƒ½åŠ›ï¼Œå¾è€Œç”¢ç”Ÿæ›´é€£è²«å’Œä¸Šä¸‹æ–‡æ›´è±å¯Œçš„å›æ‡‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="å…§æ–‡"&gt;å…§æ–‡
&lt;/h1&gt;&lt;h2 id="lightrag-æ¡†æ¶çš„æ•´é«”æ¶æ§‹"&gt;LightRAG æ¡†æ¶çš„æ•´é«”æ¶æ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://raw.githubusercontent.com/HKUDS/LightRAG/refs/heads/main/README.assets/b2aaf634151b4706892693ffb43d9093.png"
loading="lazy"
alt="LightRAG æ¡†æ¶ç¸½è¦½"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 1. LightRAG æ¡†æ¶ç¸½è¦½ï¼ˆå–è‡ªåŸè«–æ–‡ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æ¶æ§‹å¦‚åœ– 1 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="å¯¦é©—"&gt;å¯¦é©—
&lt;/h1&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/watch?v=-O5ATdQcefo" target="_blank" rel="noopener"
&gt;LightRAGä¸GraphRAGå¯¹æ¯”è¯„æµ‹ï¼Œä»ç´¢å¼•æ„å»ºã€æœ¬åœ°æ£€ç´¢ã€å…¨å±€æ£€ç´¢ã€æ··åˆæ£€ç´¢ç­‰ç»´åº¦å¯¹è¯·æ±‚å¤§æ¨¡å‹æ¬¡æ•°ã€Tokenæ¶ˆè€—ã€é‡‘é¢æ¶ˆè€—ã€æ£€ç´¢è´¨é‡ç­‰æ–¹é¢è¿›è¡Œå…¨é¢å¯¹æ¯”&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/NanGePlus/LightRAGTest" target="_blank" rel="noopener"
&gt;GitHub: [LightRAGTest]&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>GraphRAG æ¦‚è«–</title><link>https://Dandelionlibra.github.io/post/note/graphrag-overview/</link><pubDate>Thu, 31 Jul 2025 03:24:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/graphrag-overview/</guid><description>&lt;h1 id="graph-rag-åŸºæœ¬ä»‹ç´¹"&gt;Graph RAG åŸºæœ¬ä»‹ç´¹
&lt;/h1&gt;&lt;h2 id="graph-rag"&gt;Graph RAG
&lt;/h2&gt;&lt;p&gt;Native RAG å˜—è©¦è§£æ±ºå…§éƒ¨è³‡è¨Šç¼ºå¤±çš„å•é¡Œï¼Œä½†å—é™æ–¼æª¢ç´¢åˆ°çš„ chunk å…§å®¹ï¼Œå› æ­¤è‹¥æ˜¯è©¢å•çš„å•é¡Œæ¯”è¼ƒå…¨é¢ï¼Œä¾‹å¦‚ä¸»é¡Œå¤§ç¶±ç­‰ç­‰ï¼Œå› ç‚ºéœ€è¦å…¨é¢çš„è³‡æ–™å…§å®¹ï¼Œä½†æª¢ç´¢å¾Œå»åªæœƒæä¾›çµ¦ LLM éƒ¨åˆ†å…§å®¹è€Œå·²ã€‚è€Œç‚ºäº†è§£æ±ºå…¨åŸŸè³‡è¨Šç¼ºå¤±çš„å•é¡Œå› è€Œèª•ç”Ÿäº† Graph RAGã€‚&lt;/p&gt;
&lt;p&gt;Graph RAG é€éå°‡éçµæ§‹åŒ–æ–‡æœ¬è½‰æ›ç‚ºçŸ¥è­˜åœ–è­œä¾†è§£æ±º Native RAG çš„å•é¡Œã€‚å®ƒä¸åƒ…åƒ…æ˜¯æª¢ç´¢æ–‡æœ¬ç‰‡æ®µï¼Œè€Œæ˜¯ç†è§£å¯¦é«”ä¹‹é–“çš„é—œä¿‚ï¼Œå¾è€Œèƒ½å¤ å›ç­”æ›´è¤‡é›œã€éœ€è¦ç¶œåˆå¤šæ–¹é¢è³‡è¨Šçš„å•é¡Œã€‚&lt;/p&gt;
&lt;p&gt;node è¡¨ç¤ºæ¯å€‹ä¸»é«”ï¼Œè€Œ edge å‰‡æ˜¯è¡¨ç¤ºäº†æ¯å€‹ entity é–“çš„é—œä¿‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://raw.githubusercontent.com/Dandelionlibra/Dandelionlibra.github.io/refs/heads/main/content/post/note/assert/GraphRag%20relation%20graph.png"
loading="lazy"
alt="Graph RAG é—œä¿‚åœ–"
&gt;
&lt;em&gt;åœ–ï¼šGraph RAG å°‡æ–‡æœ¬ä¸­çš„å¯¦é«”å’Œé—œä¿‚æŠ½å–å‡ºä¾†ï¼Œæ§‹å»ºæˆçŸ¥è­˜åœ–è­œã€‚ï¼ˆåœ–ç‰‡ä¾†æºï¼š&lt;a class="link" href="https://www.youtube.com/watch?v=A1XSpKC2GHc&amp;amp;t=360s" target="_blank" rel="noopener"
&gt;Microsoft Graph RAG ä»‹ç´¹&lt;/a&gt;ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="graph-rag-pipeline"&gt;Graph RAG Pipeline
&lt;/h1&gt;&lt;p&gt;&lt;img src="https://raw.githubusercontent.com/Dandelionlibra/Dandelionlibra.github.io/refs/heads/main/content/post/note/assert/GraphRag%20pipline.png"
loading="lazy"
alt="Graph RAG pipline"
&gt;
&lt;em&gt;åœ–ï¼šGraph RAG å°‡æ–‡æœ¬ä¸­çš„å¯¦é«”å’Œé—œä¿‚æŠ½å–å‡ºä¾†ï¼Œæ§‹å»ºæˆçŸ¥è­˜åœ–è­œã€‚ï¼ˆåœ–ç‰‡ä¾†æºï¼š&lt;a class="link" href="https://arxiv.org/abs/2404.16130" target="_blank" rel="noopener"
&gt;Microsoft Graph RAG ä»‹ç´¹&lt;/a&gt;ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="1-source-documents--text-chunks"&gt;1. Source Documents â†’ Text Chunks
&lt;/h2&gt;&lt;p&gt;å°‡é•·æ–‡ä»¶è½‰æ›æˆå° chunksï¼Œæ¯å€‹ chunks size è¶Šå¤§å‰‡ç”¢ç”Ÿçš„ chunk è¶Šå°‘ã€‚&lt;/p&gt;
&lt;h2 id="2-text-chunks--element-instances"&gt;2. Text Chunks â†’ Element Instances
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨å¤šè¼ªå° LLM çš„å•ç­”ä»¥å®Œå–„æ‰€æœ‰ä¸»é«”èˆ‡å½¼æ­¤ä¹‹é–“çš„é—œè¯ã€‚&lt;br&gt;
ä¾‹ï¼Œè®“ LLM ç”Ÿæˆè³‡æ–™åº«ä¸­è³‡è¨Šçš„é—œä¿‚ï¼Œæ¥è‘—æ‹¿ç”Ÿæˆçš„æ±è¥¿å»è©¢å• LLM ç”Ÿæˆçš„çµæœæ˜¯å¦é‚„æœ‰ç¼ºå¤±?&lt;br&gt;
è‹¥æœ‰ï¼Œå‰‡å†æ¬¡è®“ LLM è£œå…¨ï¼Œä¸€ç›´é‡è¤‡åˆ° LLM å›ç­”å¯ä»¥ç‚ºæ­¢ã€‚&lt;/p&gt;
&lt;h2 id="3-element-instances--element-summaries"&gt;3. Element Instances â†’ Element Summaries
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨ä¸€å€‹é¡å¤–çš„ LLM è¼¸å…¥ Entity èˆ‡ä»–çš„ Relationshipï¼Œè¼¸å‡ºé‡å°æ­¤ Entity Summary çš„æè¿°ã€‚&lt;/p&gt;
&lt;h2 id="4-element-summaries--graph-communities"&gt;4. Element Summaries â†’ Graph Communities
&lt;/h2&gt;&lt;p&gt;å°‡ç›¸åŒä¸»é¡Œçš„å…§å®¹æ¡†æˆåŒæ¨£çš„ Communityã€‚&lt;br&gt;
ä½¿ç”¨çš„æ¼”ç®—æ³•æ˜¯ Leiden community detection algorithmï¼ŒåŸå‰‡ä¸Šæ˜¯ç›¸åŒ Community ä¸­çš„ entity é–“çš„é—œä¿‚è¶Šè¤‡é›œè¶Šå¥½ï¼Œè€Œä¸åŒ Community ä¸­çš„ entity é–“é—œä¿‚è¶Šç°¡å–®è¶Šå¥½ã€‚&lt;br&gt;
&lt;img src="https://raw.githubusercontent.com/Dandelionlibra/Dandelionlibra.github.io/refs/heads/main/content/post/note/assert/GraphRag%20relation%20graph-2.png"
loading="lazy"
alt="Graph RAG é—œä¿‚åœ–"
&gt;
&lt;em&gt;åœ–ï¼šGraph RAG community detectionã€‚ï¼ˆåœ–ç‰‡ä¾†æºï¼š&lt;a class="link" href="https://www.youtube.com/watch?v=A1XSpKC2GHc&amp;amp;t=780s" target="_blank" rel="noopener"
&gt;Microsoft Graph RAG ä»‹ç´¹&lt;/a&gt;ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="5-graph-communities--community-summaries"&gt;5. Graph Communities â†’ Community Summaries
&lt;/h2&gt;&lt;p&gt;å°‡åŒä¸€å€‹ community ä¸­çš„ entity éƒ½çµ„åˆèµ·ä¾†ï¼Œè©¢å• LLM æ•´å€‹æ­¤é¡åˆ¥ community çš„æ‘˜è¦ï¼Œä»¥ç¬¬å››é»çš„åœ–ç‚ºä¾‹ï¼Œå°±æœƒç”¢ç”Ÿä¸‰å€‹ Community Summariesã€‚&lt;br&gt;
è‹¥çŸ¥è­˜åœ–è­œéå¸¸å¤§ï¼Œå‰‡å¯èƒ½ç„¡æ³•å°‡æ‰€æœ‰ entity éƒ½å‚³çµ¦ LLM å‰‡å¯ä»¥ä¾ç…§ community ä¸­ entity çš„é‡è¦æ€§æ±ºå®šæ˜¯å¦è¦å…ˆæ”¾å…¥(é‡è¦æ€§ä¾ç…§å–®ä¸€ node çš„ relation æ•¸é‡æ±ºå®š)ã€‚&lt;/p&gt;
&lt;h2 id="6-community-summaries--community-answers--global-answer"&gt;6. Community Summaries â†’ Community Answers â†’ Global Answer
&lt;/h2&gt;&lt;p&gt;ä¾æ“š Community Summaries å›ç­”å•é¡Œã€‚&lt;br&gt;
å°‡å•é¡Œæ‹¿å»ä¸€ä¸€å•æ¯å€‹ Community Summariesï¼Œå¾—åˆ°å„è‡ªçš„ Community å›ç­”å¾Œï¼Œå†å°‡é€™äº›æ¯”è¼ƒç‰‡é¢çš„å›ç­”æ•´åˆæˆ global answerã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://raw.githubusercontent.com/Dandelionlibra/Dandelionlibra.github.io/refs/heads/main/content/post/note/assert/step6%20GraphRag%20pipline.png"
loading="lazy"
alt="Graph RAG é—œä¿‚åœ–"
&gt;
&lt;em&gt;åœ–ï¼šCommunity Summaries â†’ Community Answers â†’ Global Answerã€‚ï¼ˆåœ–ç‰‡ä¾†æºï¼š&lt;a class="link" href="https://www.youtube.com/watch?v=A1XSpKC2GHc&amp;amp;t=1040s" target="_blank" rel="noopener"
&gt;Microsoft Graph RAG ä»‹ç´¹&lt;/a&gt;ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æ­¤å°±å¯ä»¥è§£æ±º Native RAG åªçœ‹éƒ¨åˆ†è³‡è¨Šï¼Œè€Œä½¿çš„å›ç­”ç¼ºå°‘å…¶é¤˜è³‡è¨Šçš„å¯èƒ½ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="çµè«–"&gt;çµè«–
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;GraphRAG å±•ç¾äº†æ›´å¥½çš„å…¨åŸŸæª¢ç´¢èƒ½åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;å»ºé€ çŸ¥è­˜åœ–è­œèŠ±è²»çš„æˆæœ¬é é«˜æ–¼ Native RAGã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/watch?v=A1XSpKC2GHc&amp;amp;t=240s" target="_blank" rel="noopener"
&gt;Microsoft Graph RAG ä»‹ç´¹ï¼šç”¨ Knowledge Graph ä¾†åš RAGï¼‹Colab å¯¦ä½œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/watch?v=7WFMd8U8C7E" target="_blank" rel="noopener"
&gt;GraphRAGå‘å¸ƒé‡å¤§æ›´æ–°ï¼å¢é‡æ›´æ–°ç´¢å¼•ç»ˆäºæ¥å¹¶æ–°å¢DRIFTå›¾æ¨ç†æœç´¢æŸ¥è¯¢ï¼Œå¸¦ä½ æ‰‹æŠŠæ‰‹å…¨æµç¨‹å®æ“æ–°åŠŸèƒ½ï¼Œæºç åˆ†æï¼ŒåŒæ—¶æ”¯æŒGPTã€å›½äº§å¤§æ¨¡å‹ã€æœ¬åœ°å¤§æ¨¡å‹ç­‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://github.com/NanGePlus/GraphRAGTestV040" target="_blank" rel="noopener"
&gt;GitHub: [GraphRAGTestV040]&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>BAAI/bge-reranker-v2-m3 â€” Hugging Face å®˜æ–¹æ•´ç†</title><link>https://Dandelionlibra.github.io/post/note/bge-reranker-hf-flagembedding-note/</link><pubDate>Wed, 23 Jul 2025 03:51:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/bge-reranker-hf-flagembedding-note/</guid><description>&lt;h2 id="reranker-æ¨¡å‹èˆ‡å‡½å¼åº«ä½¿ç”¨å·®ç•°ç­†è¨˜"&gt;Reranker æ¨¡å‹èˆ‡å‡½å¼åº«ä½¿ç”¨å·®ç•°ç­†è¨˜
&lt;/h2&gt;&lt;p&gt;é€™ä»½ç­†è¨˜æ•´ç†äº† FlagEmbedding å’Œ Hugging Face Transformers åœ¨å¯¦ä½œä¸åŒ Reranker æ¨¡å‹ï¼ˆæ¨™æº–å‹ã€LLM å‹ã€åˆ†å±¤å¼ LLM å‹ï¼‰æ™‚çš„é—œéµå·®ç•°ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="æ ¸å¿ƒå¯¦ä½œæ¯”è¼ƒ"&gt;æ ¸å¿ƒå¯¦ä½œæ¯”è¼ƒ
&lt;/h3&gt;&lt;h4 id="flagembedding"&gt;FlagEmbedding
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;FlagEmbedding&lt;/code&gt; å‡½å¼åº«æä¾›äº†æ›´ç°¡æ½”ã€é«˜åº¦å°è£çš„ APIï¼Œé©åˆå¿«é€Ÿæ•´åˆå’Œé«˜æ•ˆèƒ½æ‡‰ç”¨ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¨™æº– Reranker (bge-reranker-base / large / v2-m3)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: ä½¿ç”¨ &lt;code&gt;FlagReranker&lt;/code&gt; é¡åˆ¥ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: æœ€ç›´æ¥ã€å„ªåŒ–çš„æ–¹æ³•ï¼Œç°¡åŒ–æ¨¡å‹è¼‰å…¥å’Œè¨ˆç®—ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; FlagEmbedding &lt;span style="color:#f92672"&gt;import&lt;/span&gt; FlagReranker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Setting use_fp16 to True speeds up computation with a slight performance degradation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;reranker &lt;span style="color:#f92672"&gt;=&lt;/span&gt; FlagReranker(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-m3&amp;#39;&lt;/span&gt;, use_fp16&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;score &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([&lt;span style="color:#e6db74"&gt;&amp;#39;query&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;passage&amp;#39;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(score) &lt;span style="color:#75715e"&gt;# -5.65234375&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Map the scores into 0-1 by set &amp;#34;normalize=True&amp;#34;, which will apply sigmoid function to the score&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;score &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([&lt;span style="color:#e6db74"&gt;&amp;#39;query&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;passage&amp;#39;&lt;/span&gt;], normalize&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(score) &lt;span style="color:#75715e"&gt;# 0.003497010252573502&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(scores) &lt;span style="color:#75715e"&gt;# [-8.1875, 5.26171875]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# set &amp;#34;normalize=True&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]], normalize&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(scores) &lt;span style="color:#75715e"&gt;# [0.00027803096387751553, 0.9948403768236574]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;LLM-based Reranker&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: åˆ©ç”¨ &lt;code&gt;FlagLLMReranker&lt;/code&gt; é¡åˆ¥ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: å°‡å¤§å‹èªè¨€æ¨¡å‹ï¼ˆå¦‚ Llamaï¼‰ä½œç‚º Rerankerï¼Œåˆ©ç”¨å…¶èªè¨€ç†è§£èƒ½åŠ›é€²è¡Œç´°ç·»æ’åºã€‚éœ€è¦å¤§é‡ VRAM (&amp;gt;40G)ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; FlagEmbedding &lt;span style="color:#f92672"&gt;import&lt;/span&gt; FlagLLMReranker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Setting use_fp16 to True speeds up computation with a slight performance degradation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;reranker &lt;span style="color:#f92672"&gt;=&lt;/span&gt; FlagLLMReranker(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-gemma&amp;#39;&lt;/span&gt;, use_fp16&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;score &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([&lt;span style="color:#e6db74"&gt;&amp;#39;query&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;passage&amp;#39;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(score)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(scores)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;LLM-based Layerwise Reranker&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: é€é FlagLLMReranker çš„ compute_score_layerwise æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: å¯å¾ LLM çš„ä¸åŒå±¤ç²å–åˆ†æ•¸ï¼Œæä¾›å°æ¨¡å‹æ±ºç­–éç¨‹çš„æ·±å…¥æ´å¯Ÿã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; FlagEmbedding &lt;span style="color:#f92672"&gt;import&lt;/span&gt; LayerWiseFlagLLMReranker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Setting use_fp16 to True speeds up computation with a slight performance degradation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;reranker &lt;span style="color:#f92672"&gt;=&lt;/span&gt; LayerWiseFlagLLMReranker(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-minicpm-layerwise&amp;#39;&lt;/span&gt;, use_fp16&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Adjusting &amp;#39;cutoff_layers&amp;#39; to pick which layers are used for computing the score.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;score &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([&lt;span style="color:#e6db74"&gt;&amp;#39;query&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;passage&amp;#39;&lt;/span&gt;], cutoff_layers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#ae81ff"&gt;28&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(score)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; reranker&lt;span style="color:#f92672"&gt;.&lt;/span&gt;compute_score([[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]], cutoff_layers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#ae81ff"&gt;28&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(scores)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id="hugging-face-transformers"&gt;Hugging Face Transformers
&lt;/h4&gt;&lt;p&gt;Hugging Face Transformers å‡½å¼åº«æä¾›äº†æ›´é€šç”¨å’Œéˆæ´»çš„æ–¹æ³•ï¼Œé©åˆéœ€è¦æ·±åº¦è‡ªè¨‚å’Œå­¸è¡“ç ”ç©¶çš„å ´æ™¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¨™æº– Reranker (bge-reranker-base / large / v2-m3)&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: è¼‰å…¥ AutoTokenizer å’Œ AutoModelForSequenceClassificationã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: æ¨™æº–æµç¨‹ï¼Œæä¾›æ›´å¤šè‡ªè¨‚ç©ºé–“ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; torch
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; transformers &lt;span style="color:#f92672"&gt;import&lt;/span&gt; AutoModelForSequenceClassification, AutoTokenizer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tokenizer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoTokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-m3&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoModelForSequenceClassification&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-m3&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model&lt;span style="color:#f92672"&gt;.&lt;/span&gt;eval()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pairs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; torch&lt;span style="color:#f92672"&gt;.&lt;/span&gt;no_grad(): &lt;span style="color:#75715e"&gt;# ç„¡æ¢¯åº¦ä¸‹é™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(pairs, padding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;, truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;, return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;pt&amp;#39;&lt;/span&gt;, max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; model(&lt;span style="color:#f92672"&gt;**&lt;/span&gt;inputs, return_dict&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)&lt;span style="color:#f92672"&gt;.&lt;/span&gt;logits&lt;span style="color:#f92672"&gt;.&lt;/span&gt;view(&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;, )&lt;span style="color:#f92672"&gt;.&lt;/span&gt;float()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(scores)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;LLM-based Reranker&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: è¼‰å…¥ AutoTokenizer å’Œ AutoModelForCausalLMã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: éœ€è¦æ‰‹å‹•è™•ç†æ¨¡å‹è¼¸å‡ºä»¥ç²å¾—åˆ†æ•¸ï¼Œæä¾›æœ€å¤§çš„éˆæ´»æ€§å’Œæ§åˆ¶åŠ›ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; torch
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; transformers &lt;span style="color:#f92672"&gt;import&lt;/span&gt; AutoModelForCausalLM, AutoTokenizer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get_inputs&lt;/span&gt;(pairs, tokenizer, prompt&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;, max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1024&lt;/span&gt;):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; prompt &lt;span style="color:#f92672"&gt;is&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Given a query A and a passage B, determine whether the passage contains an answer to the query by providing a prediction of either &amp;#39;Yes&amp;#39; or &amp;#39;No&amp;#39;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prompt_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(prompt,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;)[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(sep,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;)[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; query, passage &lt;span style="color:#f92672"&gt;in&lt;/span&gt; pairs:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; query_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;A: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;query&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt; &lt;span style="color:#f92672"&gt;//&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; passage_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;B: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;passage&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;prepare_for_model(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;bos_token_id] &lt;span style="color:#f92672"&gt;+&lt;/span&gt; query_inputs[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep_inputs &lt;span style="color:#f92672"&gt;+&lt;/span&gt; passage_inputs[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;only_second&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; padding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_attention_mask&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_token_type_ids&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;+&lt;/span&gt; sep_inputs &lt;span style="color:#f92672"&gt;+&lt;/span&gt; prompt_inputs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;attention_mask&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;] &lt;span style="color:#f92672"&gt;*&lt;/span&gt; len(item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs&lt;span style="color:#f92672"&gt;.&lt;/span&gt;append(item)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;pad(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; padding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length &lt;span style="color:#f92672"&gt;+&lt;/span&gt; len(sep_inputs) &lt;span style="color:#f92672"&gt;+&lt;/span&gt; len(prompt_inputs),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pad_to_multiple_of&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;8&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;pt&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tokenizer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoTokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-gemma&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoModelForCausalLM&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-gemma&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;yes_loc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(&lt;span style="color:#e6db74"&gt;&amp;#39;Yes&amp;#39;&lt;/span&gt;, add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;)[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;][&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model&lt;span style="color:#f92672"&gt;.&lt;/span&gt;eval()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pairs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; torch&lt;span style="color:#f92672"&gt;.&lt;/span&gt;no_grad():
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; get_inputs(pairs, tokenizer)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; model(&lt;span style="color:#f92672"&gt;**&lt;/span&gt;inputs, return_dict&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)&lt;span style="color:#f92672"&gt;.&lt;/span&gt;logits[:, &lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;, yes_loc]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;view(&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;, )&lt;span style="color:#f92672"&gt;.&lt;/span&gt;float()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(scores)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;LLM-based Layerwise Reranker&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ–¹æ³•: é€éæ‰‹å‹•å­˜å– AutoModelForCausalLM çš„éš±è—å±¤è¼¸å‡ºæˆ–æ³¨æ„åŠ›æ¬Šé‡ï¼Œä¸¦è‡ªè¡Œè¨ˆç®—åˆ†æ•¸ã€‚&lt;/li&gt;
&lt;li&gt;ç‰¹é»: æä¾›å° LLM å…§éƒ¨æ±ºç­–éç¨‹æœ€ç´°ç·»çš„æ§åˆ¶å’Œåˆ†æï¼Œä½†å¯¦ä½œè¤‡é›œåº¦é«˜ï¼Œéœ€è¦æ·±å…¥ç†è§£æ¨¡å‹æ¶æ§‹ã€‚&lt;/li&gt;
&lt;li&gt;ç¨‹å¼ç¢¼ç¯„ä¾‹:
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; torch
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; transformers &lt;span style="color:#f92672"&gt;import&lt;/span&gt; AutoModelForCausalLM, AutoTokenizer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get_inputs&lt;/span&gt;(pairs, tokenizer, prompt&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;, max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1024&lt;/span&gt;):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; prompt &lt;span style="color:#f92672"&gt;is&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Given a query A and a passage B, determine whether the passage contains an answer to the query by providing a prediction of either &amp;#39;Yes&amp;#39; or &amp;#39;No&amp;#39;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prompt_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(prompt,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;)[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(sep,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;)[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; query, passage &lt;span style="color:#f92672"&gt;in&lt;/span&gt; pairs:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; query_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;A: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;query&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt; &lt;span style="color:#f92672"&gt;//&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; passage_inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer(&lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;B: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;passage&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item &lt;span style="color:#f92672"&gt;=&lt;/span&gt; tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;prepare_for_model(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;bos_token_id] &lt;span style="color:#f92672"&gt;+&lt;/span&gt; query_inputs[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sep_inputs &lt;span style="color:#f92672"&gt;+&lt;/span&gt; passage_inputs[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; truncation&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;only_second&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; padding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_attention_mask&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_token_type_ids&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_special_tokens&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;+&lt;/span&gt; sep_inputs &lt;span style="color:#f92672"&gt;+&lt;/span&gt; prompt_inputs
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; item[&lt;span style="color:#e6db74"&gt;&amp;#39;attention_mask&amp;#39;&lt;/span&gt;] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;] &lt;span style="color:#f92672"&gt;*&lt;/span&gt; len(item[&lt;span style="color:#e6db74"&gt;&amp;#39;input_ids&amp;#39;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs&lt;span style="color:#f92672"&gt;.&lt;/span&gt;append(item)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; tokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;pad(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; padding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; max_length&lt;span style="color:#f92672"&gt;=&lt;/span&gt;max_length &lt;span style="color:#f92672"&gt;+&lt;/span&gt; len(sep_inputs) &lt;span style="color:#f92672"&gt;+&lt;/span&gt; len(prompt_inputs),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pad_to_multiple_of&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;8&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; return_tensors&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;pt&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tokenizer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoTokenizer&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-minicpm-layerwise&amp;#39;&lt;/span&gt;, trust_remote_code&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; AutoModelForCausalLM&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_pretrained(&lt;span style="color:#e6db74"&gt;&amp;#39;BAAI/bge-reranker-v2-minicpm-layerwise&amp;#39;&lt;/span&gt;, trust_remote_code&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;, torch_dtype&lt;span style="color:#f92672"&gt;=&lt;/span&gt;torch&lt;span style="color:#f92672"&gt;.&lt;/span&gt;bfloat16)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; model&lt;span style="color:#f92672"&gt;.&lt;/span&gt;to(&lt;span style="color:#e6db74"&gt;&amp;#39;cuda&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;model&lt;span style="color:#f92672"&gt;.&lt;/span&gt;eval()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pairs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [[&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;hi&amp;#39;&lt;/span&gt;], [&lt;span style="color:#e6db74"&gt;&amp;#39;what is panda?&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;The giant panda (Ailuropoda melanoleuca), sometimes called a panda bear or simply panda, is a bear species endemic to China.&amp;#39;&lt;/span&gt;]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; torch&lt;span style="color:#f92672"&gt;.&lt;/span&gt;no_grad():
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; inputs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; get_inputs(pairs, tokenizer)&lt;span style="color:#f92672"&gt;.&lt;/span&gt;to(model&lt;span style="color:#f92672"&gt;.&lt;/span&gt;device)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; all_scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; model(&lt;span style="color:#f92672"&gt;**&lt;/span&gt;inputs, return_dict&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;, cutoff_layers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#ae81ff"&gt;28&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; all_scores &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [scores[:, &lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;view(&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;, )&lt;span style="color:#f92672"&gt;.&lt;/span&gt;float() &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; scores &lt;span style="color:#f92672"&gt;in&lt;/span&gt; all_scores[&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(all_scores)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="æ ¸å¿ƒæ¦‚å¿µè§£æ"&gt;æ ¸å¿ƒæ¦‚å¿µè§£æ
&lt;/h3&gt;&lt;h4 id="æ¨™æº–-reranker-cross-encoder"&gt;æ¨™æº– Reranker (Cross-Encoder)
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†: å°‡ã€ŒæŸ¥è©¢ã€å’Œã€Œæ–‡ä»¶ã€æˆå°åœ°åŒæ™‚è¼¸å…¥åˆ°æ¨¡å‹ä¸­ï¼Œæ¨¡å‹åˆ©ç”¨å…©è€…ä¹‹é–“çš„äº¤äº’è³‡è¨Šåˆ¤æ–·ç›¸é—œæ€§ã€‚&lt;/li&gt;
&lt;li&gt;è¼¸å‡º: å–®ä¸€ç›¸é—œæ€§åˆ†æ•¸ã€‚&lt;/li&gt;
&lt;li&gt;æµç¨‹: æŸ¥è©¢ + æ–‡ä»¶ â†’ Cross-Encoder æ¨¡å‹ â†’ ç›¸é—œæ€§åˆ†æ•¸&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="llm-based-reranker"&gt;LLM-based Reranker
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;åŸç†: ä½¿ç”¨å®Œæ•´çš„å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰ä½œç‚º Rerankerï¼Œåˆ©ç”¨å…¶é¾å¤§çŸ¥è­˜å’Œæ¨ç†èƒ½åŠ›ç†è§£æ·±å±¤èªç¾©é—œä¿‚ã€‚&lt;/li&gt;
&lt;li&gt;è¼¸å‡º: é€šå¸¸é€éç‰¹å®š tokenï¼ˆå¦‚ [Yes] æˆ– [No]ï¼‰çš„æ©Ÿç‡è¨ˆç®—åˆ†æ•¸ã€‚&lt;/li&gt;
&lt;li&gt;æµç¨‹: æŸ¥è©¢ + æ–‡ä»¶ â†’ å¤§å‹èªè¨€æ¨¡å‹ (LLM) â†’ åŸºæ–¼ç”Ÿæˆæ©Ÿç‡çš„åˆ†æ•¸&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ç¸½çµèˆ‡æ¯”è¼ƒ"&gt;ç¸½çµèˆ‡æ¯”è¼ƒ
&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¯”è¼ƒç¶­åº¦&lt;/th&gt;
&lt;th&gt;FlagEmbedding&lt;/th&gt;
&lt;th&gt;Hugging Face Transformers&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;æ˜“ç”¨æ€§&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆAPI å°è£è‰¯å¥½ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆéœ€è¦æ›´å¤šæ‰‹å‹•è¨­å®šï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;éˆæ´»æ€§&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆå°ˆç‚º Reranking å„ªåŒ–ï¼‰&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆå¯å®Œå…¨è‡ªè¨‚æµç¨‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ç‰¹è‰²åŠŸèƒ½&lt;/td&gt;
&lt;td&gt;Layerwise åˆ†æ•¸è¨ˆç®—&lt;/td&gt;
&lt;td&gt;èˆ‡æ•´å€‹ Hugging Face ç”Ÿæ…‹ç³»ç„¡ç¸«æ¥è»Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¨è–¦ä½¿ç”¨æƒ…å¢ƒ&lt;/td&gt;
&lt;td&gt;éœ€è¦å¿«é€Ÿå¯¦ç¾é«˜æ•ˆèƒ½ Reranking çš„æ‡‰ç”¨&lt;/td&gt;
&lt;td&gt;éœ€è¦æ·±åº¦è‡ªè¨‚æ¨¡å‹è¡Œç‚ºæˆ–é€²è¡Œå­¸è¡“ç ”ç©¶&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</description></item><item><title>LightRAG è«–æ–‡å°è®€ â€” Simple and Fast Retrieval-Augmented Generation ç­†è¨˜</title><link>https://Dandelionlibra.github.io/post/paper/lightrag-paper-review/</link><pubDate>Tue, 22 Jul 2025 05:27:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/paper/lightrag-paper-review/</guid><description>&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2410.05779" target="_blank" rel="noopener"
&gt;LightRAG: Simple and Fast Retrieval-Augmented Generation&lt;/a&gt;&lt;br&gt;
ä½œè€…ï¼šZirui Guo, Lianghao Xia, Yanhua Yu, Tu Ao, Chao Huang&lt;br&gt;
ç™¼ä½ˆæ–¼ arXivï¼Œ2024å¹´10æœˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="æ‘˜è¦"&gt;æ‘˜è¦
&lt;/h1&gt;&lt;p&gt;RAG é€éæ•´åˆå¤–éƒ¨çŸ¥è­˜ä¾†æºï¼Œæå‡ LLMs å›æ‡‰çš„æº–ç¢ºæ€§èˆ‡ä¸Šä¸‹æ–‡ç›¸é—œæ€§ï¼Œä½†é¢è‡¨&lt;strong&gt;éåº¦ä¾è³´å¹³é¢è³‡æ–™è¡¨ç¤º&lt;/strong&gt; (flat data representations)ã€&lt;strong&gt;ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ä¸è¶³&lt;/strong&gt; (inadequate contextual awareness)ã€&lt;strong&gt;å°è‡´ç”Ÿæˆç¢ç‰‡åŒ–ç­”æ¡ˆ&lt;/strong&gt; (fragmented answers)ï¼Œç„¡æ³•æ•æ‰è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ (inter-dependencies)ã€‚&lt;br&gt;
LightRAGï¼Œæå‡ºé€éå°‡åœ–çµæ§‹ (graph structures) å¼•å…¥æ–‡æœ¬çš„ç´¢å¼• (text indexing) å’Œæª¢ç´¢ (retrieval) éç¨‹ä¾†è§£æ±ºä¸Šè¿°å•é¡Œã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="å¼•è¨€"&gt;å¼•è¨€
&lt;/h1&gt;&lt;h2 id="ç¾æœ‰-rag-ç³»çµ±çš„å±€é™æ€§"&gt;ç¾æœ‰ RAG ç³»çµ±çš„å±€é™æ€§
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¾è³´å¹³é¢è³‡æ–™è¡¨ç¤ºï¼š&lt;/strong&gt; è¨±å¤šæ–¹æ³•ä¾è³´æ–¼å¹³é¢è³‡æ–™è¡¨ç¤ºï¼ˆflat data representationsï¼‰ï¼Œé™åˆ¶äº†å®ƒå€‘æ ¹æ“šå¯¦é«”ä¹‹é–“è¤‡é›œé—œä¿‚ä¾†ç†è§£å’Œæª¢ç´¢è³‡è¨Šçš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºä¹ä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼š&lt;/strong&gt; é€™äº›ç³»çµ±é€šå¸¸ç¼ºä¹ç¶­æŒä¸åŒå¯¦é«”åŠå…¶ç›¸äº’é—œä¿‚ä¹‹é–“é€£è²«æ€§æ‰€éœ€çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œå°è‡´å›æ‡‰å¯èƒ½ç„¡æ³•å®Œå…¨è§£æ±ºç”¨æˆ¶æŸ¥è©¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹ï¼šè€ƒæ…®ç”¨æˆ¶æå•ã€Œé›»å‹•è»Šçš„èˆˆèµ·å¦‚ä½•å½±éŸ¿åŸå¸‚ç©ºæ°£å“è³ªå’Œå¤§çœ¾é‹è¼¸åŸºç¤è¨­æ–½ï¼Ÿã€ç¾æœ‰ RAG æ–¹æ³•å¯èƒ½æª¢ç´¢åˆ°é—œæ–¼é›»å‹•è»Šã€ç©ºæ°£æ±¡æŸ“å’Œå…¬å…±äº¤é€šæŒ‘æˆ°çš„ç¨ç«‹æ–‡æª”ï¼Œä½†é›£ä»¥å°‡é€™äº›ä¿¡æ¯ç¶œåˆç‚ºä¸€å€‹é€£è²«çš„å›æ‡‰ã€‚å®ƒå€‘å¯èƒ½ç„¡æ³•è§£é‡‹é›»å‹•è»Šçš„æ™®åŠå¦‚ä½•æ”¹å–„ç©ºæ°£å“è³ªï¼Œé€²è€Œå¯èƒ½å½±éŸ¿å…¬å…±äº¤é€šè¦åŠƒï¼Œç”¨æˆ¶å¯èƒ½æ”¶åˆ°ä¸€å€‹ç¢ç‰‡åŒ–çš„ç­”æ¡ˆï¼Œæœªèƒ½å……åˆ†æ•æ‰é€™äº›ä¸»é¡Œä¹‹é–“è¤‡é›œçš„ç›¸äº’ä¾è³´é—œä¿‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="lightrag-æ¨¡å‹æ¦‚è¿°"&gt;LightRAG æ¨¡å‹æ¦‚è¿°
&lt;/h2&gt;&lt;p&gt;å¢å¼·äº†ç³»çµ±æ•æ‰å¯¦é«”ä¹‹é–“è¤‡é›œç›¸äº’ä¾è³´é—œä¿‚çš„èƒ½åŠ›ï¼Œå¾è€Œç”¢ç”Ÿæ›´é€£è²«å’Œä¸Šä¸‹æ–‡æ›´è±å¯Œçš„å›æ‡‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜æ•ˆé›™å±¤æª¢ç´¢ç­–ç•¥ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½å±¤æ¬¡æª¢ç´¢ï¼ˆlow-level retrievalï¼‰ï¼š å´é‡æ–¼é—œæ–¼ç‰¹å®šå¯¦é«”åŠå…¶é—œä¿‚çš„ç²¾ç¢ºè³‡è¨Šã€‚&lt;/li&gt;
&lt;li&gt;é«˜å±¤æ¬¡æª¢ç´¢ï¼ˆhigh-level retrievalï¼‰ï¼š æ¶µè“‹æ›´å»£æ³›çš„ä¸»é¡Œå’Œæ¦‚å¿µã€‚&lt;/li&gt;
&lt;li&gt;å„ªå‹¢ï¼š é€éçµåˆè©³ç´°å’Œæ¦‚å¿µæ€§æª¢ç´¢ï¼ŒLightRAG æœ‰æ•ˆé©æ‡‰å¤šæ¨£åŒ–çš„æŸ¥è©¢ç¯„åœï¼Œç¢ºä¿ç”¨æˆ¶æ”¶åˆ°ç¬¦åˆå…¶ç‰¹å®šéœ€æ±‚çš„ç›¸é—œä¸”å…¨é¢çš„å›æ‡‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åœ–çµæ§‹èˆ‡å‘é‡è¡¨ç¤ºçš„æ•´åˆï¼š&lt;/strong&gt; é€éå°‡åœ–çµæ§‹èˆ‡å‘é‡è¡¨ç¤ºæ•´åˆåœ¨ä¸€èµ·ï¼Œæœ¬ LightRAG ä¿ƒé€²äº†ç›¸é—œå¯¦é«”å’Œé—œä¿‚çš„é«˜æ•ˆæª¢ç´¢ï¼ŒåŒæ™‚é€éå¾æ‰€æ§‹å»ºçš„çŸ¥è­˜åœ–ä¸­ç²å–ç›¸é—œçµæ§‹ä¿¡æ¯ï¼Œå¢å¼·äº†çµæœçš„å…¨é¢æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æœ¬ç ”ç©¶åœ¨-rag-ç³»çµ±ä¸­çš„é—œæ³¨é»"&gt;æœ¬ç ”ç©¶åœ¨ RAG ç³»çµ±ä¸­çš„é—œæ³¨é»
&lt;/h2&gt;&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¨é¢ä¿¡æ¯æª¢ç´¢&lt;/strong&gt; (Comprehensive Information Retrieval)ï¼š ç´¢å¼•åŠŸèƒ½ Ï•(â‹…) å¿…é ˆå–„æ–¼æå–å…¨å±€ä¿¡æ¯ï¼Œé€™å°æ–¼å¢å¼·æ¨¡å‹æœ‰æ•ˆå›ç­”æŸ¥è©¢çš„èƒ½åŠ›è‡³é—œé‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜æ•ˆä¸”ä½æˆæœ¬æª¢ç´¢&lt;/strong&gt; (Efficient and Low-Cost Retrieval)ï¼š ç´¢å¼•åŒ–çš„è³‡æ–™çµæ§‹ ğ’Ÿ^ å¿…é ˆèƒ½å¤ å¯¦ç¾å¿«é€Ÿä¸”å…·æˆæœ¬æ•ˆç›Šçš„æª¢ç´¢ï¼Œä»¥æœ‰æ•ˆè™•ç†é«˜å®¹é‡çš„æŸ¥è©¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¿«é€Ÿé©æ‡‰æ•¸æ“šè®ŠåŒ–&lt;/strong&gt; (Fast Adaptation to Data Changes)ï¼š èƒ½å¤ è¿…é€Ÿæœ‰æ•ˆåœ°èª¿æ•´æ•¸æ“šçµæ§‹ä»¥æ•´åˆä¾†è‡ªå¤–éƒ¨çŸ¥è­˜åº«çš„æ–°ä¿¡æ¯ï¼Œé€™å°æ–¼ç¢ºä¿ç³»çµ±åœ¨ä¸æ–·è®ŠåŒ–çš„ä¿¡æ¯ç’°å¢ƒä¸­ä¿æŒæ›´æ–°å’Œç›¸é—œæ€§è‡³é—œé‡è¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id="å…§æ–‡"&gt;å…§æ–‡
&lt;/h1&gt;&lt;h2 id="lightrag-æ¡†æ¶çš„æ•´é«”æ¶æ§‹"&gt;LightRAG æ¡†æ¶çš„æ•´é«”æ¶æ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://raw.githubusercontent.com/HKUDS/LightRAG/refs/heads/main/README.assets/b2aaf634151b4706892693ffb43d9093.png"
loading="lazy"
alt="LightRAG æ¡†æ¶ç¸½è¦½"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 1. LightRAG æ¡†æ¶ç¸½è¦½ï¼ˆå–è‡ªåŸè«–æ–‡ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æ¶æ§‹å¦‚åœ– 1 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;æµç¨‹å¾&lt;strong&gt;åŸå§‹æ–‡æœ¬å¡Š&lt;/strong&gt;é–‹å§‹ï¼Œé€™äº›æ–‡æœ¬å¡Šé¦–å…ˆé€é&lt;strong&gt;åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•&lt;/strong&gt;ï¼ˆGraph-based Text Indexingï¼‰éšæ®µé€²è¡Œè™•ç†ï¼Œéç¨‹åŒ…å«å¹¾å€‹é—œéµå­çµ„ä»¶ï¼š&lt;strong&gt;å¯¦é«”èˆ‡é—œä¿‚æå–&lt;/strong&gt;ï¼ˆEntity &amp;amp; Rel Extractionï¼‰ã€&lt;strong&gt;LLM å‰–æ&lt;/strong&gt;ï¼ˆLLM Profilingï¼‰å’Œ&lt;strong&gt;å»é‡&lt;/strong&gt;ï¼ˆDeduplicationï¼‰ï¼Œæœ€å¾Œçš„è¼¸å‡ºæ˜¯ä¸€å€‹ç”¨æ–¼æª¢ç´¢çš„&lt;strong&gt;ç´¢å¼•åœ–&lt;/strong&gt;ï¼ˆIndex Graphï¼‰ã€‚&lt;br&gt;
æ¥è‘—ï¼ŒQuery LLM æ¥æ”¶è¼¸å…¥æŸ¥è©¢ï¼Œä¸¦å¾ä¸­ç”Ÿæˆ&lt;strong&gt;ä½å±¤ç´šé—œéµå­—&lt;/strong&gt;ï¼ˆLow-level Keysï¼ŒåŒ…æ‹¬å¯¦é«”å’Œé—œä¿‚ï¼‰å’Œ&lt;strong&gt;é«˜å±¤ç´šé—œéµå­—&lt;/strong&gt;ï¼ˆHigh-level Keysï¼ŒåŒ…æ‹¬èªå¢ƒå’ŒåŸå§‹æ–‡æœ¬å¡Šï¼‰ã€‚é€™äº›é—œéµå­—éš¨å¾Œè¢«é€å…¥&lt;strong&gt;é›™å±¤ç´šæª¢ç´¢ç¯„å¼&lt;/strong&gt;ï¼ˆDual-level Retrieval Paradigmï¼‰ï¼Œæ­¤ç¯„å¼èˆ‡ã€Œç´¢å¼•åœ–ã€å’Œã€ŒåŸå§‹æ–‡æœ¬å¡Šã€äº’å‹•ï¼Œä»¥æª¢ç´¢ç›¸é—œè³‡è¨Šã€‚æœ€çµ‚ï¼Œæª¢ç´¢åˆ°çš„è³‡è¨Šè¢«å‚³å› Query LLM é€²è¡Œæª¢ç´¢å¢å¼·çš„ç­”æ¡ˆç”Ÿæˆï¼ˆRetrieval-Augmented Answer Generationï¼‰ã€‚ Â 
åœ–ä¸­å±•ç¤ºäº†ä»¥ã€Œç´¢å¼•åœ–ã€ä½œç‚ºæ ¸å¿ƒå„²å­˜åº«ï¼Œé€™å¼µåœ–ä¸åƒ…ç”¨ä¾†æ•´ç†æ–°è³‡è¨Šï¼ˆç´¢å¼•ï¼‰ï¼Œä¹Ÿç”¨ä¾†å°‹æ‰¾è³‡è¨Šï¼ˆæª¢ç´¢ï¼‰ï¼Œé€™ä»£è¡¨ç³»çµ±ä¸å†åªæ˜¯å„²å­˜ä¸€å †é›¶æ•£çš„æ–‡å­—ç‰‡æ®µï¼Œè€Œæ˜¯å°‡çŸ¥è­˜çµ„ç¹”æˆä¸€å€‹æœ‰çµæ§‹çš„ç¶²è·¯ï¼Œèƒ½æ›´æ™ºæ…§åœ°æ‰¾å‡ºäº‹ç‰©ä¹‹é–“çš„é—œè¯ã€‚&lt;br&gt;
æ­¤å¤–ï¼Œè™•ç†æŸ¥è©¢çš„ LLM åœ¨ LightRAG å¤šæ¬¡å‡ºç¾ï¼Œå®ƒä¸åªè² è²¬ç”Ÿæˆæœ€çµ‚ç­”æ¡ˆï¼Œé‚„æœƒåƒèˆ‡ç†è§£å•é¡Œã€å¼•å°ç³»çµ±å»å°‹æ‰¾ç›¸é—œè³‡è¨Šï¼Œä¸¦å°‡æ‰¾åˆ°çš„è³‡æ–™æ•´åˆèµ·ä¾†ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•"&gt;åŸºæ–¼åœ–å½¢çš„æ–‡æœ¬ç´¢å¼•
&lt;/h2&gt;&lt;p&gt;LightRAG é€éå°‡æ–‡ä»¶åˆ†å‰²æˆæ›´å°ã€æ›´æ˜“æ–¼ç®¡ç†çš„ç‰‡æ®µä¾†å¢å¼·æª¢ç´¢ç³»çµ±ã€‚é€™ç¨®ç­–ç•¥å…è¨±å¿«é€Ÿè­˜åˆ¥å’Œå­˜å–ç›¸é—œè³‡è¨Šï¼Œè€Œç„¡éœ€åˆ†ææ•´å€‹æ–‡ä»¶ ã€‚éš¨å¾Œï¼Œç³»çµ±åˆ©ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¾†è­˜åˆ¥å’Œæå–å„ç¨®å¯¦é«”ï¼ˆä¾‹å¦‚ï¼Œåç¨±ã€æ—¥æœŸã€ä½ç½®å’Œäº‹ä»¶ï¼‰ä»¥åŠå®ƒå€‘ä¹‹é–“çš„é—œä¿‚ ã€‚é€éé€™å€‹éç¨‹æ”¶é›†åˆ°çš„è³‡è¨Šå°‡ç”¨æ–¼å‰µå»ºä¸€å€‹å…¨é¢çš„çŸ¥è­˜åœ–è­œï¼Œçªé¡¯æ•´å€‹æ–‡ä»¶é›†åˆä¸­çš„é€£çµå’Œè¦‹è§£ã€‚&lt;/p&gt;
&lt;p&gt;åœ–å½¢ç”Ÿæˆæ¨¡çµ„æ­£å¼è¡¨ç¤ºç‚ºï¼š&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯¦é«”èˆ‡é—œä¿‚æå– (R(â‹…))&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å°‡æ–‡æª”åˆ‡åˆ†ç‚ºæ›´å°çš„ç‰‡æ®µï¼Œæ–¹ä¾¿å¿«é€Ÿæª¢ç´¢èˆ‡è™•ç†ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å¤§å‹èªè¨€æ¨¡å‹æŠ½å–å¯¦é«”ï¼ˆå¦‚äººåã€åœ°é»ã€äº‹ä»¶ï¼‰ä»¥åŠå®ƒå€‘ä¹‹é–“çš„é—œä¿‚ï¼Œæ§‹å»ºçŸ¥è­˜åœ–è­œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;LLM å‰–æä»¥ç”Ÿæˆéµå€¼å° (P(â‹…))&lt;/strong&gt;ï¼šç‚ºæ¯å€‹å¯¦é«”èˆ‡é—œä¿‚ç”Ÿæˆç´¢å¼•éµï¼ˆkeyï¼‰èˆ‡å°æ‡‰æ‘˜è¦æ–‡æœ¬ï¼ˆvalueï¼‰ï¼Œå½¢æˆæ–‡æœ¬éµå€¼å°ï¼ˆK, Vï¼‰ã€‚å¯¦é«”é€šå¸¸æ¡ç”¨åç¨±ä½œç‚ºéµï¼›é—œä¿‚ä¹Ÿç”±é—œè¯å¯¦é«”æ‘˜è¦æˆ–ä¸»é¡Œèªå½¢æˆéµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å»é‡ä»¥å„ªåŒ–åœ–æ“ä½œ (D(â‹…))&lt;/strong&gt;ï¼šåˆä½µç›¸åŒçš„å¯¦é«”èˆ‡é—œä¿‚ï¼Œä»¥æ¸›å°‘åœ–çš„è¤‡é›œåº¦ï¼Œå„ªåŒ–å¾ŒçºŒé‹ç®—æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å„ªå‹¢&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…¨é¢æ€§ç†è§£ï¼šé€éå¤šè·³å­åœ– (multi-hop subgraphs) å¼·åŒ–å°æ–‡æœ¬ä¸­è·¨é—œä¿‚ä¾è³´çš„ç†è§£ã€‚&lt;/li&gt;
&lt;li&gt;æª¢ç´¢æ•ˆç‡æå‡ï¼šæ¡ç”¨éµå€¼å°çµæ§‹æå‡æŸ¥è©¢ç²¾æº–åº¦èˆ‡é€Ÿåº¦ï¼Œç›¸è¼ƒæ–¼å‚³çµ±ä¾è³´ chunk traversal æ–¹æ³•æ›´å…·æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¢é‡æ›´æ–° (Incremental Knowledge Base Update)&lt;/strong&gt;ï¼šæ–°æ–‡æª”æ’å…¥æ™‚ï¼Œåªå°è©²æ–‡æª”é€²è¡Œç´¢å¼•è§£æï¼Œä¸¦èˆ‡åŸæœ‰åœ–é€²è¡Œåˆä½µï¼Œç„¡éœ€é‡å»ºæ•´å€‹ç´¢å¼•ï¼Œæ¥µå¤§é™ä½è¨ˆç®—æˆæœ¬ä¸¦æå‡æ›´æ–°é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="é›™å±¤æ¬¡æª¢ç´¢æ©Ÿåˆ¶-dual-level-retrieval-paradigm"&gt;é›™å±¤æ¬¡æª¢ç´¢æ©Ÿåˆ¶ (Dual-level Retrieval Paradigm)
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é¡æŸ¥è©¢é¡å‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;Specific Queriesï¼šæŸ¥æ‰¾ç‰¹å®šå¯¦é«”çš„è³‡è¨Šã€‚&lt;br&gt;
ex. èª°å¯«äº†ã€ŠPride and Prejudiceã€‹ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Abstract Queriesï¼šæ¢ç´¢æ¦‚å¿µæ€§ä¸»é¡Œã€‚&lt;br&gt;
ex. äººå·¥æ™ºæ…§å¦‚ä½•å½±éŸ¿ç¾ä»£æ•™è‚²ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è©¢é—œéµè©æŠ½å– (Keyword Extraction)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å°‡æŸ¥è©¢åˆ†ç‚ºï¼š
&lt;ul&gt;
&lt;li&gt;ä½éšé—œéµè©ï¼ˆLowâ€‘levelï¼‰â€”â€”èšç„¦å…·é«”å¯¦é«”æˆ–é—œä¿‚ï¼ˆä¾‹ï¼šäººåã€äº‹ä»¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é«˜éšé—œéµè©ï¼ˆHighâ€‘levelï¼‰â€”â€”æ¦‚æ‹¬æ€§ä¸»é¡Œæˆ–æ¦‚å¿µï¼ˆä¾‹ï¼šåˆ¶åº¦è®Šé©è¶¨å‹¢ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½éšæª¢ç´¢ (Lowâ€‘Level Retrieval)ï¼šé€éä½éšéµç²¾ç¢ºå®šä½å¯¦é«”èˆ‡å…¶å±¬æ€§æˆ–é„°è¿‘é—œä¿‚ã€‚&lt;/li&gt;
&lt;li&gt;é«˜éšæª¢ç´¢ (Highâ€‘Level Retrieval)ï¼šé€éé«˜éšéµå°‹æ‰¾æ¶µè“‹å»£æ³›ä¸»é¡Œæˆ–ç¸½è¦½è³‡è¨Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;&lt;strong&gt;åœ–çµæ§‹èˆ‡å‘é‡çµåˆæª¢ç´¢&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;çµåˆçŸ¥è­˜åœ–çµæ§‹èˆ‡å‘é‡è¡¨ç¤ºï¼ˆvector embeddingsï¼‰ï¼Œåœ¨é€²è¡ŒæŸ¥è©¢æ™‚åŒæ™‚è€ƒé‡å±€éƒ¨ï¼ˆlocalï¼‰èˆ‡å…¨å±€ï¼ˆglobalï¼‰èªç¾©ã€‚&lt;/li&gt;
&lt;li&gt;ä¸¦å¼•å…¥é«˜éšç›¸é—œçµæ§‹è³‡è¨Šï¼ˆå¦‚ä¸€è·³é„°å±…ï¼‰åŠ å¼·æª¢ç´¢çµæœçš„å®Œæ•´æ€§èˆ‡é—œè¯åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æª¢ç´¢å¢å¼·ç­”æ¡ˆç”Ÿæˆ"&gt;æª¢ç´¢å¢å¼·ç­”æ¡ˆç”Ÿæˆ
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨æª¢ç´¢å›ä¾†çš„è³‡æ–™ï¼Œå°‡æ‰€æœ‰ç›¸é—œçš„å¯¦é«”èˆ‡é—œä¿‚æ‘˜è¦ï¼ˆç”± profiling function ç”Ÿæˆï¼›P(â‹…)ï¼‰ä½œç‚º LLM çš„ä¸Šä¸‹æ–‡è¼¸å…¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çµåˆæŸ¥è©¢èˆ‡ä¸Šä¸‹æ–‡ç”Ÿæˆå›ç­”ï¼Œå°‡æŸ¥è©¢ç·Šæ¥ç›¸é—œè³‡æ–™é¤µçµ¦ LLMï¼Œç”Ÿæˆä¸Šä¸‹æ–‡åˆå®œã€ç¬¦åˆéœ€æ±‚çš„å›ç­”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="è¤‡é›œåº¦åˆ†æ"&gt;è¤‡é›œåº¦åˆ†æ
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ç´¢å¼•éšæ®µï¼šå°æ–‡æœ¬é€²è¡Œå¯¦é«”èˆ‡é—œä¿‚æŠ½å–æ™‚ï¼Œéœ€å°æ¯å€‹æ–‡æœ¬ç‰‡æ®µå‘¼å«ä¸€æ¬¡ LLMï¼Œä¸å¢åŠ é¡å¤–ç³»çµ±è² æ“”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æª¢ç´¢éšæ®µï¼šç›¸è¼ƒæ–¼å‚³çµ±é«˜æˆæœ¬çš„ GraphRAG ç¤¾ç¾¤éæ­·ï¼ŒLightRAG æ¡ç”¨å‘é‡æœç´¢èˆ‡åœ–çµæ§‹çµåˆæ–¹å¼â”€â”€åªéœ€ä¸€æ¬¡ API å‘¼å«èˆ‡å°‘é‡ tokenï¼Œå³å®Œæˆæª¢ç´¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h1 id="çµè«–é‡é»æ•´ç†"&gt;çµè«–é‡é»æ•´ç†
&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;åœ–çµæ§‹ç´¢å¼•ï¼ˆGraph-based Indexingï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥å¯¦é«”èˆ‡é—œä¿‚ç‚ºæ ¸å¿ƒå»ºæ§‹çŸ¥è­˜åœ–ï¼Œæ”¯æ´å»é‡èˆ‡å¢é‡æ›´æ–°ï¼Œä¸å¿…é‡å»ºå…¨ç´¢å¼•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="2"&gt;
&lt;li&gt;é›™å±¤æª¢ç´¢ï¼ˆDual-level Retrievalï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ä½éšæª¢ç´¢ï¼šç²¾ç¢ºå®šä½å¯¦é«”èˆ‡ç´°ç¯€è³‡è¨Šã€‚&lt;/li&gt;
&lt;li&gt;é«˜éšæª¢ç´¢ï¼šæ•æ‰æŠ½è±¡ä¸»é¡Œèˆ‡å…¨å±€è„ˆçµ¡ã€‚&lt;/li&gt;
&lt;li&gt;å…©è€…çµåˆç¢ºä¿ å…¨é¢æ€§ + ç²¾æº–æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="3"&gt;
&lt;li&gt;å‘é‡èˆ‡åœ–çµåˆï¼ˆHybrid Retrievalï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;çµåˆå‘é‡ç›¸ä¼¼åº¦èˆ‡å¤šè·³åœ–çµæ§‹æª¢ç´¢ï¼Œå…¼é¡§èªç¾©ç›¸é—œèˆ‡çµæ§‹é—œè¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="4"&gt;
&lt;li&gt;ä½æˆæœ¬é«˜æ•ˆç‡&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æª¢ç´¢éšæ®µåƒ…éœ€ä¸€æ¬¡ API å‘¼å«ã€ç™¾ç´š tokenï¼Œè¼ƒ GraphRAG å¤§å¹…ç¯€çœè¨ˆç®—èˆ‡é‡‘éŒ¢æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start="5"&gt;
&lt;li&gt;å‹•æ…‹é©æ‡‰æ€§&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;èƒ½å³æ™‚åˆä½µæ–°çŸ¥è­˜åœ–ç¯€é»ï¼Œé©åˆå‹•æ…‹æ›´æ–°çš„å¤§å‹çŸ¥è­˜åº«ï¼ˆå¦‚æ³•å¾‹ã€é†«ç™‚ã€ç§‘ç ”ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;LightRAG vs GraphRAG&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é¢å‘&lt;/th&gt;
&lt;th&gt;LightRAG&lt;/th&gt;
&lt;th&gt;GraphRAG&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç´¢å¼•çµæ§‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;åŸºæ–¼ &lt;strong&gt;åœ–çµæ§‹ï¼ˆKnowledge Graphï¼‰+ å‘é‡ç´¢å¼•&lt;/strong&gt;ï¼Œä»¥å¯¦é«”èˆ‡é—œä¿‚ç‚ºéµå€¼å°ï¼ˆKey-Valueï¼‰å­˜å„²ï¼Œæ”¯æ´å»é‡èˆ‡å¢é‡æ›´æ–°&lt;/td&gt;
&lt;td&gt;åŸºæ–¼ &lt;strong&gt;åœ–çµæ§‹ç¤¾ç¾¤ï¼ˆGraph Communityï¼‰&lt;/strong&gt;ï¼Œä»¥ç¤¾ç¾¤æ‘˜è¦ç‚ºæª¢ç´¢å–®ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æª¢ç´¢ç­–ç•¥&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;é›™å±¤æª¢ç´¢&lt;/strong&gt;ï¼šä½éšï¼ˆç´°ç¯€ï¼‰+ é«˜éšï¼ˆä¸»é¡Œï¼‰ä¸¦çµåˆå¤šè·³åœ–æª¢ç´¢èˆ‡å‘é‡ç›¸ä¼¼åº¦&lt;/td&gt;
&lt;td&gt;å–®å±¤æª¢ç´¢ï¼šä¾ç¤¾ç¾¤æ‘˜è¦é€²è¡Œæª¢ç´¢ï¼Œç¼ºä¹ç´°ç²’åº¦èˆ‡å¤šå±¤çµåˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”Ÿæˆéç¨‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æª¢ç´¢åˆ°çš„å¯¦é«”èˆ‡é—œä¿‚æ‘˜è¦ç›´æ¥é€å…¥ LLMï¼Œçµæ§‹åŒ–è¼¸å…¥æ›´ç²¾æº–&lt;/td&gt;
&lt;td&gt;å°‡ç¤¾ç¾¤æ‘˜è¦é€å…¥ LLMï¼Œä¾ç¤¾ç¾¤å…§å®¹ç”Ÿæˆç­”æ¡ˆ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æª¢ç´¢æˆæœ¬&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä¸€æ¬¡ API å‘¼å«&lt;/td&gt;
&lt;td&gt;å¤šæ¬¡ API å‘¼å«&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¢é‡æ›´æ–°&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;æ”¯æ´ &lt;strong&gt;å¿«é€Ÿåˆä½µæ›´æ–°&lt;/strong&gt;ï¼Œåƒ…æ›´æ–°æ–°æ–‡æª”çš„åœ–ç´¢å¼•&lt;/td&gt;
&lt;td&gt;éœ€é‡å»ºæ•´å€‹ç¤¾ç¾¤å ±å‘Šï¼Œæˆæœ¬é«˜&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è³‡è¨Šå®Œæ•´æ€§&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½éšæª¢ç´¢è£œè¶³ç´°ç¯€ï¼Œé«˜éšæª¢ç´¢æŠ“å…¨å±€ï¼Œå…¨é¢æ€§ä½³&lt;/td&gt;
&lt;td&gt;ä¾è³´ç¤¾ç¾¤æ‘˜è¦ï¼Œå¯èƒ½éºæ¼ç´°ç¯€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é©ç”¨å ´æ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è³‡æ–™é »ç¹æ›´æ–°ã€å¤§å‹çŸ¥è­˜åº«ã€å¤šå±¤æ¬¡æŸ¥è©¢éœ€æ±‚&lt;/td&gt;
&lt;td&gt;è³‡æ–™ç›¸å°éœæ…‹ã€åå‘é«˜å±¤ç¸½è¦½æŸ¥è©¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://ar5iv.labs.arxiv.org/html/2410.05779" target="_blank" rel="noopener"
&gt;LightRAG: Simple and Fast Retrieval-Augmented Generation-ar5iv å¯è¦–åŒ–ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Re2G è«–æ–‡å°è®€ â€” Retrieve, Rerank, Generate æ¡†æ¶è§£æèˆ‡æ‡‰ç”¨</title><link>https://Dandelionlibra.github.io/post/paper/re2g-paper-review/</link><pubDate>Tue, 22 Jul 2025 01:31:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/paper/re2g-paper-review/</guid><description>&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2207.06300" target="_blank" rel="noopener"
&gt;Re2G: Retrieve, Rerank, Generate&lt;/a&gt;&lt;br&gt;
ä½œè€…ï¼šMichael Glass, Gaetano Rossiello, Md Faisal Mahbub Chowdhury, Ankita Rajaram Naik, Pengshan Cai, Alfio Gliozzo&lt;br&gt;
ç™¼ä½ˆæ–¼ arXivï¼Œ2022å¹´7æœˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="æ‘˜è¦"&gt;æ‘˜è¦
&lt;/h1&gt;&lt;p&gt;å¤§å‹ Transformer æ¨¡å‹åœ¨è™•ç†è¤‡é›œä»»å‹™æ™‚é›–ç„¶è¡¨ç¾å¼·å¤§ï¼Œä½†åœ¨æ‡‰å°çŸ¥è­˜å¯†é›†å‹ä»»å‹™æ™‚ï¼Œä»æœƒé¢è‡¨é¡¯è‘—çš„è¨ˆç®—æˆæœ¬èˆ‡è¨˜æ†¶é«”é™åˆ¶ã€‚æ­¤ç ”ç©¶æŒ‡å‡ºï¼Œéåƒæ•¸è¨˜æ†¶å’Œæª¢ç´¢æŠ€è¡“èƒ½æœ‰æ•ˆè§£æ±ºé€™äº›æŒ‘æˆ°ã€‚&lt;br&gt;
åŸºæ–¼æ­¤ï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G æ¨¡å‹æ‡‰é‹è€Œç”Ÿï¼Œå®ƒå‰µæ–°åœ°æ•´åˆäº†ç¥ç¶“åˆå§‹æª¢ç´¢èˆ‡é‡æ–°æ’åºæ©Ÿåˆ¶ï¼Œä¸¦ä»¥ BART æ¡†æ¶ç‚ºåŸºç¤é€²è¡Œåºåˆ—åˆ°åºåˆ—çš„ç”Ÿæˆã€‚Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G çš„æ ¸å¿ƒå‰µæ–°ä¹‹è™•åœ¨æ–¼å…¶ç¨ç‰¹çš„é‡æ–°æ’åºåŠŸèƒ½ã€‚é€™ä½¿å¾—æ¨¡å‹èƒ½å¤ æ™ºæ…§åœ°æ•´åˆä¾†è‡ªä¸åŒæª¢ç´¢æºçš„çµæœï¼Œå³ä½¿é€™äº›æºçš„åˆ†æ•¸ä¸å¯æ¯”è¼ƒï¼Œä¾‹å¦‚åŒæ™‚èåˆå‚³çµ±çš„ BM25 ç®—æ³•èˆ‡ç¥ç¶“æª¢ç´¢ï¼ˆå¦‚å¯†é›†æ®µè½æª¢ç´¢ï¼ŒDPRï¼‰ã€‚é€éå¼•å…¥é‡æ’åº (Reranker) çµ„ä»¶ï¼Œæ¨¡å‹å¾—ä»¥çµ±ä¸€è™•ç†ä¸¦æœ€å¤§åŒ–åˆå§‹å€™é¸æ± çš„è³ªé‡ã€‚æ­¤å¤–ï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G é‚„å¼•å…¥äº†&lt;strong&gt;ç·šä¸ŠçŸ¥è­˜è’¸é¤¾æ–¹æ³•&lt;/strong&gt;ï¼Œå¯¦ç¾äº†æ•´å€‹æª¢ç´¢èˆ‡ç”Ÿæˆç®¡é“çš„ç«¯åˆ°ç«¯è¨“ç·´ã€‚é€™ç¨®è¨“ç·´æ–¹å¼å°‡ç³»çµ±çš„æ‰€æœ‰çµ„ä»¶ä¸²æ¥æˆä¸€å€‹æ•´é«”æ¨¡å‹ï¼Œç›´æ¥ä»¥æœ€çµ‚ç›®æ¨™ä½œç‚ºæå¤±å‡½æ•¸é€²è¡Œå„ªåŒ–ï¼Œå¾è€Œç„¡éœ€åˆ†éšæ®µè¨“ç·´ï¼Œæœ‰æ•ˆæå‡äº†ç³»çµ±çš„æ•´é«”æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;â€» åœ¨æ©Ÿå™¨å­¸ç¿’é ˜åŸŸï¼Œã€Œç«¯åˆ°ç«¯è¨“ç·´ã€ï¼ˆEnd-to-End Trainingï¼‰æŒ‡çš„æ˜¯å°‡æ•´å€‹ç³»çµ±çš„æ‰€æœ‰çµ„ä»¶ï¼ˆå¦‚æª¢ç´¢ã€é‡æ’åºã€ç”Ÿæˆï¼‰ä¸²æ¥ç‚ºä¸€å€‹æ•´é«”æ¨¡å‹ï¼Œç›´æ¥ä»¥æœ€çµ‚ç›®æ¨™ï¼ˆå¦‚ç”Ÿæˆæ­£ç¢ºç­”æ¡ˆï¼‰ä½œç‚ºæå¤±å‡½æ•¸ï¼Œåå‘å‚³æ’­å„ªåŒ–æ‰€æœ‰åƒæ•¸ã€‚é€™ç¨®æ–¹å¼ä¸éœ€åˆ†éšæ®µåˆ†åˆ¥è¨“ç·´å„æ¨¡çµ„ï¼Œè€Œæ˜¯è®“æ¨¡å‹è‡ªå‹•å”èª¿å„éƒ¨åˆ†ï¼Œæœ€å¤§åŒ–æ•´é«”æ€§èƒ½ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id="åŸºæœ¬æ¶æ§‹ä»‹ç´¹"&gt;åŸºæœ¬æ¶æ§‹ä»‹ç´¹
&lt;/h1&gt;&lt;p&gt;RAGï¼ˆRetrieval-Augmented Generationï¼‰èˆ‡ Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;Gï¼ˆRetrieve, Rerank, Generateï¼‰æ¶æ§‹æ¨¡çµ„å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š&lt;br&gt;
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x1.png"
loading="lazy"
alt="RAG åŸºæœ¬æ¶æ§‹åœ–"
&gt;&lt;br&gt;
åœ– 1. RAG åŸºæœ¬æ¶æ§‹åœ–ï¼šRAG åŸºç¤æµç¨‹åŒ…å«æª¢ç´¢å™¨èˆ‡ç”Ÿæˆå™¨ï¼Œå°‡æŸ¥è©¢èˆ‡æª¢ç´¢åˆ°çš„å¤–éƒ¨çŸ¥è­˜ç‰‡æ®µä¸€åŒè¼¸å…¥ç”Ÿæˆæ¨¡å‹ï¼Œç”¢ç”Ÿæœ€çµ‚å›ç­”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x2.png"
loading="lazy"
alt="RAG é‡æ’åºæ¶æ§‹åœ–"
&gt;&lt;br&gt;
åœ– 2. Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G (Retrieve, Rerank, Generate) æ¶æ§‹åœ–ï¼šé€²éšç‰ˆæœ¬åœ¨æª¢ç´¢å¾ŒåŠ å…¥é‡æ’åºï¼ˆRerankï¼‰æ¨¡çµ„ï¼Œå°å€™é¸ç‰‡æ®µé€²è¡Œæ’åºå„ªåŒ–ï¼Œæå‡æª¢ç´¢çµæœå“è³ªèˆ‡ç”Ÿæˆç›¸é—œæ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RAG æ¶æ§‹&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æª¢ç´¢å™¨ï¼ˆRetrieverï¼‰ï¼šå¾èªæ–™åº«ä¸­æª¢ç´¢ç›¸é—œæ®µè½&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼šåŸºæ–¼æª¢ç´¢çµæœç”Ÿæˆå›ç­”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G æ¶æ§‹&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆå§‹æª¢ç´¢å±¤ï¼ˆInitial Retrieval Layerï¼‰ï¼šç¥ç¶“æª¢ç´¢ + é—œéµå­—æª¢ç´¢&lt;/li&gt;
&lt;li&gt;é‡æ’åºå±¤ï¼ˆReranker Layerï¼‰ï¼šèåˆå¤šç¨®æª¢ç´¢çµæœä¸¦é‡æ’åº&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆå±¤ï¼ˆGeneration Layerï¼‰ï¼šåŸºæ–¼é‡æ’åºçµæœç”Ÿæˆæœ€çµ‚è¼¸å‡º&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€™ç¨®åˆ†å±¤è¨­è¨ˆä½¿ Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G èƒ½éˆæ´»çµåˆå¤šç¨®æª¢ç´¢æŠ€è¡“ï¼Œä¸¦é€éé‡æ’åºæå‡å€™é¸è³ªé‡ï¼Œæœ€çµ‚å¢å¼·ç”Ÿæˆæ•ˆæœã€‚&lt;/p&gt;
&lt;h1 id="re2g-æ ¸å¿ƒæ¦‚å¿µèˆ‡å‰µæ–°çªç ´"&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G æ ¸å¿ƒæ¦‚å¿µèˆ‡å‰µæ–°çªç ´
&lt;/h1&gt;&lt;p&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G çš„å…©å¤§å‰µæ–°çªç ´ï¼Œåˆ†åˆ¥é«”ç¾åœ¨å¤šæºæª¢ç´¢çµæœçš„èåˆèƒ½åŠ›èˆ‡å‰µæ–°çš„ç«¯åˆ°ç«¯è¨“ç·´ç­–ç•¥ã€‚
é¦–å…ˆï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G çš„é‡æ’åºæ–¹æ³•æ‰“ç ´äº†å‚³çµ±æª¢ç´¢åˆ†æ•¸ä¸å¯æ¯”çš„é™åˆ¶ï¼Œèƒ½å¤ æœ‰æ•ˆèåˆä¾†è‡ªä¸åŒæª¢ç´¢æ©Ÿåˆ¶çš„å€™é¸çµæœã€‚å…¶æ¬¡ï¼Œä½œè€…æå‡ºä¸€ç¨®æ”¹è‰¯çš„çŸ¥è­˜è’¸é¤¾ç­–ç•¥ï¼Œä½¿å¾—æ•´å€‹ç³»çµ±èƒ½åƒ…ä¾è³´ç›®æ¨™åºåˆ—è¼¸å‡ºé€²è¡Œè¨“ç·´ï¼Œå¯¦ç¾å¾åˆå§‹æª¢ç´¢ã€é‡æ’åºåˆ°åºåˆ—ç”Ÿæˆç«¯åˆ°ç«¯æ”¹å–„ã€‚é€™é …è¨­è¨ˆè§£æ±ºäº†ç•¶é‡æ’åºå™¨ä¸»å°é‹ç®—å¾Œï¼ŒæŸ¥è©¢ç·¨ç¢¼å™¨å°‡ç„¡æ³•å¾ç”Ÿæˆæå¤±ä¸­ç²å¾—æœ‰æ•ˆæ¢¯åº¦çš„å•é¡Œã€‚é€éåœ¨ç·šçŸ¥è­˜è’¸é¤¾ï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G è®“é‡æ’åºå™¨æˆç‚ºæŸ¥è©¢ç·¨ç¢¼å™¨çš„æŒ‡å°ï¼Œé‡æ–°å»ºç«‹äº†æ¢¯åº¦æµé€šè·¯ï¼Œæ·±åŒ–å¤šæ¨¡çµ„ç³»çµ±é–“çš„äº’å‹•è¨“ç·´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦æµç¨‹æ˜¯å¾å¤§å‹èªæ–™åº«ä¸­&lt;strong&gt;æª¢ç´¢ç›¸é—œæ®µè½&lt;/strong&gt;ï¼Œéš¨å¾Œå°é€™äº›åˆæ­¥æª¢ç´¢åˆ°çš„æ®µè½&lt;strong&gt;é€²è¡Œç²¾ç¢ºçš„é‡æ’åº&lt;/strong&gt;ï¼Œæœ€å¾ŒåŸºæ–¼é‡æ’åºå¾Œçš„çµæœ&lt;strong&gt;ç”Ÿæˆæœ€çµ‚çš„è¼¸å‡ºåºåˆ—&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æª¢ç´¢ç›¸é—œæ®µè½&lt;/strong&gt;&lt;br&gt;
å¾å¤§å‹èªæ–™åº«ä¸­ï¼Œé€éé«˜æ•ˆçš„åˆå§‹æª¢ç´¢æ¨¡å‹ï¼ˆå¦‚ DPR æˆ– BM25ï¼‰ç¯©é¸å‡ºèˆ‡æŸ¥è©¢ç›¸é—œçš„å€™é¸æ®µè½ã€‚&lt;br&gt;
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x4.png"
loading="lazy"
alt="é›™ç·¨ç¢¼å™¨è¡¨ç¤ºæ¨¡å‹ â€” åˆå§‹æª¢ç´¢å™¨ï¼ˆDPRï¼‰"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 3ï¼šè¡¨ç¤ºæ¨¡å‹ï¼ˆBi-Encoderï¼‰é‹ä½œæ–¹å¼ï¼šæŸ¥è©¢ï¼ˆQueryï¼‰èˆ‡æ®µè½ï¼ˆPassageï¼‰åˆ†åˆ¥é€éç¨ç«‹çš„ BERT ç·¨ç¢¼å™¨è½‰æ›ç‚ºå‘é‡è¡¨ç¤ºï¼ˆr&lt;!-- raw HTML omitted --&gt;q&lt;!-- raw HTML omitted --&gt; èˆ‡ r&lt;!-- raw HTML omitted --&gt;p&lt;!-- raw HTML omitted --&gt;ï¼‰ï¼Œä¹‹å¾Œé€é å‘é‡å…§ç©ï¼ˆInner Productï¼‰ è¨ˆç®—ç›¸ä¼¼åº¦ï¼Œä½œç‚ºæª¢ç´¢æ’åºçš„ä¾æ“šã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç²¾ç¢ºçš„é‡æ’åº&lt;/strong&gt;&lt;br&gt;
å°åˆæ­¥æª¢ç´¢åˆ°çš„å€™é¸æ®µè½ï¼Œä½¿ç”¨äº’å‹•æ¨¡å‹ï¼ˆRerankerï¼‰é€²è¡Œç›¸é—œæ€§é‡æ’åºã€‚&lt;br&gt;
æ­¤éšæ®µçš„é—œéµå‰µæ–°åœ¨æ–¼èƒ½å¤ &lt;strong&gt;æ•´åˆå¤šç¨®ä¾†æºçš„æª¢ç´¢çµæœ&lt;/strong&gt;ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;BM25&lt;/strong&gt;ï¼šåŸºæ–¼é—œéµå­—çš„å‚³çµ±æª¢ç´¢ï¼Œåˆ†æ•¸åæ˜ å­—è©åŒ¹é…é »ç‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DPR&lt;/strong&gt;ï¼šåŸºæ–¼èªæ„å‘é‡çš„ç¥ç¶“æª¢ç´¢ï¼Œåˆ†æ•¸ä¾†è‡ªå…§ç©ç›¸ä¼¼åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶è€Œï¼Œé€™äº›æª¢ç´¢åˆ†æ•¸æ€§è³ªä¸åŒï¼Œç›´æ¥æ¯”å°æœƒç”¢ç”Ÿåèª¤ã€‚&lt;br&gt;
ç‚ºæ­¤ï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G å¼•å…¥ &lt;strong&gt;ç¨ç«‹çš„ Reranker æ¨¡çµ„&lt;/strong&gt;ï¼Œå°‡ä¸åŒæª¢ç´¢ä¾†æºçš„å€™é¸é€²è¡Œ&lt;strong&gt;çµ±ä¸€è©•åˆ†&lt;/strong&gt;ï¼Œé‡æ’åºå¾Œç”¢å‡ºå¯æ¯”è¼ƒçš„çµæœã€‚&lt;br&gt;
&lt;img src="https://ar5iv.labs.arxiv.org/html/2207.06300/assets/x3.png"
loading="lazy"
alt="äº’å‹•æ¨¡å‹ â€” é‡æ’åºå™¨ï¼ˆRerankerï¼‰"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 4ï¼šäº’å‹•æ¨¡å‹ï¼ˆInteraction Modelï¼‰é‹ä½œæ–¹å¼ â€” æŸ¥è©¢èˆ‡æ®µè½è¯åˆè¼¸å…¥ BERTï¼Œé€éäº¤å‰æ³¨æ„åŠ›æ•æ‰èªç¾©é—œè¯ï¼Œæœ€çµ‚ç”± [CLS] é æ¸¬ç›¸é—œæ€§åˆ†æ•¸ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºæ–¼é‡æ’åºçµæœçš„ç”Ÿæˆ&lt;/strong&gt;&lt;br&gt;
æœ€çµ‚ï¼Œå°‡æ’åºé å‰çš„ Top-K æ®µè½ï¼Œèˆ‡æŸ¥è©¢å…±åŒè¼¸å…¥åˆ°åºåˆ—ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ BARTï¼‰ä¸­ï¼Œç”Ÿæˆç›®æ¨™å›ç­”æˆ–å›æ‡‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="re2g-æ¨¡å‹æ¶æ§‹è©³è§£"&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G æ¨¡å‹æ¶æ§‹è©³è§£
&lt;/h2&gt;&lt;h3 id="åˆå§‹æª¢ç´¢å±¤dprèˆ‡bm25çš„å”åŒä½œç”¨"&gt;åˆå§‹æª¢ç´¢å±¤ï¼šDPRèˆ‡BM25çš„å”åŒä½œç”¨
&lt;/h3&gt;&lt;p&gt;ç›®çš„æ˜¯å»ºç«‹ä¸€å€‹åŒ…å«æ½›åœ¨ç›¸é—œæ®µè½çš„å€™é¸æ± ï¼Œåœ¨æ­¤éšæ®µçµåˆäº†å…©ç¨®äº’è£œçš„æª¢ç´¢æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DPR (Dense Passage Retrieval) å¯†é›†æ®µè½æª¢ç´¢ï¼šDPR æ¡ç”¨é›™ç·¨ç¢¼å™¨è¡¨ç¤ºæ¨¡å‹ï¼Œå…¶ä¸­æŸ¥è©¢ç·¨ç¢¼å™¨å’Œæ®µè½ç·¨ç¢¼å™¨ï¼ˆå…©è€…å‡åŸºæ–¼ BERTï¼‰ç¨ç«‹ç”ŸæˆæŸ¥è©¢å’Œæ®µè½çš„è¡¨ç¤ºå‘é‡ã€‚é€™ç¨®ç¨ç«‹ç·¨ç¢¼çš„è¨­è¨ˆå…è¨±åœ¨æª¢ç´¢å‰é å…ˆè¨ˆç®—èªæ–™åº«ä¸­æ‰€æœ‰æ®µè½çš„å‘é‡ï¼Œä¸¦ä½¿ç”¨è¿‘ä¼¼æœ€è¿‘é„° (ANN) ç´¢å¼•ã€‚åœ¨æ¨æ–·æ™‚ï¼Œè¼¸å…¥æŸ¥è©¢æœƒä½¿ç”¨ DPR æŸ¥è©¢ç·¨ç¢¼å™¨é€²è¡Œç·¨ç¢¼ï¼Œä¸¦å¾ HNSW ç´¢å¼•ä¸­å¿«é€Ÿæª¢ç´¢å‡ºæœ€ç›¸é—œçš„ Top-12 æ®µè½ã€‚ Â &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;BM25ï¼šä½œç‚ºä¸€ç¨®å‚³çµ±çš„åŸºæ–¼é—œéµå­—çš„æª¢ç´¢æ–¹æ³•ï¼ŒBM25 æ“…é•·æ•æ‰ç²¾ç¢ºçš„è©å½™åŒ¹é…ã€‚åœ¨æ¨æ–·æ™‚ï¼ŒæŸ¥è©¢ä¹Ÿæœƒå‚³éçµ¦ BM25 æœç´¢ï¼ˆå…·é«”ä½¿ç”¨ Anserini åº«ï¼‰ï¼Œä¸¦æ”¶é›† Top-12 çš„ BM25 çµæœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G åœ¨æ­¤å±¤çµåˆä½¿ç”¨äº† DPR (ä¸€ç¨®ç¥ç¶“ã€Œè¡¨ç¤ºæ¨¡å‹ã€) å’Œ BM25 (ä¸€ç¨®è©å½™åŒ¹é…æ–¹æ³•)ã€‚é€™å…©ç¨®æ–¹æ³•äº’è£œï¼Œå…±åŒç”¢ç”Ÿä¸€å€‹åˆæ­¥çš„å€™é¸æ®µè½æ± ï¼Œé€™å…©ç¨®æ–¹æ³•æª¢ç´¢åˆ°çš„æ®µè½éš¨å¾Œæœƒè¢«åˆä½µï¼Œç‚ºå¾ŒçºŒçš„é‡æ’åºéšæ®µæä¾›ä¸€å€‹æ›´å…¨é¢ä¸”å¤šæ¨£åŒ–çš„å€™é¸é›†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ï¼š&lt;br&gt;
&lt;strong&gt;DPR çš„æª¢ç´¢çµæœï¼š&lt;/strong&gt;
DPR æ¨¡å‹æœƒå°‡æ–‡æª”åº«ä¸­çš„æ‰€æœ‰æ®µè½é å…ˆç·¨ç¢¼æˆå‘é‡ï¼Œä¸¦å„²å­˜åœ¨ä¸€å€‹å‘é‡è³‡æ–™åº«ä¸­ï¼Œç•¶æœ‰ä¸€å€‹æŸ¥è©¢é€²ä¾†æ™‚ï¼ŒDPR æœƒå°‡é€™å€‹æŸ¥è©¢ä¹Ÿç·¨ç¢¼æˆä¸€å€‹å‘é‡ï¼Œç„¶å¾Œï¼Œå®ƒæœƒåœ¨å‘é‡è³‡æ–™åº«ä¸­é€²è¡Œã€Œæœ€è¿‘é„°æœç´¢ã€ï¼Œæ‰¾å‡ºèˆ‡æŸ¥è©¢å‘é‡æœ€ç›¸ä¼¼çš„ K å€‹æ®µè½å‘é‡ï¼Œé€™äº›è¢«æ‰¾å‡ºä¾†çš„ K å€‹æ®µè½ï¼Œå°±æ˜¯ DPR çš„ã€Œæª¢ç´¢çµæœã€ï¼Œå®ƒå€‘æ˜¯å¯¦éš›çš„æ–‡æœ¬æ®µè½ã€‚&lt;br&gt;
ä¾‹å¦‚ï¼šã€Œå°¼åŠ æ‹‰ç€‘å¸ƒä½æ–¼åŠ æ‹¿å¤§å’Œç¾åœ‹çš„é‚Šç•Œã€‚ã€&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BM25 çš„æª¢ç´¢çµæœï¼š&lt;/strong&gt;
BM25 æ¼”ç®—æ³•æœƒæ ¹æ“šæŸ¥è©¢ä¸­çš„é—œéµå­—ï¼Œåœ¨æ–‡æª”åº«ä¸­è¨ˆç®—æ¯å€‹æ®µè½èˆ‡æŸ¥è©¢çš„ç›¸é—œæ€§åˆ†æ•¸ï¼Œå®ƒæœƒæ ¹æ“šé€™äº›åˆ†æ•¸ï¼Œæ‰¾å‡ºç›¸é—œæ€§æœ€é«˜çš„ K å€‹æ®µè½ï¼Œé€™äº›è¢«æ‰¾å‡ºä¾†çš„ K å€‹æ®µè½ï¼Œå°±æ˜¯ BM25 çš„ã€Œæª¢ç´¢çµæœã€ï¼Œå®ƒå€‘ä¹Ÿæ˜¯å¯¦éš›çš„æ–‡æœ¬æ®µè½ã€‚&lt;br&gt;
ä¾‹å¦‚ï¼šã€Œå°¼åŠ æ‹‰ç€‘å¸ƒæ˜¯ä¸–ç•Œè‘—åçš„ç€‘å¸ƒã€‚ã€&lt;/p&gt;
&lt;p&gt;åˆä½µæŒ‡çš„æ˜¯å°‡é€™å…©å€‹ç¨ç«‹æª¢ç´¢å™¨ï¼ˆDPR å’Œ BM25ï¼‰å„è‡ªæ‰¾å‡ºä¾†çš„å€™é¸æ®µè½åˆ—è¡¨çµåˆèµ·ä¾†ï¼Œå½¢æˆä¸€å€‹æ›´å¤§çš„ã€åŒ…å«æ›´å¤šæ½›åœ¨ç›¸é—œæ®µè½çš„é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;br&gt;
DPR å¯èƒ½æª¢ç´¢åˆ°æ®µè½ A, B, C, D, Eã€‚&lt;br&gt;
BM25 å¯èƒ½æª¢ç´¢åˆ°æ®µè½ C, F, G, H, Iã€‚&lt;br&gt;
åˆä½µå¾Œï¼Œåˆå§‹å€™é¸é›†å°±å¯èƒ½åŒ…å« A, B, C, D, E, F, G, H, Iã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="é‡æ’åºå±¤äº’å‹•æ¨¡å‹çš„å¼·å¤§èƒ½åŠ›"&gt;é‡æ’åºå±¤ï¼šäº’å‹•æ¨¡å‹çš„å¼·å¤§èƒ½åŠ›
&lt;/h3&gt;&lt;p&gt;é‡æ’åºå±¤çš„æ ¸å¿ƒç›®çš„æ˜¯ç²¾ç…‰åˆå§‹æª¢ç´¢çµæœçš„æ’åï¼Œä¸¦å¯¦ç¾ä¾†è‡ªä¸åŒæª¢ç´¢æ–¹æ³•çµæœçš„åˆä½µã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¨¡å‹é¡å‹&lt;/strong&gt;ï¼šRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G ä½¿ç”¨åŸºæ–¼ Nogueira å’Œ Cho åºåˆ—å°åˆ†é¡æ–¹æ³•çš„ã€Œäº’å‹•æ¨¡å‹ã€é€²è¡Œé‡æ’åºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;hr&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ©Ÿåˆ¶&lt;/strong&gt;ï¼š åœ¨äº’å‹•æ¨¡å‹ä¸­ï¼ŒæŸ¥è©¢å’Œæ®µè½æœƒä½œç‚ºä¸€å€‹æ•´é«”è¼¸å…¥åˆ° BERT è®Šæ›å™¨ä¸­ï¼Œæ¨¡å‹æœƒåœ¨å…©å€‹åºåˆ—çš„æ‰€æœ‰è©å…ƒä¸Šå…±åŒæ‡‰ç”¨äº¤å‰æ³¨æ„åŠ›æ©Ÿåˆ¶ï¼Œå¾è€Œæ•æ‰æŸ¥è©¢å’Œæ®µè½ä¹‹é–“æ›´æ·±å±¤æ¬¡çš„äº¤äº’é—œä¿‚ã€‚ Â &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å„ªå‹¢&lt;/strong&gt;ï¼šé€éä½¿ç”¨äº’å‹•æ¨¡å‹å°ä¾†è‡ªè¡¨ç¤ºæ¨¡å‹çš„ Top-N æ®µè½é€²è¡Œé‡æ’åºï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G èƒ½å¤ åŒæ™‚ç²å¾—å…©ç¨®æ¨¡å‹é¡å‹çš„å„ªå‹¢ï¼šäº’å‹•æ¨¡å‹å¸¶ä¾†çš„æ›´é«˜æº–ç¢ºæ€§ï¼ˆå› å…¶èƒ½é€²è¡Œæ›´ç´°ç·»çš„äº¤å‰æ³¨æ„åŠ›è¨ˆç®—ï¼‰ï¼Œä»¥åŠè¡¨ç¤ºæ¨¡å‹å¸¶ä¾†çš„å¯æ“´å±•æ€§ï¼ˆå› å…¶å…è¨±é«˜æ•ˆçš„åˆå§‹æª¢ç´¢ï¼‰ã€‚é€™ç¨®è¨­è¨ˆæ¨¡å¼åœ¨è¨±å¤šå¤§è¦æ¨¡è³‡è¨Šæª¢ç´¢ç³»çµ±ä¸­éå¸¸æœ‰æ•ˆï¼Œå¹³è¡¡äº†å°å¤§å‹èªæ–™åº«çš„å¿«é€Ÿåˆå§‹æª¢ç´¢èˆ‡å°è¼ƒå°å€™é¸é›†çš„ç²¾ç´°æ’åã€‚ Â &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–èˆ‡æ¨æ–·&lt;/strong&gt;ï¼š é‡æ’åºå™¨å¾ NBoost åœ¨ MS MARCO æ•¸æ“šé›†ä¸Šè¨“ç·´çš„ BERT æ¨¡å‹åˆå§‹åŒ–ã€‚åœ¨æ¨æ–·æ™‚ï¼Œå¾åˆå§‹æª¢ç´¢å±¤åˆä½µå¾Œçš„æ®µè½é›†æœƒå‚³éçµ¦é‡æ’åºå™¨é€²è¡Œè©•åˆ†ï¼Œä¸¦é¸å‡º Top-5 çš„æ®µè½ä¾›ç”Ÿæˆå™¨ä½¿ç”¨ã€‚ Â &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç”Ÿæˆå±¤åŸºæ–¼bartçš„åºåˆ—ç”Ÿæˆ"&gt;ç”Ÿæˆå±¤ï¼šåŸºæ–¼BARTçš„åºåˆ—ç”Ÿæˆ
&lt;/h3&gt;&lt;p&gt;ç”Ÿæˆå±¤è² è²¬æ ¹æ“šé‡æ’åºå¾Œçš„æ®µè½å’ŒæŸ¥è©¢ç”Ÿæˆæœ€çµ‚çš„ç›®æ¨™è¼¸å‡ºåºåˆ—ã€‚ Â &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŸºç¤æ¨¡å‹&lt;/strong&gt;ï¼šRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G ä½¿ç”¨åŸºæ–¼ BART çš„åºåˆ—åˆ°åºåˆ—ç”Ÿæˆæ¨¡å‹ï¼Œå…·é«”æ˜¯ $BART_{LARGE}$ã€‚BART çµåˆäº†é›™å‘ç·¨ç¢¼å™¨ï¼ˆå¦‚ BERTï¼‰å’Œè‡ªå›æ­¸è§£ç¢¼å™¨ï¼ˆå¦‚ GPTï¼‰çš„å„ªå‹¢ï¼Œä½¿å…¶éå¸¸é©åˆåºåˆ—åˆ°åºåˆ—ä»»å‹™ï¼Œä¸¦èƒ½æœ‰æ•ˆåœ°æ•´åˆæª¢ç´¢åˆ°çš„è³‡è¨Šã€‚é€™ç¨®é¸æ“‡åˆ©ç”¨äº†ç¾æœ‰çš„ç©©å¥ç”Ÿæˆæ¨¡å‹ï¼Œä¸¦é€éå¤–éƒ¨çŸ¥è­˜å¢å¼·äº†å®ƒå€‘çš„èƒ½åŠ›ã€‚ Â &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿæˆå™¨è¼¸å…¥èˆ‡è¼¸å‡º&lt;/strong&gt;ï¼šä¾†è‡ªé‡æ’åºå™¨çš„ Top-5 æ®µè½æœƒèˆ‡åŸå§‹æŸ¥è©¢çµåˆï¼Œä½œç‚º $BART_{LARGE}$ çš„è¼¸å…¥ä»¥ç”Ÿæˆè¼¸å‡ºã€‚BART ç”Ÿæˆçš„äº”å€‹è¼¸å‡ºåºåˆ—éš¨å¾Œæœƒæ ¹æ“šé‡æ’åºå™¨åˆ†æ•¸çš„ softmax é€²è¡ŒåŠ æ¬Šï¼Œä»¥ç”¢ç”Ÿæœ€çµ‚çš„è¼¸å‡ºã€‚é€™å€‹éç¨‹åœ¨ RAG ä¸­ç¨±ç‚ºé‚Šç·£åŒ– (marginalization)ï¼Œå®ƒç¢ºä¿äº†æª¢ç´¢åˆ°çš„ç›¸é—œæ€§ä¿¡æ¯èƒ½å¤ æœ‰æ•ˆæŒ‡å°æœ€çµ‚çš„ç”Ÿæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="å››éšæ®µè¨“ç·´æ–¹æ³•èˆ‡ç·šä¸ŠçŸ¥è­˜è’¸é¤¾"&gt;å››éšæ®µè¨“ç·´æ–¹æ³•èˆ‡ç·šä¸ŠçŸ¥è­˜è’¸é¤¾
&lt;/h2&gt;&lt;h3 id="ç¬¬ä¸€éšæ®µdpr-è¨“ç·´"&gt;ç¬¬ä¸€éšæ®µï¼šDPR è¨“ç·´
&lt;/h3&gt;&lt;p&gt;è¨“ç·´æ•¸æ“šç”±æŸ¥è©¢ã€æ­£å‘æ®µè½ï¼ˆä¾†è‡ªçœŸå¯¦æ¨™ç±¤çš„ä¾†æºè³‡è¨Šï¼‰ä»¥åŠã€Œç¡¬è² å‘ã€æ®µè½ï¼ˆå¾ BM25 æª¢ç´¢ä½†éçœŸå¯¦æ¨™ç±¤çš„æ®µè½ï¼‰çš„ä¸‰å…ƒçµ„çµ„æˆï¼Œé€™äº›å¯¦ä¾‹æœƒè¢«æ‰¹æ¬¡è™•ç†ï¼Œä¸¦ä¸”æ‰¹æ¬¡ä¸­å…¶ä»–å¯¦ä¾‹çš„æ­£å‘å’Œç¡¬è² å‘æ®µè½æœƒè¢«ç”¨ä½œç•¶å‰å¯¦ä¾‹çš„ã€Œæ‰¹æ¬¡è² å‘ã€ï¼ŒDPR é›™ç·¨ç¢¼å™¨æ¨¡å‹éš¨å¾Œæœƒç‚ºæ¯å€‹æŸ¥è©¢æä¾›å…¶å°æ­£å‘ã€ç¡¬è² å‘å’Œæ‰¹æ¬¡è² å‘æ®µè½çš„æ¦‚ç‡åˆ†ä½ˆã€‚æ­¤éšæ®µçš„æå¤±å‡½æ•¸æ˜¯æ­£å‘æ®µè½çš„è² å°æ•¸ä¼¼ç„¶ï¼Œå®Œæˆæ­¤éšæ®µè¨“ç·´å¾Œï¼Œèªæ–™åº«ä¸­çš„æ‰€æœ‰æ®µè½éƒ½æœƒä½¿ç”¨åˆ†å±¤å¯å°èˆªå°ä¸–ç•Œåœ– (HNSW) çµåˆ FAISS åº«é€²è¡Œç´¢å¼•ï¼Œä»¥ä¾¿å¾ŒçºŒé«˜æ•ˆæª¢ç´¢ã€‚&lt;/p&gt;
&lt;h3 id="ç¬¬äºŒéšæ®µç”Ÿæˆè¨“ç·´"&gt;ç¬¬äºŒéšæ®µï¼šç”Ÿæˆè¨“ç·´
&lt;/h3&gt;&lt;p&gt;æ­¤éšæ®µçš„è¨“ç·´ç›®æ¨™æ˜¯æ“´å±•æŸ¥è©¢ç·¨ç¢¼å™¨çš„è¨“ç·´ï¼Œä¸¦è¨“ç·´ BART&lt;!-- raw HTML omitted --&gt;LARGE&lt;!-- raw HTML omitted --&gt; åºåˆ—åˆ°åºåˆ—æ¨¡å‹ä»¥ç”Ÿæˆæœ€çµ‚çš„ç›®æ¨™åºåˆ—è¼¸å‡ºã€‚é€™å€‹è¨“ç·´éç¨‹èˆ‡ Lewis ç­‰äººæè¿°çš„ RAG æ¨¡å‹ç”Ÿæˆè¨“ç·´æ–¹æ³•ä¸€è‡´ã€‚&lt;/p&gt;
&lt;h3 id="ç¬¬ä¸‰éšæ®µé‡æ’åºè¨“ç·´"&gt;ç¬¬ä¸‰éšæ®µï¼šé‡æ’åºè¨“ç·´
&lt;/h3&gt;&lt;p&gt;é‡æ’åºå™¨çš„ç¨ç«‹è¨“ç·´å§‹æ–¼æ”¶é›†è¨“ç·´é›†ä¸Šä¾†è‡ª DPR å’Œ BM25 çš„åˆå§‹æª¢ç´¢çµæœï¼Œé€™äº›çµæœéš¨å¾Œæœƒè¢«åˆä½µï¼Œä¸¦ä½œç‚ºé‡æ’åºå™¨çš„è¨“ç·´æ•¸æ“šã€‚ç”±æ–¼æŸäº›æ•¸æ“šé›†å¯èƒ½å­˜åœ¨å¤šå€‹æ­£å‘æ®µè½ï¼Œå› æ­¤æ­¤éšæ®µæ¡ç”¨çš„æå¤±å‡½æ•¸æ˜¯é€™äº›æ­£å‘æ®µè½è² å°æ•¸ä¼¼ç„¶ä¹‹å’Œã€‚&lt;/p&gt;
&lt;h3 id="ç¬¬å››éšæ®µç«¯åˆ°ç«¯è¨“ç·´"&gt;ç¬¬å››éšæ®µï¼šç«¯åˆ°ç«¯è¨“ç·´
&lt;/h3&gt;&lt;p&gt;ç«¯åˆ°ç«¯è¨“ç·´å¸¶ä¾†äº†ä¸€å€‹ç‰¹æ®ŠæŒ‘æˆ°ï¼šåœ¨ Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G ä¸­ï¼Œé‡æ’åºå™¨çš„åˆ†æ•¸è€Œéåˆå§‹æª¢ç´¢åˆ†æ•¸ç”¨æ–¼åŠ æ¬Šæ¯å€‹åºåˆ—åœ¨ç”Ÿæˆä¸­çš„å½±éŸ¿ã€‚é€™æ„å‘³è‘—é‡æ’åºå™¨å¯ä»¥ç›´æ¥é€éç›®æ¨™è¼¸å‡ºçš„çœŸå¯¦æ¨™ç±¤é€²è¡Œè¨“ç·´ï¼Œä½†æŸ¥è©¢ç·¨ç¢¼å™¨çš„æ¢¯åº¦å°‡ç‚ºé›¶ï¼Œå› ç‚ºé‚Šç·£åŒ–éç¨‹ä¸å†ç›´æ¥ä¾è³´æ–¼æŸ¥è©¢å’Œæ®µè½è¡¨ç¤ºå‘é‡çš„å…§ç©ã€‚ Â &lt;/p&gt;
&lt;p&gt;ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼ŒRe&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G å¼•å…¥äº†ä¸€ç¨®æ–°ç©çš„ç·šä¸ŠçŸ¥è­˜è’¸é¤¾æ‡‰ç”¨ã€‚åœ¨é€™ç¨®æ–¹æ³•ä¸­ï¼Œé‡æ’åºå™¨ä½œç‚ºã€Œæ•™å¸«æ¨¡å‹ã€ï¼Œç‚º DPRã€Œå­¸ç”Ÿæ¨¡å‹ã€æä¾›è»Ÿæ¨™ç±¤ã€‚é€™ç¨®çŸ¥è­˜è’¸é¤¾æ˜¯ã€Œç·šä¸Šã€ç™¼ç”Ÿçš„ï¼Œå³åœ¨é‡æ’åºå™¨è¨“ç·´çš„åŒæ™‚é€²è¡Œï¼Œå¯¦ç¾äº†çŸ¥è­˜å¾ä¸€ç¨®æ¶æ§‹ï¼ˆäº’å‹•æ¨¡å‹ï¼‰åˆ°å¦ä¸€ç¨®æ¶æ§‹ï¼ˆè¡¨ç¤ºæ¨¡å‹ï¼‰çš„è½‰ç§»ã€‚åˆå§‹æª¢ç´¢ï¼ˆDPRï¼‰çš„æå¤±å‡½æ•¸æ˜¯å…¶åœ¨æª¢ç´¢åˆ°çš„æ®µè½ä¸Šçµ¦å‡ºçš„æ¦‚ç‡åˆ†ä½ˆèˆ‡é‡æ’åºå™¨åœ¨ç›¸åŒæ®µè½ä¸Šçµ¦å‡ºçš„æ¦‚ç‡åˆ†ä½ˆä¹‹é–“çš„ KL æ•£åº¦ã€‚ç‚ºäº†å¹³æ»‘é€™äº›åˆ†ä½ˆã€é˜²æ­¢éåº¦æå¤±ä¸¦ç©©å®šè¨“ç·´ï¼Œæ¨¡å‹ä½¿ç”¨äº†æº«åº¦è¶…åƒæ•¸ (T)ã€‚é€™ç¨®æ–¹æ³•ä¸åƒ…æä¾›äº†æ­£å‘å’Œè² å‘å¯¦ä¾‹çš„ä¿¡è™Ÿï¼Œé‚„æä¾›äº†ã€Œè² å‘ç¨‹åº¦ã€çš„ä¿¡è™Ÿï¼Œä¸¦ä¸”èƒ½å¤ åˆ©ç”¨æ›´å¤šæ®µè½é€²è¡Œè¨“ç·´ï¼ˆDPR æª¢ç´¢ 12 å€‹æ®µè½ï¼Œè€Œç”Ÿæˆåªä½¿ç”¨ Top-5ï¼‰ï¼Œå¾è€Œæä¾›äº†æ¯”äºŒå…ƒæ¨™ç±¤æ›´è±å¯Œçš„è¨“ç·´ä¿¡è™Ÿã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å¯¦é©—çµæœèˆ‡æ€§èƒ½åˆ†æ"&gt;å¯¦é©—çµæœèˆ‡æ€§èƒ½åˆ†æ
&lt;/h2&gt;&lt;p&gt;æ­¤éƒ¨åˆ†å°šæœªæ’°å¯«ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="çµè«–"&gt;çµè«–
&lt;/h2&gt;&lt;p&gt;Re&lt;!-- raw HTML omitted --&gt;2&lt;!-- raw HTML omitted --&gt;G åœ¨æ§½å¡«å……ã€å•ç­”ã€äº‹å¯¦æ ¸æŸ¥å’Œå°è©±ç­‰ä»»å‹™ä¸­ï¼Œç„¡è«–æ˜¯æª¢ç´¢é‚„æ˜¯ç«¯åˆ°ç«¯æ€§èƒ½éƒ½å¾—åˆ°äº†å¯¦è³ªæ€§æå‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç ”ç©¶çš„é—œéµæˆæœåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡æ’åºå™¨çš„æœ‰æ•ˆæ€§ã€‚ Â &lt;/li&gt;
&lt;li&gt;ç·šä¸ŠçŸ¥è­˜è’¸é¤¾çš„æˆåŠŸã€‚ Â &lt;/li&gt;
&lt;li&gt;å¤šæºæª¢ç´¢çš„ç›Šè™•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="reference"&gt;Reference
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://ar5iv.labs.arxiv.org/html/2207.06300" target="_blank" rel="noopener"
&gt;Re2G: Retrieve, Rerank, Generate-ar5iv å¯è¦–åŒ–ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Orange3</title><link>https://Dandelionlibra.github.io/post/data-analysis-tools/orange/data-mining/</link><pubDate>Mon, 21 Jul 2025 09:16:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/data-analysis-tools/orange/data-mining/</guid><description>&lt;h2 id="ä»€éº¼æ˜¯-orange3"&gt;ä»€éº¼æ˜¯ Orange3ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;Orange3 æ˜¯ä¸€æ¬¾é–‹æº (Open Source) çš„è³‡æ–™æ¢å‹˜èˆ‡æ©Ÿå™¨å­¸ç¿’å·¥å…·ã€‚å®ƒæœ€å¤§çš„ç‰¹è‰²æ˜¯&lt;strong&gt;è¦–è¦ºåŒ–çš„æµç¨‹ä»‹é¢&lt;/strong&gt; (Visual Programming)ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è€…ä¸éœ€è¦æ’°å¯«ç¨‹å¼ç¢¼ï¼Œåªéœ€è¦é€éæ‹–æ‹‰ã€é€£æ¥ä¸åŒçš„ &lt;strong&gt;ã€Œå…ƒä»¶ã€ (Widgets)&lt;/strong&gt;ï¼Œå°±å¯ä»¥å»ºæ§‹å‡ºå®Œæ•´çš„è³‡æ–™åˆ†æã€è³‡æ–™å‰è™•ç†ã€æ¨¡å‹è¨“ç·´èˆ‡è©•ä¼°çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;h2 id="æ ¸å¿ƒå„ªå‹¢"&gt;æ ¸å¿ƒå„ªå‹¢
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¦–è¦ºåŒ–å·¥ä½œæµï¼š&lt;/strong&gt; æ•´å€‹åˆ†ææµç¨‹ä¸€ç›®äº†ç„¶ï¼Œéå¸¸é©åˆç”¨ä¾†æ•™å­¸å’Œå±•ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç„¡éœ€ç¨‹å¼ç¢¼ï¼š&lt;/strong&gt; å¤§å¹…é™ä½äº†æ©Ÿå™¨å­¸ç¿’çš„å…¥é–€é–€æª»ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº’å‹•å¼æ¢ç´¢ï¼š&lt;/strong&gt; ä»»ä½•å…ƒä»¶çš„åƒæ•¸ä¸€ç¶“èª¿æ•´ï¼ˆä¾‹å¦‚ä½ èª¿æ•´ &lt;code&gt;Random Forest&lt;/code&gt; çš„æ¨¹æœ¨æ•¸é‡ï¼‰ï¼Œä¸‹æ¸¸æ‰€æœ‰å…ƒä»¶çš„çµæœï¼ˆå¦‚ &lt;code&gt;Test &amp;amp; Score&lt;/code&gt;ï¼‰éƒ½æœƒ&lt;strong&gt;å³æ™‚æ›´æ–°&lt;/strong&gt;ï¼Œä¾¿æ–¼å¿«é€Ÿå¯¦é©—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½å®Œæ•´ï¼š&lt;/strong&gt; æ¶µè“‹äº†è³‡æ–™æ¢å‹˜çš„å®Œæ•´æ­¥é©Ÿï¼Œå¾è³‡æ–™è®€å–åˆ°è¤‡é›œçš„æ¨¡å‹è©•ä¼°éƒ½åŒ…å«åœ¨å…§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æ ¸å¿ƒå…ƒä»¶-widgets-ä»‹ç´¹"&gt;æ ¸å¿ƒå…ƒä»¶ (Widgets) ä»‹ç´¹
&lt;/h2&gt;&lt;p&gt;Orange3 çš„æ‰€æœ‰åŠŸèƒ½éƒ½åŒ…è£åœ¨å·¦å´çš„ã€Œå…ƒä»¶åº«ã€ä¸­ã€‚ä»¥ä¸‹æ˜¯æˆ‘å€‘åœ¨æˆ¿åƒ¹é æ¸¬å°ˆæ¡ˆä¸­ä½¿ç”¨åˆ°çš„é—œéµå…ƒä»¶ï¼š&lt;/p&gt;
&lt;h3 id="1-data-è³‡æ–™"&gt;1. Data (è³‡æ–™)
&lt;/h3&gt;&lt;p&gt;é€™æ˜¯åˆ†æçš„èµ·é»ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;File (æª”æ¡ˆ):&lt;/strong&gt; ç”¨æ–¼è¼‰å…¥ä½ çš„è³‡æ–™é›†ã€‚æ”¯æ´ CSV, Excel, &lt;code&gt;.tab&lt;/code&gt; æª”æ¡ˆï¼Œä¹Ÿå…§å»ºäº†è¨±å¤šç¶“å…¸è³‡æ–™é›† (ä¾‹å¦‚ &lt;code&gt;boston.tab&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Select Columns (é¸æ“‡æ¬„ä½):&lt;/strong&gt; &lt;strong&gt;æ¥µåº¦é‡è¦&lt;/strong&gt;çš„æ­¥é©Ÿã€‚åœ¨é€™è£¡ï¼Œæˆ‘å€‘è¦å‘Šè¨´ Orange æˆ‘å€‘çš„ã€Œç›®æ¨™ (Target)ã€æ˜¯ä»€éº¼ (ä¾‹å¦‚ &lt;code&gt;MEDV&lt;/code&gt; æˆ¿åƒ¹)ï¼Œä»¥åŠå“ªäº›æ˜¯ã€Œç‰¹å¾µ (Features)ã€(ä¾‹å¦‚ &lt;code&gt;RM&lt;/code&gt;, &lt;code&gt;LSTAT&lt;/code&gt; ç­‰)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-transform-è½‰æ›--è³‡æ–™å‰è™•ç†"&gt;2. Transform (è½‰æ› / è³‡æ–™å‰è™•ç†)
&lt;/h3&gt;&lt;p&gt;åŸå§‹è³‡æ–™é€šå¸¸ä¸èƒ½ç›´æ¥æ‹¿ä¾†å»ºæ¨¡ï¼Œéœ€è¦å…ˆã€Œæ¸…æ´—ã€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Impute (æ’è£œç¼ºå¤±å€¼):&lt;/strong&gt; è™•ç†è³‡æ–™ä¸­çš„ç©ºç™½æ ¼ã€‚é›–ç„¶æ³¢å£«é “è³‡æ–™é›†å¾ˆä¹¾æ·¨ï¼Œä½†çœŸå¯¦ä¸–ç•Œçš„è³‡æ–™å¸¸ç”¨åˆ°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Preprocess (å‰è™•ç†):&lt;/strong&gt; ä¸€å€‹å¼·å¤§çš„æ‰“åŒ…å…ƒä»¶ï¼Œæˆ‘å€‘ç”¨å®ƒä¾†åš&lt;strong&gt;æ­£è¦åŒ– (Normalize Features)&lt;/strong&gt;ã€‚æ­£è¦åŒ– (ä¾‹å¦‚ Z-score) å¯ä»¥æ¶ˆé™¤ä¸åŒç‰¹å¾µé–“çš„å°ºåº¦å·®ç•° (ä¾‹å¦‚ &lt;code&gt;RM&lt;/code&gt; æˆ¿é–“æ•¸ 3&lt;del&gt;9 vs. &lt;code&gt;TAX&lt;/code&gt; ç¨…ç‡ 200&lt;/del&gt;700)ï¼Œè®“æ¨¡å‹è¨“ç·´æ›´ç©©å®šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-visualize-è¦–è¦ºåŒ–"&gt;3. Visualize (è¦–è¦ºåŒ–)
&lt;/h3&gt;&lt;p&gt;åˆ†æç‰¹å¾µèˆ‡ç›®æ¨™ä¹‹é–“çš„é—œä¿‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Box Plot (ç®±å‹åœ–):&lt;/strong&gt; éå¸¸é©åˆç”¨ä¾†æ¯”è¼ƒ**ã€Œé¡åˆ¥è®Šæ•¸ã€&lt;strong&gt;èˆ‡&lt;/strong&gt;ã€Œæ•¸å€¼è®Šæ•¸ã€**çš„é—œä¿‚ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;ç¯„ä¾‹ï¼š&lt;/em&gt; æˆ‘å€‘ç”¨ &lt;code&gt;CHAS&lt;/code&gt; (æ˜¯å¦è‡¨æ²³) ä½œç‚ºåˆ†çµ„ (Subgroups)ï¼Œè§€å¯Ÿ &lt;code&gt;MEDV&lt;/code&gt; (æˆ¿åƒ¹) çš„åˆ†ä½ˆï¼Œæ¸…æ¥šåœ°çœ‹åˆ°è‡¨æ²³çš„æˆ¿åƒ¹ä¸­ä½æ•¸æ›´é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scatter Plot (æ•£é»åœ–):&lt;/strong&gt; ç”¨ä¾†è§€å¯Ÿ**ã€Œå…©å€‹æ•¸å€¼è®Šæ•¸ã€**ä¹‹é–“çš„é—œä¿‚ã€‚
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;ç¯„ä¾‹ï¼š&lt;/em&gt; æˆ‘å€‘è¨­å®š X è»¸ç‚º &lt;code&gt;RM&lt;/code&gt; (æˆ¿é–“æ•¸)ã€Y è»¸ç‚º &lt;code&gt;MEDV&lt;/code&gt; (æˆ¿åƒ¹)ï¼Œçœ‹åˆ°äº†æ˜é¡¯çš„ã€Œæ­£ç›¸é—œã€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;é€²éšï¼š&lt;/em&gt; é‚„å¯ä»¥åŠ å…¥&lt;strong&gt;é¡è‰² (Color)&lt;/strong&gt; (ä¾‹å¦‚ &lt;code&gt;LSTAT&lt;/code&gt;) æˆ–&lt;strong&gt;å½¢ç‹€ (Shape)&lt;/strong&gt; (ä¾‹å¦‚ &lt;code&gt;CHAS&lt;/code&gt;) ä¾†åŒæ™‚å‘ˆç¾ 3~4 å€‹ç¶­åº¦çš„è³‡è¨Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rank (æ’å):&lt;/strong&gt; ç”¨ä¾†å›ç­”ã€Œ&lt;strong&gt;å“ªäº›ç‰¹å¾µæœ€é‡è¦ï¼Ÿ&lt;/strong&gt;ã€ã€‚å®ƒæœƒè¨ˆç®—æ‰€æœ‰ç‰¹å¾µèˆ‡ç›®æ¨™è®Šæ•¸çš„ç›¸é—œæ€§åˆ†æ•¸ï¼Œæ˜¯å›ç­” Q2 çš„é—œéµã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="4-model-æ¨¡å‹"&gt;4. Model (æ¨¡å‹)
&lt;/h3&gt;&lt;p&gt;æˆ‘å€‘é¸æ“‡ç”¨ä¾†é æ¸¬çš„æ¼”ç®—æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Linear Regression (ç·šæ€§è¿´æ­¸):&lt;/strong&gt; è¿´æ­¸ä»»å‹™çš„åŸºæº–æ¨¡å‹ã€‚å®ƒæœƒæ‰¾å‡ºä¸€å€‹æœ€ä½³çš„ç·šæ€§å…¬å¼ (ä¾‹å¦‚ &lt;code&gt;æˆ¿åƒ¹ = a*RM - b*LSTAT + c&lt;/code&gt;)ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Random Forest (éš¨æ©Ÿæ£®æ—):&lt;/strong&gt; ä¸€ç¨®å¼·å¤§çš„æ•´åˆæ¨¡å‹ã€‚å®ƒæœƒå»ºç«‹æ•¸ç™¾æ£µæ±ºç­–æ¨¹ï¼Œä¸¦å°‡å®ƒå€‘çš„é æ¸¬çµæœå¹³å‡èµ·ä¾†ã€‚é€šå¸¸æº–ç¢ºç‡é«˜ï¼Œä¸”ä¸æ˜“ç™¼ç”Ÿéæ“¬åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;(å…¶ä»–å¸¸ç”¨æ¨¡å‹ï¼š&lt;code&gt;Tree&lt;/code&gt; (æ±ºç­–æ¨¹), &lt;code&gt;SVM&lt;/code&gt; (æ”¯æ´å‘é‡æ©Ÿ), &lt;code&gt;Gradient Boosting&lt;/code&gt; (æ¢¯åº¦æå‡))&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="5-evaluate-è©•ä¼°"&gt;5. Evaluate (è©•ä¼°)
&lt;/h3&gt;&lt;p&gt;ç”¨ä¾†è©•æ–·æ¨¡å‹ã€Œå¥½å£ã€çš„å…ƒä»¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Test &amp;amp; Score (æ¸¬è©¦èˆ‡è©•åˆ†):&lt;/strong&gt; &lt;strong&gt;è©•ä¼°çš„æ ¸å¿ƒ&lt;/strong&gt;ã€‚æˆ‘å€‘æŠŠè³‡æ–™ (&lt;code&gt;Preprocess&lt;/code&gt;) å’Œæ¨¡å‹ (&lt;code&gt;Linear Regression&lt;/code&gt;, &lt;code&gt;Random Forest&lt;/code&gt;) éƒ½é€£åˆ°é€™è£¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cross-validation (äº¤å‰é©—è­‰):&lt;/strong&gt; &lt;code&gt;Test &amp;amp; Score&lt;/code&gt; å…§æœ€é‡è¦çš„è¨­å®šã€‚å®ƒæœƒè‡ªå‹•å°‡è³‡æ–™åˆ†æˆ N ä»½ï¼ˆä¾‹å¦‚ 10 ä»½ï¼‰ï¼Œè¼ªæµå°‡ 9 ä»½ç•¶ä½œè¨“ç·´é›†ã€1 ä»½ç•¶ä½œæ¸¬è©¦é›†ï¼Œæœ€å¾Œç®—å‡ºå¹³å‡åˆ†æ•¸ã€‚é€™èƒ½æœ‰æ•ˆ&lt;strong&gt;é¿å…éæ“¬åˆ&lt;/strong&gt;ï¼Œå¾—åˆ°ä¸€å€‹å¯é çš„æ•ˆèƒ½æŒ‡æ¨™ã€‚&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>ä¸‰ç¨® RAG æ¶æ§‹æ¯”è¼ƒèˆ‡æ‡‰ç”¨è§£æ â€” Naiveã€Advancedã€Modular RAG å·®ç•°æ•´ç†</title><link>https://Dandelionlibra.github.io/post/note/rag-type-compare-note/</link><pubDate>Mon, 21 Jul 2025 09:16:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/note/rag-type-compare-note/</guid><description>&lt;h1 id="ä¸‰ç¨®-rag-æŠ€è¡“æ¶æ§‹æ¯”è¼ƒnaive-ragadvanced-rag-èˆ‡-modular-rag"&gt;ä¸‰ç¨® RAG æŠ€è¡“æ¶æ§‹æ¯”è¼ƒï¼šNaive RAGã€Advanced RAG èˆ‡ Modular RAG
&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ¯”è¼ƒã€ŠRetrieval-Augmented Generation for Large Language Models: A Surveyã€‹ä¸­æå‡ºçš„ä¸‰ç¨®æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRAGï¼‰æŠ€è¡“æ¶æ§‹ï¼šNaive RAGã€Advanced RAG å’Œ Modular RAGã€‚RAG æ—¨åœ¨çµåˆå¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„å…§éƒ¨çŸ¥è­˜èˆ‡å¤–éƒ¨è³‡æ–™æª¢ç´¢ï¼Œä»¥æå‡äº‹å¯¦æ­£ç¢ºæ€§èˆ‡æ™‚æ•ˆæ€§ã€‚é€™ä¸‰ç¨®æ¶æ§‹ä»£è¡¨äº† RAG æŠ€è¡“çš„æ¼”é€²è·¯å¾‘ï¼Œå„è‡ªå¼•å…¥ä¸åŒæ¨¡çµ„èˆ‡ç­–ç•¥ä¾†å…‹æœå…ˆå‰æ¶æ§‹çš„ä¾·é™ã€‚æœ¬æ–‡å°‡å¾æ¶æ§‹çµ„æˆã€å¯¦ä½œæ–¹å¼ã€æŠ€è¡“ç´°ç¯€ã€æ‡‰ç”¨å ´æ™¯èˆ‡å„ªåŠ£æ¯”è¼ƒç­‰é¢å‘ï¼Œæ·±å…¥å‰–æä¸‰é¡æ¶æ§‹çš„å·®ç•°èˆ‡é©ç”¨æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="æ¶æ§‹çµ„æˆèˆ‡æµç¨‹å·®ç•°"&gt;æ¶æ§‹çµ„æˆèˆ‡æµç¨‹å·®ç•°
&lt;/h2&gt;&lt;h3 id="naive-rag"&gt;Naive RAG
&lt;/h3&gt;&lt;p&gt;æœ€æ—©æœŸä¸”åŸºç¤çš„ RAG æ¶æ§‹ï¼Œåƒ…åŒ…å«ç´¢å¼•ï¼ˆIndexingï¼‰ã€æª¢ç´¢ï¼ˆRetrievalï¼‰èˆ‡ç”Ÿæˆï¼ˆGenerationï¼‰ä¸‰å€‹ä¸²é€£æ¨¡çµ„ã€‚æµç¨‹ç‚ºï¼šè³‡æ–™å‘é‡åŒ– â†’ æª¢ç´¢å‰ $K$ å€‹ç›¸é—œç‰‡æ®µ â†’ æŸ¥è©¢èˆ‡æª¢ç´¢çµæœä¸€ä½µé¤µçµ¦ LLM ç”¢ç”Ÿå›ç­”ã€‚æ­¤æ¶æ§‹æµç¨‹ç°¡å–®ã€æ¨¡çµ„å–®ä¸€ï¼Œç¼ºä¹æŸ¥è©¢å„ªåŒ–æˆ–åé¥‹æ©Ÿåˆ¶ï¼Œé©åˆå¿«é€ŸåŸå‹é–‹ç™¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/e0/d6/naive-rag.png"
loading="lazy"
alt="Naive RAG æ¶æ§‹åœ–"
&gt;&lt;/p&gt;
&lt;h3 id="advanced-rag"&gt;Advanced RAG
&lt;/h3&gt;&lt;p&gt;åœ¨ Naive åŸºç¤ä¸Šå¢åŠ å‰è™•ç†èˆ‡å¾Œè™•ç†æ¨¡çµ„ï¼Œå¦‚æŸ¥è©¢å„ªåŒ–ã€é‡æ’åºã€å…§å®¹éæ¿¾/å£“ç¸®ç­‰ã€‚æµç¨‹ä»ç‚ºç´¢å¼•â†’æª¢ç´¢â†’ç”Ÿæˆï¼Œä½†åœ¨æª¢ç´¢å‰å¾Œæ’å…¥å„ªåŒ–æ­¥é©Ÿï¼Œæå‡æª¢ç´¢å“è³ªèˆ‡ç”Ÿæˆç›¸é—œæ€§ã€‚çµ„ä»¶åŒ…å«æŸ¥è©¢æ”¹å¯«ã€æ··åˆæª¢ç´¢ã€é‡æ’åºç­‰ï¼Œèƒ½é‡å°æ€§å¼·åŒ–æª¢ç´¢èˆ‡ç”Ÿæˆéšæ®µã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/8f/cb/advances-rag.png"
loading="lazy"
alt="Advanced RAG æ¶æ§‹åœ–"
&gt;&lt;/p&gt;
&lt;h3 id="modular-rag"&gt;Modular RAG
&lt;/h3&gt;&lt;p&gt;æœ€æ–°éšæ®µï¼Œå¼·èª¿ç©æœ¨å¼æ¨¡çµ„åŒ–è¨­è¨ˆã€‚é™¤ç¹¼æ‰¿å‰è¿°æµç¨‹å¤–ï¼Œå…è¨±å¤šè¼ªæª¢ç´¢-ç”Ÿæˆã€å¹³è¡Œè³‡è¨Šèåˆã€è‡ªé©æ‡‰æµç¨‹ç­‰ã€‚å¯éˆæ´»å¢æ¸›å¦‚ç¶²è·¯æœå°‹ã€é•·ç¨‹è¨˜æ†¶ã€è·¯ç”±æ±ºç­–ç­‰æ¨¡çµ„ï¼Œæµç¨‹å¯é‡çµ„ã€è¿­ä»£æˆ–åˆ†æ”¯ï¼Œé©æ‡‰è¤‡é›œå¤šè®Šçš„ä»»å‹™éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://www.ibm.com/content/dam/connectedassets-adobe-cms/worldwide-content/creative-assets/s-migr/ul/g/a7/e6/modular-rag.component.crop-16by9-m.ts=1740501066286.png/content/adobe-cms/us/en/think/topics/rag-techniques/jcr:content/root/table_of_contents/body-article-8/image_1228195012"
loading="lazy"
alt="Modular RAG æ¶æ§‹åœ–"
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å¯¦ä½œæ–¹å¼èˆ‡ç³»çµ±ç‰¹æ€§"&gt;å¯¦ä½œæ–¹å¼èˆ‡ç³»çµ±ç‰¹æ€§
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šå¯¦ä½œæœ€ç›´æ¥ï¼Œåƒ…éœ€åµŒå…¥æ¨¡å‹ã€å‘é‡è³‡æ–™åº«èˆ‡ LLMã€‚æ¨¡çµ„ç·šæ€§ä¸²æ¥ï¼Œç„¡éœ€å¾®èª¿ï¼Œéƒ¨ç½²ç¶­è­·æˆæœ¬ä½ï¼Œé©åˆç°¡å–®æ‡‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šéœ€å¼•å…¥æŸ¥è©¢å„ªåŒ–ã€é‡æ’åºç­‰æ¨¡çµ„ï¼Œå¸¸ç”¨ LlamaIndexã€LangChain ç­‰æ¡†æ¶ã€‚ç³»çµ±è¤‡é›œåº¦æå‡ï¼Œéœ€èª¿æ ¡å¤šå€‹å­ç³»çµ±ï¼Œé©åˆä¸­ç­‰è¤‡é›œåº¦ä»»å‹™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šé«˜åº¦æ¨¡çµ„åŒ–ï¼Œå¸¸ç”¨æµæ°´ç·šç·¨æ’æ¡†æ¶ã€‚æ¯å€‹åŠŸèƒ½ç¨ç«‹å°è£ï¼Œç³»çµ±å¯ç‚ºæœ‰å‘åœ–çµæ§‹ï¼Œä¾¿æ–¼æ“´å……èˆ‡ç¶­è­·ï¼Œä½†é–‹ç™¼å”èª¿æˆæœ¬é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="æ ¸å¿ƒæŠ€è¡“ç´°ç¯€"&gt;æ ¸å¿ƒæŠ€è¡“ç´°ç¯€
&lt;/h2&gt;&lt;h3 id="è³‡æ–™é è™•ç†èˆ‡åµŒå…¥"&gt;è³‡æ–™é è™•ç†èˆ‡åµŒå…¥
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šæ–‡æœ¬æ¸…æ´—ã€åˆ‡åˆ†ã€åµŒå…¥ï¼Œå»ºç«‹å‘é‡ç´¢å¼•ï¼Œé‡é»åœ¨èªç¾©è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šç´°ç²’åº¦åˆ‡åˆ†ã€æ»‘å‹•è¦–çª—ã€metadata æ¨™è¨»ã€æ··åˆåµŒå…¥ï¼ˆå¯†é›†+ç¨€ç–ï¼‰ï¼Œæå‡æª¢ç´¢è¦†è“‹ç‡èˆ‡ç²¾ç¢ºæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šå‹•æ…‹è³‡æ–™è™•ç†ï¼Œå¯å³æ™‚æŠ“å–æ–°è³‡æ–™ã€å¤šæ¨¡æ…‹è³‡æ–™ã€è¨˜æ†¶æ¨¡çµ„è‡ªæˆ‘å¢å¼·ï¼ŒåµŒå…¥ç­–ç•¥å¤šå…ƒä¸”å¯æ¼”åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="æª¢ç´¢ç­–ç•¥èˆ‡æŸ¥è©¢å„ªåŒ–"&gt;æª¢ç´¢ç­–ç•¥èˆ‡æŸ¥è©¢å„ªåŒ–
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šå–®è¼ªèªç¾©ç›¸ä¼¼åº¦æª¢ç´¢ï¼Œç„¡æŸ¥è©¢å„ªåŒ–æˆ–å¤šè¼ªäº¤äº’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šæŸ¥è©¢é‡å¯«/æ“´å±•ã€å¤šæ¬¡/æ··åˆæª¢ç´¢ã€é‡æ’åºèˆ‡éæ¿¾ï¼Œæå‡æª¢ç´¢æº–ç¢ºç‡èˆ‡è¦†è“‹ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šè‡ªé©æ‡‰å¤šéšæ®µæª¢ç´¢ã€è·¯ç”±æ±ºç­–ã€å¹³è¡Œå¤šæŸ¥è©¢ã€éæ­¸å¼æª¢ç´¢ï¼Œæ ¹æ“šä»»å‹™å‹•æ…‹èª¿åº¦æª¢ç´¢ç­–ç•¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ä¸Šä¸‹æ–‡èåˆèˆ‡è³‡è¨Šå¢å¼·"&gt;ä¸Šä¸‹æ–‡èåˆèˆ‡è³‡è¨Šå¢å¼·
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šç›´æ¥æ‹¼æ¥æŸ¥è©¢èˆ‡æª¢ç´¢å…§å®¹ï¼Œç„¡é¡å¤–è™•ç†ï¼Œæ˜“å—é›œè¨Šå¹²æ“¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šé‡æ’åºã€å£“ç¸®ã€éæ¿¾ã€æ˜ç¢ºå¼•å°æ¨¡å‹å¼•ç”¨æª¢ç´¢å…§å®¹ï¼Œæå‡è¨Šæ¯å“è³ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šå¤šæ­¥èåˆã€ç¤ºç¯„-æœç´¢-é æ¸¬ã€å‹•æ…‹è¨˜æ†¶ã€äº‹å¾Œæ ¡é©—ï¼Œæ·±åº¦æ•´åˆå¤–éƒ¨çŸ¥è­˜èˆ‡æ¨¡å‹æ¨ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å›ç­”ç”Ÿæˆèˆ‡æ§åˆ¶"&gt;å›ç­”ç”Ÿæˆèˆ‡æ§åˆ¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šLLM ç›´æ¥ç”Ÿæˆï¼Œæ§åˆ¶åŠ›å¼±ï¼Œæ˜“å‡ºç¾å¹»è¦ºæˆ–æ‹¼è²¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šæç¤ºå·¥ç¨‹ã€å¾®èª¿ã€åé¥‹è¿´è·¯ã€ç”Ÿæˆå¾Œéæ¿¾ï¼Œå¼·åŒ–å¯é æ€§èˆ‡å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šç¤ºç¯„æ¨¡çµ„ã€è¿­ä»£ç”Ÿæˆã€å¾Œè™•ç†æ ¡é©—ã€ç”¨æˆ¶åé¥‹è¿´è·¯ï¼Œå¯¦ç¾åš´è¬¹çš„ç”Ÿæˆç®¡æ§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="é©ç”¨å ´æ™¯èˆ‡é™åˆ¶"&gt;é©ç”¨å ´æ™¯èˆ‡é™åˆ¶
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šé©åˆåŸå‹ã€FAQã€å…§éƒ¨çŸ¥è­˜åº«ç­‰ä½è¤‡é›œåº¦å ´æ™¯ï¼Œé–‹ç™¼å¿«ä½†ä¸é©åˆé«˜ç²¾åº¦æˆ–å¤šæ­¥æ¨ç†ä»»å‹™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šé©ç”¨æ–¼é†«ç™‚ã€æ³•å¾‹ã€æ•™è‚²ç­‰çŸ¥è­˜å¯†é›†å‹å•ç­”ï¼Œèƒ½è™•ç†è¼ƒå¤§è¦æ¨¡çŸ¥è­˜åº«ï¼Œä½†è³‡æºéœ€æ±‚èˆ‡ç¶­è­·æˆæœ¬è¼ƒé«˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šé©åˆå¤§å‹ä¼æ¥­ã€è·¨é ˜åŸŸç³»çµ±ã€éœ€å¤šéšæ®µæ¨ç†æˆ–å¤šæºè³‡è¨Šæ•´åˆçš„å ´æ™¯ï¼Œæ“´å±•æ€§èˆ‡ç¶­è­·æ€§æœ€ä½³ï¼Œä½†é–‹ç™¼è¤‡é›œåº¦èˆ‡åˆå§‹æˆæœ¬é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="å„ªåŠ£æ¯”è¼ƒ"&gt;å„ªåŠ£æ¯”è¼ƒ
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¶æ§‹&lt;/th&gt;
&lt;th&gt;å¯¦ç”¨æ€§&lt;/th&gt;
&lt;th&gt;å¯æ“´å±•æ€§&lt;/th&gt;
&lt;th&gt;ç¶­è­·æˆæœ¬&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Naive RAG&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆæ˜“ç”¨ï¼‰&lt;/td&gt;
&lt;td&gt;ä½ï½ä¸­&lt;/td&gt;
&lt;td&gt;ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Advanced RAG&lt;/td&gt;
&lt;td&gt;ä¸­ï¼ˆéœ€å°ˆæ¥­ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸­ï½é«˜&lt;/td&gt;
&lt;td&gt;ä¸­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Modular RAG&lt;/td&gt;
&lt;td&gt;ä½ï¼ˆè¤‡é›œï¼‰&lt;/td&gt;
&lt;td&gt;æ¥µé«˜&lt;/td&gt;
&lt;td&gt;é«˜ï¼ˆåˆå§‹ï¼‰ï¼Œä½ï¼ˆå±€éƒ¨ç¶­è­·ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Naive RAG&lt;/strong&gt;ï¼šç°¡å–®æ˜“ç”¨ã€æˆæœ¬ä½ï¼Œä½†é‡åˆ°è¤‡é›œä»»å‹™æ˜“é”å¤©èŠ±æ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced RAG&lt;/strong&gt;ï¼šæ€§èƒ½èˆ‡è¤‡é›œåº¦å¹³è¡¡ï¼Œé©åˆå¤šæ•¸å°ˆæ¥­æ‡‰ç”¨ï¼Œç¶­è­·éœ€å°ˆæ¥­æŠ•å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Modular RAG&lt;/strong&gt;ï¼šå½ˆæ€§èˆ‡æ“´å±•æ€§æœ€å¼·ï¼Œé©åˆé«˜ç«¯éœ€æ±‚ï¼Œä½†é–‹ç™¼èˆ‡å”èª¿æˆæœ¬é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="çµè«–"&gt;çµè«–
&lt;/h2&gt;&lt;p&gt;ä¸‰ç¨® RAG æ¶æ§‹å„æœ‰é©ç”¨å ´æ™¯èˆ‡å„ªåŠ£ã€‚Naive RAG é©åˆå¿«é€ŸåŸå‹èˆ‡ç°¡å–®æ‡‰ç”¨ï¼ŒAdvanced RAG é©åˆå°ˆæ¥­é ˜åŸŸèˆ‡ä¸­å¤§å‹çŸ¥è­˜åº«ï¼ŒModular RAG å‰‡ç‚ºé«˜è¤‡é›œåº¦ã€éœ€é•·æœŸæ¼”åŒ–çš„ç³»çµ±æä¾›æœ€ä½³è§£æ±ºæ–¹æ¡ˆã€‚é¸æ“‡ä½•ç¨®æ¶æ§‹ï¼Œæ‡‰æ ¹æ“šå¯¦éš›éœ€æ±‚ã€è³‡æºèˆ‡é•·æœŸç¶­è­·è€ƒé‡æ¬Šè¡¡å–æ¨ã€‚&lt;/p&gt;
&lt;h2 id="reference"&gt;Reference
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://arxiv.org/abs/2312.10997" target="_blank" rel="noopener"
&gt;Retrieval-Augmented Generation for Large Language Models: A Survey&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.thecloudgirl.dev/blog/three-paradigms-of-retrieval-augmented-generation-rag-for-llms#:~:text=,on%20embeddings%20from%20language%20models" target="_blank" rel="noopener"
&gt;Three Paradigms of Retrieval-Augmented Generation (RAG) for LLMs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.ibm.com/think/topics/rag-techniques#:~:" target="_blank" rel="noopener"
&gt;RAG Techniques | IBM Think&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>æª¢ç´¢å¢å¼·å¤§å‹èªè¨€æ¨¡å‹ç¶œè¿° â€” RA-LLMs ç³»çµ±æ€§å›é¡§èˆ‡æ‡‰ç”¨è§£æ</title><link>https://Dandelionlibra.github.io/post/paper/rag-llms-survey-note/</link><pubDate>Sun, 20 Jul 2025 08:50:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/paper/rag-llms-survey-note/</guid><description>&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†è‡ªï¼š&lt;a class="link" href="https://arxiv.org/abs/2405.06211" target="_blank" rel="noopener"
&gt;A Survey on RAG Meeting LLMs: Towards Retrieval-Augmented Large Language Models&lt;/a&gt;&lt;br&gt;
ä½œè€…ï¼šWenqi Fan, Yujuan Ding, Liangbo Ning, Shijie Wang, Hengyun Li, Dawei Yin, Tat-Seng Chua, Qing Li&lt;br&gt;
ç™¼ä½ˆæ–¼ arXivï¼Œ2024å¹´5æœˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id="æ‘˜è¦"&gt;æ‘˜è¦
&lt;/h1&gt;&lt;p&gt;å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰é›–å±•ç¾å¼·å¤§ç”Ÿæˆèƒ½åŠ›ï¼Œä½†å—é™æ–¼å…§éƒ¨çŸ¥è­˜èˆ‡å¹»è¦ºå•é¡Œã€‚æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRetrieval-Augmented Generation;RAGï¼‰é€éå³æ™‚æª¢ç´¢å¤–éƒ¨è³‡è¨Šï¼Œæå‡å›æ‡‰çš„å¯é æ€§èˆ‡æ™‚æ•ˆæ€§ã€‚æœ¬æ–‡æ•´ç† RA-LLMs çš„æ¶æ§‹ã€è¨“ç·´ç­–ç•¥èˆ‡æ‡‰ç”¨ï¼Œä¸¦æ¢è¨å…¶é¢è‡¨çš„æŒ‘æˆ°èˆ‡æœªä¾†ç™¼å±•ï¼Œå±•ç¾æª¢ç´¢å°æå‡ LLM å¯¦ç”¨æ€§çš„é—œéµåƒ¹å€¼ã€‚&lt;/p&gt;
&lt;h1 id="å‰è¨€"&gt;å‰è¨€
&lt;/h1&gt;&lt;p&gt;æª¢ç´¢å¢å¼·ç”Ÿæˆï¼ˆRAGï¼‰æŠ€è¡“é€éçµåˆè³‡è¨Šæª¢ç´¢èˆ‡å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMsï¼‰ï¼Œè£œè¶³æ¨¡å‹çŸ¥è­˜ä¸è¶³èˆ‡å¹»è¦ºå•é¡Œï¼Œè¿‘å¹´å—åˆ°å»£æ³›é—œæ³¨ã€‚LLMs é›–å…·å¼·å¤§ç”Ÿæˆèƒ½åŠ›ï¼Œå»å¸¸å—é™æ–¼çŸ¥è­˜æ™‚æ•ˆèˆ‡å°ˆé ˜åŸŸæ‡‰ç”¨ï¼Œè€Œ RA-LLMs å‰‡é€éæª¢ç´¢å¤–éƒ¨è³‡æ–™æå‡ç”Ÿæˆå“è³ªã€‚&lt;/p&gt;
&lt;h1 id="èƒŒæ™¯"&gt;èƒŒæ™¯
&lt;/h1&gt;&lt;h2 id="å¤§å‹èªè¨€æ¨¡å‹"&gt;å¤§å‹èªè¨€æ¨¡å‹
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ‡‰ç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ç‰¹å®šè³‡æ–™é›†ä¸Šé€²è¡Œå¾®èª¿ï¼ŒLLM å¯ä»¥é©æ‡‰å„ç¨®ä¸‹æ¸¸ä»»å‹™ï¼Œä½¿å…¶èƒ½å¤ å°ˆæ³¨æ–¼ç‰¹å®šé ˜åŸŸæˆ–æ‡‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¶æ§‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Encoder-only æ¨¡å‹ï¼Œé›™å‘ç·¨ç¢¼ï¼Œå¯åŒæ™‚è€ƒæ…®å–®è©å·¦å³èªå¢ƒã€‚&lt;br&gt;
ex. BERT&lt;/li&gt;
&lt;li&gt;Decoder-only æ¨¡å‹ï¼Œå–®å‘ç”Ÿæˆï¼ˆå·¦è‡³å³ï¼‰ï¼Œæ ¹æ“šå‰æ–‡é æ¸¬ä¸‹å€‹å­—å…ƒã€‚&lt;br&gt;
ex. GPT&lt;/li&gt;
&lt;li&gt;Encoder-Decoder æ¨¡å‹ï¼Œå°‡è¼¸å…¥ç·¨ç¢¼å¾Œï¼Œå†ç”±è§£ç¢¼å™¨ç”Ÿæˆå°æ‡‰è¼¸å‡ºã€‚&lt;br&gt;
ex. T5&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="æç¤ºå­¸ç¿’"&gt;æç¤ºå­¸ç¿’
&lt;/h2&gt;&lt;h3 id="æç¤ºå·¥ç¨‹prompt-engineering"&gt;æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰
&lt;/h3&gt;&lt;p&gt;å› ç‚º LLM çš„åƒæ•¸é‡é€šå¸¸éå¸¸é¾å¤§ï¼Œå› æ­¤æç¤ºå­¸ç¿’çš„ç™¼å±•å¯ä½¿ LLM ä¸éœ€ç‚ºäº†ç‰¹å®šä»»å‹™é€²è¡Œå¤§é‡å¾®èª¿ï¼Œå°±å¯ä»¥å¯¦ç¾å„é …ä»»å‹™ã€‚&lt;br&gt;
ç¼ºé»ï¼šç•¶ç¼ºä¹å°ˆæ¥­é ˜åŸŸçŸ¥è­˜æ™‚ï¼Œç”Ÿæˆçµæœå¯èƒ½ä¸å¤ ç²¾ç¢ºã€‚&lt;/p&gt;
&lt;h3 id="ä¸Šä¸‹æ–‡å­¸ç¿’in-context-learning-icl"&gt;ä¸Šä¸‹æ–‡å­¸ç¿’ï¼ˆIn-Context Learning, ICLï¼‰
&lt;/h3&gt;&lt;p&gt;ç‚ºæç¤ºå­¸ç¿’çš„ä¸€ç¨®å½¢å¼ï¼Œé€éåœ¨æç¤ºä¸­æä¾›ç¯„ä¾‹ç¤ºç¯„ï¼Œè®“ LLM è§€å¯Ÿä¸¦å­¸ç¿’ä»»å‹™æ¨¡å¼ã€‚&lt;br&gt;
ç¼ºé»ï¼šæˆæ•ˆé«˜åº¦ä¾è³´ç¯„ä¾‹å“è³ªã€ç•¶ç¼ºä¹å¿…è¦çŸ¥è­˜æˆ–è³‡è¨Šæ™‚ï¼Œå¯èƒ½å°è‡´ç”Ÿæˆçµæœä¸ç†æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;ç‚ºå…‹æœé€™äº›å•é¡Œï¼Œç™¼å±•å‡º RAGï¼ˆæª¢ç´¢å¢å¼·ç”Ÿæˆï¼‰æŠ€è¡“ï¼ŒRAG çµåˆæª¢ç´¢èˆ‡ç”Ÿæˆï¼Œæå‡ LLM åœ¨å¤šä»»å‹™ä¸­çš„è¡¨ç¾èˆ‡é©æ‡‰æ€§ã€‚&lt;/p&gt;
&lt;h1 id="å…§æ–‡"&gt;å…§æ–‡
&lt;/h1&gt;&lt;p&gt;LLMs æ™‚ä»£çš„ RAG æ¶æ§‹å¤§è‡´åŒ…å«æª¢ç´¢ã€ç”¢ç”Ÿå’Œå¢å¼·ä¸‰å€‹ä¸»è¦æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x2.png"
loading="lazy"
alt="RAG ç³»çµ±ç¸½è¦½"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 1ï¼šRAG ç³»çµ±ç¸½è¦½ï¼Œæ¶µè“‹æª¢ç´¢ã€ç”Ÿæˆèˆ‡å¢å¼·ä¸‰å¤§æµç¨‹ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x3.png"
loading="lazy"
alt="RAG ç³»çµ±ç´°ç¯€æµç¨‹"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 2ï¼šRAG åœ¨ RA-LLM ä¸­çš„æµç¨‹åœ–ï¼Œå±•ç¤ºå„æ¨¡çµ„é–“çš„äº’å‹•ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="retrieval"&gt;Retrieval
&lt;/h2&gt;&lt;p&gt;RAG æ—¨åœ¨å¾å¤–éƒ¨çŸ¥è­˜æºæä¾›é—œéµè¨Šæ¯çµ¦ LLMã€‚&lt;/p&gt;
&lt;h3 id="retriever-type"&gt;Retriever Type
&lt;/h3&gt;&lt;p&gt;ä¾ç…§è³‡è¨Šç·¨ç¢¼å€åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨€ç–æª¢ç´¢ï¼ˆSparse Retrievalï¼‰ï¼šç›´æ¥åŒ¹é…è©å½™ä¸¦ä¾é »ç‡æ’åã€‚&lt;/li&gt;
&lt;li&gt;ç¨ å¯†æª¢ç´¢ï¼ˆDense Retrievalï¼‰ï¼šå°‡æŸ¥è©¢èˆ‡æ–‡æª”åµŒå…¥ç‚ºå‘é‡ï¼Œé€éèªæ„ç›¸ä¼¼åº¦æª¢ç´¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="retrieval-granularity"&gt;Retrieval Granularity
&lt;/h3&gt;&lt;p&gt;æª¢ç´¢å–®ä½çš„é¸æ“‡å°æ•ˆèƒ½èˆ‡è¨ˆç®—æˆæœ¬æœ‰é‡å¤§å½±éŸ¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chunk(passages): åŒ…å«ç·Šæ¹Šä¸”å®Œæ•´çš„è³‡è¨Šï¼Œå†—é¤˜å’Œä¸ç›¸é—œæ€§è¼ƒå°‘ï¼Œæ˜¯ RAG ä¸­ä¸»æµçš„æª¢ç´¢æ–‡æœ¬ç²’åº¦ã€‚&lt;/li&gt;
&lt;li&gt;Token: å¯¦ç¾æ›´å¿«çš„æœå°‹ï¼Œä½†æœƒçµ¦è³‡æ–™åº«å„²å­˜å¸¶ä¾†æ›´å¤šè² æ“”ã€‚é©ç”¨æ–¼éœ€è¦ç¨€æœ‰æ¨¡å¼æˆ–é ˜åŸŸå¤–è³‡æ–™çš„æƒ…æ³ã€‚&lt;/li&gt;
&lt;li&gt;Entity: å¯¦é«”æª¢ç´¢æ˜¯å¾çŸ¥è­˜è€Œéèªè¨€çš„è§’åº¦æª¢ç´¢ï¼Œå°æ–¼ä»¥å¯¦é«”ç‚ºä¸­å¿ƒçš„ä»»å‹™æ›´æœ‰æ•ˆï¼Œä¸¦ä¸”èˆ‡è©å…ƒæª¢ç´¢ç›¸æ¯”ï¼Œåœ¨ç©ºé–“ä¸Šæ›´é«˜æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="retrieval-enhancement-strategies"&gt;Retrieval Enhancement strategies
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æª¢ç´¢å‰å„ªåŒ–ï¼ˆPre-retrievalï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Query Expansion (æŸ¥è©¢æ“´å±•)ï¼šé€éåŠ å…¥ç›¸é—œè©å½™æˆ–æ¦‚å¿µä¾†æ“´å¤§åŸå§‹æŸ¥è©¢çš„ç¯„åœã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨å¤§å‹èªè¨€æ¨¡å‹ (LLM) ç”Ÿæˆå½æ–‡ä»¶ï¼Œä¸¦å¾ä¸­æå–ç›¸é—œè³‡è¨Šä¾†æ“´å±•æŸ¥è©¢ï¼Œæœ‰åŠ©æ–¼æ¶ˆé™¤æ­§ç¾©ä¸¦å¼•å°æª¢ç´¢å™¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Query Rewrite (æŸ¥è©¢é‡å¯«)ï¼šæ—¨åœ¨é‡æ–°å½ŒåˆåŸå§‹æŸ¥è©¢ï¼Œä½¿å…¶æ›´é©åˆæª¢ç´¢ã€‚é€™å¯èƒ½æ¶‰åŠæ¾„æ¸…æŸ¥è©¢æ„åœ–ã€ä½¿å…¶æ›´ç²¾ç¢ºï¼Œæˆ–æ˜¯å°‡å…¶è½‰æ›ç‚ºæª¢ç´¢åŠŸèƒ½æ›´å®¹æ˜“ç†è§£çš„å½¢å¼ã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨ LLM å°‡åŸå§‹å•é¡Œé‡å¯«ç‚ºæ›´åˆ©æ–¼æª¢ç´¢çš„ç‰ˆæœ¬ã€‚&lt;br&gt;
èˆ‰ä¾‹ï¼Œ&lt;strong&gt;å¤šæ¬¡&lt;/strong&gt;è©¢å•æ¨¡å‹ä»–çš„æª¢ç´¢è³‡æ–™æ˜¯å¦æ­£ç¢ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Query Augmentation (æŸ¥è©¢å¢å¼·)ï¼šå°‡åŸå§‹æŸ¥è©¢èˆ‡åˆæ­¥ç”Ÿæˆçš„å…§å®¹çµåˆï¼Œå½¢æˆä¸€å€‹æ–°çš„æŸ¥è©¢ã€‚é€™ç¨®ç­–ç•¥å¯ä»¥å¢åŠ æŸ¥è©¢èˆ‡æ½›åœ¨ç›¸é—œæ–‡ä»¶ä¹‹é–“çš„è©å½™å’Œèªç¾©é‡ç–Šï¼Œæœ‰åŠ©æ–¼æª¢ç´¢å‡ºæ›´å¤šæœ‰åŠ©æ–¼ç­”æ¡ˆç”Ÿæˆçš„è³‡è¨Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æª¢ç´¢å¾Œå„ªåŒ–ï¼ˆPost-retrievalï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é‡æ’åºèˆ‡éæ¿¾&lt;br&gt;
å°æª¢ç´¢åˆ°çš„æ–‡ä»¶é€²è¡Œé‡æ–°æ’åºï¼Œå°‡æœ€ç›¸é—œçš„è³‡è¨Šæ’åœ¨å‰é¢ï¼Œä¸¦éæ¿¾æ‰ä¸ç›¸é—œæˆ–ä½å“è³ªçš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œé€éä¸åŒçš„æª¢ç´¢æ–¹æ³•çµ„è£æ–‡ä»¶ä¸¦é€²è¡Œé‡æ’åºï¼Œä»¥æå‡æª¢ç´¢çµæœçš„ç©©å¥æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é›œè¨Šéæ¿¾èˆ‡æ•´åˆ&lt;br&gt;
è™•ç†æª¢ç´¢åˆ°çš„è³‡è¨Šä¸­å¯èƒ½å­˜åœ¨çš„é›œè¨Šæˆ–ä¸ç›¸é—œå…§å®¹ï¼Œä»¥é¿å…å…¶å°ç”Ÿæˆéç¨‹ç”¢ç”Ÿè² é¢å½±éŸ¿ã€‚åŒæ™‚ï¼Œå°‡æ¸…æ´—éçš„è³‡è¨Šæœ‰æ•ˆåœ°æ•´åˆé€²ç”Ÿæˆæ¨¡å‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å£“ç¸®èˆ‡æ‘˜è¦&lt;br&gt;
é‡å°æª¢ç´¢åˆ°çš„é•·ç¯‡æ–‡ä»¶ï¼Œé€²è¡Œå£“ç¸®æˆ–ç”Ÿæˆæ‘˜è¦ï¼Œä»¥è§£æ±ºå¤§å‹èªè¨€æ¨¡å‹è¼¸å…¥é•·åº¦é™åˆ¶çš„å•é¡Œã€‚ä¾‹å¦‚ï¼Œå°‡æª¢ç´¢åˆ°çš„æ–‡ä»¶è™•ç†æˆæ–‡æœ¬æ‘˜è¦ï¼Œå†ç”¨æ–¼æ¨¡å‹ç”Ÿæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="database"&gt;Database
&lt;/h3&gt;&lt;p&gt;RA-LLM çš„æª¢ç´¢è³‡æ–™åº«å¯ç‚ºå°é–‰å¼æˆ–é–‹æ”¾å¼ä¾†æºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°é–‰å¼è³‡æ–™åº«:
é€šå¸¸ä»¥éµå€¼å° (key-value pairs) çš„å½¢å¼å„²å­˜çŸ¥è­˜ã€‚&lt;/li&gt;
&lt;li&gt;é–‹æ”¾å¼è³‡æ–™åº«:
åˆ©ç”¨æœå°‹å¼•æ“ï¼ˆå¦‚ Bingã€Googleï¼‰ç²å–å³æ™‚è³‡è¨Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ç”Ÿæˆgeneration"&gt;ç”Ÿæˆï¼ˆGenerationï¼‰
&lt;/h2&gt;&lt;p&gt;ç”Ÿæˆæ¨¡çµ„çš„è¨­è¨ˆé«˜åº¦ä¾è³´æ–¼ä¸‹æ¸¸ä»»å‹™éœ€æ±‚ï¼Œå› è€Œå¾—ä»¥é©æ‡‰ä¸åŒçš„ä»»å‹™éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id="å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ç™½ç®±parameter-accessible-generators"&gt;å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ï¼ˆç™½ç®±ï¼ŒParameter-Accessible Generatorsï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Encoder-Decoder&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ“æœ‰ç¨ç«‹çš„ç·¨ç¢¼å™¨ï¼ˆEncoderï¼‰èˆ‡è§£ç¢¼å™¨ï¼ˆDecoderï¼‰ï¼Œåˆ†åˆ¥è™•ç†è¼¸å…¥èˆ‡ç”Ÿæˆçš„ç›®æ¨™ã€‚&lt;/li&gt;
&lt;li&gt;Encoder å…ˆå°‡è¼¸å…¥ç·¨ç¢¼ç‚ºä¸Šä¸‹æ–‡è¡¨ç¤ºï¼ŒDecoder ä»¥ Cross-Attention è®€å– Encoder è¼¸å‡ºï¼Œé€æ­¥ç”Ÿæˆçµæœã€‚&lt;/li&gt;
&lt;li&gt;æ¨¡å‹çš„ç›®æ¨™æ˜¯ã€Œæ ¹æ“šç·¨ç¢¼å¾Œçš„è¼¸å…¥èˆ‡å…ˆå‰ç”Ÿæˆçš„çµæœï¼Œé æ¸¬ä¸‹ä¸€å€‹ tokenã€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;è¼¸å…¥ï¼šè«‹ä»‹ç´¹ Transformerã€‚
Encoder ç·¨ç¢¼å¾Œ â†’ [å…§éƒ¨ä¸Šä¸‹æ–‡è¡¨ç¤º]
Decoder è®€å–è¡¨ç¤º â†’ ç”Ÿæˆï¼šTransformer æ˜¯ä¸€ç¨®...
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Decoder-only&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ²’æœ‰ç¨ç«‹çš„ç·¨ç¢¼å™¨ã€‚&lt;/li&gt;
&lt;li&gt;è¼¸å…¥ï¼ˆå¦‚å•é¡Œã€æç¤ºï¼‰ å’Œ ç›®æ¨™ï¼ˆè¦ç”Ÿæˆçš„å…§å®¹ï¼‰ æœƒè¢«ä¸²æ¥æˆåŒä¸€åºåˆ—ï¼Œä¸¦å¾å·¦åˆ°å³é€²è¡Œè™•ç†ã€‚&lt;/li&gt;
&lt;li&gt;æ¨¡å‹çš„ç›®æ¨™æ˜¯å­¸æœƒã€Œæ ¹æ“šå‰é¢å…§å®¹ï¼Œé æ¸¬ä¸‹ä¸€å€‹ tokenã€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;è¼¸å…¥ï¼šè«‹ä»‹ç´¹ Transformerã€‚
æ¨¡å‹çœ‹åˆ°çš„å…§å®¹ï¼šè«‹ä»‹ç´¹ Transformerã€‚&amp;lt;æ¥è‘—æ˜¯ç”Ÿæˆçš„å›ç­”...&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ä¸å¯èª¿åƒæ•¸ç”Ÿæˆå™¨é»‘ç®±parameter-inaccessible-generators"&gt;ä¸å¯èª¿åƒæ•¸ç”Ÿæˆå™¨ï¼ˆé»‘ç®±ï¼ŒParameter-Inaccessible Generatorsï¼‰
&lt;/h3&gt;&lt;p&gt;ç„¡æ³•ç›´æ¥ä¿®æ”¹æ¨¡å‹æœ¬èº«ï¼Œä¸”é›£ä»¥é€²è¡Œå¾®èª¿ï¼Œå› æ­¤æ›´å´é‡æ–¼å„ªåŒ–æª¢ç´¢å’Œå¢å¼·çš„éç¨‹ã€‚å®ƒå€‘çš„ç›®æ¨™æ˜¯é€éç‚ºè¼¸å…¥ (prompts) æä¾›æ›´å„ªè³ªçš„çŸ¥è­˜ã€æŒ‡å°æˆ–ç¯„ä¾‹ä¾†å¢å¼· Generator çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id="å¢å¼·augmentation"&gt;å¢å¼·ï¼ˆAugmentationï¼‰
&lt;/h2&gt;&lt;h3 id="input-layer-integration"&gt;Input-Layer Integration:
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸²è¯æ•´åˆ&lt;/strong&gt;ï¼šå¦‚ In-Context RALM (Ram et al., 2023)ï¼Œå°‡åŸå§‹è¼¸å…¥èˆ‡æ‰€æœ‰æª¢ç´¢æ–‡ä»¶ä¸²è¯ç‚ºå–®ä¸€åºåˆ—è¼¸å…¥ç”Ÿæˆæ¨¡å‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•é¡Œï¼šè¼¸å…¥é•·åº¦æ˜“è¶…éæ¨¡å‹è™•ç†ä¸Šé™ï¼Œéœ€ç§»é™¤éƒ¨åˆ†è©å…ƒï¼Œå¯èƒ½å°è‡´è³‡è¨Šéºå¤±ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹³è¡Œæ•´åˆ&lt;/strong&gt;ï¼šå¦‚ FID (Izacard and Grave, 2021b)ã€Atlasã€REPLUGï¼Œå°‡æ¯å€‹æª¢ç´¢æ–‡ä»¶ç¨ç«‹ç·¨ç¢¼ï¼Œåƒ…åœ¨å¾ŒçºŒæ­¥é©Ÿèšåˆçµæœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å„ªé»ï¼šæ›´èƒ½æ“´å±•è‡³å¤§é‡ä¸Šä¸‹æ–‡ï¼Œæ¸›å°‘è³‡è¨Šä¸Ÿå¤±é¢¨éšªã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€šå¸¸ï¼Œå¤§å¤šæ•¸åŸºæ–¼é»‘ç›’ç”Ÿæˆçš„ RAG æ–¹æ³•éƒ½æ¡ç”¨æ­¤æ³•ï¼Œå› ç‚ºç”Ÿæˆæ¨¡å‹çš„ä¸­é–“å±¤å’Œè¼¸å‡ºåˆ†ä½ˆéƒ½ç„¡æ³•å­˜å–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="output-layer-integration"&gt;Output-Layer Integration:
&lt;/h3&gt;&lt;p&gt;ä¸€ç¨®å¾Œè™•ç† (post-hoc) çš„æª¢ç´¢å¢å¼·æ–¹å¼ï¼Œå®ƒä¸ç›´æ¥å¹²é ç”Ÿæˆæ¨¡å‹çš„å…§éƒ¨é‹ä½œæˆ–å…¶ç”Ÿæˆéç¨‹ï¼Œè€Œæ˜¯åœ¨æ¨¡å‹ç”¢ç”Ÿåˆæ­¥çµæœä¹‹å¾Œï¼Œæ‰å°‡æª¢ç´¢åˆ°çš„è³‡è¨Šèˆ‡é€™äº›çµæœé€²è¡Œçµåˆã€‚&lt;/p&gt;
&lt;h3 id="intermediate-layer-integration"&gt;Intermediate-Layer Integration:
&lt;/h3&gt;&lt;p&gt;åœ¨ç”Ÿæˆæ¨¡å‹å…§éƒ¨çš„ä¸­é–“å±¤æ³¨å…¥æª¢ç´¢è³‡è¨Šï¼Œç›¸è¼ƒæ–¼è¼¸å…¥å±¤èˆ‡è¼¸å‡ºå±¤æ•´åˆï¼Œå±¬æ–¼ åŠåƒæ•¸å¼ï¼ˆSemi-parametricï¼‰ çš„å¼·åŒ–æ–¹å¼ï¼Œå…·æœ‰æ›´é«˜çš„è³‡è¨Šèåˆæ·±åº¦èˆ‡æ½›åŠ›ã€‚&lt;/p&gt;
&lt;h3 id="34retrieval-augmentation-necessity-and-frequency"&gt;3.4.Retrieval Augmentation Necessity and Frequency
&lt;/h3&gt;&lt;p&gt;åŸºæ–¼ LLM çš„ç”Ÿæˆä¸­ï¼Œæª¢ç´¢æ“ä½œæ—¨åœ¨è£œå……çŸ¥è­˜ä»¥å¢å¼·ç”Ÿæˆã€‚å„˜ç®¡æª¢ç´¢å¢å¼·æ¨¡å‹å‰æ™¯å…‰æ˜ï¼Œä½†è‹¥ä¸åŠ å€åˆ†åœ°ä½¿ç”¨ä¸ç›¸é—œçš„æ®µè½é€²è¡Œå¢å¼·ï¼Œå¯èƒ½æœƒè¦†è“‹ LLM å·²æœ‰çš„æ­£ç¢ºçŸ¥è­˜ï¼Œå°è‡´éŒ¯èª¤å›æ‡‰ï¼Œç”šè‡³ä½¿å¹»è¦ºç‡ç¿»å€ã€‚å› æ­¤ï¼Œå°æ–¼æª¢ç´¢å¢å¼·å‹ LLM (RA-LLMs) ä¾†èªªï¼Œ&lt;strong&gt;æº–ç¢ºå›æ†¶å…ˆé©—çŸ¥è­˜ä¸¦åƒ…åœ¨å¿…è¦æ™‚é¸æ“‡æ€§åœ°æ•´åˆæª¢ç´¢è³‡è¨Š&lt;/strong&gt;è‡³é—œé‡è¦ï¼Œé€™æ˜¯å¯¦ç¾ç©©å¥ RA-LLMs çš„é—œéµã€‚&lt;/p&gt;
&lt;h4 id="æª¢ç´¢å¿…è¦æ€§åˆ¤æ–·"&gt;æª¢ç´¢å¿…è¦æ€§åˆ¤æ–·
&lt;/h4&gt;&lt;p&gt;å¤§å¤šæ•¸æ–¹æ³•åŸºæ–¼ LLM çš„åˆæ­¥ç­”æ¡ˆæˆ–å…§éƒ¨æ¨ç†çµæœä¾†åˆ¤æ–·æ˜¯å¦éœ€è¦æª¢ç´¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‰¹æ®Šæ¨™è¨˜æ§åˆ¶&lt;/strong&gt;ï¼šå¦‚ Self-RAGï¼Œå¼•å…¥ç‰¹æ®Šæ¨™è¨˜è©•ä¼°æª¢ç´¢å¿…è¦æ€§ä¸¦æ§åˆ¶è¡Œç‚ºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿­ä»£æç¤ºæ±ºç­–&lt;/strong&gt;ï¼šè¨­è¨ˆè¿­ä»£æç¤ºæ±ºå®šç”Ÿæˆä¸­æ˜¯å¦éœ€è¦é¡å¤–è³‡è¨Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºæ–¼ä¿¡è³´åº¦ (Logits Confidence)&lt;/strong&gt;ï¼šå‚³çµ± RAG ä¸­é€éè©•ä¼°ç”Ÿæˆæ¨¡å‹è¼¸å‡ºçš„ logits ä¿¡è³´åº¦ä¾†åˆ¤æ–·ã€‚å¦‚ FLAREï¼Œç•¶ logits ä½æ–¼é–¾å€¼æ™‚å‹•æ…‹è§¸ç™¼ RAGã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å”åŒæª¢æ¸¬&lt;/strong&gt;ï¼šå¦‚ SlimPLMï¼Œåˆ©ç”¨è¼•é‡ç´šä»£ç†æ¨¡å‹ç”Ÿæˆã€Œå•Ÿç™¼å¼ç­”æ¡ˆã€æª¢æ¸¬ LLM ç¼ºå¤±çŸ¥è­˜ï¼Œä¸¦ç”¨æ–¼æŸ¥è©¢é‡å¯«ä»¥ä¿ƒé€²æª¢ç´¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="æª¢ç´¢é »ç‡-retrieval-frequency"&gt;æª¢ç´¢é »ç‡ (Retrieval Frequency)
&lt;/h4&gt;&lt;p&gt;æª¢ç´¢é »ç‡ï¼ˆæˆ–ç¨±æª¢ç´¢æ­¥é•·ï¼‰æ˜¯æ±ºå®šç”Ÿæˆéç¨‹ä¸­æª¢ç´¢ä½¿ç”¨ç¨‹åº¦çš„é‡è¦è¨­è¨ˆè€ƒé‡ï¼Œå½±éŸ¿æ¨¡å‹çš„æ•ˆç‡å’Œæœ‰æ•ˆæ€§ã€‚ç•¶ä¸è€ƒæ…®æª¢ç´¢å¿…è¦æ€§æ™‚ï¼Œæª¢ç´¢é »ç‡é€šå¸¸æ˜¯é å®šç¾©å’Œå›ºå®šçš„ï¼Œä¸»è¦æœ‰ä¸‰ç¨®è¨­å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸€æ¬¡æ€§æª¢ç´¢ (One-time retrieval)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆéç¨‹é–‹å§‹æ™‚åªèª¿ç”¨ä¸€æ¬¡æª¢ç´¢åŠŸèƒ½ï¼Œæª¢ç´¢æ‰€æœ‰æ‰€éœ€è³‡è¨Šï¼Œç„¶å¾Œæä¾›çµ¦ç”Ÿæˆæ¨¡å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é©ç”¨å ´æ™¯&lt;/strong&gt;ï¼šå¤–éƒ¨è³‡æ–™åº«è³‡è¨Šéœ€æ±‚å° LLM ä¾†èªªå¾ˆæ˜ç¢ºçš„æƒ…æ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™åˆ¶&lt;/strong&gt;ï¼šå°æ–¼éœ€è¦é•·ç¯‡è¼¸å‡ºçš„ä»»å‹™ï¼ˆå¦‚é–‹æ”¾åŸŸæ‘˜è¦ï¼‰ï¼Œé å…ˆæª¢ç´¢çš„æ–‡ä»¶å¯èƒ½ä¸è¶³ä»¥æ”¯æŒæ•´å€‹ç”Ÿæˆåºåˆ—ï¼Œéœ€è¦ç”Ÿæˆä¸­é€²è¡Œæª¢ç´¢æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯„ä¾‹&lt;/strong&gt;ï¼šREALMã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¯ N å€‹è©å…ƒæª¢ç´¢ (Every-n-token retrieval)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆéç¨‹ä¸­æ¯éš” N å€‹è©å…ƒè§¸ç™¼ä¸€æ¬¡æª¢ç´¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é©ç”¨å ´æ™¯&lt;/strong&gt;ï¼šéœ€è¦æŒçºŒè³‡è¨Šè£œå……çš„é•·ç¯‡ç”Ÿæˆä»»å‹™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯„ä¾‹&lt;/strong&gt;ï¼šIn-Context RALMã€RETROã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ¯å€‹è©å…ƒæª¢ç´¢ (Every-token retrieval)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ–¹å¼&lt;/strong&gt;ï¼šåœ¨ç”Ÿæˆéç¨‹ä¸­ï¼Œç‚ºæ¯å€‹è©å…ƒçš„é æ¸¬éƒ½æª¢ç´¢è³‡è¨Šã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é »ç‡&lt;/strong&gt;ï¼šæœ€é »ç¹çš„æª¢ç´¢ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¯„ä¾‹&lt;/strong&gt;ï¼škNN-LMã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ¬Šè¡¡&lt;/strong&gt;ï¼š
ç¸½é«”è€Œè¨€ï¼Œæª¢ç´¢é »ç‡å½±éŸ¿ RAG æ–¹æ³•çš„æœ‰æ•ˆæ€§å’Œæ•ˆç‡ã€‚æ›´é »ç¹çš„æª¢ç´¢é€šå¸¸å¸¶ä¾†æ›´å¥½çš„æ€§èƒ½ï¼Œä½†ä¹Ÿé¡¯è‘—å¢åŠ è¨ˆç®—æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id="ra-llms-è¨“ç·´ç­–ç•¥æ¦‚è¿°"&gt;RA-LLMs è¨“ç·´ç­–ç•¥æ¦‚è¿°
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://ar5iv.labs.arxiv.org/html/2405.06211/assets/x4.png"
loading="lazy"
alt="RA-LLMs è¨“ç·´ç­–ç•¥ç¸½è¦½"
&gt;&lt;br&gt;
&lt;em&gt;åœ– 3ï¼šRA-LLMs è¨“ç·´ç­–ç•¥ç¸½è¦½ï¼Œæ¶µè“‹å…è¨“ç·´èˆ‡éœ€è¨“ç·´æ–¹æ³•ã€‚ä¾†æºï¼šåŸè«–æ–‡&lt;/em&gt;&lt;/p&gt;
&lt;h3 id="å…è¨“ç·´æ–¹æ³•training-free"&gt;å…è¨“ç·´æ–¹æ³•ï¼ˆTraining-Freeï¼‰
&lt;/h3&gt;&lt;h4 id="prompt-engineering-based-methods"&gt;Prompt Engineering-based Methods
&lt;/h4&gt;&lt;p&gt;å°‡æª¢ç´¢åˆ°çš„å¤–éƒ¨çŸ¥è­˜ï¼Œç›´æ¥æ•´åˆé€² LLM çš„æç¤ºï¼ˆPromptï¼‰ï¼Œä½œç‚ºä¸Šä¸‹æ–‡è¼”åŠ©æ¨¡å‹ç”Ÿæˆã€‚&lt;br&gt;
èˆ‰ä¾‹ï¼ŒIn-Context RALM åœ¨ä¸æ”¹å‹• LLM åƒæ•¸çš„æƒ…æ³ä¸‹ï¼Œç›´æ¥å°‡æª¢ç´¢åˆ°çš„æ–‡ä»¶æ’å…¥æ–¼åŸå§‹æç¤ºä¹‹å‰ï¼Œå¢å¼·ç”Ÿæˆéç¨‹ã€‚IRCoT å‰‡äº¤éŒ¯é€²è¡Œ chain-of-thoughtï¼ˆCoTï¼‰ç”Ÿæˆèˆ‡çŸ¥è­˜æª¢ç´¢æ­¥é©Ÿï¼Œä½¿æ¯ä¸€æ­¥æ¨ç†éƒ½èƒ½æª¢ç´¢åˆ°æ›´ç›¸é—œçš„è³‡è¨Šã€‚GENREAD ä¸æ˜¯å¾å¤§å‹èªæ–™åº«æª¢ç´¢çŸ¥è­˜ï¼Œè€Œæ˜¯å…ˆè®“ LLM æ ¹æ“šæŸ¥è©¢ç”Ÿæˆä¸Šä¸‹æ–‡æ–‡ä»¶ï¼Œå†æ ¹æ“šé€™äº›ä¸Šä¸‹æ–‡èˆ‡å•é¡Œç”¢ç”Ÿç­”æ¡ˆã€‚SKR å‰‡å¼•å° LLM åˆ¤æ–·æ˜¯å¦èƒ½åƒ…ä¾é å…§éƒ¨çŸ¥è­˜å›ç­”å•é¡Œï¼Œè‹¥ä¸è¶³å†é¸æ“‡æ€§èª¿ç”¨æª¢ç´¢å™¨ï¼Œéˆæ´»çµåˆå…§å¤–éƒ¨çŸ¥è­˜ã€‚TOC é‡å°æ¨¡ç³Šå•é¡Œï¼Œå…ˆæª¢ç´¢ç›¸é—œçŸ¥è­˜ï¼Œä¸¦éè¿´å°‡å•é¡Œæ‹†è§£ç‚ºå¤šå€‹æ˜ç¢ºå­å•é¡Œï¼Œæœ€çµ‚èšåˆç”Ÿæˆé•·ç¯‡ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¹é»ï¼š
&lt;ul&gt;
&lt;li&gt;ç„¡éœ€æ¨¡å‹è¨“ç·´&lt;/li&gt;
&lt;li&gt;é è¨­è¨ˆåˆç†çš„æç¤ºèˆ‡æª¢ç´¢æµç¨‹æå‡æ•ˆæœ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="retrieval-guided-token-generation-methods"&gt;Retrieval-Guided Token Generation Methods
&lt;/h4&gt;&lt;p&gt;é€éæª¢ç´¢çµæœä¾†èª¿æ•´ LLM çš„ Token é æ¸¬åˆ†å¸ƒï¼Œå½±éŸ¿æ¯ä¸€æ­¥çš„ç”Ÿæˆã€‚&lt;br&gt;
èˆ‰ä¾‹ï¼Œä¾‹å¦‚ KNN-LMs æœƒæ ¹æ“šç•¶å‰æŸ¥è©¢å¾è³‡æ–™åº«æª¢ç´¢å‡º k å€‹æœ€ç›¸é—œçš„ä¸Šä¸‹æ–‡ï¼Œè¨ˆç®—é„°è¿‘åˆ†å¸ƒï¼Œä¸¦å°‡å…¶èˆ‡åŸæ¨¡å‹çš„è¼¸å‡ºåˆ†å¸ƒé€²è¡Œæ’å€¼æ ¡æ­£ï¼Œä»¥æå‡ç”Ÿæˆçµæœçš„æº–ç¢ºæ€§ã€‚Rest å‰‡ä»¥éåƒæ•¸æª¢ç´¢è³‡æ–™åº«å–ä»£å‚³çµ±çš„åƒæ•¸å¼è‰ç¨¿æ¨¡å‹ï¼Œæ ¹æ“šç•¶å‰ä¸Šä¸‹æ–‡æª¢ç´¢ç›¸é—œ tokenï¼Œè¼”åŠ©æ¨æ¸¬å¼ç”Ÿæˆï¼ˆspeculative decodingï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¹é»ï¼š
&lt;ul&gt;
&lt;li&gt;ä¸æ›´æ”¹æ¨¡å‹æ¬Šé‡&lt;/li&gt;
&lt;li&gt;é€šå¸¸ä½œç‚ºå¾Œè™•ç†æˆ–æ¨æ¸¬æ€§ç”Ÿæˆçš„è¼”åŠ©&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;â€» é€™å…©é¡å…è¨“ç·´æ–¹æ³•ï¼Œåˆ†åˆ¥è‘—é‡æ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æç¤ºå·¥ç¨‹ â€” èª¿æ•´è¼¸å…¥&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆæ§åˆ¶ â€” èª¿æ•´è¼¸å‡ºéç¨‹&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="éœ€è¨“ç·´æ–¹æ³•training-based"&gt;éœ€è¨“ç·´æ–¹æ³•ï¼ˆTraining-Basedï¼‰
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;Independent Training&lt;br&gt;
ç¨ç«‹è¨“ç·´æ–¹æ³•æœƒå°‡ RAG æµç¨‹ä¸­çš„æ¯å€‹çµ„ä»¶åˆ†é–‹ã€ç¨ç«‹åœ°é€²è¡Œè¨“ç·´ï¼Œé€™æ„å‘³è‘—åœ¨è¨“ç·´éç¨‹ä¸­ï¼Œé€™å…©å€‹çµ„ä»¶ä¹‹é–“æ²’æœ‰ä»»ä½•äº¤äº’ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ç›®çš„èˆ‡å„ªå‹¢ï¼š&lt;/strong&gt;&lt;br&gt;
ç›¸è¼ƒæ–¼ç„¡éœ€è¨“ç·´çš„æ–¹æ³•ï¼Œç¨ç«‹è¨“ç·´èƒ½æœ‰æ•ˆæå‡ RAG æ¨¡å‹çš„æ€§èƒ½ã€‚&lt;br&gt;
1. è¨“ç·´ LLMs ä»¥æ›´å¥½åœ°åˆ©ç”¨æª¢ç´¢åˆ°çš„çŸ¥è­˜ã€‚&lt;br&gt;
2. è¨“ç·´æª¢ç´¢å™¨ä»¥å½Œåˆè³‡è¨Šæª¢ç´¢èˆ‡èªè¨€ç”Ÿæˆä¹‹é–“çš„å·®è·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æª¢ç´¢å™¨é¡å‹ï¼š&lt;/strong&gt;
* ç¨€ç–æª¢ç´¢å™¨ (Sparse Retriever) ï¼š
é€™é¡æª¢ç´¢å™¨é€šå¸¸åˆ©ç”¨ç¨€ç–ç‰¹å¾µï¼Œä¾‹å¦‚è©é »ï¼Œä¾†è¡¨ç¤ºæ–‡ä»¶ï¼Œä¸¦æ ¹æ“šä»»å‹™ç‰¹å®šçš„æŒ‡æ¨™ï¼ˆå¦‚ TF-IDF å’Œ BM25ï¼‰è¨ˆç®—ç›¸é—œæ€§åˆ†æ•¸ ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;* å¯†é›†æª¢ç´¢å™¨ (Dense Retriever) ï¼š
å¯†é›†æª¢ç´¢å™¨å‰‡æ¡ç”¨æ·±åº¦ç¥ç¶“ç¶²çµ¡å°‡æŸ¥è©¢å’Œæ–‡ä»¶ç·¨ç¢¼æˆå¯†é›†è¡¨ç¤º (dense representations)ã€‚ç„¶å¾Œï¼Œé€šå¸¸ä½¿ç”¨å…§ç©è¨ˆç®—ç›¸é—œæ€§åˆ†æ•¸ä¸¦æª¢ç´¢ç›¸é—œçš„å¤–éƒ¨çŸ¥è­˜ã€‚åºåˆ—è¨“ç·´é€éå”èª¿è¨“ç·´çš„æ–¹å¼ï¼Œå°‹æ±‚æ›´æ·±å±¤æ¬¡çš„æ•´åˆæ•ˆæœã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start="2"&gt;
&lt;li&gt;
&lt;p&gt;Sequential Training&lt;br&gt;
åºåˆ—è¨“ç·´æ–¹æ³•å‰‡æ¡å–åˆ†éšæ®µçš„è¨“ç·´æ–¹å¼ã€‚é¦–å…ˆè¨“ç·´ä¸€å€‹æ¨¡çµ„ï¼ˆä¾‹å¦‚æª¢ç´¢å™¨ï¼‰ï¼Œç„¶å¾Œå†åˆ©ç”¨é€™å€‹è¨“ç·´å¥½çš„æ¨¡çµ„å»æŒ‡å°å¦ä¸€å€‹æ¨¡çµ„ï¼ˆä¾‹å¦‚ç”Ÿæˆå™¨ï¼‰çš„èª¿æ•´éç¨‹ï¼Œç›®çš„åœ¨æ”¹å–„æ¨¡çµ„é–“çš„å”åŒä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¨“ç·´æµç¨‹ï¼š&lt;/strong&gt; åºåˆ—è¨“ç·´é€šå¸¸åˆ†ç‚ºå…©å€‹éšæ®µ&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;**åˆå§‹é è¨“ç·´ï¼š**é¦–å…ˆå°æª¢ç´¢å™¨æˆ–ç”Ÿæˆå™¨ä¸­çš„ä¸€å€‹æ¨¡çµ„é€²è¡Œç¨ç«‹çš„é è¨“ç·´ã€‚&lt;/li&gt;
&lt;li&gt;**å›ºå®šèˆ‡è¨“ç·´ï¼š**ä¸€æ—¦å…¶ä¸­ä¸€å€‹æ¨¡çµ„å®Œæˆé è¨“ç·´ï¼Œå®ƒå°±æœƒè¢«å›ºå®šï¼ˆfreezeï¼‰ä¸‹ä¾†ï¼Œè€Œå¦ä¸€å€‹æ¨¡çµ„å‰‡åœ¨å…¶è¼”åŠ©ä¸‹é€²è¡Œè¨“ç·´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;å„ªå‹¢èˆ‡éˆæ´»æ€§ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å”åŒå¢ç›Šï¼šèˆ‡ç¨ç«‹è¨“ç·´ç›¸æ¯”ï¼Œåºåˆ—è¨“ç·´çš„å„ªå‹¢åœ¨æ–¼å¯è¨“ç·´çš„æ¨¡çµ„èƒ½å¤ å—ç›Šæ–¼å›ºå®šæ¨¡çµ„çš„å¼•å°å’Œå”åŠ©ï¼Œå¾è€Œæ›´å¥½åœ°é©æ‡‰å½¼æ­¤ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ç¾æœ‰æ¨¡å‹ï¼šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¨±å¤šå·²ç¶“é è¨“ç·´å¥½çš„å¼·å¤§æ¨¡å‹ï¼ˆä¾‹å¦‚ BERTã€CLIPã€T5ï¼‰å¯ä»¥ç›´æ¥ä½œç‚ºå›ºå®šæ¨¡çµ„ä½¿ç”¨ï¼Œå¾è€Œçœç•¥äº†åˆå§‹çš„é è¨“ç·´æ­¥é©Ÿï¼Œé€²ä¸€æ­¥æé«˜äº†æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ ¹æ“šæª¢ç´¢å™¨å’Œç”Ÿæˆå™¨ä¹‹é–“çš„è¨“ç·´é †åºï¼Œåºåˆ—è¨“ç·´å¯åˆ†ç‚ºå…©å¤§é¡ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æª¢ç´¢å™¨å„ªå…ˆ (Retriever First)ï¼š&lt;br&gt;
æ­¤é¡æ–¹æ³•é¦–å…ˆè¨“ç·´æª¢ç´¢å™¨ï¼Œç„¶å¾Œå°‡å…¶å›ºå®šï¼Œå†è¨“ç·´ç”Ÿæˆå™¨ã€‚&lt;/li&gt;
&lt;li&gt;LLMs å„ªå…ˆ (LLMs First)ï¼š&lt;br&gt;
æ­¤é¡æ–¹æ³•å‰‡ç›¸åï¼Œå…ˆè¨“ç·´ LLMï¼Œå†å°‡å…¶å›ºå®šï¼Œç„¶å¾Œè¨“ç·´æª¢ç´¢å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Joint Training&lt;br&gt;
è¯åˆè¨“ç·´æ–¹æ³•å‰‡æ˜¯åŒæ™‚è¨“ç·´æª¢ç´¢å™¨å’Œç”Ÿæˆå™¨ï¼Œé€™ç¨®æ–¹å¼æ˜¯ç‚ºäº†è®“å…©å€‹æ¨¡çµ„åœ¨è¨“ç·´éç¨‹ä¸­ç›¸äº’å”èª¿ã€å…±åŒé€²æ­¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>LangChain è¨˜æ†¶å‹æª¢ç´¢å•ç­”ï¼šã€Šå°ç‹å­ã€‹æ–‡æœ¬äº’å‹•å¯¦è¸</title><link>https://Dandelionlibra.github.io/post/langchain/retrieverqa-2/</link><pubDate>Fri, 18 Jul 2025 08:39:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/retrieverqa-2/</guid><description>&lt;h2 id="ä»¥-langchain-è¨˜æ†¶å‹æª¢ç´¢å•ç­”å¯¦ç¾å°ç‹å­æ–‡æœ¬äº’å‹•"&gt;ä»¥ LangChain è¨˜æ†¶å‹æª¢ç´¢å•ç­”å¯¦ç¾ã€Šå°ç‹å­ã€‹æ–‡æœ¬äº’å‹•
&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ä»‹ç´¹å¦‚ä½•åˆ©ç”¨ LangChain æ¡†æ¶ï¼Œçµåˆ Ollama Embeddingsã€ChromaDB èˆ‡è¨˜æ†¶å‹å•ç­”éˆï¼ˆRunnableWithMessageHistoryï¼‰ï¼Œå¯¦ç¾èƒ½è¨˜ä½ä¸Šä¸‹æ–‡çš„äº’å‹•å¼æª¢ç´¢å•ç­”ã€‚ä»¥ã€Šå°ç‹å­ã€‹æ–‡æœ¬ç‚ºä¾‹ï¼Œå±•ç¤ºè¨˜æ†¶å‹å•ç­”èˆ‡ä¸€èˆ¬æª¢ç´¢å•ç­”çš„å·®ç•°ã€‚&lt;/p&gt;
&lt;h3 id="ä¸€è¨˜æ†¶å‹å•ç­”éˆè¨­è¨ˆ"&gt;ä¸€ã€è¨˜æ†¶å‹å•ç­”éˆè¨­è¨ˆ
&lt;/h3&gt;&lt;p&gt;LangChain æä¾› &lt;code&gt;RunnableWithMessageHistory&lt;/code&gt;ï¼Œå¯æ ¹æ“š session_id ä¿å­˜å°è©±æ­·ç¨‹ï¼Œè®“æ¨¡å‹å…·å‚™ã€Œè¨˜æ†¶ã€åŠŸèƒ½ã€‚æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«‹ InMemoryHistory é¡&lt;/strong&gt;ï¼šç”¨æ–¼å„²å­˜æ¯å€‹ session çš„è¨Šæ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¼‰å…¥ PDF ä¸¦åˆ†å‰²æ–‡æœ¬&lt;/strong&gt;ï¼šä½¿ç”¨ &lt;code&gt;PyPDFLoader&lt;/code&gt; å’Œ &lt;code&gt;RecursiveCharacterTextSplitter&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºç«‹å‘é‡è³‡æ–™åº«&lt;/strong&gt;ï¼šç”¨ Ollama Embeddings å°‡æ–‡æœ¬è½‰å‘é‡ï¼Œå­˜å…¥ ChromaDBã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¨­è¨ˆ Prompt èˆ‡ Chain&lt;/strong&gt;ï¼šçµåˆæ­·å²è¨Šæ¯èˆ‡æå•ï¼Œä¸²æ¥ LLMã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å•Ÿå‹•è¨˜æ†¶å‹å•ç­”éˆ&lt;/strong&gt;ï¼šæ¯æ¬¡æå•éƒ½èƒ½ä¿ç•™ä¸Šä¸‹æ–‡ï¼Œå¯¦ç¾å¤šè¼ªäº’å‹•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="ä¸»è¦ç¨‹å¼ç‰‡æ®µ"&gt;ä¸»è¦ç¨‹å¼ç‰‡æ®µ
&lt;/h4&gt;&lt;p&gt;å®Œæ•´ç¨‹å¼ç¢¼è«‹åƒè€ƒï¼š&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/example/LangChain_memory_ask_via_pdf.ipynb" target="_blank" rel="noopener"
&gt;GitHub ç¯„ä¾‹ç¨‹å¼&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å»ºç«‹è¨˜æ†¶ç®¡ç†å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;InMemoryHistory&lt;/span&gt;(BaseChatMessageHistory, BaseModel):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; messages: list[BaseMessage] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Field(default_factory&lt;span style="color:#f92672"&gt;=&lt;/span&gt;list)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;add_messages&lt;/span&gt;(self, messages: list[BaseMessage]) &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;messages&lt;span style="color:#f92672"&gt;.&lt;/span&gt;extend(messages)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;clear&lt;/span&gt;(self) &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;None&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self&lt;span style="color:#f92672"&gt;.&lt;/span&gt;messages &lt;span style="color:#f92672"&gt;=&lt;/span&gt; []
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;store &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get_by_session_id&lt;/span&gt;(session_id: str) &lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt; BaseChatMessageHistory:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; session_id &lt;span style="color:#f92672"&gt;not&lt;/span&gt; &lt;span style="color:#f92672"&gt;in&lt;/span&gt; store:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; store[session_id] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; InMemoryHistory()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; store[session_id]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å•Ÿå‹•è¨˜æ†¶å‹å•ç­”éˆ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chain_with_history &lt;span style="color:#f92672"&gt;=&lt;/span&gt; RunnableWithMessageHistory(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; chain,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; get_by_session_id,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; input_messages_key&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;question&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; history_messages_key&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;history&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="äºŒäº’å‹•ç¯„ä¾‹"&gt;äºŒã€äº’å‹•ç¯„ä¾‹
&lt;/h3&gt;&lt;h4 id="å•ç­”ä¸€ä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å—"&gt;å•ç­”ä¸€ï¼šä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å—ï¼Ÿ
&lt;/h4&gt;&lt;p&gt;æ¨¡å‹å›ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘çœ‹éã€Šå°ç‹å­ã€‹ï¼é€™æ˜¯å€‹éå¸¸è‘—åçš„å°èªªï¼Œä½œè€…æ˜¯å®‰æ‰˜ç“¦å…§Â·å¾·Â·è–-åŸƒå…‹çµ®ä½©é‡Œã€‚æ•…äº‹å……æ»¿å“²ç†èˆ‡å¯“æ„ï¼Œè®“äººæ€è€ƒç”Ÿå‘½ã€æ„›æƒ…å’Œå‹èª¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="å•ç­”äºŒå•Ÿè’™äº†ä½ ä»€éº¼"&gt;å•ç­”äºŒï¼šå•Ÿè’™äº†ä½ ä»€éº¼ï¼Ÿ
&lt;/h4&gt;&lt;p&gt;æ¨¡å‹å›ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°ç‹å­å’Œé€™å€‹æ•…äº‹éƒ½å•Ÿè’™äº†æˆ‘å°ç”Ÿå‘½ã€æ„›æƒ…å’Œå‹èª¼çš„çœ‹æ³•ã€‚å®ƒæ•™æœƒæˆ‘è¦çæƒœç”Ÿå‘½ã€é—œå¿ƒä»–äººå’Œè¿½æ±‚å¤¢æƒ³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="å•ç­”ä¸‰ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äºº"&gt;å•ç­”ä¸‰ï¼šä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ
&lt;/h4&gt;&lt;p&gt;æ¨¡å‹å›ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°ç‹å­æ˜¯ä¸€å€‹ç¨ç‰¹ã€æ•æ„Ÿå’Œæµªæ¼«çš„å¹´è¼•äººã€‚ä»–èƒ½çœ‹åˆ°ä¸–ç•Œçš„ç¾éº—å’Œåƒ¹å€¼ï¼Œé¡˜æ„ç‚ºä¹‹ä»˜å‡ºåŠªåŠ›ï¼Œä½†ä¹Ÿæœ‰äº›ç¼ºä¹å‹‡æ°£æ‰¿èªè‡ªå·±çš„æƒ…æ„Ÿã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id="å•ç­”å››çºŒå¯«ç¬¬äºŒéƒ¨å°ç‹å­"&gt;å•ç­”å››ï¼šçºŒå¯«ç¬¬äºŒéƒ¨å°ç‹å­
&lt;/h4&gt;&lt;p&gt;æ¨¡å‹å›ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹æ“šå°ç‹å­çš„æ•…äº‹ï¼Œæˆ‘å€‘å¯ä»¥ç¹¼çºŒä»–çš„å†’éšªæ—…ç¨‹ã€‚ä»–æƒ³æ¢ç´¢æ›´å¤§çš„ä¸–ç•Œï¼Œæ²¿é€”é‡åˆ°è¨±å¤šæ–°å¥‡çš„ç”Ÿç‰©å’Œæ™¯è‰²ï¼Œå°æ¯ä»¶äº‹éƒ½å……æ»¿å¥½å¥‡å’Œèˆˆè¶£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="ä¸‰è¨˜æ†¶å‹å•ç­”-vs-ä¸€èˆ¬æª¢ç´¢å•ç­”"&gt;ä¸‰ã€è¨˜æ†¶å‹å•ç­” VS ä¸€èˆ¬æª¢ç´¢å•ç­”
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¨˜æ†¶å‹å•ç­”&lt;/strong&gt;ï¼šèƒ½ä¿ç•™ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè¼ªäº’å‹•ï¼Œå›ç­”æ›´è²¼åˆå°è©±è„ˆçµ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸€èˆ¬æª¢ç´¢å•ç­”&lt;/strong&gt;ï¼šæ¯æ¬¡æå•ç¨ç«‹ï¼Œç„¡æ³•è¨˜ä½å‰æ–‡ï¼Œå›ç­”è¼ƒç‚ºç‰‡æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="ä¸€èˆ¬æª¢ç´¢å•ç­”ç¯„ä¾‹"&gt;ä¸€èˆ¬æª¢ç´¢å•ç­”ç¯„ä¾‹
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qa_chain &lt;span style="color:#f92672"&gt;=&lt;/span&gt; RetrievalQA&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_chain_type(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; llm&lt;span style="color:#f92672"&gt;=&lt;/span&gt;ollama_llm,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; retriever&lt;span style="color:#f92672"&gt;=&lt;/span&gt;vector_db&lt;span style="color:#f92672"&gt;.&lt;/span&gt;as_retriever(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qa_chain&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(&lt;span style="color:#e6db74"&gt;&amp;#39;ä½ çœ‹éç¶“å…¸æ•…äº‹å°ç‹å­å˜›ï¼Ÿ&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å›ç­”ï¼šæ˜¯çš„ï¼Œæˆ‘çœ‹éã€Šå°ç‹å­ã€‹ã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="å››ç¸½çµ"&gt;å››ã€ç¸½çµ
&lt;/h3&gt;&lt;p&gt;çµåˆ LangChain è¨˜æ†¶å‹å•ç­”éˆï¼Œå¯é‡å°æ–‡æœ¬é€²è¡Œå¤šè¼ªäº’å‹•ï¼Œæ¨¡å‹èƒ½è¨˜ä½ä¸Šä¸‹æ–‡ï¼Œå›ç­”æ›´è‡ªç„¶ä¸”å…·å»¶çºŒæ€§ã€‚é©åˆç”¨æ–¼æ·±å…¥æ–‡æœ¬æ¢ç´¢ã€æ•…äº‹çºŒå¯«ç­‰å ´æ™¯ã€‚&lt;/p&gt;
&lt;h2 id="åƒè€ƒè³‡æ–™"&gt;åƒè€ƒè³‡æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://python.langchain.com/api_reference/core/runnables/langchain_core.runnables.history.RunnableWithMessageHistory.html" target="_blank" rel="noopener"
&gt;LangChain RunnableWithMessageHistory å®˜æ–¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://dandelionlibra.github.io/post/langchain/retrieverqa-1/" target="_blank" rel="noopener"
&gt;LangChain æª¢ç´¢å•ç­”åŸºç¤ç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>ä½¿ç”¨ Langchain æ¡†æ¶é€²è¡Œæª¢ç´¢æå•</title><link>https://Dandelionlibra.github.io/post/langchain/retrieverqa-1/</link><pubDate>Fri, 18 Jul 2025 02:59:00 +0800</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/retrieverqa-1/</guid><description>&lt;h2 id="ç¨‹å¼é‹è¡Œè©³ç´°æ­¥é©Ÿ"&gt;ç¨‹å¼é‹è¡Œè©³ç´°æ­¥é©Ÿ
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹ä»¥ Jupyter Notebook æ ¼å¼ï¼Œè¨˜éŒ„å¦‚ä½•ä½¿ç”¨ LangChain æ¡†æ¶çµåˆ Ollama Embeddings èˆ‡ ChromaDBï¼Œå¯¦ç¾ PDF æ–‡ä»¶çš„æª¢ç´¢å¼å•ç­”ã€‚&lt;br&gt;
è©³ç´°ç¨‹å¼åƒè€ƒï¼š&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/example/LangChain_ask_via_pdf.ipynb" target="_blank" rel="noopener"
&gt;GitHub ç¯„ä¾‹ç¨‹å¼&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="1-è¼‰å…¥å¿…è¦å¥—ä»¶èˆ‡åˆå§‹åŒ–-embedding-æ¨¡å‹"&gt;1. è¼‰å…¥å¿…è¦å¥—ä»¶èˆ‡åˆå§‹åŒ– Embedding æ¨¡å‹
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_community.document_loaders &lt;span style="color:#f92672"&gt;import&lt;/span&gt; PyPDFLoader
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_text_splitters &lt;span style="color:#f92672"&gt;import&lt;/span&gt; RecursiveCharacterTextSplitter
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaEmbeddings
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_chroma &lt;span style="color:#f92672"&gt;import&lt;/span&gt; Chroma
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# åˆå§‹åŒ– Ollama Embeddings&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;embeddings_model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaEmbeddings(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; base_url&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;http://dandelion-ollama-1:11434&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;bge-m3:567m&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-è¼‰å…¥-pdf-æ–‡ä»¶ä¸¦åˆ†å‰²æ–‡æœ¬"&gt;2. è¼‰å…¥ PDF æ–‡ä»¶ä¸¦åˆ†å‰²æ–‡æœ¬
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¼‰å…¥ PDF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;loader &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PyPDFLoader(&lt;span style="color:#e6db74"&gt;&amp;#39;./data/PDF_file.pdf&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; loader&lt;span style="color:#f92672"&gt;.&lt;/span&gt;load_and_split()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¨­å®šåˆ†æ®µåƒæ•¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chunk_size &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;256&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chunk_overlap &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;128&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;text_splitter &lt;span style="color:#f92672"&gt;=&lt;/span&gt; RecursiveCharacterTextSplitter(chunk_size&lt;span style="color:#f92672"&gt;=&lt;/span&gt;chunk_size, chunk_overlap&lt;span style="color:#f92672"&gt;=&lt;/span&gt;chunk_overlap)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;documents &lt;span style="color:#f92672"&gt;=&lt;/span&gt; text_splitter&lt;span style="color:#f92672"&gt;.&lt;/span&gt;split_documents(docs)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="3-å»ºç«‹-chroma-å‘é‡è³‡æ–™åº«"&gt;3. å»ºç«‹ Chroma å‘é‡è³‡æ–™åº«
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;db &lt;span style="color:#f92672"&gt;=&lt;/span&gt; Chroma&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_documents(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; documents,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; embedding&lt;span style="color:#f92672"&gt;=&lt;/span&gt;embeddings_model,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; persist_directory&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;./story-db&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="4-å•Ÿå‹•æª¢ç´¢å¼å•ç­”éˆ-retrievalqa-chain"&gt;4. å•Ÿå‹•æª¢ç´¢å¼å•ç­”éˆ (RetrievalQA Chain)
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.chains &lt;span style="color:#f92672"&gt;import&lt;/span&gt; RetrievalQA
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ollama_llm &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; base_url&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;http://dandelion-ollama-1:11434&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; temperature&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;0.0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; num_predict&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;512&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qa_chain &lt;span style="color:#f92672"&gt;=&lt;/span&gt; RetrievalQA&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_chain_type(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; llm&lt;span style="color:#f92672"&gt;=&lt;/span&gt;ollama_llm,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; retriever&lt;span style="color:#f92672"&gt;=&lt;/span&gt;db&lt;span style="color:#f92672"&gt;.&lt;/span&gt;as_retriever(),
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="5-å•ç­”ç¯„ä¾‹åŠæ¨¡å‹å›ç­”"&gt;5. å•ç­”ç¯„ä¾‹åŠæ¨¡å‹å›ç­”
&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹åƒ…åˆ—å‡ºéƒ¨åˆ†å•ç­”ç¯„ä¾‹ï¼Œå…¶é¤˜å¯è‡ªè¡Œå˜—è©¦ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;query &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;ç«ç‘°æ˜¯èª°ï¼Ÿ&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; qa_chain&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(query)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(result)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ¨¡å‹å›ç­”ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{&amp;#39;query&amp;#39;: &amp;#39;ç«ç‘°æ˜¯èª°ï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;ç«ç‘°æ˜¯å°ç‹å­çš„ç«ç‘°èŠ±ï¼Œé‚„æœ‰åœ’ä¸­å…¶ä»–äº”åƒæœµç«ç‘°èŠ±ï¼ˆä½†å°ç‹å­çš„ç«ç‘°èŠ±æ˜¯ç¨ä¸€ç„¡äºŒçš„ï¼‰ã€‚&amp;#39;}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qa_chain&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(&lt;span style="color:#e6db74"&gt;&amp;#39;å°ç‹å­çš„ä¾†æ­·æ˜¯ä»€ï¼Ÿ&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ¨¡å‹å›ç­”ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{&amp;#39;query&amp;#39;: &amp;#39;å°ç‹å­çš„ä¾†æ­·æ˜¯ä»€ï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;å°ç‹å­æ‰€ä¾†è‡ªçš„é‚£å€‹æ˜Ÿçƒæ˜¯å°è¡Œæ˜ŸB612ã€‚&amp;#39;}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;qa_chain&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(&lt;span style="color:#e6db74"&gt;&amp;#39;ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ¨¡å‹å›ç­”ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{&amp;#39;query&amp;#39;: &amp;#39;ä½ è¦ºå¾—å°ç‹å­æ˜¯å€‹æ€æ¨£çš„äººï¼Ÿ&amp;#39;, &amp;#39;result&amp;#39;: &amp;#39;æ ¹æ“šæ–‡ä¸­æè¿°ï¼Œå°ç‹å­çš„æ€§æ ¼å¯ä»¥çœ‹å‡ºä¾†ã€‚ä»–ä¼¼ä¹æ˜¯ä¸€å€‹æ•æ„Ÿã€æµªæ¼«ã€ç¨ç«‹çš„å¹´è¼•äººã€‚ä»–å°ä»–æ‰€é‡åˆ°çš„é™Œç”Ÿäººçš„è©•åƒ¹å¾ˆç´°è‡´ï¼Œèƒ½å¤ çœ‹ç©¿åˆ¥äººçš„çœŸå¯¦é¢ç›®ã€‚ä»–ä¹Ÿé¡¯ç¤ºå‡ºå°è‡ªç”±å’Œè‡ªä¸»çš„æ¸´æœ›ã€‚&amp;#39;}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;æ›´å¤šå•é¡Œå¯ä¾æ“šæ–‡æœ¬å…§å®¹è‡ªç”±ç™¼æ®ï¼Œæ¢ç´¢ä¸åŒç­”æ¡ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="ç­†è¨˜é‡é»"&gt;ç­†è¨˜é‡é»
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;é€é &lt;code&gt;PyPDFLoader&lt;/code&gt; è®€å– PDFï¼Œä¸¦ç”¨ &lt;code&gt;RecursiveCharacterTextSplitter&lt;/code&gt; åˆ†å‰²æ–‡æœ¬ï¼Œåˆ©æ–¼å¾ŒçºŒæª¢ç´¢ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Ollama Embeddings å°‡æ–‡æœ¬è½‰ç‚ºå‘é‡ï¼Œå­˜å…¥ ChromaDBã€‚&lt;/li&gt;
&lt;li&gt;çµåˆ Ollama LLM èˆ‡ RetrievalQA Chainï¼Œå¯¦ç¾è‡ªç„¶èªè¨€å•ç­”ã€‚&lt;/li&gt;
&lt;li&gt;å¯é‡å°æ–‡æœ¬å…§å®¹é€²è¡Œå¤šæ¨£åŒ–æå•ï¼Œå¿«é€Ÿç²å¾—ç­”æ¡ˆã€‚&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>ä½¿ç”¨ Docker å¿«é€Ÿå»ºç«‹ Jupyter Notebook ç’°å¢ƒæ•™å­¸</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/</link><pubDate>Thu, 17 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±"&gt;å…§å®¹å¤§ç¶±
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ç‚ºä»€éº¼ç”¨ Docker å»ºç«‹ Jupyter Notebookï¼Ÿ&lt;/li&gt;
&lt;li&gt;å®‰è£ Docker
&lt;ul&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;Mac&lt;/li&gt;
&lt;li&gt;Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä¸‹è¼‰èˆ‡åŸ·è¡Œ Jupyter Notebook Docker æ˜ åƒæª”&lt;/li&gt;
&lt;li&gt;è¨­å®š Notebook å­˜å–èˆ‡è³‡æ–™æ›è¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ GPU&lt;/li&gt;
&lt;li&gt;åƒè€ƒè³‡æ–™&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="1-ç‚ºä»€éº¼ç”¨-docker-å»ºç«‹-jupyter-notebook"&gt;1. ç‚ºä»€éº¼ç”¨ Docker å»ºç«‹ Jupyter Notebookï¼Ÿ
&lt;/h2&gt;&lt;p&gt;Docker å¯è®“ä½ å¿«é€Ÿå»ºç«‹éš”é›¢çš„é–‹ç™¼ç’°å¢ƒï¼Œé¿å…æœ¬æ©Ÿå®‰è£è¡çªã€‚Jupyter Notebook æ˜¯è³‡æ–™ç§‘å­¸å¸¸ç”¨çš„äº’å‹•å¼é–‹ç™¼å·¥å…·ï¼Œé€é Docker å¯è¼•é¬†éƒ¨ç½²ã€ç§»æ¤èˆ‡åˆ†äº«ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-å®‰è£-docker"&gt;2. å®‰è£ Docker
&lt;/h2&gt;&lt;h3 id="linux"&gt;Linux
&lt;/h3&gt;&lt;p&gt;å¤§å¤šæ•¸ Linux ç™¼è¡Œç‰ˆå¯é€éå¥—ä»¶ç®¡ç†å™¨å®‰è£ Dockerï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ›´æ–°å¥—ä»¶æ¸…å–®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å®‰è£ Docker&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install docker.io
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å•Ÿå‹• Docker æœå‹™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl start docker
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¨­å®šé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl enable docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="mac"&gt;Mac
&lt;/h3&gt;&lt;p&gt;å‰å¾€ &lt;a class="link" href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener"
&gt;Docker Desktop for Mac&lt;/a&gt; ä¸‹è¼‰ä¸¦å®‰è£ã€‚&lt;/p&gt;
&lt;h3 id="windows"&gt;Windows
&lt;/h3&gt;&lt;p&gt;å‰å¾€ &lt;a class="link" href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener"
&gt;Docker Desktop for Windows&lt;/a&gt; ä¸‹è¼‰ä¸¦å®‰è£ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="3-ä¸‹è¼‰èˆ‡åŸ·è¡Œ-jupyter-notebook-docker-æ˜ åƒæª”"&gt;3. ä¸‹è¼‰èˆ‡åŸ·è¡Œ Jupyter Notebook Docker æ˜ åƒæª”
&lt;/h2&gt;&lt;p&gt;å®˜æ–¹æ˜ åƒæª”æ¨è–¦ä½¿ç”¨ &lt;a class="link" href="https://hub.docker.com/r/jupyter/base-notebook" target="_blank" rel="noopener"
&gt;&lt;code&gt;jupyter/base-notebook&lt;/code&gt;&lt;/a&gt; æˆ– &lt;a class="link" href="https://hub.docker.com/r/jupyter/scipy-notebook" target="_blank" rel="noopener"
&gt;&lt;code&gt;jupyter/scipy-notebook&lt;/code&gt;&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‹‰å–æ˜ åƒæª”&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker pull jupyter/base-notebook
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å»ºç«‹å®¹å™¨&lt;br&gt;
&lt;code&gt;docker run [OPTIONS] IMAGE [COMMAND] [ARG...]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å•Ÿå‹•å®¹å™¨ä¸¦é–‹å•Ÿæœ¬æ©Ÿ 8888 ç«¯å£ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -p 8888:8888 jupyter/base-notebook
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿå‹•å¾Œï¼Œçµ‚ç«¯æ©Ÿæœƒé¡¯ç¤ºä¸€çµ„ tokenï¼Œè¤‡è£½ç¶²å€ï¼ˆå¦‚ &lt;code&gt;http://127.0.0.1:8888/?token=...&lt;/code&gt;ï¼‰åœ¨ç€è¦½å™¨é–‹å•Ÿå³å¯é€²å…¥ Jupyter Notebookã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;â€» &lt;a class="link" href="https://hub.docker.com" target="_blank" rel="noopener"
&gt;&lt;code&gt;DockerHub&lt;/code&gt;&lt;/a&gt;: DockerHub æ˜¯å®˜æ–¹çš„ Docker æ˜ åƒæª”é›†ä¸­å¹³å°ï¼Œæä¾›å„ç¨®æ‡‰ç”¨ç¨‹å¼çš„æ˜ åƒæª”ä¸‹è¼‰èˆ‡åˆ†äº«ï¼Œå¯ä»¥åœ¨é€™è£¡æœå°‹ã€å–å¾—æ˜ åƒæª”ï¼Œå¿«é€Ÿéƒ¨ç½²ç’°å¢ƒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="4-è¨­å®š-notebook-å­˜å–èˆ‡è³‡æ–™æ›è¼‰"&gt;4. è¨­å®š Notebook å­˜å–èˆ‡è³‡æ–™æ›è¼‰
&lt;/h2&gt;&lt;p&gt;è‹¥è¦å°‡æœ¬æ©Ÿè³‡æ–™å¤¾æ›è¼‰åˆ°å®¹å™¨ï¼Œæ–¹ä¾¿å­˜å–èˆ‡ä¿å­˜ notebook æª”æ¡ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -p 8888:8888 -v /your/local/path:/home/jovyan/work --name my-jupyter jupyter/base-notebook
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-p&lt;/code&gt;: Assigns the internal port to the external port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt;: Assigns a local directory to a container directory (mounts a volume)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/your/local/path&lt;/code&gt;ï¼šæœ¬æ©Ÿè³‡æ–™å¤¾è·¯å¾‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/home/jovyan/work&lt;/code&gt;ï¼šå®¹å™¨å…§é è¨­å·¥ä½œç›®éŒ„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--name&lt;/code&gt;: Sets the container name; otherwise, a random name will be assigned&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯è‡ªè¨‚å¯†ç¢¼æˆ– tokenï¼Œè©³è¦‹ &lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/common.html#docker-options" target="_blank" rel="noopener"
&gt;å®˜æ–¹æ–‡ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id="5-ä½¿ç”¨-gpu"&gt;5. ä½¿ç”¨ GPU
&lt;/h2&gt;&lt;p&gt;è‹¥ä½ çš„ä¸»æ©Ÿæ”¯æ´ NVIDIA GPUï¼Œå¯åˆ©ç”¨ &lt;a class="link" href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html" target="_blank" rel="noopener"
&gt;NVIDIA Container Toolkit&lt;/a&gt; è®“ Docker å®¹å™¨å­˜å– GPU è³‡æºã€‚&lt;/p&gt;
&lt;h3 id="æ­¥é©Ÿ"&gt;æ­¥é©Ÿ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£ NVIDIA é©…å‹•ç¨‹å¼&lt;/strong&gt;&lt;br&gt;
è«‹å…ˆå®‰è£å°æ‡‰ä½œæ¥­ç³»çµ±çš„ NVIDIA é¡¯ç¤ºå¡é©…å‹•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£ NVIDIA Container Toolkit&lt;/strong&gt;&lt;br&gt;
ä¾ç…§å®˜æ–¹æ–‡ä»¶å®‰è£ &lt;code&gt;nvidia-docker&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt-get install -y nvidia-docker2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo systemctl restart docker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å•Ÿå‹•æ”¯æ´ GPU çš„ Jupyter Notebook å®¹å™¨&lt;/strong&gt;&lt;br&gt;
ä½¿ç”¨ &lt;code&gt;--gpus all&lt;/code&gt; åƒæ•¸å•Ÿå‹•å®¹å™¨ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run --gpus all -p 8888:8888 --name gpu_note -v ~/name:/tf/name tensorflow/tensorflow:latest-gpu-jupyter
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é©—è­‰ GPU æ˜¯å¦å¯ç”¨&lt;/strong&gt;&lt;br&gt;
åœ¨ Notebook ä¸­åŸ·è¡Œä¸‹åˆ—ç¨‹å¼ç¢¼ï¼Œç¢ºèª GPU æ˜¯å¦è¢«åµæ¸¬åˆ°ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; tensorflow &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; tf
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(tf&lt;span style="color:#f92672"&gt;.&lt;/span&gt;config&lt;span style="color:#f92672"&gt;.&lt;/span&gt;list_physical_devices(&lt;span style="color:#e6db74"&gt;&amp;#39;GPU&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šéƒ¨åˆ†æ˜ åƒæª”å¯èƒ½éœ€é¡å¤–å®‰è£ CUDAã€cuDNN æˆ–æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼Œè«‹åƒè€ƒ &lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/recipes.html#using-gpus" target="_blank" rel="noopener"
&gt;Jupyter Docker Stacks å®˜æ–¹èªªæ˜&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id="6-åƒè€ƒè³‡æ–™"&gt;6. åƒè€ƒè³‡æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://jupyter-docker-stacks.readthedocs.io/" target="_blank" rel="noopener"
&gt;Jupyter Docker Stacks å®˜æ–¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
&gt;Docker å®˜æ–¹ç¶²ç«™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://jupyter.org/" target="_blank" rel="noopener"
&gt;Jupyter Notebook å®˜æ–¹ç¶²ç«™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-4</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-4/</link><pubDate>Tue, 15 Jul 2025 21:12:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-4/</guid><description>&lt;h1 id="ç”šéº¼æ˜¯-langchain-çš„éˆçµæ§‹"&gt;ç”šéº¼æ˜¯ Langchain çš„éˆçµæ§‹?
&lt;/h1&gt;&lt;h2 id="å®šç¾©"&gt;å®šç¾©
&lt;/h2&gt;&lt;p&gt;å°‡å°çš„æ¨¡çµ„ä¸²èµ·ä¾†ï¼Œè€Œå½¢æˆçš„ä¸²åˆ—çµæ§‹ã€‚&lt;br&gt;
èˆ‰ä¾‹: å®šç¾©æç¤ºè© -&amp;gt; é¸æ“‡ LLM -&amp;gt; é‹è¡Œ inferencing(å‘¼å« function) -&amp;gt; å¾—åˆ°çµæœã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å„ªé»:
&lt;ul&gt;
&lt;li&gt;æ¨¡çµ„åŒ–æ›´å®¹æ˜“ä¿®æ”¹å€‹åˆ¥åŠŸèƒ½ï¼Œè€Œä¸å½±éŸ¿å…¶ä»–éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;æé«˜äº†æ¨¡çµ„çš„æ¨™æº–åŒ–ã€å¯å†ç”¨æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="éˆçµæ§‹åˆ†é¡"&gt;éˆçµæ§‹åˆ†é¡
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŸºç¤éˆçµæ§‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;LLM chain (å–®éˆ)&lt;br&gt;
å°æ‡‰ç›´æ¥èª¿ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼Œæœ€å°‘ 1 æ¬¡ LLM callã€‚&lt;br&gt;
ex. llm.invoke()&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šç¾© prompt&lt;/li&gt;
&lt;li&gt;å®šç¾© llm&lt;/li&gt;
&lt;li&gt;å®šç¾© chain&lt;/li&gt;
&lt;li&gt;é‹è¡Œ predict&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Router chain (å¤šéˆ)&lt;br&gt;
åˆ¤æ–·è¦ä½¿ç”¨å“ªå€‹éˆï¼Œæœ€å°‘ 2 æ¬¡ LLM callï¼Œç¬¬ä¸€æ¬¡å‘¼å«æ˜¯ç‚ºäº†æ±ºå®šä½¿ç”¨å“ªæ¢éˆï¼Œç¬¬äºŒæ¬¡æ˜¯ç‚ºäº†å¾—åˆ°å›ç­”ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šç¾© prompt&lt;/li&gt;
&lt;li&gt;å®šç¾© llm/emdeddings&lt;/li&gt;
&lt;li&gt;å®šç¾© chain (å¤šéˆä½µè¡Œï¼Œé¸ä¸€æ¢éˆè™•ç†)&lt;/li&gt;
&lt;li&gt;é‹è¡Œ predict
&lt;img src="https://Dandelionlibra.github.io/image/Router_chain.JPG"
loading="lazy"
alt="Data_Connection"
&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sequential chain (å¤šéˆ)&lt;br&gt;
ä¸Šä¸€å€‹èªè¨€æ¨¡å‹çš„èª¿ç”¨çµæœæ˜¯ä¸‹ä¸€å€‹èªè¨€æ¨¡å‹èª¿ç”¨çš„è¼¸å…¥ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šç¾© prompt&lt;/li&gt;
&lt;li&gt;å®šç¾© llm/emdeddings&lt;/li&gt;
&lt;li&gt;å®šç¾© chain (å¤šéˆä½µè¡Œï¼Œä¾ç…§é †åºåŸ·è¡Œ)&lt;/li&gt;
&lt;li&gt;é‹è¡Œ predict&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transformation chain (æ–‡æœ¬è™•ç†éˆ)&lt;br&gt;
å°‡è¼¸å…¥æ–‡æœ¬è™•ç†å¾Œã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Transformation_chain.JPG"
loading="lazy"
alt="Data_Connection"
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‡‰ç”¨éˆçµæ§‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Document chains type (é•·æ–‡æœ¬è™•ç†éˆ): ç¸½çµã€å‘é‡æ•¸æ“šåº«&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Stuff:
ç•¶è¦è©¢å•æ¨¡å‹æ²’æœ‰è¨“ç·´éçš„è¨Šæ¯æ™‚ï¼Œè¦é€é prompt å°‡è³‡è¨Šå‚³å…¥ï¼Œä½†è‹¥è¼¸å…¥é•·åº¦è¶…éæ¨¡å‹å¯æ¥å—çš„æœ€å¤§ token æœƒç„¡æ³•é‹è¡Œã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Stuff.JPG"
loading="lazy"
alt="Data_Connection"
&gt;&lt;/li&gt;
&lt;li&gt;Refine:
èª¿ç”¨å¤šæ¬¡èªè¨€æ¨¡å‹ï¼Œå°‡åŸæœ¬çš„é•·ä¸Šä¸‹æ–‡åˆ†æ®µè½ï¼Œé¿å…è¼¸å…¥è¶…éæœ€å¤§ token çš„å•é¡Œï¼Œå°‡ä¸Šä¸€è¼ªçš„è¼¸å‡ºä½œç‚ºä¸­é–“å›ç­”æ”¾åˆ°ç¬¬ä¸‰éƒ¨åˆ†ä¸­
&lt;img src="https://Dandelionlibra.github.io/image/Refine.JPG"
loading="lazy"
alt="Data_Connection"
&gt;&lt;/li&gt;
&lt;li&gt;Map reduce&lt;/li&gt;
&lt;li&gt;Map rerank&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Retrieval QA&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ç¨‹å¼äº‹ä¾‹"&gt;ç¨‹å¼äº‹ä¾‹
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/example/LangChain_link.ipynb" target="_blank" rel="noopener"
&gt;è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
&gt;https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-3</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-3/</link><pubDate>Mon, 14 Jul 2025 10:56:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-3/</guid><description>&lt;h1 id="data-connection"&gt;Data Connection
&lt;/h1&gt;&lt;h2 id="å®šç¾©"&gt;å®šç¾©
&lt;/h2&gt;&lt;p&gt;è¨±å¤šåŸºæ–¼å¤§å‹èªè¨€æ¨¡å‹è€ŒåŸ·è¡Œçš„æ‡‰ç”¨å¸¸æœƒç”¨åˆ°æ¨¡å‹æ•¸æ“šé›†ä¸­æ²’æœ‰çš„æ•¸æ“šã€‚è€Œé‡å°é€™é¡éœ€æ±‚ï¼ŒLangchain æä¾›äº†è¨±å¤šå·¥å…·ä½¿ç”¨æˆ¶å¯ä»¥å¾å„é¡æ•¸æ“šæºä¸­åŠ è¼‰æ–°çš„æ•¸æ“šã€è½‰æ›æ•¸æ“šã€å„²å­˜æ•¸æ“šã€è¨ªå•æ•¸æ“šã€‚&lt;/p&gt;
&lt;p&gt;â€»å¤§å‹èªè¨€æ¨¡å‹ä¸å¯èƒ½åœ¨è¨“ç·´éšæ®µå°±æ¶µè“‹æ‰€æœ‰æ•¸æ“šï¼Œä¸”æ¯æ™‚æ¯åˆ»éƒ½æœ‰æ–°çš„æ•¸æ“šç”¢ç”Ÿã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡æª”è¼‰å…¥å™¨(Document loaders): å¾å¤šç¨®æ•¸æ“šæºåŠ è¼‰æ–‡æª”ï¼Œex.ç¶²é ã€pdfã€‚&lt;/li&gt;
&lt;li&gt;æ–‡æª”è½‰æ›å™¨: æ‹†åˆ†æ–‡æª”ã€ä¸Ÿæ£„å†—é¤˜æ–‡æª”ï¼Œä¸»è¦é‹è¡Œåœ¨æ–‡æª”è¼‰å…¥å™¨ä¹‹å¾Œï¼Œé‡å°åŠ è¼‰å‡ºä¾†çš„æ–‡æª”åšè™•ç†ã€‚&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬åµŒå…¥(embedding)æ¨¡å‹: å°‡éçµæ§‹åŒ–çš„æ–‡æœ¬è½‰ç‚ºæµ®é»æ•¸åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;å‘é‡æ•¸æ“šåº«: å„²å­˜å’Œæœå°‹ embedding æ•¸æ“šã€‚&lt;/li&gt;
&lt;li&gt;æª¢ç´¢å™¨: æŸ¥è©¢å‘é‡æ•¸æ“šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="data-connection-è™•ç†æµç¨‹"&gt;Data Connection è™•ç†æµç¨‹
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://Dandelionlibra.github.io/image/Data_Connection.JPG"
loading="lazy"
alt="Data_Connection"
&gt;&lt;/p&gt;
&lt;h3 id="1-æ–‡æœ¬è¼‰å…¥å™¨document-loaders"&gt;1. æ–‡æœ¬è¼‰å…¥å™¨(Document loaders)
&lt;/h3&gt;&lt;p&gt;å°‡æ–‡æœ¬æ•¸æ“šå¾åŸå§‹æ•¸æ“š(Source)ä¸­æå–å‡ºä¾†ï¼Œæ”¹æˆ langchain èªè­˜çš„èªè¨€ï¼Œç¸½è€Œè¨€ä¹‹å°±æ˜¯å°‡éçµæ§‹åŒ–çš„æ–‡æœ¬æ•¸æ“šåŠ è¼‰åˆ°çµæ§‹åŒ–çš„å­—ç¬¦ä¸²ä¸­ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¼¸å…¥: å„ç¨®æ•¸æ“šæºï¼Œex.PDFã€URLã€å½±ç‰‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¼¸å‡º: ä¸€ç³»åˆ—çš„ Document å°è±¡ï¼Œä¾‹ï¼Œæœ‰6é pdfæœƒç”¢å‡º6å€‹ documentsï¼Œä»¥åˆ†åˆ¥å°æ‡‰ã€‚
&lt;img src="https://Dandelionlibra.github.io/image/Document_loaders.JPG"
loading="lazy"
alt="Document_loaders.JPG"
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;èˆ‰ä¾‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;çµæ§‹åŒ–æ–‡ä»¶: åŠ è¼‰ CSV æ–‡ä»¶&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.document_loaders.csv_loader &lt;span style="color:#f92672"&gt;import&lt;/span&gt; CSVLoader
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;loader &lt;span style="color:#f92672"&gt;=&lt;/span&gt; CSVLoader(file_path&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;./data/file.csv&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; loader&lt;span style="color:#f92672"&gt;.&lt;/span&gt;load()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éçµæ§‹åŒ–æ–‡ä»¶: ç´”æ–‡æœ¬ã€pptã€htmlã€pdfã€åœ–ç‰‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a class="link" href="https://python.langchain.com/docs/integrations/document_loaders/" target="_blank" rel="noopener"
&gt;å…¨éƒ¨æ–‡ä»¶æ ¼å¼&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-æ–‡æœ¬åˆ†å‰²å™¨document-transformers"&gt;2. æ–‡æœ¬åˆ†å‰²å™¨(Document transformers)
&lt;/h3&gt;&lt;p&gt;å°‡åŠ è¼‰å¥½çš„æ–‡æª”é€²è¡Œè½‰æ›ï¼Œå¾è€Œæ›´å¥½çš„é©æ‡‰å„ç¨®å ´æ™¯ã€‚èˆ‰ä¾‹ï¼Œå°‡æ–‡æª”æ‹†åˆ†æˆè¼ƒå°çš„å¡Šï¼Œä»¥é¿å…å¤§å‹èªè¨€æ¨¡å‹å°æ–¼è¼¸å…¥é•·åº¦çš„é™åˆ¶ã€‚&lt;br&gt;
Langchain ä¸­æä¾›çš„æ–‡æª”è½‰æ›å™¨å¯ä»¥æä¾›æ‹†åˆ†ã€åˆä½µã€éæ¿¾ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡æœ¬åˆ†å‰²å™¨-æ‹†åˆ†: åˆ†å‰²é•·æ–‡æœ¬ï¼Œæ ¹æ“šèªæ„ç›¸é—œæ€§å°‡æ‰€æœ‰æœ‰é—œè¯çš„æ–‡æœ¬æ”¾åœ¨åŒä¸€å€‹åˆ†å‰²æ®µä¸­ã€‚&lt;br&gt;
&lt;img src="https://Dandelionlibra.github.io/image/Document_transformers.JPG"
loading="lazy"
alt="Document_transformers.JPG.JPG"
&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;å°‡æ–‡æœ¬æ‹†åˆ†ç‚ºå°ã€å…·èªæ„æ„ç¾©çš„å¡Šã€‚&lt;/li&gt;
&lt;li&gt;å°‡å°å¡Šçµ„åˆæˆå¤§å¡Šï¼Œç›´åˆ°é”åˆ°ä¸€å®šè¦æ¨¡ã€‚&lt;/li&gt;
&lt;li&gt;å°‡é”åˆ°ä¸€å®šè¦æ¨¡çš„å¡Šä½œç‚ºç¨ç«‹çš„æ–‡æœ¬ç‰‡æ®µï¼Œç„¶å¾Œå‰µå»ºæ–°çš„æ–‡æœ¬å¡Šï¼Œæ­¤å¤–ï¼Œç‚ºäº†ç¶­æŒå¡Šé–“çš„é€£è²«æ€§ï¼Œå…©å€‹æ–‡æœ¬å¡Šä¹‹é–“æœƒæœ‰é‡ç–Šçš„éƒ¨åˆ†ã€‚&lt;br&gt;
ä»¥åœ–ä¾‹è€Œè¨€ï¼ŒDocument ç”±ä¸€å¡Šè®Šç‚ºä¸‰å¡Šã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="3-æ–‡æœ¬è©åµŒå…¥word-embedding"&gt;3. æ–‡æœ¬è©åµŒå…¥(Word Embedding)
&lt;/h3&gt;&lt;p&gt;è©åµŒå…¥æ˜¯å°‡è©èªæ•¸å€¼åŒ–è¡¨é”çš„æ–¹å¼ï¼Œé€šå¸¸æœƒå°‡è©æ˜ å°„åˆ°é«˜ç¶­çš„å‘é‡ä¸­ï¼Œä½¿é›»è…¦è—‰ç”±é«˜ç¶­çš„æ•¸å­—åŒ–è¡¨é”å¾—ä»¥ç†è§£è‡ªç„¶èªè¨€çš„èªæ„ï¼Œæ¥è¿‘çš„èªæ„=æ¥è¿‘çš„å‘é‡è·é›¢ã€‚&lt;/p&gt;
&lt;h3 id="4-å‘é‡æ•¸æ“šåº«"&gt;4. å‘é‡æ•¸æ“šåº«
&lt;/h3&gt;&lt;p&gt;ç”¨æ–¼å„²å­˜åµŒå…¥çš„æ•¸æ“šå‘é‡ã€‚&lt;/p&gt;
&lt;h3 id="5-æª¢ç´¢å™¨"&gt;5. æª¢ç´¢å™¨
&lt;/h3&gt;&lt;p&gt;æ ¹æ“šè¼¸å…¥çš„éçµæ§‹åŒ–æŸ¥è©¢èªå¥è¿”å›å°æ‡‰æ–‡æª”çš„æ¥å£(ä¸€ç³»åˆ— Documents å°è±¡)ã€‚&lt;br&gt;
ä¸åŒæ–¼å‘é‡æ•¸æ“šåº«ï¼Œå‘é‡æ•¸æ“šåº«å¯ä»¥è¦–ç‚ºä¸€ç¨®å…·å‚™å„²å­˜åŠŸèƒ½çš„æª¢ç´¢å™¨ï¼Œä½†æª¢ç´¢å™¨ä¸ä¸€å®šéœ€è¦å…·å‚™å„²å­˜çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id="ç¨‹å¼äº‹ä¾‹"&gt;ç¨‹å¼äº‹ä¾‹
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_csv_loader.ipynb" target="_blank" rel="noopener"
&gt;è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
&gt;https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LangChain åŸºæœ¬ä½¿ç”¨-2</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-2/</link><pubDate>Sun, 13 Jul 2025 08:06:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-2/</guid><description>&lt;h1 id="æç¤ºæ¨¡æ¿"&gt;æç¤ºæ¨¡æ¿
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å°èªè¨€æ¨¡å‹çš„æŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;æä¾›ç°¡å–®çš„äº‹ä¾‹çµ¦èªè¨€æ¨¡å‹ä½¿æ¨¡å‹æ¥è¿‘ç†æƒ³çµæœ&lt;/li&gt;
&lt;li&gt;æçµ¦èªè¨€æ¨¡å‹çš„å•é¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain &lt;span style="color:#f92672"&gt;import&lt;/span&gt; PromptTemplate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ä½¿ç”¨ PromptTemplate ä¾†å®šç¾©å°è©±çš„æç¤ºæ¨¡æ¿&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;no_input_prompt_template &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; input_variables&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; template&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;èªªå€‹æ•…äº‹&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;multi_input_prompt_template &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; input_variables&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#e6db74"&gt;&amp;#34;ä¸»é¡Œ&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;é¢¨æ ¼&amp;#34;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; template&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;è«‹è¬›ä¸€å€‹é—œæ–¼&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{ä¸»é¡Œ}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;çš„æ•…äº‹ï¼Œé¢¨æ ¼æ˜¯&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{é¢¨æ ¼}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;ã€‚&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;multi_input_prompt_template&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(ä¸»é¡Œ&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;å‹‡æ°£&amp;#34;&lt;/span&gt;, é¢¨æ ¼&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;ç«¥è©±&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# other exampleï¼Œç”± from_template å°‡ string è½‰æˆ PromptTemplate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;template &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;è«‹è¬›ä¸€å€‹é—œæ–¼&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{ä¸»é¡Œ}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;çš„æ•…äº‹ï¼Œé¢¨æ ¼æ˜¯&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{é¢¨æ ¼}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;ã€‚&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;prompt_template &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_template(template)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æ­¤æ™‚è¼¸å‡º [&amp;#34;ä¸»é¡Œ&amp;#34;, &amp;#34;é¢¨æ ¼&amp;#34;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;prompt_template&lt;span style="color:#f92672"&gt;.&lt;/span&gt;input_variables
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="æ¥æ”¶éƒ¨åˆ†åƒæ•¸"&gt;æ¥æ”¶éƒ¨åˆ†åƒæ•¸
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æ‰€æœ‰åƒæ•¸ç„¡æ³•åŒæ­¥ç²å–æ™‚ï¼Œå¯ä»¥å…ˆç”¨ç¾æœ‰åƒæ•¸å‚³å…¥ç¬¬ä¸€å€‹æ¨¡æ¿ï¼Œä»¥ç²å¾—æ–°çš„åƒæ•¸ï¼Œå†å°‡æ–°åƒæ•¸å‚³å…¥æ–°çš„æ¨¡æ¿ä¸­ï¼Œä»¥å¾—åˆ°æœ€çµ‚æƒ³å•çš„å•é¡Œã€‚&lt;br&gt;
&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_1.JPG"
loading="lazy"
alt="partial_prompt_template"
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ‰äº›åƒæ•¸è¦ç”¨ç‰¹å®šæ–¹å¼ç²å– (ex.å‡½å¼å‘¼å«)
&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_2.JPG"
loading="lazy"
alt="partial_prompt_template"
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain &lt;span style="color:#f92672"&gt;import&lt;/span&gt; PromptTemplate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; datetime &lt;span style="color:#f92672"&gt;import&lt;/span&gt; datetime
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;get_date&lt;/span&gt;():
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; now &lt;span style="color:#f92672"&gt;=&lt;/span&gt; datetime&lt;span style="color:#f92672"&gt;.&lt;/span&gt;now()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; now&lt;span style="color:#f92672"&gt;.&lt;/span&gt;strftime(&lt;span style="color:#e6db74"&gt;&amp;#34;%mæœˆ&lt;/span&gt;&lt;span style="color:#e6db74"&gt;%d&lt;/span&gt;&lt;span style="color:#e6db74"&gt;æ—¥&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate(template&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;å‘Šè¨´æˆ‘&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{åŸå¸‚}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;åœ¨&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{å¹´ä»½}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;å¹´&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{æ—¥æœŸ}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;çš„å¹³å‡æ°£æº«æ˜¯å¤šå°‘ï¼Ÿ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; input_variables&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#e6db74"&gt;&amp;#34;åŸå¸‚&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;å¹´ä»½&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;æ—¥æœŸ&amp;#34;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;PromptTemplate_2 &lt;span style="color:#f92672"&gt;=&lt;/span&gt; prompt&lt;span style="color:#f92672"&gt;.&lt;/span&gt;partial(åŸå¸‚&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;å°åŒ—&amp;#34;&lt;/span&gt;, æ—¥æœŸ&lt;span style="color:#f92672"&gt;=&lt;/span&gt;get_date())
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(PromptTemplate_2&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(å¹´ä»½&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;2023&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡º:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;å‘Šè¨´æˆ‘å°åŒ—åœ¨2023å¹´07æœˆ13æ—¥çš„å¹³å‡æ°£æº«æ˜¯å¤šå°‘ï¼Ÿ
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="å°‘æ¨£æœ¬å­¸ç¿’-few-shot"&gt;å°‘æ¨£æœ¬å­¸ç¿’ (few-shot)
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è—‰ç”±å°‘é‡çš„æ¨£æœ¬ã€ç¯„ä¾‹ï¼Œä½¿èªè¨€æ¨¡å‹èƒ½è™•ç†ç‰¹å®šå•é¡Œ&lt;/li&gt;
&lt;li&gt;ä¸åŒæ–¼å¾®èª¿ (fine-tuning)ï¼Œå¾®èª¿æœƒä½¿ç”¨å¤§é‡æ¨£æœ¬ï¼Œæœ€çµ‚æœƒæ”¹è®Šæ¨¡å‹æœ¬èº«&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¾‹å­:&lt;br&gt;
&amp;ldquo;ä½ å¥½å—?&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚&amp;rdquo;&lt;br&gt;
&amp;ldquo;ä»Šå¤©ç¦®æ‹œå¹¾?&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚&amp;rdquo;&lt;br&gt;
&amp;ldquo;å¤©æ°£çœŸå¥½å‘€ã€‚&amp;rdquo; - &amp;ldquo;ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚&amp;rdquo;&lt;/p&gt;
&lt;p&gt;å¸Œæœ›æ¨¡å‹å­¸æœƒ&amp;quot;ä¸»äºº&amp;quot;çš„å‰ç¶´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="fewshot-prompt-template"&gt;FewShot Prompt Template
&lt;/h3&gt;&lt;p&gt;åˆ©ç”¨æç¤ºæ¨¡æ¿ï¼Œå°‡æ¨£æœ¬æ•¸æ“šåŠ è¼‰æˆå®Œæ•´çš„æç¤ºè©ï¼Œæ¥è‘—å°‡æ¨£æœ¬é€£åŒæç¤ºè©ä¸€ä½µé€çµ¦æ¨£æœ¬æç¤ºæ¨¡æ¿ï¼Œæœ€çµ‚å¾—åˆ°å®Œæ•´çš„æç¤ºè©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://Dandelionlibra.github.io/image/prompt_template_3.JPG"
loading="lazy"
alt="partial_prompt_template"
&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.prompts.few_shot &lt;span style="color:#f92672"&gt;import&lt;/span&gt; FewShotPromptTemplate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.prompts.prompt &lt;span style="color:#f92672"&gt;import&lt;/span&gt; PromptTemplate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# FewShot examples&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;examples &lt;span style="color:#f92672"&gt;=&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;question&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä½ å¥½å—?&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;answer&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;question&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä»Šå¤©ç¦®æ‹œå¹¾?&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;answer&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;question&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;å¤©æ°£çœŸå¥½å‘€ã€‚&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;answer&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# FewShotPromptTemplate-æ¨£æœ¬æç¤ºæ¨¡æ¿&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# æç¤ºæ¨¡æ¿ä»¥ Question:é–‹é ­&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;example_prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate(input_variables&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#e6db74"&gt;&amp;#34;question&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;answer&amp;#34;&lt;/span&gt;], template&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Question: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{question}&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;Answer: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{answer}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;few_shot_prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; FewShotPromptTemplate(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; examples&lt;span style="color:#f92672"&gt;=&lt;/span&gt;examples, &lt;span style="color:#75715e"&gt;# å‚³å…¥æ¨£æœ¬&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; example_prompt&lt;span style="color:#f92672"&gt;=&lt;/span&gt;example_prompt, &lt;span style="color:#75715e"&gt;# å‚³å…¥æ¨£æœ¬æ¨¡æ¿&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; suffix&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Question: &lt;/span&gt;&lt;span style="color:#e6db74"&gt;{input}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# å•é¡Œçš„æç¤ºè©&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; input_variables&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[&lt;span style="color:#e6db74"&gt;&amp;#34;input&amp;#34;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(few_shot_prompt&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(input&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡ºå®Œæ•´æç¤ºè©å¦‚ä¸‹ï¼Œä½†å‰é¢ä¸‰çµ„ç‚ºæä¾›çš„ç¯„ä¾‹æ¡ˆä¾‹ï¼Œæœ€å¾Œä¸€çµ„æ˜¯è¼¸å…¥çš„æå•ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Question: ä½ å¥½å—?
Answer: ä¸»äººï¼Œæˆ‘å¾ˆå¥½ã€‚
Question: ä»Šå¤©ç¦®æ‹œå¹¾?
Answer: ä¸»äººï¼Œä»Šå¤©ç¦®æ‹œæ—¥ã€‚
Question: å¤©æ°£çœŸå¥½å‘€ã€‚
Answer: ä¸»äººï¼Œæ˜¯çš„ï¼Œä»Šå¤©å¤©æ°£éå¸¸å¥½ã€‚
Question: ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?
&lt;/code&gt;&lt;/pre&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;llm &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; llm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(few_shot_prompt&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(input&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£?&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(response)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡ºçµæœï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ä½ çš„å•é¡Œæ˜¯å•ä½ ä»Šå¤©éå¾—æ€éº¼æ¨£ï¼Ÿæˆ‘å¯ä»¥å›ç­”èªªï¼šæ‚¨ä¹Ÿå¾ˆå¥½ã€‚æˆ–è€…ï¼Œæˆ‘å¯ä»¥è©¢å•ä¸€ä¸‹æ‚¨ä»Šå¤©éå¾—æ€éº¼æ¨£ï¼Ÿ
å¦‚æœä½ æƒ³çŸ¥é“æˆ‘çš„ç­”æ¡ˆï¼Œé‚£å°±æ˜¯ï¼šä¸»äººï¼Œä»Šå¤©æˆ‘å¾ˆå¥½ï¼Œè¬è¬æ‚¨çš„é—œå¿ƒï¼
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="æ¨£æœ¬ç¯©é¸å™¨-exampleselector"&gt;æ¨£æœ¬ç¯©é¸å™¨ (ExampleSelector)
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æ¨£æœ¬æ•¸é‡å¤ªå¤šæ™‚&lt;/li&gt;
&lt;li&gt;ä¸æ˜¯æ‰€æœ‰æ¨£æœ¬éƒ½èƒ½å¹«åŠ©æå‡è¼¸å‡ºè³ªé‡
&lt;img src="https://Dandelionlibra.github.io/image/ExampleSelector.JPG"
loading="lazy"
alt="partial_prompt_template"
&gt;&lt;/li&gt;
&lt;li&gt;èˆ‰ä¾‹: SemanticSimilarityExampleSelector (èªæ„ç›¸ä¼¼åº¦ç¯©é¸å™¨)ï¼Œä¾æ“šæœ€çµ‚æçš„å•é¡Œï¼Œåœ¨æ‰€æœ‰æ¨£æœ¬ä¸­å°‹æ‰¾èªæ„æœ€ç‚ºæ¥è¿‘çš„æ¨£æœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å¤§å‹èªè¨€æ¨¡å‹çš„å°è£"&gt;å¤§å‹èªè¨€æ¨¡å‹çš„å°è£
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Langchain ä¸æä¾›ç¾æˆçš„å¤§å‹èªè¨€æ¨¡å‹&lt;/li&gt;
&lt;li&gt;Langchain æä¾›çš„æ˜¯é‡å°ä¸åŒèªè¨€æ¨¡å‹çš„æ¨™æº–åŒ–æ¥å£&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å¤§å‹èªè¨€æ¨¡å‹llmæ¨¡å¡Šçš„åŸºæœ¬ç”¨æ³•"&gt;å¤§å‹èªè¨€æ¨¡å‹(LLM)æ¨¡å¡Šçš„åŸºæœ¬ç”¨æ³•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç›´æ¥å‘¼å«
&lt;ul&gt;
&lt;li&gt;é¡ä¼¼ç›´æ¥å‘¼å«.invoke()ï¼Œè®“èªè¨€æ¨¡å‹æ ¹æ“šè¼¸å…¥å›ç­”å…§å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;llm &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(llm(&lt;span style="color:#e6db74"&gt;&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹ç¬‘è©±ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ç‚ºä»€éº¼é›»æ± èµ°è·¯å»äº†? å› ç‚ºå®ƒæƒ³å……é›»
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;æ‰¹é‡ç”Ÿæˆ
&lt;ul&gt;
&lt;li&gt;generate()&lt;/li&gt;
&lt;li&gt;è¼¸å…¥ï¼šæ–‡æœ¬çš„åˆ—è¡¨&lt;/li&gt;
&lt;li&gt;è¼¸å‡ºï¼šæ–‡æœ¬çš„åˆ—è¡¨&lt;/li&gt;
&lt;li&gt;ex. è¼¸å…¥å•é¡Œçš„åˆ—è¡¨ï¼Œè¼¸å‡ºå›ç­”çš„åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;generate_res &lt;span style="color:#f92672"&gt;=&lt;/span&gt; llm&lt;span style="color:#f92672"&gt;.&lt;/span&gt;generate([&lt;span style="color:#e6db74"&gt;&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹ç¬‘è©±ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;è·Ÿæˆ‘èªªä¸€å€‹æ‚²å‚·çš„æ•…äº‹ï¼Œç›¡é‡ç°¡çŸ­ã€‚&amp;#34;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(generate_res)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;generations=[[GenerationChunk(text=&amp;#39;ç‚ºä»€éº¼äººé¡æœƒèµ°è·¯?\n\nå› ç‚ºé³¥ä¸å–œæ­¡åƒè·¯ä¸Šçš„æ±è¥¿!&amp;#39;, generation_info={&amp;#39;model&amp;#39;: &amp;#39;llama3.1:8b&amp;#39;, &amp;#39;created_at&amp;#39;: &amp;#39;2025-07-13T14:22:01.5478452Z&amp;#39;, &amp;#39;done&amp;#39;: True, &amp;#39;done_reason&amp;#39;: &amp;#39;stop&amp;#39;, &amp;#39;total_duration&amp;#39;: 2588937700, &amp;#39;load_duration&amp;#39;: 39039000, &amp;#39;prompt_eval_count&amp;#39;: 23, &amp;#39;prompt_eval_duration&amp;#39;: 335147300, &amp;#39;eval_count&amp;#39;: 22, &amp;#39;eval_duration&amp;#39;: 2214149200, &amp;#39;response&amp;#39;: &amp;#39;&amp;#39;, &amp;#39;thinking&amp;#39;: None, &amp;#39;context&amp;#39;: [128006, 882, 128007, 271, 104142, 37046, 106336, 114634, 49838, 87177, 3922, 16555, 94, 33857, 112825, 106649, 1811, 128009, 128006, 78191, 128007, 271, 101399, 101567, 114064, 17792, 104770, 101835, 102149, 47095, 1980, 63212, 101399, 116750, 16937, 104940, 125741, 105271, 47095, 106583, 101778, 61786, 0]})], [GenerationChunk(text=&amp;#39;æœ‰ä¸€å€‹å¹´è¼•å¥³å­©ï¼Œå¥¹èˆ‡è‡ªå·±çš„çˆ¶è¦ªéå¸¸ç›¸æ„›ã€‚å¯æ˜¯å› ç‚ºå·¥ä½œå¤ªå¿™ï¼Œçˆ¸çˆ¸é•·æœŸå¤–å‡ºï¼Œä¸¦ä¸”å¿½ç•¥äº†å¥³å…’ã€‚ç›´åˆ°ä¸€å¤©ï¼Œä¸€å ´é‡å¤§äº‹æ•…è®“çˆ¸çˆ¸å»ä¸–ã€‚åœ¨æ‚²ç—›ä¸­ï¼Œå¥³å­©ç™¼ç¾äº†ä¹‹å‰çˆ¶è¦ªçµ¦å¥¹çš„ä¿¡ï¼Œè£¡é¢æœ‰å°å¥¹çš„æº«æš–å‘Šç™½å’Œæ·±æƒ…æ‡·å¿µã€‚é€™å€‹æ¶ˆæ¯ä½¿å¥¹å¿ƒç—›æ¬²è£‚ï¼Œå¾æ­¤å¥³å­©å†ä¹Ÿæ²’æœ‰æ¢å¾©éã€‚&amp;#39;, generation_info={&amp;#39;model&amp;#39;: &amp;#39;llama3.1:8b&amp;#39;, &amp;#39;created_at&amp;#39;: &amp;#39;2025-07-13T14:22:16.1064263Z&amp;#39;, &amp;#39;done&amp;#39;: True, &amp;#39;done_reason&amp;#39;: &amp;#39;stop&amp;#39;, &amp;#39;total_duration&amp;#39;: 14556868200, &amp;#39;load_duration&amp;#39;: 39856500, &amp;#39;prompt_eval_count&amp;#39;: 25, &amp;#39;prompt_eval_duration&amp;#39;: 516644200, &amp;#39;eval_count&amp;#39;: 104, &amp;#39;eval_duration&amp;#39;: 13999594200, &amp;#39;response&amp;#39;: &amp;#39;&amp;#39;, &amp;#39;thinking&amp;#39;: None, &amp;#39;context&amp;#39;: [128006, 882, 128007, 271, 104142, 37046, 106336, 114634, 116292, 114218, 9554, 117625, 3922, 16555, 94, 33857, 112825, 106649, 1811, 128009, 128006, 78191, 128007, 271, 108830, 102159, 8107, 125063, 58850, 105989, 105902, 102789, 107924, 104503, 106759, 108008, 50021, 103926, 1811, 113426, 63212, 101399, 102301, 101402, 112008, 3922, 117283, 117283, 101544, 23538, 48915, 20834, 113415, 103786, 120994, 105838, 35287, 58850, 114763, 1811, 74245, 28037, 15120, 36827, 104295, 75267, 125478, 123429, 114816, 117283, 117283, 86436, 101083, 107644, 116292, 108631, 16325, 3922, 58850, 105989, 103106, 102321, 35287, 112065, 104503, 106759, 110698, 109506, 22023, 3922, 115556, 28190, 19361, 104314, 109506, 117986, 118937, 58655, 101828, 34208, 102987, 40474, 103435, 115, 104611, 1811, 103864, 102159, 65305, 33655, 100911, 64209, 108631, 111654, 117068, 3922, 110039, 33091, 58850, 105989, 88356, 75863, 116721, 123843, 109095, 103188, 1811]})]] llm_output=None run=[RunInfo(run_id=UUID(&amp;#39;bc24e5b6-0c3f-4d2c-afb4-95f477e81adf&amp;#39;)), RunInfo(run_id=UUID(&amp;#39;f8f5fe28-4c1d-4b6f-8a74-fdcc6f397f7a&amp;#39;))] type=&amp;#39;LLMResult&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ç”¨é™£åˆ—ç²å–ç‰¹å®šè¼¸å‡ºã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(generate_res&lt;span style="color:#f92672"&gt;.&lt;/span&gt;generations[&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;][&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;text)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(generate_res&lt;span style="color:#f92672"&gt;.&lt;/span&gt;generations[&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;][&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;text)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;ç‚ºä»€éº¼äººé¡æœƒèµ°è·¯?
å› ç‚ºé³¥ä¸å–œæ­¡åƒè·¯ä¸Šçš„æ±è¥¿!
æœ‰ä¸€å€‹å¹´è¼•å¥³å­©ï¼Œå¥¹èˆ‡è‡ªå·±çš„çˆ¶è¦ªéå¸¸ç›¸æ„›ã€‚å¯æ˜¯å› ç‚ºå·¥ä½œå¤ªå¿™ï¼Œçˆ¸çˆ¸é•·æœŸå¤–å‡ºï¼Œä¸¦ä¸”å¿½ç•¥äº†å¥³å…’ã€‚ç›´åˆ°ä¸€å¤©ï¼Œä¸€å ´é‡å¤§äº‹æ•…è®“çˆ¸çˆ¸å»ä¸–ã€‚åœ¨æ‚²ç—›ä¸­ï¼Œå¥³å­©ç™¼ç¾äº†ä¹‹å‰çˆ¶è¦ªçµ¦å¥¹çš„ä¿¡ï¼Œè£¡é¢æœ‰å°å¥¹çš„æº«æš–å‘Šç™½å’Œæ·±æƒ…æ‡·å¿µã€‚é€™å€‹æ¶ˆæ¯ä½¿å¥¹å¿ƒç—›æ¬²è£‚ï¼Œå¾æ­¤å¥³å­©å†ä¹Ÿæ²’æœ‰æ¢å¾©éã€‚
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="è‡ªå®šç¾©-llm-æ¨¡çµ„"&gt;è‡ªå®šç¾© LLM æ¨¡çµ„
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç”¨æ–¼å°è£ Langchain å°šæœªæ”¯æŒçš„å¤§å‹èªè¨€æ¨¡å‹&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç”¨ä¾†æ¨¡æ“¬æ¸¬è©¦&lt;/li&gt;
&lt;li&gt;è‡ªè¡Œå®šç¾©ç•¶ LLM è¢«èª¿ç”¨æ™‚ï¼Œå¦‚ä½•æ ¹æ“šè¼¸å…¥çš„æ–‡æœ¬å…§å®¹ä¾†è¼¸å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_code.ipynb" target="_blank" rel="noopener"
&gt;è©³ç´°ç¨‹å¼è«‹åƒé–±&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
&gt;https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>å¦‚ä½•ä½¿ç”¨ SSH é€²è¡Œé ç«¯é€£ç·šæ•™å­¸</title><link>https://Dandelionlibra.github.io/post/ssh/how-to-use-ssh/</link><pubDate>Thu, 10 Jul 2025 16:03:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/ssh/how-to-use-ssh/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±"&gt;å…§å®¹å¤§ç¶±
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;SSH åŸºæœ¬ä»‹ç´¹&lt;/li&gt;
&lt;li&gt;å®‰è£ SSH å®¢æˆ¶ç«¯
&lt;ul&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;Mac&lt;/li&gt;
&lt;li&gt;Windows&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç”¢ç”Ÿ SSH é‡‘é‘°&lt;/li&gt;
&lt;li&gt;è¨­å®š SSH é€£ç·š
&lt;ul&gt;
&lt;li&gt;å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ&lt;/li&gt;
&lt;li&gt;æ¸¬è©¦é€£ç·š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ VSCode é€é SSH é ç«¯é–‹ç™¼&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Git é€é SSH é€²è¡Œç‰ˆæœ¬æ§åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åƒè€ƒè³‡æ–™&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="1-ssh-åŸºæœ¬ä»‹ç´¹"&gt;1. SSH åŸºæœ¬ä»‹ç´¹
&lt;/h2&gt;&lt;p&gt;SSHï¼ˆSecure Shellï¼‰æ˜¯ä¸€ç¨®åŠ å¯†çš„ç¶²è·¯å”å®šï¼Œç”¨æ–¼åœ¨ä¸å®‰å…¨çš„ç¶²è·¯ä¸Šå®‰å…¨åœ°é€²è¡Œé ç«¯ç™»å…¥èˆ‡å…¶ä»–ç¶²è·¯æœå‹™ã€‚å¸¸è¦‹ç”¨é€”åŒ…æ‹¬é ç«¯ä¼ºæœå™¨ç®¡ç†ã€æª”æ¡ˆå‚³è¼¸ç­‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-å®‰è£-ssh-å®¢æˆ¶ç«¯"&gt;2. å®‰è£ SSH å®¢æˆ¶ç«¯
&lt;/h2&gt;&lt;h3 id="linux"&gt;Linux
&lt;/h3&gt;&lt;p&gt;å¤§å¤šæ•¸ Linux ç™¼è¡Œç‰ˆé è¨­å·²å®‰è£ OpenSSHã€‚è‹¥æœªå®‰è£ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo apt install openssh-client
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="mac"&gt;Mac
&lt;/h3&gt;&lt;p&gt;macOS é è¨­å·²å®‰è£ SSH å®¢æˆ¶ç«¯ï¼Œå¯ç›´æ¥åœ¨çµ‚ç«¯æ©Ÿä½¿ç”¨ &lt;code&gt;ssh&lt;/code&gt; æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;h3 id="windows"&gt;Windows
&lt;/h3&gt;&lt;p&gt;å»ºè­°å®‰è£ &lt;a class="link" href="https://gitforwindows.org/" target="_blank" rel="noopener"
&gt;Git for Windows&lt;/a&gt; æˆ– &lt;a class="link" href="https://aka.ms/terminal" target="_blank" rel="noopener"
&gt;Windows Terminal&lt;/a&gt;ã€‚Windows 10 ä»¥ä¸Šå¯å•Ÿç”¨å…§å»º OpenSSHï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é–‹å•Ÿã€Œè¨­å®šã€&amp;gt;ã€Œæ‡‰ç”¨ç¨‹å¼ã€&amp;gt;ã€Œé¸æ“‡æ€§åŠŸèƒ½ã€ã€‚&lt;/li&gt;
&lt;li&gt;æ‰¾åˆ°ä¸¦å®‰è£ã€ŒOpenSSH Clientã€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="3-ç”¢ç”Ÿ-ssh-é‡‘é‘°"&gt;3. ç”¢ç”Ÿ SSH é‡‘é‘°
&lt;/h2&gt;&lt;p&gt;åœ¨æœ¬åœ°ç«¯ç”¢ç”Ÿ SSH é‡‘é‘°ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-keygen -t rsa -b &lt;span style="color:#ae81ff"&gt;4096&lt;/span&gt; -C &lt;span style="color:#e6db74"&gt;&amp;#34;your_email@example.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¾ç…§æç¤ºè¨­å®šæª”æ¡ˆåç¨±èˆ‡å¯†ç¢¼ã€‚é è¨­æœƒç”¢ç”Ÿæ–¼ &lt;code&gt;~/.ssh/id_rsa&lt;/code&gt;ï¼ˆç§é‘°ï¼‰èˆ‡ &lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;ï¼ˆå…¬é‘°ï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ssh-keygen&lt;/code&gt;:
&lt;ul&gt;
&lt;li&gt;Private key: Stored locally, default path is &lt;code&gt;~/.ssh/id_rsa&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Public key: Placed on the server to enable passwordless login, default path is &lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;: Assign the key type&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-b&lt;/code&gt;: Assign the key length&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-C&lt;/code&gt;: Adds a comment to the key for identifying the user and purpose&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Press Enter save as default, if exist same name key, will prompt if you want to cover it or not, if not, need to use other key name.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;C:&lt;span style="color:#ae81ff"&gt;\W&lt;/span&gt;INDOWS&lt;span style="color:#ae81ff"&gt;\s&lt;/span&gt;ystem32&amp;gt;ssh-keygen -t rsa -b &lt;span style="color:#ae81ff"&gt;4096&lt;/span&gt; -C &lt;span style="color:#e6db74"&gt;&amp;#34;test@gmail.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Generating public/private rsa key pair.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter file in which to save the key &lt;span style="color:#f92672"&gt;(&lt;/span&gt;C:&lt;span style="color:#ae81ff"&gt;\U&lt;/span&gt;sers&lt;span style="color:#ae81ff"&gt;\u&lt;/span&gt;sername/.ssh/id_rsa&lt;span style="color:#f92672"&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# press enter login without passwordï¼ˆå®‰å…¨æ€§è¼ƒä½ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è¨­å®šå¯†ç¢¼çš„è©±ï¼Œå³ä½¿ private key è¢«ç›œï¼Œä»é ˆå¯†ç¢¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter passphrase &lt;span style="color:#f92672"&gt;(&lt;/span&gt;empty &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; no passphrase&lt;span style="color:#f92672"&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Enter same passphrase again:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Your identification has been saved in C:&lt;span style="color:#ae81ff"&gt;\U&lt;/span&gt;sers&lt;span style="color:#ae81ff"&gt;\u&lt;/span&gt;sername/.ssh/id_rsa
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Your public key has been saved in C:&lt;span style="color:#ae81ff"&gt;\U&lt;/span&gt;sers&lt;span style="color:#ae81ff"&gt;\u&lt;/span&gt;sername/.ssh/id_rsa.pub
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;The key fingerprint is:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;SHA256:...çœç•¥... test@gmail.com
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;The key&lt;span style="color:#960050;background-color:#1e0010"&gt;&amp;#39;&lt;/span&gt;s randomart image is:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+---&lt;span style="color:#f92672"&gt;[&lt;/span&gt;RSA 4096&lt;span style="color:#f92672"&gt;]&lt;/span&gt;----+
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;...çœç•¥...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="4-è¨­å®š-ssh-é€£ç·š"&gt;4. è¨­å®š SSH é€£ç·š
&lt;/h2&gt;&lt;h3 id="å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ"&gt;å°‡å…¬é‘°åŠ å…¥é ç«¯ä¸»æ©Ÿ
&lt;/h3&gt;&lt;p&gt;å°‡æœ¬åœ°çš„å…¬é‘°å…§å®¹ (&lt;code&gt;~/.ssh/id_rsa.pub&lt;/code&gt;) è¤‡è£½åˆ°é ç«¯ä¸»æ©Ÿçš„ &lt;code&gt;~/.ssh/authorized_keys&lt;/code&gt; æª”æ¡ˆä¸­ï¼Œå¯ä½¿ç”¨æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh-copy-id user@remote_host
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–æ‰‹å‹•è¤‡è£½æœ¬åœ°å…§å®¹åˆ° server ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;On Linux or Mac, you can use the following command in the terminal to display your public key:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cat ~/.ssh/id_rsa.pub
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="æ¸¬è©¦é€£ç·š"&gt;æ¸¬è©¦é€£ç·š
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ssh user@remote_host
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è‹¥æˆåŠŸç™»å…¥ä¸¦ä¸”ä¸éœ€è¼¸å…¥å¯†ç¢¼å³è¨­å®šå®Œæˆã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="5-å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ"&gt;5. å¸¸è¦‹æ‡‰ç”¨æƒ…å¢ƒ
&lt;/h2&gt;&lt;h3 id="ä½¿ç”¨-vscode-é€é-ssh-é ç«¯é–‹ç™¼"&gt;ä½¿ç”¨ VSCode é€é SSH é ç«¯é–‹ç™¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£ &lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh" target="_blank" rel="noopener"
&gt;Remote - SSH æ“´å……å¥—ä»¶&lt;/a&gt;ã€‚&lt;br&gt;
åœ¨ VSCode ä¸­å¯çœ‹åˆ° Remote-SSH åœ–ç¤ºï¼Œé»æ“Šå¾Œå¯é€²è¡Œé€£ç·šè¨­å®šï¼š
&lt;img src="https://Dandelionlibra.github.io/image/Remote-SSH.png"
loading="lazy"
alt="Remote-SSH"
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é»æ“Š VScode å·¦ä¸‹è§’çš„é›™ç®­é ­åœ–æ¨™ï¼Œæˆ–è€…æŒ‰ä¸‹ &lt;code&gt;F1&lt;/code&gt;ï¼Œè¼¸å…¥ &lt;code&gt;Remote-SSH: Connect to Host...&lt;/code&gt;ï¼Œé¸æ“‡æˆ–æ–°å¢ä¸»æ©Ÿã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# remote_host è¼¸å…¥ä¼ºæœå™¨ ip ä½å€
user@remote_host [-p port_number]
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é€£ç·šå¾Œè¼¸å…¥ç”¨æˆ¶åœ¨ server ä¸Šçš„å¯†ç¢¼å³å¯åœ¨é ç«¯ä¸»æ©Ÿä¸Šé–‹ç™¼ï¼Œæˆ–è€…å·²ç¶“è¨­å®šéé‡‘é‘°å¯ä¸ç”¨å†è¼¸å¯†ç¢¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="ä½¿ç”¨-git-é€é-ssh-é€²è¡Œç‰ˆæœ¬æ§åˆ¶"&gt;ä½¿ç”¨ Git é€é SSH é€²è¡Œç‰ˆæœ¬æ§åˆ¶
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å°‡å…¬é‘°åŠ å…¥ Git æœå‹™ï¼ˆå¦‚ GitHubã€GitLabï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ SSH æ–¹å¼ clone æˆ– pushï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git clone git@github.com:username/repo.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="6-åƒè€ƒè³‡æ–™"&gt;6. åƒè€ƒè³‡æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.openssh.com/manual.html" target="_blank" rel="noopener"
&gt;OpenSSH å®˜æ–¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh" target="_blank" rel="noopener"
&gt;GitHub SSH æ•™å­¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://code.visualstudio.com/docs/remote/ssh" target="_blank" rel="noopener"
&gt;VSCode Remote SSH å®˜æ–¹èªªæ˜&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>LangChain å®‰è£èˆ‡åŸºæœ¬ä½¿ç”¨-1</title><link>https://Dandelionlibra.github.io/post/langchain/uselangchain-1/</link><pubDate>Sun, 06 Jul 2025 15:33:11 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/uselangchain-1/</guid><description>&lt;h1 id="å®‰è£-langchain"&gt;å®‰è£ LangChain
&lt;/h1&gt;&lt;p&gt;ä½¿ç”¨ pip æŒ‡ä»¤å®‰è£ LangChain æ ¸å¿ƒå¥—ä»¶ï¼Œå…¶ä¸­æä¾›å„çµ„ä»¶èˆ‡åŸºæœ¬æ¡†æ¶ã€‚&lt;br&gt;
LangChain ç›¸é—œå¥—ä»¶çš„è©³ç´°è³‡è¨Šå¯ä»¥åƒè€ƒ&lt;a class="link" href="https://python.langchain.com/api_reference/" target="_blank" rel="noopener"
&gt;langchain å®˜æ–¹æ–‡ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install langchain
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®‰è£ LangChain ç¤¾ç¾¤å¥—ä»¶ï¼Œå…¶ä¸­åŒ…å«ç”±ç¤¾ç¾¤ç¶­è­·çš„ç¬¬ä¸‰æ–¹æ•´åˆæ¨¡çµ„ã€‚&lt;br&gt;
éš¨è‘— LangChain çš„æ¨¡çµ„åŒ–ï¼Œè¨±å¤šåŸæœ¬å…§å»ºæ–¼æ ¸å¿ƒå¥—ä»¶çš„æ•´åˆåŠŸèƒ½è¢«è½‰ç§»åˆ°æ­¤å¥—ä»¶ä¸­ï¼Œä»¥ä¿æŒæ ¸å¿ƒå¥—ä»¶çš„è¼•é‡åŒ–ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install langchain_community
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®‰è£ LangChain èˆ‡æœ¬åœ° Ollama æ¨¡å‹æ•´åˆå°ˆç”¨é©…å‹•ï¼Œ
å¯ä»¥åœ¨ LangChain ä¸­ä½¿ç”¨æœ¬åœ° Ollama æ¨¡å‹ä½œç‚º LLMã€‚
LangChain å®˜æ–¹ç¶­è­·çš„å°ˆé–€ç”¨æ–¼æ•´åˆæœ¬åœ° Ollama LLM çš„æ’ä»¶å¥—ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å› ç‚º LangChain åœ¨ 0.3.1 å¾Œå°‡åŸæœ¬å…§å»ºæ–¼ &lt;code&gt;langchain_community.llms.Ollama&lt;/code&gt; çš„ Ollama æ•´åˆæ¨¡çµ„ æ‹†åˆ†ç‚ºç¨ç«‹çš„ &lt;code&gt;langchain-ollama&lt;/code&gt; å¥—ä»¶ã€‚&lt;br&gt;
è©³ç´°è³‡è¨Šå¯ä»¥åƒè€ƒ&lt;a class="link" href="https://python.langchain.com/api_reference/ollama/index.html" target="_blank" rel="noopener"
&gt;langchain å®˜æ–¹æ–‡ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install langchain-ollama
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id="ç°¡å–®æ‡‰ç”¨"&gt;ç°¡å–®æ‡‰ç”¨
&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ‰€æœ‰ç¯„ä¾‹ç¨‹å¼ç¢¼éƒ½å¯ä»¥åœ¨ &lt;a class="link" href="https://github.com/Dandelionlibra/Dandelionlibra.github.io/blob/main/content/post/langchain/LangChain_code.ipynb" target="_blank" rel="noopener"
&gt;Jupyter Notebook&lt;/a&gt; ä¸­æ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;h2 id="æ–‡æœ¬ç”Ÿæˆ"&gt;æ–‡æœ¬ç”Ÿæˆ
&lt;/h2&gt;&lt;p&gt;LangChain ä¸­ LLM çš„æœ€åŸºæœ¬åŠŸèƒ½æ˜¯æ ¹æ“šè¼¸å…¥çš„æ–‡æœ¬ç”Ÿæˆæ–°çš„æ–‡æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;è¨»:ä¸æ¸…æ¥š Ollama å¦‚ä½•ä½¿ç”¨çš„å¯ä»¥å»çœ‹æˆ‘é—œæ–¼ Ollama çš„åŸºç¤ä½¿ç”¨æ–‡ç« ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from langchain_ollama import OllamaLLM
llm = OllamaLLM(model=&amp;#34;llama3.1:8b&amp;#34;)
response = llm.invoke(&amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;)
print(response)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;temperature ç”¨æ–¼æ§åˆ¶ LLM ç”Ÿæˆå›ç­”çš„éš¨æ©Ÿæ€§èˆ‡å‰µé€ æ€§ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;code&gt;temperature&lt;/code&gt; å€¼&lt;/th&gt;
&lt;th&gt;è¡Œç‚ºç‰¹æ€§&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®Œå…¨å¯é‡ç¾ï¼Œå¹¾ä¹ç¸½æ˜¯çµ¦å‡ºç›¸åŒå›ç­”ï¼Œé©åˆéœ€è¦æº–ç¢ºä¸”ç©©å®šè¼¸å‡ºæ™‚ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;0.3 ~ 0.7&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸­åº¦å‰µé€ æ€§ï¼Œé©åˆä¸€èˆ¬æ‡‰ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;1.0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;é«˜åº¦å‰µé€ æ€§ï¼Œå›ç­”å¯èƒ½æ›´å¤šæ¨£åŒ–èˆ‡éš¨æ©Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;&amp;gt;1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;éå¸¸éš¨æ©Ÿï¼Œå›ç­”å¯èƒ½è·³è„«å¸¸è¦&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¾‹å¦‚å¯ä»¥åœ¨å‰›å‰›çš„ response ä¸­ä½¿ç”¨ options å°‡ temperature è¨­ç‚º 0ï¼Œä½¿è¼¸å‡ºæ¯æ¬¡éƒ½æœƒå¾—åˆ°ä¸€æ¨£çš„ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;response = llm.invoke(&amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;, options={&amp;#34;temperature&amp;#34;: 0})
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="èŠå¤©æ¨¡çµ„"&gt;èŠå¤©æ¨¡çµ„
&lt;/h2&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;from langchain_ollama import ChatOllama
from langchain.schema import HumanMessage
Chatllm = ChatOllama(model=&amp;#34;llama3.1:8b&amp;#34;)
test = &amp;#34;å¹«æˆ‘å–ä¸€å€‹æ–‡é›…çš„ä¸­åœ‹ç”·å­©å&amp;#34;
messages = [HumanMessage(content=test)]
response = Chatllm.invoke(messages)
print(response)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="ollamallm-vschatollama"&gt;OllamaLLM vs.ChatOllama
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é …ç›®&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;OllamaLLM&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ChatOllama&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ä¾†æº&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;from langchain_ollama import OllamaLLM&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;from langchain_ollama import ChatOllama&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–®è¼ªæ–‡å­—ç”Ÿæˆï¼ˆSingle-turn LLMï¼‰&lt;/td&gt;
&lt;td&gt;å¤šè¼ªå°è©±ï¼ˆChat-based LLMï¼‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å…¸å‹æ‡‰ç”¨å ´æ™¯&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;å–®æ¬¡å›ç­”ã€æ‰¹æ¬¡ç”Ÿæˆè³‡æ–™ã€æ–‡å­—ç”Ÿæˆå·¥å…·&lt;/td&gt;
&lt;td&gt;èŠå¤©æ©Ÿå™¨äººã€å¤šè¼ªä¸Šä¸‹æ–‡å°è©±ã€Memory çµåˆ&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;è¼¸å…¥å‹æ…‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;str&lt;/code&gt;ï¼ˆç´”æ–‡å­— promptï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;List[BaseMessage]&lt;/code&gt;ï¼ˆåŒ…å« &lt;code&gt;SystemMessage&lt;/code&gt;, &lt;code&gt;HumanMessage&lt;/code&gt;, &lt;code&gt;AIMessage&lt;/code&gt;ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›å‚³å‹æ…‹&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;str&lt;/code&gt;ï¼ˆæ–‡å­—å›æ‡‰ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;AIMessage(content='...')&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å›å‚³å…§å®¹å­˜å–&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç›´æ¥ä½¿ç”¨ &lt;code&gt;print(response)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ &lt;code&gt;print(response.content)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;æ˜¯å¦æ”¯æ´å¤šè¼ªä¸Šä¸‹æ–‡&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é©åˆçµåˆ Agent&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ä½œç‚ºæ¨è«–å¼•æ“&lt;/td&gt;
&lt;td&gt;ä½œç‚º Chat Agent å°è©±å¼•æ“&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;å¯æ­é… Memory&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;å¯æ­é… Memory å¯¦ç¾ä¸Šä¸‹æ–‡æŒçºŒå°è©±&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="éˆå¼çµæ§‹"&gt;éˆå¼çµæ§‹
&lt;/h2&gt;&lt;p&gt;é€£æ¥å¤šå€‹ LLM æ¨¡çµ„ã€‚
&lt;img src="https://Dandelionlibra.github.io/image/LLMChain.png"
loading="lazy"
alt="LLMChain"
&gt;&lt;/p&gt;
&lt;h3 id="å¦‚ä½•é¿å…é‡è¤‡å®šç¾©ç›¸ä¼¼çš„-llm-æ¨¡çµ„"&gt;å¦‚ä½•é¿å…é‡è¤‡å®šç¾©ç›¸ä¼¼çš„ LLM æ¨¡çµ„?
&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨æç¤ºæ¨¡æ¿(prompt template)å»é¿å…é‡è¤‡å®šç¾©åŠŸèƒ½ç›¸ä¼¼çš„çµ„ä»¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.prompts &lt;span style="color:#f92672"&gt;import&lt;/span&gt; PromptTemplate
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;llm_model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;user_prompt &lt;span style="color:#f92672"&gt;=&lt;/span&gt; PromptTemplate&lt;span style="color:#f92672"&gt;.&lt;/span&gt;from_template(&lt;span style="color:#e6db74"&gt;&amp;#34;å¹«æˆ‘å–ä¸€å€‹&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{å½¢å®¹è©}{å°è±¡}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;å, ä¸¦å°æ‡‰ä¸€å€‹å°åã€‚&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(user_prompt&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(å°è±¡ &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;å¯µç‰©&amp;#39;&lt;/span&gt;, å½¢å®¹è© &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;å¯æ„›çš„&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(user_prompt&lt;span style="color:#f92672"&gt;.&lt;/span&gt;format(å°è±¡ &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;ç”·å­©&amp;#39;&lt;/span&gt;, å½¢å®¹è© &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;æ–‡é›…çš„&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.chains &lt;span style="color:#f92672"&gt;import&lt;/span&gt; LLMChain
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;chain &lt;span style="color:#f92672"&gt;=&lt;/span&gt; LLMChain(llm&lt;span style="color:#f92672"&gt;=&lt;/span&gt;llm_model, prompt&lt;span style="color:#f92672"&gt;=&lt;/span&gt;user_prompt)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(chain&lt;span style="color:#f92672"&gt;.&lt;/span&gt;run(å°è±¡ &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;å°ç‹—&amp;#39;&lt;/span&gt;, å½¢å®¹è© &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;æœ‰è¶£çš„&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="ä»£ç†äºº"&gt;ä»£ç†äºº
&lt;/h2&gt;&lt;p&gt;ä¸»è¦ç”¨æ–¼è™•ç†éˆå¼çµæ§‹ç„¡æ³•è™•ç†çš„å•é¡Œï¼Œä¸¦å¯é”æˆå‹•æ…‹æ±ºç­–ã€‚
èˆ‰ä¾‹è€Œè¨€ï¼Œä¸€èˆ¬å¤§å‹èªè¨€æ¨¡å‹æ˜¯ç„¡æ³•è¯ç¶²çš„ï¼Œè€Œç‚ºäº†è®“ LangChain å»ç²å¾—æœ€æ–°çš„å…§å®¹æˆ–è€…ç¾æœ‰è³‡æ–™åº«ä¸­ä¸å­˜åœ¨çš„è³‡è¨Šï¼Œå°±éœ€è¦ä½¿ç”¨ä»£ç†äºº (Agents) çµ„ä»¶é”æˆè¯ç¶²ã€‚&lt;/p&gt;
&lt;h3 id="è¡Œç‚ºæ–¹å¼"&gt;è¡Œç‚ºæ–¹å¼
&lt;/h3&gt;&lt;p&gt;ä»£ç†äººå¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—é è¨­çš„å·¥å…·&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¸æ“‡å·¥å…·&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å·¥å…·&lt;/li&gt;
&lt;li&gt;è§€æ¸¬ä¸¦è™•ç†å·¥å…·ä½¿ç”¨çµæœ&lt;/li&gt;
&lt;li&gt;é‡è¤‡ä»¥ä¸Šæ­¥é©Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ç¯„ä¾‹"&gt;ç¯„ä¾‹
&lt;/h3&gt;&lt;p&gt;ä½¿ä»£ç†äººèƒ½å®Œæˆæ•¸å­¸é‹ç®—ä»»å‹™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;step1: å®šç¾©åº•å±¤ LLM æ¨¡çµ„&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;llm_model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;step2: å®šç¾©å…è¨±ä»£ç†äººä½¿ç”¨çš„å·¥å…·&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.agents &lt;span style="color:#f92672"&gt;import&lt;/span&gt; initialize_agent, load_tools
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tools &lt;span style="color:#f92672"&gt;=&lt;/span&gt; load_tools([&lt;span style="color:#e6db74"&gt;&amp;#34;llm-math&amp;#34;&lt;/span&gt;], llm&lt;span style="color:#f92672"&gt;=&lt;/span&gt;llm_model)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;step3: åˆå§‹åŒ–ä»£ç†äºº&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;agent &lt;span style="color:#f92672"&gt;=&lt;/span&gt; initialize_agent(tools, llm_model, agent&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;zero-shot-react-description&amp;#34;&lt;/span&gt;, verbose&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;step4: é‹è¡Œä»£ç†äºº&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;agent&lt;span style="color:#f92672"&gt;.&lt;/span&gt;invoke(&lt;span style="color:#e6db74"&gt;&amp;#34;å¦‚æœæˆ‘æœ‰ 100 å…ƒï¼Œè²·äº† 3 å€‹è˜‹æœï¼Œæ¯å€‹è˜‹æœ 10 å…ƒï¼Œå‰©ä¸‹å¤šå°‘éŒ¢ï¼Ÿ&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="èŠå¤©ç´€éŒ„"&gt;èŠå¤©ç´€éŒ„
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain_ollama &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OllamaLLM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;llm_model &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OllamaLLM(model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; langchain.chains &lt;span style="color:#f92672"&gt;import&lt;/span&gt; ConversationChain
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conversation &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ConversationChain(llm&lt;span style="color:#f92672"&gt;=&lt;/span&gt;llm_model, verbose&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conversation&lt;span style="color:#f92672"&gt;.&lt;/span&gt;run(&lt;span style="color:#e6db74"&gt;&amp;#34;æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡º&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.
Current conversation:
Human: æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?
AI:
&amp;gt; Finished chain.
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;#39;å•Šå“ˆï¼ä½ æƒ³è¦ä¸€å€‹è°æ˜åˆå¯æ„›çš„ä¼´ä¾¶å—ï¼Ÿæˆ‘æœ‰ä¸€äº›è¶…å¥½çš„å»ºè­°ï¼åŸºæ–¼ä½ çš„æè¿°ï¼Œæˆ‘æ¨æ¸¬ä½ å¯èƒ½æ˜¯æ–°æ‰‹ç‹—ä¸»äººï¼Œæ‰€ä»¥æˆ‘è¦é¦–å…ˆä»‹ç´¹ä¸€ä¸‹æœ€é©åˆåˆå­¸è€…çš„çŠ¬ç¨®ã€‚æœ‰äº†é€™äº›çŠ¬ç¨®ï¼Œä½ å°±èƒ½è¼•é¬†åœ°åŸ¹é¤Šèµ·ä¸€å€‹è½è©±åˆå–„è‰¯çš„ä¼´ä¾¶ã€‚\n\nå…¶ä¸­ï¼Œæ‹‰å¸ƒæ‹‰å¤šçŠ¬å’Œé‡‘æ°é«”å‹å°çµçŠ¬ï¼ˆCavalier King Charles Spanielï¼‰éƒ½å¾ˆå—äººå–œæ„›ï¼Œ.......ä½ å°æ–¼çŠ¬ç¨®çš„åå¥½æ˜¯ä»€éº¼ï¼Ÿä½ æƒ³è¦ä¸€éš»å¤§çŠ¬é‚„æ˜¯ä¸€éš»å°çŠ¬å‘¢ï¼Ÿ&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;conversation&lt;span style="color:#f92672"&gt;.&lt;/span&gt;run(&lt;span style="color:#e6db74"&gt;&amp;#34;é‚£è²“å‘¢?&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å‡º&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.
Current conversation:
Human: æˆ‘æƒ³é¤Šä¸€éš»è½è©±åˆå¥½ç…§é¡§çš„å‹•ç‰©ï¼Œä½ æœ‰ç”šéº¼æ¨è–¦å—?
AI: å•Šå“ˆï¼ä½ æƒ³è¦ä¸€å€‹è°æ˜åˆå¯æ„›çš„ä¼´ä¾¶å—ï¼Ÿæˆ‘æœ‰ä¸€äº›è¶…å¥½çš„å»ºè­°ï¼åŸºæ–¼ä½ çš„æè¿°ï¼Œæˆ‘æ¨æ¸¬ä½ å¯èƒ½æ˜¯æ–°æ‰‹ç‹—ä¸»äººï¼Œæ‰€ä»¥æˆ‘è¦é¦–å…ˆä»‹ç´¹ä¸€ä¸‹æœ€é©åˆåˆå­¸è€…çš„çŠ¬ç¨®ã€‚æœ‰äº†é€™äº›çŠ¬ç¨®ï¼Œä½ å°±èƒ½è¼•é¬†åœ°åŸ¹é¤Šèµ·ä¸€å€‹è½è©±åˆå–„è‰¯çš„ä¼´ä¾¶ã€‚
...çœç•¥...
æœ€å¾Œï¼Œæˆ‘æƒ³å•ä¸€ä¸‹ï¼Œä½ å°æ–¼çŠ¬ç¨®çš„åå¥½æ˜¯ä»€éº¼ï¼Ÿä½ æƒ³è¦ä¸€éš»å¤§çŠ¬é‚„æ˜¯ä¸€éš»å°çŠ¬å‘¢ï¼Ÿ
Human: é‚£è²“å‘¢?
AI:
&amp;gt; Finished chain.
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;#39;è²“ï¼æˆ‘å¾ˆæ¨‚æ„å¹«åŠ©ä½ æ‰¾ä¸€å€‹é©åˆä½ çš„è²“ä¼´ä¾¶ï¼ä½†æ˜¯ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä¹‹å‰ä¸»è¦æ˜¯åœ¨èªªç‹—çš„è©±é¡Œï¼Œå› ç‚ºæˆ‘çš„è¨“ç·´è³‡æ–™é›†ä¸­åœ¨çŠ¬é¡ä¸Šã€‚\n\nä½†æ˜¯åœ¨è²“é¡æ–¹é¢ï¼Œæˆ‘å¯ä»¥æä¾›ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚...çœç•¥...æˆ–è€…ä½ å°è²“çš„éœ€æ±‚å’Œç”Ÿæ´»æ–¹å¼æ˜¯å¦æœ‰æ‰€è®ŠåŒ–ï¼Ÿ&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
&gt;https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Introduction langchain</title><link>https://Dandelionlibra.github.io/post/langchain/introlangchain/</link><pubDate>Sun, 06 Jul 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/langchain/introlangchain/</guid><description>&lt;h1 id="ä»‹ç´¹-langchain"&gt;ä»‹ç´¹ LangChain
&lt;/h1&gt;&lt;p&gt;LangChain ç‚º 2022 å¹´ç™¼å¸ƒçš„é–‹æºæ¡†æ¶ï¼Œä¸»è¦ç”¨æ–¼é–‹ç™¼ç”±èªè¨€æ¨¡å‹é©…å‹•çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¯é€£æ¥å¤šç¨®èªè¨€æ¨¡å‹èˆ‡å¤–éƒ¨å·¥å…·ã€‚&lt;br&gt;
&lt;a class="link" href="https://www.langchain.com" target="_blank" rel="noopener"
&gt;LangChain å®˜æ–¹ç¶²ç«™&lt;/a&gt;
&lt;img src="https://Dandelionlibra.github.io/image/ecosystem_packages-32943b32657e7a187770c9b585f22a64.png"
loading="lazy"
alt="LLMChain"
&gt;&lt;/p&gt;
&lt;h2 id="å„ªé»"&gt;å„ªé»
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;é–‹æºå·¥å…·&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šç¨®é–‹æºæ¨¡å‹&lt;/li&gt;
&lt;li&gt;å¯æ•´åˆå¤šé …å¤–éƒ¨æœå‹™&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="ä¸»è¦çµ„ä»¶"&gt;ä¸»è¦çµ„ä»¶
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ¨¡å‹ (Models)
&lt;ul&gt;
&lt;li&gt;èªè¨€æ¨¡å‹ã€æ–‡æœ¬åµŒå…¥æ¨¡å‹ç­‰ç­‰&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¨˜æ†¶é«” (Memory)
&lt;ul&gt;
&lt;li&gt;çŸ­æœŸèˆ‡é•·æœŸè¨˜æ†¶ï¼Œç”¨æ–¼å„²å­˜èˆ‡æª¢ç´¢èŠå¤©æ­·å²&lt;/li&gt;
&lt;li&gt;åŒ…å«å°è©±ç·©è¡è¨˜æ†¶é«”ã€å¯¦é«”è¨˜æ†¶é«”ã€å‘é‡å„²å­˜è¨˜æ†¶é«”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä»£ç† (Agents)
&lt;ul&gt;
&lt;li&gt;æ¨ç†å¼•æ“&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ ¹æ“šçµ¦å®šçš„æƒ…å¢ƒèˆ‡æ•¸æ“šåšå‡ºåˆç†çš„æ±ºç­–èˆ‡æ¨ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;LangChain è—‰ç”±é€™äº›çµ„ä»¶é€£çµå„ç¨®æ¨¡å‹èˆ‡å·¥å…·ï¼Œä»¥é”æˆæª¢ç´¢èˆ‡åˆ†ææ•¸æ“šï¼Œä¸¦å¯é€²è¡Œå€‹æ€§åŒ–çš„è¨‚è£½ã€‚&lt;/p&gt;
&lt;h2 id="ä¸»è¦è§£æ±ºå•é¡Œ"&gt;ä¸»è¦è§£æ±ºå•é¡Œ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¦‚ä½•æ ¼å¼åŒ–è¼¸å‡º?&lt;/li&gt;
&lt;li&gt;å¦‚ä½•è¼¸å‡ºå¾ˆé•·çš„æ–‡æœ¬?&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å‘¼å«å¤šæ¬¡ api?&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ä½¿ api èƒ½å‘¼å«å¤–éƒ¨çš„æœå‹™ã€å·¥å…·?&lt;/li&gt;
&lt;li&gt;å¦‚ä½•é€²è¡Œæ¨™æº–åŒ–çš„é–‹ç™¼?&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="reference"&gt;Reference
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://python.langchain.com/docs/introduction/" target="_blank" rel="noopener"
&gt;https://python.langchain.com/docs/introduction/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/watch?v=feFp5TbrVMo" target="_blank" rel="noopener"
&gt;https://www.youtube.com/watch?v=feFp5TbrVMo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI" target="_blank" rel="noopener"
&gt;https://www.youtube.com/playlist?list=PLAr9oL1AT4OElxInUijCzCgU3CpgHTjTI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>How to install and use Ollama?</title><link>https://Dandelionlibra.github.io/post/ollama/ollama/</link><pubDate>Sat, 05 Jul 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/ollama/ollama/</guid><description>&lt;h1 id="ä»‹ç´¹-ollama"&gt;ä»‹ç´¹ Ollama
&lt;/h1&gt;&lt;p&gt;Ollama æ˜¯ä¸€å€‹èƒ½åœ¨ æœ¬åœ°ï¼ˆWindows/Mac/Linuxï¼‰åŸ·è¡Œå¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œ Vision Language Modelï¼ˆVLMï¼‰ çš„æ¡†æ¶ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é–‹æºå·¥å…·&lt;/li&gt;
&lt;li&gt;åœ¨æœ¬åœ°ç«¯é‹è¡Œå¤§å‹èªè¨€æ¨¡å‹&lt;/li&gt;
&lt;li&gt;é›¢ç·šç‰¹æ€§ä»¥ä¿è­·éš±ç§&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="å®‰è£-ollama"&gt;å®‰è£ Ollama
&lt;/h1&gt;&lt;h2 id="windows"&gt;Windows
&lt;/h2&gt;&lt;p&gt;è‡³ &lt;a class="link" href="https://ollama.com/" target="_blank" rel="noopener"
&gt;Ollama å®˜æ–¹ç¶²ç«™&lt;/a&gt;
ä¸‹è¼‰ windows ç‰ˆæœ¬å¾Œï¼Œé»æ“ŠåŸ·è¡Œæª”å®‰è£ã€‚&lt;br&gt;
å®‰è£å¾Œæ–¼çµ‚ç«¯æ©Ÿä¸­æ¸¬è©¦æ˜¯å¦å®‰è£æˆåŠŸã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ollama --help
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="mac"&gt;Mac
&lt;/h2&gt;&lt;p&gt;åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„ä¸‹è¼‰æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;brew install ollama
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="linux"&gt;Linux
&lt;/h2&gt;&lt;p&gt;åƒè€ƒå®˜æ–¹æ–‡ä»¶çš„ä¸‹è¼‰æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;curl -fsSL https://ollama.com/install.sh | sh
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id="å¦‚ä½•ä½¿ç”¨-ollama"&gt;å¦‚ä½•ä½¿ç”¨ Ollama?
&lt;/h1&gt;&lt;h3 id="åœ¨æœ¬åœ°å•Ÿå‹•æœå‹™"&gt;åœ¨æœ¬åœ°å•Ÿå‹•æœå‹™
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;ollama serve
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;C:\Users\user&amp;gt;ollama serve
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="åŸ·è¡Œèªè¨€æ¨¡å‹"&gt;åŸ·è¡Œèªè¨€æ¨¡å‹
&lt;/h3&gt;&lt;p&gt;å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­æä¾›çš„æ¨¡å‹ &lt;a class="link" href="https://ollama.com/search" target="_blank" rel="noopener"
&gt;https://ollama.com/search&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ollama run [model name]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‹¥æ˜¯ç¬¬ä¸€æ¬¡é‹è¡Œè©²æ¨¡å‹å‰‡æœƒåŸ·è¡Œä¸‹è¼‰ã€‚
minicpm-V æ˜¯å¯ç”¨æ–¼è§£èªªåœ–ç‰‡çš„èªè¨€æ¨¡å‹ï¼Œä½¿ç”¨ &lt;code&gt;/bye&lt;/code&gt; é›¢é–‹ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;C:\Users\user&amp;gt;ollama run minicpm-v:latest
pulling manifest
pulling 262843d4806a: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 4.4 GB
pulling f8a805e9e620: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 1.0 GB
pulling 60ed67c565f8: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 506 B
pulling 8603ca877636: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 5.7 KB
pulling f02dd72bb242: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 59 B
pulling 175e3bb367ab: 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 566 B
verifying sha256 digest
writing manifest
success
&amp;gt;&amp;gt;&amp;gt; Discribe this picture &amp;#34;C:\Users\user\Downloads\picture.png&amp;#34;
Added image &amp;#39;C:\Users\user\Downloads\picture.png&amp;#39;
This image depicts a small white rodent sitting on the ground in an
outdoor setting. The animal appears to have soft fur with light
brownish-grey patches around its eyes and ears. Its pink nose is
prominent, as are its large black eyes which stand out against its pale
face.
&amp;gt;&amp;gt;&amp;gt; /bye
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çµ‚ç«¯å‘¼å«æ¨¡å‹ä¸¦è¼¸å…¥æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;C:\Users\user&amp;gt;ollama run llama3.1:8b &amp;#34;define what is atom&amp;#34;
An **atom** (from the Greek word &amp;#34;atomos,&amp;#34; meaning indivisible) is the smallest
unit of a chemical element that retains its chemical properties and is
considered the fundamental building block of matter.
In simpler terms, an atom is:
1. **Indivisible**: An atom cannot be broken down into smaller particles using
any known means.
2. **Stable**: Atoms are stable entities that do not change their structure or
composition over time.
3. **Unique**: Each element has a unique set of atoms with specific properties.
... å¿½ç•¥ ...
Would you like me to explain any related concepts or clarify anything about
atoms?
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="æŸ¥çœ‹ç›®å‰å·²å®‰è£çš„èªè¨€æ¨¡å‹"&gt;æŸ¥çœ‹ç›®å‰å·²å®‰è£çš„èªè¨€æ¨¡å‹
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;ollama list
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;C:\Users\user&amp;gt;ollama list
NAME ID SIZE MODIFIED
minicpm-v:latest c92bfad01205 5.5 GB 2 hours ago
llama3.1:8b 46e0c10c039e 4.9 GB 2 hours ago
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="åˆªé™¤å·²å®‰è£çš„èªè¨€æ¨¡å‹"&gt;åˆªé™¤å·²å®‰è£çš„èªè¨€æ¨¡å‹
&lt;/h3&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;ollama rm [model name]
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;C:\Users\user&amp;gt;ollama rm minicpm-v:latest
deleted &amp;#39;minicpm-v:latest&amp;#39;
C:\Users\user&amp;gt;ollama list
NAME ID SIZE MODIFIED
llama3.1:8b 46e0c10c039e 4.9 GB 8 hours ago
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=""&gt;
&lt;/h3&gt;&lt;h3 id="role-çš„-3-å€‹ä¸»è¦é¡å‹"&gt;&lt;code&gt;role&lt;/code&gt; çš„ 3 å€‹ä¸»è¦é¡å‹
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;role&lt;/th&gt;
&lt;th&gt;èªªæ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;system&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç³»çµ±è§’è‰²ï¼Œè¨­å®šã€Œé€™å€‹æ¨¡å‹è©²å¦‚ä½•è¡¨ç¾è‡ªå·±ã€ï¼Œå®šç¾©æ•´å€‹å°è©±çš„è§’è‰²èƒŒæ™¯ã€å£å»ã€é™åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;user&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨è€…è§’è‰²ï¼Œæ¨¡æ“¬çœŸå¯¦ä½¿ç”¨è€…è¼¸å…¥çš„è¨Šæ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;assistant&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ¨¡å‹æ‰®æ¼”çš„è§’è‰²å›è¦†ã€‚ç”¨ä¾†æä¾›ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚å¤šè¼ªå°è©±ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="ä½¿ç”¨-python-èˆ‡ç¨‹å¼ä¸²æ¥"&gt;ä½¿ç”¨ Python èˆ‡ç¨‹å¼ä¸²æ¥
&lt;/h2&gt;&lt;h3 id="ä½¿ç”¨-requests-å‘¼å«"&gt;ä½¿ç”¨ requests å‘¼å«
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; requests
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# API URL&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;url &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;http://127.0.0.1:11434/v1/chat/completions&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# è«‹æ±‚è³‡æ–™&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;payload &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;model&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# å°æ‡‰ä½ æœ¬åœ°æ‹‰å–çš„æ¨¡å‹åç¨±&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;messages&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;system&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;You are a helpful assistant.&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;What is the capital of France?&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;The capital of France is Paris.&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;What is the population of Paris?&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;assistant&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;As of 2023, the population of Paris is about 2.1 million.&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;What river flows through Paris?&amp;#34;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Headers&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;headers &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Content-Type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;application/json&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# &amp;#34;Authorization&amp;#34;: &amp;#34;Bearer ollama&amp;#34; # å‚³éèº«ä»½é©—è­‰è³‡è¨Šï¼Œæœ¬åœ°ä¼ºæœå™¨é è¨­ä¸é©—è­‰é‡‘é‘°å¯çœç•¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# ç™¼é€ POST è«‹æ±‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; requests&lt;span style="color:#f92672"&gt;.&lt;/span&gt;post(url, headers&lt;span style="color:#f92672"&gt;=&lt;/span&gt;headers, data&lt;span style="color:#f92672"&gt;=&lt;/span&gt;json&lt;span style="color:#f92672"&gt;.&lt;/span&gt;dumps(payload))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# é¡¯ç¤ºçµæœ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;status_code &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;200&lt;/span&gt;: &lt;span style="color:#75715e"&gt;# HTTP ç‹€æ…‹ç¢¼ 200 ä»£è¡¨è«‹æ±‚æˆåŠŸã€‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; data &lt;span style="color:#f92672"&gt;=&lt;/span&gt; response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;json() &lt;span style="color:#75715e"&gt;# è§£æ JSON è³‡æ–™ï¼Œæ­¤æ–¹æ³•å°‡å›æ‡‰å…§å®¹ï¼ˆex.å­—ä¸²ï¼‰è½‰æ›æˆ Python çš„è³‡æ–™çµæ§‹ï¼ˆex.dictï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(data[&lt;span style="color:#e6db74"&gt;&amp;#34;choices&amp;#34;&lt;/span&gt;][&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#34;message&amp;#34;&lt;/span&gt;][&lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;else&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; print(&lt;span style="color:#e6db74"&gt;&amp;#34;Error:&amp;#34;&lt;/span&gt;, response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;status_code, response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;text)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;response è¿”å›çµæ§‹é¡ä¼¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
&amp;#34;id&amp;#34;: &amp;#34;chatcmpl-1234567890abcdef&amp;#34;,
&amp;#34;object&amp;#34;: &amp;#34;chat.completion&amp;#34;,
&amp;#34;created&amp;#34;: 1700000000,
&amp;#34;model&amp;#34;: &amp;#34;llama3.1:8b&amp;#34;,
&amp;#34;choices&amp;#34;: [
{
&amp;#34;index&amp;#34;: 0,
&amp;#34;message&amp;#34;: {
&amp;#34;role&amp;#34;: &amp;#34;assistant&amp;#34;,
&amp;#34;content&amp;#34;: &amp;#34;The capital of France is Paris.&amp;#34;
},
&amp;#34;finish_reason&amp;#34;: &amp;#34;stop&amp;#34;
}
],
&amp;#34;usage&amp;#34;: {
&amp;#34;prompt_tokens&amp;#34;: 20,
&amp;#34;completion_tokens&amp;#34;: 10,
&amp;#34;total_tokens&amp;#34;: 30
}
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="ä½¿ç”¨-openai-sdk-å‘¼å«"&gt;ä½¿ç”¨ openai SDK å‘¼å«
&lt;/h3&gt;&lt;h4 id="å®‰è£-openai"&gt;å®‰è£ openai
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ pip æŒ‡ä»¤é€²è¡Œå®‰è£ã€‚&lt;br&gt;
ps.è‹¥æ²’æœ‰ pip æˆ‘æœªä¾†å†å¯«ä¸€ç¯‡å®‰è£èˆ‡ä½¿ç”¨ pip çš„æ–‡ç«  ;)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install openai
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥çœ‹å®‰è£ç‰ˆæœ¬ &amp;amp; æ˜¯å¦å·²å®‰è£é&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip show openai
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;WARNING: Package(s) not found: openai
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‹¥å·²å®‰è£éä¸”ç‰ˆæœ¬å°æ–¼ 1.0.0ï¼Œæ›´æ–° openai å¥—ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install --upgrade openai
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="ä½¿ç”¨èªè¨€æ¨¡å‹"&gt;ä½¿ç”¨èªè¨€æ¨¡å‹
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; openai &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OpenAI
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;client &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OpenAI(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# base_url = &amp;#34;http://localhost:11434/v1&amp;#34;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; base_url &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;http://127.0.0.1:11434/v1&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# æœ¬åœ° Ollama ä¼ºæœå™¨çš„ URLï¼Œé è¨­ç«¯å£ç‚º 11434&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; api_key &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;ollama&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# æœ¬åœ° Ollama ä¸é©—è­‰å¯†é‘°ï¼Œåªè¦éš¨æ„å¡«å…¥å³å¯ï¼Œç¿’æ…£ä½¿ç”¨ ollama&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å‘¼å«æœ¬åœ° Ollama ä¼ºæœå™¨é€²è¡Œ Chat Completion&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; client&lt;span style="color:#f92672"&gt;.&lt;/span&gt;chat&lt;span style="color:#f92672"&gt;.&lt;/span&gt;completions&lt;span style="color:#f92672"&gt;.&lt;/span&gt;create(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;llama3.1:8b&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; messages&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[ &lt;span style="color:#75715e"&gt;# è¨­å®šå°è©±å…§å®¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;system&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# è¨­å®šæ¨¡å‹è¡Œç‚º&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;You are a helpful assistant.&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# ä½¿ç”¨è€…è¼¸å…¥çš„å•é¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;What is the capital of France?&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;choices[&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;message&lt;span style="color:#f92672"&gt;.&lt;/span&gt;content)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ä½¿ç”¨-vision-model"&gt;ä½¿ç”¨ Vision model
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;import&lt;/span&gt; base64
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;from&lt;/span&gt; openai &lt;span style="color:#f92672"&gt;import&lt;/span&gt; OpenAI
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;image_path &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;r&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;C:\åœ–ç‰‡è·¯å¾‘.png&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;with&lt;/span&gt; open(image_path, &lt;span style="color:#e6db74"&gt;&amp;#34;rb&amp;#34;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;as&lt;/span&gt; img_file:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; b64_string &lt;span style="color:#f92672"&gt;=&lt;/span&gt; base64&lt;span style="color:#f92672"&gt;.&lt;/span&gt;b64encode(img_file&lt;span style="color:#f92672"&gt;.&lt;/span&gt;read())&lt;span style="color:#f92672"&gt;.&lt;/span&gt;decode(&lt;span style="color:#e6db74"&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å»ºç«‹å¯å‚³å…¥ Ollama çš„å®Œæ•´ URL å­—ä¸²&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;image_b64_url &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;f&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;data:image/png;base64,&lt;/span&gt;&lt;span style="color:#e6db74"&gt;{&lt;/span&gt;b64_string&lt;span style="color:#e6db74"&gt;}&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;client &lt;span style="color:#f92672"&gt;=&lt;/span&gt; OpenAI(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; base_url&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;http://127.0.0.1:11434/v1&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; api_key&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;ollama&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;response &lt;span style="color:#f92672"&gt;=&lt;/span&gt; client&lt;span style="color:#f92672"&gt;.&lt;/span&gt;chat&lt;span style="color:#f92672"&gt;.&lt;/span&gt;completions&lt;span style="color:#f92672"&gt;.&lt;/span&gt;create(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; model&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;minicpm-v&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;# æ”¯æ´åœ–ç‰‡è¼¸å…¥çš„æ¨¡å‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; messages&lt;span style="color:#f92672"&gt;=&lt;/span&gt;[
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;role&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;user&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {&lt;span style="color:#e6db74"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;text&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;text&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Please describe the image in detail.&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;image_url&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: image_b64_url
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;print(response&lt;span style="color:#f92672"&gt;.&lt;/span&gt;choices[&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;]&lt;span style="color:#f92672"&gt;.&lt;/span&gt;message&lt;span style="color:#f92672"&gt;.&lt;/span&gt;content)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>31. Next Permutation</title><link>https://Dandelionlibra.github.io/post/leetcode/31/leetcode/</link><pubDate>Sun, 02 Feb 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/leetcode/31/leetcode/</guid><description>&lt;h2 id="é¡Œç›®"&gt;é¡Œç›®
&lt;/h2&gt;&lt;p&gt;A permutation of an array of integers is an arrangement of its members into a sequence or linear order.&lt;/p&gt;
&lt;p&gt;For example, for arr = [1,2,3], the following are all the permutations of arr: [1,2,3], [1,3,2], [2, 1, 3], [2, 3, 1], [3,1,2], [3,2,1].
The next permutation of an array of integers is the next lexicographically greater permutation of its integer. More formally, if all the permutations of the array are sorted in one container according to their lexicographical order, then the next permutation of that array is the permutation that follows it in the sorted container. If such arrangement is not possible, the array must be rearranged as the lowest possible order (i.e., sorted in ascending order).&lt;/p&gt;
&lt;p&gt;For example, the next permutation of arr = [1,2,3] is [1,3,2].
Similarly, the next permutation of arr = [2,3,1] is [3,1,2].
While the next permutation of arr = [3,2,1] is [1,2,3] because [3,2,1] does not have a lexicographical larger rearrangement.
Given an array of integers nums, find the next permutation of nums.&lt;/p&gt;
&lt;p&gt;The replacement must be in place and use only constant extra memory.&lt;/p&gt;
&lt;h3 id="constraints"&gt;Constraints:
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;1 &amp;lt;= nums.length &amp;lt;= 100&lt;/li&gt;
&lt;li&gt;0 &amp;lt;= nums[i] &amp;lt;= 100&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="example-1"&gt;Example 1:
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Input: nums = [1,2,3]&lt;br&gt;
Output: [1,3,2]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="example-2"&gt;Example 2:
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Input: nums = [3,2,1]&lt;br&gt;
Output: [1,2,3]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="example-2-1"&gt;Example 2:
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Input: nums = [1,1,5]&lt;br&gt;
Output: [1,5,1]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è§£é¡Œæ–¹æ³•"&gt;è§£é¡Œæ–¹æ³•
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¾å³å‘å·¦å°‹æ‰¾éæ¸›åºåˆ—çš„è½‰æŠ˜é»ï¼š
æ‰¾åˆ°ç¬¬ä¸€å€‹ä½ç½® iï¼Œä½¿å¾— nums[i] &amp;lt; nums[i + 1]ã€‚é€™è¡¨ç¤ºå¾ i ä¹‹å¾Œçš„æ•¸å­—æ˜¯éæ¸›çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœæ‰¾ä¸åˆ°ï¼Œèªªæ˜ç•¶å‰æ’åˆ—æ˜¯æœ€å¤§çš„ï¼Œç›´æ¥åè½‰é™£åˆ—ï¼š
å¦‚æœæ•´å€‹é™£åˆ—æ˜¯éæ¸›çš„ï¼ˆå¦‚ [3, 2, 1]ï¼‰ï¼Œå‰‡ç›´æ¥åè½‰æ•´å€‹é™£åˆ—è®Šç‚ºæœ€å°æ’åˆ—ï¼ˆå¦‚ [1, 2, 3]ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰¾åˆ°æ¯” nums[i] å¤§çš„æœ€å°æ•¸å­—ä¸¦äº¤æ›ï¼š
åœ¨ i å³é‚Šçš„æ•¸å­—ä¸­ï¼Œæ‰¾åˆ°æœ€æ¥è¿‘ä¸”æ¯” nums[i] å¤§çš„æ•¸å­— nums[j]ï¼Œç„¶å¾Œäº¤æ› nums[i] å’Œ nums[j]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åè½‰ i + 1 ä¹‹å¾Œçš„å­é™£åˆ—ï¼š
é€™æ¨£èƒ½ä¿è­‰è½‰æŠ˜é»å¾Œçš„æ•¸å­—è®Šç‚ºæœ€å°æ’åˆ—ï¼Œç¢ºä¿æ•´é«”æ˜¯ä¸‹ä¸€å€‹æ’åˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="ç¨‹å¼"&gt;ç¨‹å¼
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-C" data-lang="C"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#include&lt;/span&gt; &lt;span style="color:#75715e"&gt;&amp;lt;bits/stdc++.h&amp;gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;using namespace std;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;class Solution {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;public:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;nextPermutation&lt;/span&gt;(vector&lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&amp;amp;&lt;/span&gt; nums) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; size &lt;span style="color:#f92672"&gt;=&lt;/span&gt; nums.&lt;span style="color:#a6e22e"&gt;size&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cout &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; size ;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;main&lt;/span&gt;(){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Solution sol;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cout &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; sol.&lt;span style="color:#a6e22e"&gt;divide&lt;/span&gt;(&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2147483648&lt;/span&gt;, &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;) &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; endl;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
&gt;Pawel Czerwinski&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>29. Divide Two Integers</title><link>https://Dandelionlibra.github.io/post/leetcode/29/leetcode/</link><pubDate>Sat, 01 Feb 2025 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/leetcode/29/leetcode/</guid><description>&lt;h2 id="é¡Œç›®"&gt;é¡Œç›®
&lt;/h2&gt;&lt;p&gt;Given two integers dividend and divisor, divide two integers without using multiplication, division, and mod operator.&lt;/p&gt;
&lt;p&gt;The integer division should truncate toward zero, which means losing its fractional part. For example, 8.345 would be truncated to 8, and -2.7335 would be truncated to -2.&lt;/p&gt;
&lt;p&gt;Return the quotient after dividing dividend by divisor.&lt;/p&gt;
&lt;p&gt;Note: Assume we are dealing with an environment that could only store integers within the 32-bit signed integer range: $[âˆ’2^{31}, 2^{31} âˆ’ 1]$. For this problem, if the quotient is strictly greater than $2^{31} - 1$, then return $2^{31} - 1$, and if the quotient is strictly less than $-2^{31}$, then return $-2^{31}$.&lt;/p&gt;
&lt;h3 id="constraints"&gt;Constraints:
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;$-2^{31}$ &amp;lt;= dividend, divisor &amp;lt;= $-2^{31}-1$&lt;/li&gt;
&lt;li&gt;divisor != 0&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="example-1"&gt;Example 1:
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Input: dividend = 10, divisor = 3&lt;br&gt;
Output: 3&lt;br&gt;
Explanation: 10/3 = 3.33333.. which is truncated to 3.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="example-2"&gt;Example 2:
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Input: dividend = 7, divisor = -3&lt;br&gt;
Output: -2&lt;br&gt;
Explanation: 7/-3 = -2.33333.. which is truncated to -2.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="è§£é¡Œæ–¹æ³•"&gt;è§£é¡Œæ–¹æ³•
&lt;/h2&gt;&lt;h2 id="ç¨‹å¼"&gt;ç¨‹å¼
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-C" data-lang="C"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#include&lt;/span&gt; &lt;span style="color:#75715e"&gt;&amp;lt;bits/stdc++.h&amp;gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;using namespace std;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;class Solution {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;public:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;divide&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; dividend, &lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; divisor) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ç‰¹æ®Šæƒ…æ³è™•ç†ï¼Œé¿å…æº¢å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (dividend &lt;span style="color:#f92672"&gt;==&lt;/span&gt; INT_MIN &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; divisor &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; INT_MAX;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; (dividend &lt;span style="color:#f92672"&gt;==&lt;/span&gt; INT_MIN &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; divisor &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; INT_MIN;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// è¨ˆç®—å•†çš„æ­£è² 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;bool&lt;/span&gt; positive &lt;span style="color:#f92672"&gt;=&lt;/span&gt; (dividend &lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;) &lt;span style="color:#f92672"&gt;==&lt;/span&gt; (divisor &lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ä½¿ç”¨ long long ä¾†é¿å… INT_MIN çš„æº¢å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;long&lt;/span&gt; divd &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;labs&lt;/span&gt;(dividend);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;long&lt;/span&gt; div &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;labs&lt;/span&gt;(divisor);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;long&lt;/span&gt; result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ç•¶è¢«é™¤æ•¸å¤§æ–¼é™¤æ•¸æ™‚ï¼Œé€²è¡Œé™¤æ³•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (divd &lt;span style="color:#f92672"&gt;&amp;gt;=&lt;/span&gt; div) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;long&lt;/span&gt; temp &lt;span style="color:#f92672"&gt;=&lt;/span&gt; div, multiple &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// é€²è¡Œå€å¢æ“ä½œï¼Œæ‰¾åˆ°æœ€å¤§çš„å€æ•¸
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (divd &lt;span style="color:#f92672"&gt;&amp;gt;=&lt;/span&gt; (temp &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; temp &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; multiple &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ¸›å»å€æ•¸å°æ‡‰çš„éƒ¨åˆ†ï¼Œä¸¦å°‡å•†åŠ åˆ°çµæœä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; divd &lt;span style="color:#f92672"&gt;-=&lt;/span&gt; temp;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; result &lt;span style="color:#f92672"&gt;+=&lt;/span&gt; multiple;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æ ¹æ“šæ­£è² ç¬¦è™Ÿèª¿æ•´çµæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; result &lt;span style="color:#f92672"&gt;=&lt;/span&gt; positive &lt;span style="color:#f92672"&gt;?&lt;/span&gt; result : &lt;span style="color:#f92672"&gt;-&lt;/span&gt;result;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// æœ€å¾Œæª¢æŸ¥æ˜¯å¦æº¢å‡º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; result &lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; INT_MAX &lt;span style="color:#f92672"&gt;?&lt;/span&gt; INT_MAX : (result &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; INT_MIN &lt;span style="color:#f92672"&gt;?&lt;/span&gt; INT_MIN : result);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;main&lt;/span&gt;(){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Solution sol;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cout &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; sol.&lt;span style="color:#a6e22e"&gt;divide&lt;/span&gt;(&lt;span style="color:#f92672"&gt;-&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;2147483648&lt;/span&gt;, &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;) &lt;span style="color:#f92672"&gt;&amp;lt;&amp;lt;&lt;/span&gt; endl;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
&gt;Pawel Czerwinski&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>å¾®è¡¨æƒ…(Micro Facial Expression)</title><link>https://Dandelionlibra.github.io/post/note/micro_facial_expression/</link><pubDate>Sun, 20 Oct 2024 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/note/micro_facial_expression/</guid><description>&lt;img src="https://Dandelionlibra.github.io/unsplash.jpg" alt="Featured image of post å¾®è¡¨æƒ…(Micro Facial Expression)" /&gt;&lt;h2 id="è‡‰éƒ¨è¡¨æƒ…ç¨®é¡"&gt;è‡‰éƒ¨è¡¨æƒ…ç¨®é¡
&lt;/h2&gt;&lt;p&gt;&lt;a class="link" href="https://zh.wikipedia.org/zh-tw/%E4%BF%9D%E7%BD%97%C2%B7%E8%89%BE%E5%85%8B%E6%9B%BC" target="_blank" rel="noopener"
&gt;ä¿ç¾…Â·è‰¾å…‹æ›¼&lt;/a&gt;ï¼ˆPaul Ekmanï¼‰å¾1970å¹´ä»£ä»¥ä¾†çš„ç ”ç©¶ï¼ŒæŠŠè‡‰éƒ¨å¾®è¡¨æƒ…åˆ†æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿«æ¨‚(happy)&lt;/li&gt;
&lt;li&gt;æ‚²å‚·(sad)&lt;/li&gt;
&lt;li&gt;ç”Ÿæ°£(angry)&lt;/li&gt;
&lt;li&gt;é©šè¨(surprised)&lt;/li&gt;
&lt;li&gt;å®³æ€•(scared)&lt;/li&gt;
&lt;li&gt;å­æƒ¡(disgusted)&lt;/li&gt;
&lt;li&gt;é„™è¦–(contempt)&lt;/li&gt;
&lt;li&gt;ä¸­æ€§(neutral)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="å¾®è¡¨æƒ…æ‡‰ç”¨"&gt;å¾®è¡¨æƒ…æ‡‰ç”¨
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è‡ºå¸«å¤§é‚±ç¾è™¹ï¼šã€Œæˆ‘å¸Œæœ›ç”¨æ–°èˆˆç§‘æŠ€æ‰¾åˆ°å­¸ç”Ÿåœ¨å­¸ç¿’ç§‘å­¸çŸ¥è­˜æ™‚çš„é›£é»ï¼Œæ”¹å–„ç§‘å­¸å­¸ç¿’æ™‚çš„å›°å¢ƒã€‚è€Œå…¶ä¸­çš„ä¸€æ­¥ï¼Œå°±æ˜¯ç”¨è¾¨è­˜å¾®è¡¨æƒ…çš„AIç³»çµ±ï¼Œæ‰¾å‡ºå­¸ç”Ÿé¢å°éé æœŸçš„ç§‘å­¸ç¾è±¡å’Œå¤šé‡è¡¨å¾µçš„è§£é‡‹æ‰€å‡ºç¾çš„æŸäº›ç‰¹å®šå¾®è¡¨æƒ…æ™‚æ‰€ä»£è¡¨çš„æ„ç¾©ï¼Œä»¥ç­è§£å­¸ç”Ÿé¢å°é€™äº›æƒ…æ³æ™‚çš„åæ‡‰èˆ‡æ•ˆç›Šï¼Œä»¥ä¾¿è¨­è¨ˆæœ‰æ„ç¾©çš„å­¸ç¿’å’Œæ•™å­¸ç­–ç•¥ã€‚ã€&lt;br&gt;
&lt;a class="link" href="https://humanityisland.nccu.edu.tw/qiumeihong_a/" target="_blank" rel="noopener"
&gt;æ–‡ç« å ±å°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿ªå£«å°¼ç ”ç©¶ä¸­å¿ƒ(FVAE â€“ æ·±åº¦å­¸ç¿’è§€çœ¾è¡¨æƒ…ï¼Œå®‰æ’åŠ‡æƒ…èµ°å‘)ï¼Œåœ¨é»‘æš—çš„å½±å»³å…§è§€å¯Ÿè§€çœ¾çš„è‡‰éƒ¨è¡¨æƒ…ï¼Œä¸¦å­¸ç¿’åˆ†è¾¨å¾®ç¬‘ã€å¤§ç¬‘ç­‰ä¸åŒç¨‹åº¦çš„æƒ…ç·’ã€‚é€™æ¨£çš„ç¥ç¶“ç¶²çµ¡å­¸ç¿’ï¼Œä¸åªè¦èª¿æŸ¥ä½ æœ‰å¤šå–œæ­¡ç•¶ä¸‹çš„åŠ‡æƒ…ï¼Œæ›´è¦é æ¸¬ä½ æ˜¯å¦å¯èƒ½å–œæ­¡æ¥ä¸‹ä¾†çš„èµ°å‘ï¼Œå®ƒèƒ½æ ¹æ“šéå»å­¸ç¿’çš„çµæœï¼Œåœ¨é–‹æ¼”çš„å‰ååˆ†é˜å°±é æ¸¬è§€çœ¾ä¹‹å¾Œçš„æƒ…ç·’ï¼&lt;br&gt;
&lt;a class="link" href="https://mile.cloud/zh/resources/blog/facial-detection-technology-is-popular-quantifying-micro-expressions-into-big-data_39" target="_blank" rel="noopener"
&gt;æ–‡ç« å ±å°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å°‡å¾®è¡¨æƒ…æ‡‰ç”¨æ–¼é¢è©¦ä¸Šï¼Œä¹Ÿèƒ½æº–ç¢ºæŠ“å‡ºæ‡‰å¾µè€…çš„è·å ´æ€§æ ¼èˆ‡æºé€šèƒ½åŠ›ï¼Œæå‰å”åŠ©é¢è©¦å®˜ç¯©é™¤ä¸é©ä»»çš„å“¡å·¥ã€‚&lt;br&gt;
&lt;a class="link" href="https://www.ithome.com.tw/news/143000" target="_blank" rel="noopener"
&gt;æ–‡ç« å ±å°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç›£æ§å‡ç´šï¼šäººè‡‰è­˜åˆ¥ç³»çµ±èƒ½è®€å‡ºæƒ…ç·’å’Œå¨è„…æ€§&lt;br&gt;
&lt;a class="link" href="https://www.bbc.com/zhongwen/trad/world-44859007" target="_blank" rel="noopener"
&gt;æ–‡ç« å ±å°&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="åƒè€ƒå…§å®¹"&gt;åƒè€ƒå…§å®¹
&lt;/h2&gt;&lt;p&gt;æ·ºè«‡ç‚ºè¡¨æƒ…å¿ƒç†å­¸ï¼šhttps://www.thenewslens.com/article/128732&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
&gt;Pawel Czerwinski&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>Example content</title><link>https://Dandelionlibra.github.io/post/hello-world/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/hello-world/</guid><description>&lt;img src="https://Dandelionlibra.github.io/post/hello-world/unsplash.jpg" alt="Featured image of post Example content" /&gt;&lt;p&gt;Welcome to Hugo theme Stack. This is your first post. Edit or delete it, then start writing!&lt;/p&gt;
&lt;p&gt;For more information about this theme, check the documentation: &lt;a class="link" href="https://stack.jimmycai.com/" target="_blank" rel="noopener"
&gt;https://stack.jimmycai.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Want a site like this? Check out &lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack-starter" target="_blank" rel="noopener"
&gt;hugo-theme-stack-stater&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@pawel_czerwinski" target="_blank" rel="noopener"
&gt;Pawel Czerwinski&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>ä½¿ç”¨ Docker-compose å¿«é€Ÿå»ºç«‹å¤šå€‹é—œè¯çš„ container</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker-compose/</link><pubDate>Thu, 17 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker-compose/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±"&gt;å…§å®¹å¤§ç¶±
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ç‚ºä»€éº¼è¦ç”¨ Docker-compose?&lt;/li&gt;
&lt;li&gt;Docker-compose åŸºæœ¬èªæ³•èˆ‡çµæ§‹&lt;/li&gt;
&lt;li&gt;å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹&lt;/li&gt;
&lt;li&gt;å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼&lt;/li&gt;
&lt;li&gt;åƒè€ƒè³‡æ–™&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="1-ç‚ºä»€éº¼è¦ç”¨-docker-compose"&gt;1. ç‚ºä»€éº¼è¦ç”¨ Docker-composeï¼Ÿ
&lt;/h2&gt;&lt;p&gt;ç•¶å°ˆæ¡ˆéœ€è¦å¤šå€‹æœå‹™ï¼ˆå¦‚è³‡æ–™åº«ã€å¾Œç«¯ã€å‰ç«¯ï¼‰å”åŒé‹ä½œæ™‚ï¼Œå–®é  &lt;code&gt;docker run&lt;/code&gt; æŒ‡ä»¤ç®¡ç†å¤šå€‹å®¹å™¨æœƒè®Šå¾—è¤‡é›œã€‚Docker-compose è®“ä½ èƒ½ç”¨ä¸€ä»½ YAML è¨­å®šæª”ï¼Œå®šç¾©å¤šå€‹ container çš„å»ºç½®ã€ç¶²è·¯ã€è³‡æ–™æ›è¼‰èˆ‡ä¾è³´é—œä¿‚ï¼Œä¸€éµå•Ÿå‹•æˆ–é—œé–‰æ•´å€‹æ‡‰ç”¨ç’°å¢ƒï¼Œæå‡é–‹ç™¼æ•ˆç‡èˆ‡å¯ç¶­è­·æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-docker-compose-åŸºæœ¬èªæ³•èˆ‡çµæ§‹"&gt;2. Docker-compose åŸºæœ¬èªæ³•èˆ‡çµæ§‹
&lt;/h2&gt;&lt;p&gt;Docker-compose é€é &lt;code&gt;docker-compose.yml&lt;/code&gt; æª”æ¡ˆæè¿°å¤šå€‹æœå‹™ã€ç¶²è·¯ã€è³‡æ–™å·ï¼Œä¸¦å¯è¨­å®šå¥åº·æª¢æŸ¥èˆ‡æŒ‡å®š GPUã€‚åŸºæœ¬çµæ§‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;è©³ç´°èªªæ˜å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ï¼š&lt;a class="link" href="https://docs.docker.com/reference/compose-file/services/" target="_blank" rel="noopener"
&gt;Docker Compose&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;version&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;services&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;æœå‹™åç¨±&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;image&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;æ˜ åƒæª”åç¨±&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#e6db74"&gt;&amp;#34;ä¸»æ©Ÿport:å®¹å™¨port&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;volumes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;ä¸»æ©Ÿè·¯å¾‘:å®¹å™¨è·¯å¾‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;networks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;è‡ªè¨‚ç¶²è·¯åç¨±&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;deploy&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;reservations&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;devices&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;driver&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;nvidia&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;count&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;all&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;capabilities&lt;/span&gt;: [&lt;span style="color:#ae81ff"&gt;gpu]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;healthcheck&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;test&lt;/span&gt;: [&lt;span style="color:#e6db74"&gt;&amp;#34;CMD&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;ä½ çš„å¥åº·æª¢æŸ¥æŒ‡ä»¤&amp;#34;&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;interval&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;30s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;timeout&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;10s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;retries&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;start_period&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;60s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;networks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;è‡ªè¨‚ç¶²è·¯åç¨±&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;driver&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;bridge&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;services&lt;/code&gt;: å®šç¾©å¤šå€‹å®¹å™¨æœå‹™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;image&lt;/code&gt;: æŒ‡å®šæ˜ åƒæª”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ports&lt;/code&gt;: å°æ‡‰ä¸»æ©Ÿèˆ‡å®¹å™¨çš„ portã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;volumes&lt;/code&gt;: æ›è¼‰ä¸»æ©Ÿè³‡æ–™å¤¾åˆ°å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;networks&lt;/code&gt;: å®šç¾©è‡ªè¨‚ç¶²è·¯ï¼Œè®“æœå‹™é–“å¯äº’é€šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deploy.resources.reservations.devices&lt;/code&gt;: æŒ‡å®š GPU è³‡æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;healthcheck&lt;/code&gt;: å¥åº·æª¢æŸ¥è¨­å®šï¼Œç¢ºä¿æœå‹™æ­£å¸¸é‹ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="3-å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹"&gt;3. å»ºç«‹å¤šå€‹é—œè¯å®¹å™¨çš„ç¯„ä¾‹
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹ç¯„ä¾‹èªªæ˜å¦‚ä½•ç”¨ Docker-compose åŒæ™‚å•Ÿå‹• Jupyterï¼ˆæ”¯æ´ GPUï¼‰èˆ‡ Ollama å…©å€‹æœå‹™ï¼Œä¸¦è®“å®ƒå€‘é€éè‡ªè¨‚ç¶²è·¯ &lt;code&gt;ollama_net&lt;/code&gt; äº’ç›¸æºé€šï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;dandelion&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;networks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;ollama_net&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;driver&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;bridge&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;services&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;jupyter&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;image&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;pytorch/pytorch:2.3.0-cuda12.1-cudnn8-devel&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;tty&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#e6db74"&gt;&amp;#34;8888:8888&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;volumes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;~/yuchen:/workspace/yuchen&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;networks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;ollama_net&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;deploy&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;reservations&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;devices&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;driver&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;nvidia&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;count&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;all&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;capabilities&lt;/span&gt;: [&lt;span style="color:#ae81ff"&gt;gpu]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;ollama&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;tty&lt;/span&gt;: &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;image&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;ollama/ollama&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;networks&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;ollama_net&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;volumes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#ae81ff"&gt;~/yuchen/ollama:/root/.ollama&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;ports&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#e6db74"&gt;&amp;#34;11435:11434&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;deploy&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;reservations&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;devices&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;driver&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;nvidia&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;count&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;all&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;capabilities&lt;/span&gt;: [&lt;span style="color:#ae81ff"&gt;gpu]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;healthcheck&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;test&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;/usr/local/bin/docker-healthcheck.sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;interval&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;30s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;timeout&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;10s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;retries&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;start_period&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;60s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;networks&lt;/code&gt; è®“ jupyter èˆ‡ ollama æœå‹™å¯äº’é€šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt;
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;11435:11434&amp;rdquo; è¡¨ç¤ºå°‡ä¸»æ©Ÿï¼ˆå°å¤–ï¼‰ä¸Šçš„ 11435 ç«¯å£æ˜ å°„åˆ°å®¹å™¨ï¼ˆå°å…§ï¼‰ä¸­çš„ 11434 ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;å¤–éƒ¨è¨ªå•ä¸»æ©Ÿçš„ 11435 ç«¯å£æ™‚ï¼Œå¯¦éš›æœƒè½‰ç™¼åˆ°å®¹å™¨å…§éƒ¨çš„ 11434 ç«¯å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;deploy.resources.reservations.devices&lt;/code&gt; æŒ‡å®šå…©å€‹æœå‹™éƒ½å¯ä½¿ç”¨æ‰€æœ‰ GPUã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;healthcheck&lt;/code&gt; å¯è‡ªå‹•æª¢æŸ¥æœå‹™å¥åº·ç‹€æ…‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;volumes&lt;/code&gt; ä¿æŒè³‡æ–™æŒä¹…åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™æ¨£è¨­å®šå¾Œï¼Œåªéœ€ä¸€è¡ŒæŒ‡ä»¤å³å¯åŒæ™‚å•Ÿå‹•ã€ç®¡ç†å¤šå€‹å®¹å™¨ï¼Œä¸¦ç¢ºä¿å®ƒå€‘èƒ½äº’ç›¸é€£ç·šèˆ‡è³‡æ–™å…±äº«ã€‚&lt;/p&gt;
&lt;p&gt;å•Ÿå‹•æ‰€æœ‰æœå‹™ï¼š&lt;br&gt;
&lt;code&gt;-d&lt;/code&gt; åƒæ•¸ä»£è¡¨ã€Œdetached modeã€ï¼Œä¹Ÿå°±æ˜¯è®“ Docker-Compose åœ¨èƒŒæ™¯åŸ·è¡Œæ‰€æœ‰æœå‹™ï¼Œè€Œä¸ä½”ç”¨ç›®å‰çš„çµ‚ç«¯è¦–çª—ï¼Œä¸æœƒé¡¯ç¤ºå³æ™‚æ—¥èªŒã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœæ­¢ä¸¦ç§»é™¤æ‰€æœ‰æœå‹™ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker compose down
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="4-å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼"&gt;4. å¸¸ç”¨æŒ‡ä»¤èˆ‡ç®¡ç†æ–¹å¼
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å•Ÿå‹•æ‰€æœ‰æœå‹™ï¼š&lt;code&gt;docker compose up&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;èƒŒæ™¯åŸ·è¡Œï¼š&lt;code&gt;docker compose up -d&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœæ­¢æœå‹™ï¼š&lt;code&gt;docker compose down&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹æ—¥èªŒï¼š&lt;code&gt;docker compose logs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€²å…¥å®¹å™¨ï¼š&lt;code&gt;docker compose exec &amp;lt;service&amp;gt; bash&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ›´å¤šæŒ‡ä»¤å¯åƒè€ƒ &lt;a class="link" href="https://docs.docker.com/compose/reference/overview/" target="_blank" rel="noopener"
&gt;å®˜æ–¹æ–‡ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="5-è£œå……-ä½¿ç”¨-pytorch-ç‰ˆçš„-jupyter"&gt;5. è£œå……-ä½¿ç”¨ pytorch ç‰ˆçš„ jupyter
&lt;/h2&gt;&lt;p&gt;é€²å…¥å®¹å™¨å¾Œï¼Œä¸‹è¼‰ä¸¦é–‹å•Ÿ jupyterã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install jupyterlab
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;jupyter lab --ip&lt;span style="color:#f92672"&gt;=&lt;/span&gt;0.0.0.0 --port&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;8888&lt;/span&gt; --allow-root --no-browser
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt install curl -y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="6-åƒè€ƒè³‡æ–™"&gt;6. åƒè€ƒè³‡æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.docker.com/compose/" target="_blank" rel="noopener"
&gt;Docker Compose å®˜æ–¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
&gt;Docker å®˜æ–¹ç¶²ç«™&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/" target="_blank" rel="noopener"
&gt;å¦‚ä½•å®‰è£ Dockerï¼ˆå»¶ä¼¸é–±è®€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Docker åŸºæœ¬ä½¿ç”¨æŒ‡ä»¤</title><link>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker/</link><pubDate>Thu, 10 Jul 2025 10:00:00 +0000</pubDate><guid>https://Dandelionlibra.github.io/post/virtual-environment/docker/docker/</guid><description>&lt;h2 id="å…§å®¹å¤§ç¶±"&gt;å…§å®¹å¤§ç¶±
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Docker æ˜¯ä»€éº¼ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Docker å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜&lt;/li&gt;
&lt;li&gt;Docker å¯¦ç”¨æ“ä½œç¯„ä¾‹&lt;/li&gt;
&lt;li&gt;åƒè€ƒè³‡æ–™&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="1-docker-æ˜¯ä»€éº¼"&gt;1. Docker æ˜¯ä»€éº¼ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;Docker æ˜¯ä¸€å¥—é–‹æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œè®“é–‹ç™¼è€…èƒ½å¤ å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶ä¾è³´ç’°å¢ƒæ‰“åŒ…æˆä¸€å€‹è¼•é‡ç´šã€å¯æ”œå¸¶çš„å®¹å™¨ï¼ˆContainerï¼‰ã€‚é€™äº›å®¹å™¨å¯ä»¥åœ¨ä»»ä½•æ”¯æ´ Docker çš„ä½œæ¥­ç³»çµ±ä¸Šå¿«é€Ÿéƒ¨ç½²èˆ‡åŸ·è¡Œï¼Œè§£æ±ºã€Œåœ¨æˆ‘é›»è…¦å¯ä»¥è·‘ã€çš„å•é¡Œï¼Œæå‡é–‹ç™¼ã€æ¸¬è©¦èˆ‡éƒ¨ç½²çš„æ•ˆç‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="2-docker-å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜"&gt;2. Docker å¸¸ç”¨æŒ‡ä»¤èˆ‡åƒæ•¸èªªæ˜
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹ä»‹ç´¹å¹¾å€‹ Docker å¸¸ç”¨æŒ‡ä»¤åŠå…¶é‡è¦åƒæ•¸ï¼š&lt;/p&gt;
&lt;h3 id="å•Ÿå‹•å®¹å™¨"&gt;å•Ÿå‹•å®¹å™¨
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run &lt;span style="color:#f92672"&gt;[&lt;/span&gt;OPTIONS&lt;span style="color:#f92672"&gt;]&lt;/span&gt; IMAGE &lt;span style="color:#f92672"&gt;[&lt;/span&gt;COMMAND&lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;ARG...&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="å¸¸ç”¨åƒæ•¸"&gt;å¸¸ç”¨åƒæ•¸
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-d, --detach&lt;/code&gt;ï¼šåœ¨èƒŒæ™¯åŸ·è¡Œå®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--detach-keys&lt;/code&gt;ï¼šè‡ªè¨‚åˆ†é›¢å®¹å™¨çš„éµçµ„åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-e, --env&lt;/code&gt;ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--env-file&lt;/code&gt;ï¼šå¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i, --interactive&lt;/code&gt;ï¼šä¿æŒæ¨™æº–è¼¸å…¥é–‹å•Ÿï¼ˆäº’å‹•æ¨¡å¼ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t, --tty&lt;/code&gt;ï¼šåˆ†é…ä¸€å€‹è™›æ“¬çµ‚ç«¯æ©Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--privileged&lt;/code&gt;ï¼šçµ¦äºˆå®¹å™¨é¡å¤–çš„æ¬Šé™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-u, --user&lt;/code&gt;ï¼šä»¥æŒ‡å®šä½¿ç”¨è€…èº«ä»½åŸ·è¡Œå®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-w, --workdir&lt;/code&gt;ï¼šæŒ‡å®šå®¹å™¨å…§çš„å·¥ä½œç›®éŒ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="3-docker-å¯¦ç”¨æ“ä½œç¯„ä¾‹"&gt;3. Docker å¯¦ç”¨æ“ä½œç¯„ä¾‹
&lt;/h2&gt;&lt;h3 id="ä»¥äº’å‹•æ¨¡å¼å•Ÿå‹•-ubuntu-å®¹å™¨"&gt;ä»¥äº’å‹•æ¨¡å¼å•Ÿå‹• Ubuntu å®¹å™¨
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -it ubuntu:latest /bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; ä¿æŒæ¨™æº–è¼¸å…¥é–‹å•Ÿï¼Œ&lt;code&gt;-t&lt;/code&gt; åˆ†é…çµ‚ç«¯æ©Ÿï¼Œæ–¹ä¾¿äº’å‹•æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="åœ¨èƒŒæ™¯åŸ·è¡Œ-nginx-å®¹å™¨"&gt;åœ¨èƒŒæ™¯åŸ·è¡Œ Nginx å®¹å™¨
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -d -p 8080:80 nginx:latest
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-d&lt;/code&gt; è®“å®¹å™¨åœ¨èƒŒæ™¯åŸ·è¡Œï¼Œ&lt;code&gt;-p&lt;/code&gt; å°æ‡‰ä¸»æ©Ÿèˆ‡å®¹å™¨çš„åŸ å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è¨­å®šç’°å¢ƒè®Šæ•¸ä¸¦æŒ‡å®šå·¥ä½œç›®éŒ„"&gt;è¨­å®šç’°å¢ƒè®Šæ•¸ä¸¦æŒ‡å®šå·¥ä½œç›®éŒ„
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -e ENV_VAR&lt;span style="color:#f92672"&gt;=&lt;/span&gt;value -w /app -it python:3.10 bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-e&lt;/code&gt; è¨­å®šç’°å¢ƒè®Šæ•¸ï¼Œ&lt;code&gt;-w&lt;/code&gt; æŒ‡å®šå·¥ä½œç›®éŒ„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="ä»¥æŒ‡å®šä½¿ç”¨è€…åŸ·è¡Œ"&gt;ä»¥æŒ‡å®šä½¿ç”¨è€…åŸ·è¡Œ
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run -u 1000:1000 -it ubuntu bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-u&lt;/code&gt; æŒ‡å®šä½¿ç”¨è€…èˆ‡ç¾¤çµ„ IDã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸"&gt;å¾æª”æ¡ˆè®€å–ç’°å¢ƒè®Šæ•¸
&lt;/h3&gt;&lt;p&gt;å‡è¨­æœ‰ &lt;code&gt;.env&lt;/code&gt; æª”æ¡ˆï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker run --env-file .env ubuntu env
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id="4-åƒè€ƒè³‡æ–™"&gt;4. åƒè€ƒè³‡æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.docker.com/" target="_blank" rel="noopener"
&gt;Docker å®˜æ–¹æ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener"
&gt;Docker æŒ‡ä»¤åƒè€ƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://hub.docker.com/" target="_blank" rel="noopener"
&gt;Docker Hub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="link" href="https://dandelionlibra.github.io/post/virtual-environment/docker/setup-jupyter-notebook-with-docker/" target="_blank" rel="noopener"
&gt;Docker å®‰è£æ•™å­¸ï¼ˆå»¶ä¼¸é–±è®€ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>